var rF=Object.defineProperty;var sF=(t,e,n)=>e in t?rF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var $2=(t,e,n)=>(sF(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var wg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sA={exports:{}},y0={},oA={exports:{}},bt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jd=Symbol.for("react.element"),oF=Symbol.for("react.portal"),aF=Symbol.for("react.fragment"),lF=Symbol.for("react.strict_mode"),uF=Symbol.for("react.profiler"),cF=Symbol.for("react.provider"),fF=Symbol.for("react.context"),dF=Symbol.for("react.forward_ref"),hF=Symbol.for("react.suspense"),pF=Symbol.for("react.memo"),mF=Symbol.for("react.lazy"),j2=Symbol.iterator;function gF(t){return t===null||typeof t!="object"?null:(t=j2&&t[j2]||t["@@iterator"],typeof t=="function"?t:null)}var aA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lA=Object.assign,uA={};function Ic(t,e,n){this.props=t,this.context=e,this.refs=uA,this.updater=n||aA}Ic.prototype.isReactComponent={};Ic.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ic.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cA(){}cA.prototype=Ic.prototype;function N_(t,e,n){this.props=t,this.context=e,this.refs=uA,this.updater=n||aA}var O_=N_.prototype=new cA;O_.constructor=N_;lA(O_,Ic.prototype);O_.isPureReactComponent=!0;var X2=Array.isArray,fA=Object.prototype.hasOwnProperty,B_={current:null},dA={key:!0,ref:!0,__self:!0,__source:!0};function hA(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)fA.call(e,i)&&!dA.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Jd,type:t,key:s,ref:o,props:r,_owner:B_.current}}function yF(t,e){return{$$typeof:Jd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function U_(t){return typeof t=="object"&&t!==null&&t.$$typeof===Jd}function xF(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var q2=/\/+/g;function Mx(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xF(""+t.key):e.toString(36)}function Wm(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Jd:case oF:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Mx(o,0):i,X2(r)?(n="",t!=null&&(n=t.replace(q2,"$&/")+"/"),Wm(r,e,n,"",function(u){return u})):r!=null&&(U_(r)&&(r=yF(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(q2,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",X2(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+Mx(s,a);o+=Wm(s,e,n,l,r)}else if(l=gF(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+Mx(s,a++),o+=Wm(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function kp(t,e,n){if(t==null)return t;var i=[],r=0;return Wm(t,i,"","",function(s){return e.call(n,s,r++)}),i}function vF(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ai={current:null},Gm={transition:null},wF={ReactCurrentDispatcher:Ai,ReactCurrentBatchConfig:Gm,ReactCurrentOwner:B_};function pA(){throw Error("act(...) is not supported in production builds of React.")}bt.Children={map:kp,forEach:function(t,e,n){kp(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return kp(t,function(){e++}),e},toArray:function(t){return kp(t,function(e){return e})||[]},only:function(t){if(!U_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};bt.Component=Ic;bt.Fragment=aF;bt.Profiler=uF;bt.PureComponent=N_;bt.StrictMode=lF;bt.Suspense=hF;bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wF;bt.act=pA;bt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=lA({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=B_.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)fA.call(e,l)&&!dA.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:Jd,type:t.type,key:r,ref:s,props:i,_owner:o}};bt.createContext=function(t){return t={$$typeof:fF,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:cF,_context:t},t.Consumer=t};bt.createElement=hA;bt.createFactory=function(t){var e=hA.bind(null,t);return e.type=t,e};bt.createRef=function(){return{current:null}};bt.forwardRef=function(t){return{$$typeof:dF,render:t}};bt.isValidElement=U_;bt.lazy=function(t){return{$$typeof:mF,_payload:{_status:-1,_result:t},_init:vF}};bt.memo=function(t,e){return{$$typeof:pF,type:t,compare:e===void 0?null:e}};bt.startTransition=function(t){var e=Gm.transition;Gm.transition={};try{t()}finally{Gm.transition=e}};bt.unstable_act=pA;bt.useCallback=function(t,e){return Ai.current.useCallback(t,e)};bt.useContext=function(t){return Ai.current.useContext(t)};bt.useDebugValue=function(){};bt.useDeferredValue=function(t){return Ai.current.useDeferredValue(t)};bt.useEffect=function(t,e){return Ai.current.useEffect(t,e)};bt.useId=function(){return Ai.current.useId()};bt.useImperativeHandle=function(t,e,n){return Ai.current.useImperativeHandle(t,e,n)};bt.useInsertionEffect=function(t,e){return Ai.current.useInsertionEffect(t,e)};bt.useLayoutEffect=function(t,e){return Ai.current.useLayoutEffect(t,e)};bt.useMemo=function(t,e){return Ai.current.useMemo(t,e)};bt.useReducer=function(t,e,n){return Ai.current.useReducer(t,e,n)};bt.useRef=function(t){return Ai.current.useRef(t)};bt.useState=function(t){return Ai.current.useState(t)};bt.useSyncExternalStore=function(t,e,n){return Ai.current.useSyncExternalStore(t,e,n)};bt.useTransition=function(){return Ai.current.useTransition()};bt.version="18.3.1";oA.exports=bt;var H=oA.exports;const En=Zd(H);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _F=H,SF=Symbol.for("react.element"),bF=Symbol.for("react.fragment"),MF=Object.prototype.hasOwnProperty,TF=_F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,EF={key:!0,ref:!0,__self:!0,__source:!0};function mA(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)MF.call(e,i)&&!EF.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:SF,type:t,key:s,ref:o,props:r,_owner:TF.current}}y0.Fragment=bF;y0.jsx=mA;y0.jsxs=mA;sA.exports=y0;var ee=sA.exports,_1={},gA={exports:{}},cr={},yA={exports:{}},xA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,F){var A=D.length;D.push(F);e:for(;0<A;){var X=A-1>>>1,Y=D[X];if(0<r(Y,F))D[X]=F,D[A]=Y,A=X;else break e}}function n(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var F=D[0],A=D.pop();if(A!==F){D[0]=A;e:for(var X=0,Y=D.length,z=Y>>>1;X<z;){var xe=2*(X+1)-1,Ce=D[xe],ie=xe+1,Ne=D[ie];if(0>r(Ce,A))ie<Y&&0>r(Ne,Ce)?(D[X]=Ne,D[ie]=A,X=ie):(D[X]=Ce,D[xe]=A,X=xe);else if(ie<Y&&0>r(Ne,A))D[X]=Ne,D[ie]=A,X=ie;else break e}}return F}function r(D,F){var A=D.sortIndex-F.sortIndex;return A!==0?A:D.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],f=1,d=null,p=3,m=!1,g=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(D){for(var F=n(u);F!==null;){if(F.callback===null)i(u);else if(F.startTime<=D)i(u),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(u)}}function M(D){if(y=!1,b(D),!g)if(n(l)!==null)g=!0,J(k);else{var F=n(u);F!==null&&re(M,F.startTime-D)}}function k(D,F){g=!1,y&&(y=!1,v(C),C=-1),m=!0;var A=p;try{for(b(F),d=n(l);d!==null&&(!(d.expirationTime>F)||D&&!O());){var X=d.callback;if(typeof X=="function"){d.callback=null,p=d.priorityLevel;var Y=X(d.expirationTime<=F);F=t.unstable_now(),typeof Y=="function"?d.callback=Y:d===n(l)&&i(l),b(F)}else i(l);d=n(l)}if(d!==null)var z=!0;else{var xe=n(u);xe!==null&&re(M,xe.startTime-F),z=!1}return z}finally{d=null,p=A,m=!1}}var E=!1,I=null,C=-1,L=5,R=-1;function O(){return!(t.unstable_now()-R<L)}function q(){if(I!==null){var D=t.unstable_now();R=D;var F=!0;try{F=I(!0,D)}finally{F?j():(E=!1,I=null)}}else E=!1}var j;if(typeof _=="function")j=function(){_(q)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,W=G.port2;G.port1.onmessage=q,j=function(){W.postMessage(null)}}else j=function(){w(q,0)};function J(D){I=D,E||(E=!0,j())}function re(D,F){C=w(function(){D(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,J(k))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(p){case 1:case 2:case 3:var F=3;break;default:F=p}var A=p;p=F;try{return D()}finally{p=A}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,F){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var A=p;p=D;try{return F()}finally{p=A}},t.unstable_scheduleCallback=function(D,F,A){var X=t.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?X+A:X):A=X,D){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=A+Y,D={id:f++,callback:F,priorityLevel:D,startTime:A,expirationTime:Y,sortIndex:-1},A>X?(D.sortIndex=A,e(u,D),n(l)===null&&D===n(u)&&(y?(v(C),C=-1):y=!0,re(M,A-X))):(D.sortIndex=Y,e(l,D),g||m||(g=!0,J(k))),D},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(D){var F=p;return function(){var A=p;p=F;try{return D.apply(this,arguments)}finally{p=A}}}})(xA);yA.exports=xA;var kF=yA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CF=H,lr=kF;function Se(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vA=new Set,ud={};function Dl(t,e){dc(t,e),dc(t+"Capture",e)}function dc(t,e){for(ud[t]=e,t=0;t<e.length;t++)vA.add(e[t])}var oo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),S1=Object.prototype.hasOwnProperty,AF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Y2={},Z2={};function PF(t){return S1.call(Z2,t)?!0:S1.call(Y2,t)?!1:AF.test(t)?Z2[t]=!0:(Y2[t]=!0,!1)}function LF(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function RF(t,e,n,i){if(e===null||typeof e>"u"||LF(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pi(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ti={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ti[t]=new Pi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ti[e]=new Pi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ti[t]=new Pi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ti[t]=new Pi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ti[t]=new Pi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ti[t]=new Pi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ti[t]=new Pi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ti[t]=new Pi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ti[t]=new Pi(t,5,!1,t.toLowerCase(),null,!1,!1)});var V_=/[\-:]([a-z])/g;function H_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(V_,H_);ti[e]=new Pi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(V_,H_);ti[e]=new Pi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(V_,H_);ti[e]=new Pi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ti[t]=new Pi(t,1,!1,t.toLowerCase(),null,!1,!1)});ti.xlinkHref=new Pi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ti[t]=new Pi(t,1,!1,t.toLowerCase(),null,!0,!0)});function W_(t,e,n,i){var r=ti.hasOwnProperty(e)?ti[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(RF(e,n,r,i)&&(n=null),i||r===null?PF(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var po=CF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cp=Symbol.for("react.element"),Iu=Symbol.for("react.portal"),Du=Symbol.for("react.fragment"),G_=Symbol.for("react.strict_mode"),b1=Symbol.for("react.profiler"),wA=Symbol.for("react.provider"),_A=Symbol.for("react.context"),$_=Symbol.for("react.forward_ref"),M1=Symbol.for("react.suspense"),T1=Symbol.for("react.suspense_list"),j_=Symbol.for("react.memo"),Uo=Symbol.for("react.lazy"),SA=Symbol.for("react.offscreen"),J2=Symbol.iterator;function hf(t){return t===null||typeof t!="object"?null:(t=J2&&t[J2]||t["@@iterator"],typeof t=="function"?t:null)}var mn=Object.assign,Tx;function zf(t){if(Tx===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Tx=e&&e[1]||""}return`
`+Tx+t}var Ex=!1;function kx(t,e){if(!t||Ex)return"";Ex=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ex=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zf(t):""}function IF(t){switch(t.tag){case 5:return zf(t.type);case 16:return zf("Lazy");case 13:return zf("Suspense");case 19:return zf("SuspenseList");case 0:case 2:case 15:return t=kx(t.type,!1),t;case 11:return t=kx(t.type.render,!1),t;case 1:return t=kx(t.type,!0),t;default:return""}}function E1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Du:return"Fragment";case Iu:return"Portal";case b1:return"Profiler";case G_:return"StrictMode";case M1:return"Suspense";case T1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _A:return(t.displayName||"Context")+".Consumer";case wA:return(t._context.displayName||"Context")+".Provider";case $_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case j_:return e=t.displayName||null,e!==null?e:E1(t.type)||"Memo";case Uo:e=t._payload,t=t._init;try{return E1(t(e))}catch{}}return null}function DF(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return E1(e);case 8:return e===G_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ua(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zF(t){var e=bA(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ap(t){t._valueTracker||(t._valueTracker=zF(t))}function MA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=bA(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function _g(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function k1(t,e){var n=e.checked;return mn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function K2(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=ua(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function TA(t,e){e=e.checked,e!=null&&W_(t,"checked",e,!1)}function C1(t,e){TA(t,e);var n=ua(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?A1(t,e.type,n):e.hasOwnProperty("defaultValue")&&A1(t,e.type,ua(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Q2(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function A1(t,e,n){(e!=="number"||_g(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ff=Array.isArray;function rc(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ua(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function P1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Se(91));return mn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function e3(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Se(92));if(Ff(n)){if(1<n.length)throw Error(Se(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ua(n)}}function EA(t,e){var n=ua(e.value),i=ua(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function t3(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function kA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function L1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?kA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Pp,CA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Pp=Pp||document.createElement("div"),Pp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function cd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Wf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},FF=["Webkit","ms","Moz","O"];Object.keys(Wf).forEach(function(t){FF.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wf[e]=Wf[t]})});function AA(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Wf.hasOwnProperty(t)&&Wf[t]?(""+e).trim():e+"px"}function PA(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=AA(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var NF=mn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function R1(t,e){if(e){if(NF[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Se(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Se(62))}}function I1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var D1=null;function X_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var z1=null,sc=null,oc=null;function n3(t){if(t=eh(t)){if(typeof z1!="function")throw Error(Se(280));var e=t.stateNode;e&&(e=S0(e),z1(t.stateNode,t.type,e))}}function LA(t){sc?oc?oc.push(t):oc=[t]:sc=t}function RA(){if(sc){var t=sc,e=oc;if(oc=sc=null,n3(t),e)for(t=0;t<e.length;t++)n3(e[t])}}function IA(t,e){return t(e)}function DA(){}var Cx=!1;function zA(t,e,n){if(Cx)return t(e,n);Cx=!0;try{return IA(t,e,n)}finally{Cx=!1,(sc!==null||oc!==null)&&(DA(),RA())}}function fd(t,e){var n=t.stateNode;if(n===null)return null;var i=S0(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Se(231,e,typeof n));return n}var F1=!1;if(oo)try{var pf={};Object.defineProperty(pf,"passive",{get:function(){F1=!0}}),window.addEventListener("test",pf,pf),window.removeEventListener("test",pf,pf)}catch{F1=!1}function OF(t,e,n,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(f){this.onError(f)}}var Gf=!1,Sg=null,bg=!1,N1=null,BF={onError:function(t){Gf=!0,Sg=t}};function UF(t,e,n,i,r,s,o,a,l){Gf=!1,Sg=null,OF.apply(BF,arguments)}function VF(t,e,n,i,r,s,o,a,l){if(UF.apply(this,arguments),Gf){if(Gf){var u=Sg;Gf=!1,Sg=null}else throw Error(Se(198));bg||(bg=!0,N1=u)}}function zl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function FA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function i3(t){if(zl(t)!==t)throw Error(Se(188))}function HF(t){var e=t.alternate;if(!e){if(e=zl(t),e===null)throw Error(Se(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return i3(r),t;if(s===i)return i3(r),e;s=s.sibling}throw Error(Se(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(Se(189))}}if(n.alternate!==i)throw Error(Se(190))}if(n.tag!==3)throw Error(Se(188));return n.stateNode.current===n?t:e}function NA(t){return t=HF(t),t!==null?OA(t):null}function OA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=OA(t);if(e!==null)return e;t=t.sibling}return null}var BA=lr.unstable_scheduleCallback,r3=lr.unstable_cancelCallback,WF=lr.unstable_shouldYield,GF=lr.unstable_requestPaint,bn=lr.unstable_now,$F=lr.unstable_getCurrentPriorityLevel,q_=lr.unstable_ImmediatePriority,UA=lr.unstable_UserBlockingPriority,Mg=lr.unstable_NormalPriority,jF=lr.unstable_LowPriority,VA=lr.unstable_IdlePriority,x0=null,Ts=null;function XF(t){if(Ts&&typeof Ts.onCommitFiberRoot=="function")try{Ts.onCommitFiberRoot(x0,t,void 0,(t.current.flags&128)===128)}catch{}}var is=Math.clz32?Math.clz32:ZF,qF=Math.log,YF=Math.LN2;function ZF(t){return t>>>=0,t===0?32:31-(qF(t)/YF|0)|0}var Lp=64,Rp=4194304;function Nf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Tg(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Nf(a):(s&=o,s!==0&&(i=Nf(s)))}else o=n&~r,o!==0?i=Nf(o):s!==0&&(i=Nf(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-is(e),r=1<<n,i|=t[n],e&=~r;return i}function JF(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KF(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-is(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=JF(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function O1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function HA(){var t=Lp;return Lp<<=1,!(Lp&4194240)&&(Lp=64),t}function Ax(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Kd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-is(e),t[e]=n}function QF(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-is(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function Y_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-is(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Wt=0;function WA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var GA,Z_,$A,jA,XA,B1=!1,Ip=[],Jo=null,Ko=null,Qo=null,dd=new Map,hd=new Map,Go=[],eN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function s3(t,e){switch(t){case"focusin":case"focusout":Jo=null;break;case"dragenter":case"dragleave":Ko=null;break;case"mouseover":case"mouseout":Qo=null;break;case"pointerover":case"pointerout":dd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":hd.delete(e.pointerId)}}function mf(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=eh(e),e!==null&&Z_(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function tN(t,e,n,i,r){switch(e){case"focusin":return Jo=mf(Jo,t,e,n,i,r),!0;case"dragenter":return Ko=mf(Ko,t,e,n,i,r),!0;case"mouseover":return Qo=mf(Qo,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return dd.set(s,mf(dd.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,hd.set(s,mf(hd.get(s)||null,t,e,n,i,r)),!0}return!1}function qA(t){var e=nl(t.target);if(e!==null){var n=zl(e);if(n!==null){if(e=n.tag,e===13){if(e=FA(n),e!==null){t.blockedOn=e,XA(t.priority,function(){$A(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $m(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=U1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);D1=i,n.target.dispatchEvent(i),D1=null}else return e=eh(n),e!==null&&Z_(e),t.blockedOn=n,!1;e.shift()}return!0}function o3(t,e,n){$m(t)&&n.delete(e)}function nN(){B1=!1,Jo!==null&&$m(Jo)&&(Jo=null),Ko!==null&&$m(Ko)&&(Ko=null),Qo!==null&&$m(Qo)&&(Qo=null),dd.forEach(o3),hd.forEach(o3)}function gf(t,e){t.blockedOn===e&&(t.blockedOn=null,B1||(B1=!0,lr.unstable_scheduleCallback(lr.unstable_NormalPriority,nN)))}function pd(t){function e(r){return gf(r,t)}if(0<Ip.length){gf(Ip[0],t);for(var n=1;n<Ip.length;n++){var i=Ip[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Jo!==null&&gf(Jo,t),Ko!==null&&gf(Ko,t),Qo!==null&&gf(Qo,t),dd.forEach(e),hd.forEach(e),n=0;n<Go.length;n++)i=Go[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Go.length&&(n=Go[0],n.blockedOn===null);)qA(n),n.blockedOn===null&&Go.shift()}var ac=po.ReactCurrentBatchConfig,Eg=!0;function iN(t,e,n,i){var r=Wt,s=ac.transition;ac.transition=null;try{Wt=1,J_(t,e,n,i)}finally{Wt=r,ac.transition=s}}function rN(t,e,n,i){var r=Wt,s=ac.transition;ac.transition=null;try{Wt=4,J_(t,e,n,i)}finally{Wt=r,ac.transition=s}}function J_(t,e,n,i){if(Eg){var r=U1(t,e,n,i);if(r===null)Bx(t,e,i,kg,n),s3(t,i);else if(tN(r,t,e,n,i))i.stopPropagation();else if(s3(t,i),e&4&&-1<eN.indexOf(t)){for(;r!==null;){var s=eh(r);if(s!==null&&GA(s),s=U1(t,e,n,i),s===null&&Bx(t,e,i,kg,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Bx(t,e,i,null,n)}}var kg=null;function U1(t,e,n,i){if(kg=null,t=X_(i),t=nl(t),t!==null)if(e=zl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=FA(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return kg=t,null}function YA(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($F()){case q_:return 1;case UA:return 4;case Mg:case jF:return 16;case VA:return 536870912;default:return 16}default:return 16}}var Xo=null,K_=null,jm=null;function ZA(){if(jm)return jm;var t,e=K_,n=e.length,i,r="value"in Xo?Xo.value:Xo.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return jm=r.slice(t,1<i?1-i:void 0)}function Xm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Dp(){return!0}function a3(){return!1}function fr(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Dp:a3,this.isPropagationStopped=a3,this}return mn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Dp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Dp)},persist:function(){},isPersistent:Dp}),e}var Dc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Q_=fr(Dc),Qd=mn({},Dc,{view:0,detail:0}),sN=fr(Qd),Px,Lx,yf,v0=mn({},Qd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eS,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==yf&&(yf&&t.type==="mousemove"?(Px=t.screenX-yf.screenX,Lx=t.screenY-yf.screenY):Lx=Px=0,yf=t),Px)},movementY:function(t){return"movementY"in t?t.movementY:Lx}}),l3=fr(v0),oN=mn({},v0,{dataTransfer:0}),aN=fr(oN),lN=mn({},Qd,{relatedTarget:0}),Rx=fr(lN),uN=mn({},Dc,{animationName:0,elapsedTime:0,pseudoElement:0}),cN=fr(uN),fN=mn({},Dc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),dN=fr(fN),hN=mn({},Dc,{data:0}),u3=fr(hN),pN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=gN[t])?!!e[t]:!1}function eS(){return yN}var xN=mn({},Qd,{key:function(t){if(t.key){var e=pN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eS,charCode:function(t){return t.type==="keypress"?Xm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),vN=fr(xN),wN=mn({},v0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),c3=fr(wN),_N=mn({},Qd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eS}),SN=fr(_N),bN=mn({},Dc,{propertyName:0,elapsedTime:0,pseudoElement:0}),MN=fr(bN),TN=mn({},v0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),EN=fr(TN),kN=[9,13,27,32],tS=oo&&"CompositionEvent"in window,$f=null;oo&&"documentMode"in document&&($f=document.documentMode);var CN=oo&&"TextEvent"in window&&!$f,JA=oo&&(!tS||$f&&8<$f&&11>=$f),f3=String.fromCharCode(32),d3=!1;function KA(t,e){switch(t){case"keyup":return kN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function QA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zu=!1;function AN(t,e){switch(t){case"compositionend":return QA(e);case"keypress":return e.which!==32?null:(d3=!0,f3);case"textInput":return t=e.data,t===f3&&d3?null:t;default:return null}}function PN(t,e){if(zu)return t==="compositionend"||!tS&&KA(t,e)?(t=ZA(),jm=K_=Xo=null,zu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return JA&&e.locale!=="ko"?null:e.data;default:return null}}var LN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function h3(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!LN[t.type]:e==="textarea"}function eP(t,e,n,i){LA(i),e=Cg(e,"onChange"),0<e.length&&(n=new Q_("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var jf=null,md=null;function RN(t){fP(t,0)}function w0(t){var e=Ou(t);if(MA(e))return t}function IN(t,e){if(t==="change")return e}var tP=!1;if(oo){var Ix;if(oo){var Dx="oninput"in document;if(!Dx){var p3=document.createElement("div");p3.setAttribute("oninput","return;"),Dx=typeof p3.oninput=="function"}Ix=Dx}else Ix=!1;tP=Ix&&(!document.documentMode||9<document.documentMode)}function m3(){jf&&(jf.detachEvent("onpropertychange",nP),md=jf=null)}function nP(t){if(t.propertyName==="value"&&w0(md)){var e=[];eP(e,md,t,X_(t)),zA(RN,e)}}function DN(t,e,n){t==="focusin"?(m3(),jf=e,md=n,jf.attachEvent("onpropertychange",nP)):t==="focusout"&&m3()}function zN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return w0(md)}function FN(t,e){if(t==="click")return w0(e)}function NN(t,e){if(t==="input"||t==="change")return w0(e)}function ON(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ls=typeof Object.is=="function"?Object.is:ON;function gd(t,e){if(ls(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!S1.call(e,r)||!ls(t[r],e[r]))return!1}return!0}function g3(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function y3(t,e){var n=g3(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=g3(n)}}function iP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?iP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rP(){for(var t=window,e=_g();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_g(t.document)}return e}function nS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function BN(t){var e=rP(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&iP(n.ownerDocument.documentElement,n)){if(i!==null&&nS(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=y3(n,s);var o=y3(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var UN=oo&&"documentMode"in document&&11>=document.documentMode,Fu=null,V1=null,Xf=null,H1=!1;function x3(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;H1||Fu==null||Fu!==_g(i)||(i=Fu,"selectionStart"in i&&nS(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Xf&&gd(Xf,i)||(Xf=i,i=Cg(V1,"onSelect"),0<i.length&&(e=new Q_("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Fu)))}function zp(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Nu={animationend:zp("Animation","AnimationEnd"),animationiteration:zp("Animation","AnimationIteration"),animationstart:zp("Animation","AnimationStart"),transitionend:zp("Transition","TransitionEnd")},zx={},sP={};oo&&(sP=document.createElement("div").style,"AnimationEvent"in window||(delete Nu.animationend.animation,delete Nu.animationiteration.animation,delete Nu.animationstart.animation),"TransitionEvent"in window||delete Nu.transitionend.transition);function _0(t){if(zx[t])return zx[t];if(!Nu[t])return t;var e=Nu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in sP)return zx[t]=e[n];return t}var oP=_0("animationend"),aP=_0("animationiteration"),lP=_0("animationstart"),uP=_0("transitionend"),cP=new Map,v3="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xa(t,e){cP.set(t,e),Dl(e,[t])}for(var Fx=0;Fx<v3.length;Fx++){var Nx=v3[Fx],VN=Nx.toLowerCase(),HN=Nx[0].toUpperCase()+Nx.slice(1);xa(VN,"on"+HN)}xa(oP,"onAnimationEnd");xa(aP,"onAnimationIteration");xa(lP,"onAnimationStart");xa("dblclick","onDoubleClick");xa("focusin","onFocus");xa("focusout","onBlur");xa(uP,"onTransitionEnd");dc("onMouseEnter",["mouseout","mouseover"]);dc("onMouseLeave",["mouseout","mouseover"]);dc("onPointerEnter",["pointerout","pointerover"]);dc("onPointerLeave",["pointerout","pointerover"]);Dl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Of="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Of));function w3(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,VF(i,e,void 0,t),t.currentTarget=null}function fP(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;w3(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;w3(r,a,u),s=l}}}if(bg)throw t=N1,bg=!1,N1=null,t}function Jt(t,e){var n=e[X1];n===void 0&&(n=e[X1]=new Set);var i=t+"__bubble";n.has(i)||(dP(e,t,2,!1),n.add(i))}function Ox(t,e,n){var i=0;e&&(i|=4),dP(n,t,i,e)}var Fp="_reactListening"+Math.random().toString(36).slice(2);function yd(t){if(!t[Fp]){t[Fp]=!0,vA.forEach(function(n){n!=="selectionchange"&&(WN.has(n)||Ox(n,!1,t),Ox(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fp]||(e[Fp]=!0,Ox("selectionchange",!1,e))}}function dP(t,e,n,i){switch(YA(e)){case 1:var r=iN;break;case 4:r=rN;break;default:r=J_}n=r.bind(null,e,n,t),r=void 0,!F1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Bx(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=nl(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}zA(function(){var u=s,f=X_(n),d=[];e:{var p=cP.get(t);if(p!==void 0){var m=Q_,g=t;switch(t){case"keypress":if(Xm(n)===0)break e;case"keydown":case"keyup":m=vN;break;case"focusin":g="focus",m=Rx;break;case"focusout":g="blur",m=Rx;break;case"beforeblur":case"afterblur":m=Rx;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=l3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=aN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=SN;break;case oP:case aP:case lP:m=cN;break;case uP:m=MN;break;case"scroll":m=sN;break;case"wheel":m=EN;break;case"copy":case"cut":case"paste":m=dN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=c3}var y=(e&4)!==0,w=!y&&t==="scroll",v=y?p!==null?p+"Capture":null:p;y=[];for(var _=u,b;_!==null;){b=_;var M=b.stateNode;if(b.tag===5&&M!==null&&(b=M,v!==null&&(M=fd(_,v),M!=null&&y.push(xd(_,M,b)))),w)break;_=_.return}0<y.length&&(p=new m(p,g,null,n,f),d.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==D1&&(g=n.relatedTarget||n.fromElement)&&(nl(g)||g[ao]))break e;if((m||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=u,g=g?nl(g):null,g!==null&&(w=zl(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(y=l3,M="onMouseLeave",v="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(y=c3,M="onPointerLeave",v="onPointerEnter",_="pointer"),w=m==null?p:Ou(m),b=g==null?p:Ou(g),p=new y(M,_+"leave",m,n,f),p.target=w,p.relatedTarget=b,M=null,nl(f)===u&&(y=new y(v,_+"enter",g,n,f),y.target=b,y.relatedTarget=w,M=y),w=M,m&&g)t:{for(y=m,v=g,_=0,b=y;b;b=ou(b))_++;for(b=0,M=v;M;M=ou(M))b++;for(;0<_-b;)y=ou(y),_--;for(;0<b-_;)v=ou(v),b--;for(;_--;){if(y===v||v!==null&&y===v.alternate)break t;y=ou(y),v=ou(v)}y=null}else y=null;m!==null&&_3(d,p,m,y,!1),g!==null&&w!==null&&_3(d,w,g,y,!0)}}e:{if(p=u?Ou(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var k=IN;else if(h3(p))if(tP)k=NN;else{k=zN;var E=DN}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(k=FN);if(k&&(k=k(t,u))){eP(d,k,n,f);break e}E&&E(t,p,u),t==="focusout"&&(E=p._wrapperState)&&E.controlled&&p.type==="number"&&A1(p,"number",p.value)}switch(E=u?Ou(u):window,t){case"focusin":(h3(E)||E.contentEditable==="true")&&(Fu=E,V1=u,Xf=null);break;case"focusout":Xf=V1=Fu=null;break;case"mousedown":H1=!0;break;case"contextmenu":case"mouseup":case"dragend":H1=!1,x3(d,n,f);break;case"selectionchange":if(UN)break;case"keydown":case"keyup":x3(d,n,f)}var I;if(tS)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else zu?KA(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(JA&&n.locale!=="ko"&&(zu||C!=="onCompositionStart"?C==="onCompositionEnd"&&zu&&(I=ZA()):(Xo=f,K_="value"in Xo?Xo.value:Xo.textContent,zu=!0)),E=Cg(u,C),0<E.length&&(C=new u3(C,t,null,n,f),d.push({event:C,listeners:E}),I?C.data=I:(I=QA(n),I!==null&&(C.data=I)))),(I=CN?AN(t,n):PN(t,n))&&(u=Cg(u,"onBeforeInput"),0<u.length&&(f=new u3("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:u}),f.data=I))}fP(d,e)})}function xd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Cg(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=fd(t,n),s!=null&&i.unshift(xd(t,s,r)),s=fd(t,e),s!=null&&i.push(xd(t,s,r))),t=t.return}return i}function ou(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function _3(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=fd(n,s),l!=null&&o.unshift(xd(n,l,a))):r||(l=fd(n,s),l!=null&&o.push(xd(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var GN=/\r\n?/g,$N=/\u0000|\uFFFD/g;function S3(t){return(typeof t=="string"?t:""+t).replace(GN,`
`).replace($N,"")}function Np(t,e,n){if(e=S3(e),S3(t)!==e&&n)throw Error(Se(425))}function Ag(){}var W1=null,G1=null;function $1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var j1=typeof setTimeout=="function"?setTimeout:void 0,jN=typeof clearTimeout=="function"?clearTimeout:void 0,b3=typeof Promise=="function"?Promise:void 0,XN=typeof queueMicrotask=="function"?queueMicrotask:typeof b3<"u"?function(t){return b3.resolve(null).then(t).catch(qN)}:j1;function qN(t){setTimeout(function(){throw t})}function Ux(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),pd(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);pd(e)}function ea(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function M3(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var zc=Math.random().toString(36).slice(2),Ms="__reactFiber$"+zc,vd="__reactProps$"+zc,ao="__reactContainer$"+zc,X1="__reactEvents$"+zc,YN="__reactListeners$"+zc,ZN="__reactHandles$"+zc;function nl(t){var e=t[Ms];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ao]||n[Ms]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=M3(t);t!==null;){if(n=t[Ms])return n;t=M3(t)}return e}t=n,n=t.parentNode}return null}function eh(t){return t=t[Ms]||t[ao],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ou(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Se(33))}function S0(t){return t[vd]||null}var q1=[],Bu=-1;function va(t){return{current:t}}function nn(t){0>Bu||(t.current=q1[Bu],q1[Bu]=null,Bu--)}function Yt(t,e){Bu++,q1[Bu]=t.current,t.current=e}var ca={},mi=va(ca),Wi=va(!1),_l=ca;function hc(t,e){var n=t.type.contextTypes;if(!n)return ca;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Gi(t){return t=t.childContextTypes,t!=null}function Pg(){nn(Wi),nn(mi)}function T3(t,e,n){if(mi.current!==ca)throw Error(Se(168));Yt(mi,e),Yt(Wi,n)}function hP(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Se(108,DF(t)||"Unknown",r));return mn({},n,i)}function Lg(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ca,_l=mi.current,Yt(mi,t),Yt(Wi,Wi.current),!0}function E3(t,e,n){var i=t.stateNode;if(!i)throw Error(Se(169));n?(t=hP(t,e,_l),i.__reactInternalMemoizedMergedChildContext=t,nn(Wi),nn(mi),Yt(mi,t)):nn(Wi),Yt(Wi,n)}var qs=null,b0=!1,Vx=!1;function pP(t){qs===null?qs=[t]:qs.push(t)}function JN(t){b0=!0,pP(t)}function wa(){if(!Vx&&qs!==null){Vx=!0;var t=0,e=Wt;try{var n=qs;for(Wt=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}qs=null,b0=!1}catch(r){throw qs!==null&&(qs=qs.slice(t+1)),BA(q_,wa),r}finally{Wt=e,Vx=!1}}return null}var Uu=[],Vu=0,Rg=null,Ig=0,Ir=[],Dr=0,Sl=null,Zs=1,Js="";function ja(t,e){Uu[Vu++]=Ig,Uu[Vu++]=Rg,Rg=t,Ig=e}function mP(t,e,n){Ir[Dr++]=Zs,Ir[Dr++]=Js,Ir[Dr++]=Sl,Sl=t;var i=Zs;t=Js;var r=32-is(i)-1;i&=~(1<<r),n+=1;var s=32-is(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Zs=1<<32-is(e)+r|n<<r|i,Js=s+t}else Zs=1<<s|n<<r|i,Js=t}function iS(t){t.return!==null&&(ja(t,1),mP(t,1,0))}function rS(t){for(;t===Rg;)Rg=Uu[--Vu],Uu[Vu]=null,Ig=Uu[--Vu],Uu[Vu]=null;for(;t===Sl;)Sl=Ir[--Dr],Ir[Dr]=null,Js=Ir[--Dr],Ir[Dr]=null,Zs=Ir[--Dr],Ir[Dr]=null}var sr=null,rr=null,un=!1,ts=null;function gP(t,e){var n=Nr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function k3(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,sr=t,rr=ea(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,sr=t,rr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Sl!==null?{id:Zs,overflow:Js}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Nr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,sr=t,rr=null,!0):!1;default:return!1}}function Y1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Z1(t){if(un){var e=rr;if(e){var n=e;if(!k3(t,e)){if(Y1(t))throw Error(Se(418));e=ea(n.nextSibling);var i=sr;e&&k3(t,e)?gP(i,n):(t.flags=t.flags&-4097|2,un=!1,sr=t)}}else{if(Y1(t))throw Error(Se(418));t.flags=t.flags&-4097|2,un=!1,sr=t}}}function C3(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;sr=t}function Op(t){if(t!==sr)return!1;if(!un)return C3(t),un=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$1(t.type,t.memoizedProps)),e&&(e=rr)){if(Y1(t))throw yP(),Error(Se(418));for(;e;)gP(t,e),e=ea(e.nextSibling)}if(C3(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Se(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){rr=ea(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}rr=null}}else rr=sr?ea(t.stateNode.nextSibling):null;return!0}function yP(){for(var t=rr;t;)t=ea(t.nextSibling)}function pc(){rr=sr=null,un=!1}function sS(t){ts===null?ts=[t]:ts.push(t)}var KN=po.ReactCurrentBatchConfig;function xf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Se(309));var i=n.stateNode}if(!i)throw Error(Se(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Se(284));if(!n._owner)throw Error(Se(290,t))}return t}function Bp(t,e){throw t=Object.prototype.toString.call(e),Error(Se(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function A3(t){var e=t._init;return e(t._payload)}function xP(t){function e(v,_){if(t){var b=v.deletions;b===null?(v.deletions=[_],v.flags|=16):b.push(_)}}function n(v,_){if(!t)return null;for(;_!==null;)e(v,_),_=_.sibling;return null}function i(v,_){for(v=new Map;_!==null;)_.key!==null?v.set(_.key,_):v.set(_.index,_),_=_.sibling;return v}function r(v,_){return v=ra(v,_),v.index=0,v.sibling=null,v}function s(v,_,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<_?(v.flags|=2,_):b):(v.flags|=2,_)):(v.flags|=1048576,_)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,_,b,M){return _===null||_.tag!==6?(_=qx(b,v.mode,M),_.return=v,_):(_=r(_,b),_.return=v,_)}function l(v,_,b,M){var k=b.type;return k===Du?f(v,_,b.props.children,M,b.key):_!==null&&(_.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Uo&&A3(k)===_.type)?(M=r(_,b.props),M.ref=xf(v,_,b),M.return=v,M):(M=eg(b.type,b.key,b.props,null,v.mode,M),M.ref=xf(v,_,b),M.return=v,M)}function u(v,_,b,M){return _===null||_.tag!==4||_.stateNode.containerInfo!==b.containerInfo||_.stateNode.implementation!==b.implementation?(_=Yx(b,v.mode,M),_.return=v,_):(_=r(_,b.children||[]),_.return=v,_)}function f(v,_,b,M,k){return _===null||_.tag!==7?(_=dl(b,v.mode,M,k),_.return=v,_):(_=r(_,b),_.return=v,_)}function d(v,_,b){if(typeof _=="string"&&_!==""||typeof _=="number")return _=qx(""+_,v.mode,b),_.return=v,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Cp:return b=eg(_.type,_.key,_.props,null,v.mode,b),b.ref=xf(v,null,_),b.return=v,b;case Iu:return _=Yx(_,v.mode,b),_.return=v,_;case Uo:var M=_._init;return d(v,M(_._payload),b)}if(Ff(_)||hf(_))return _=dl(_,v.mode,b,null),_.return=v,_;Bp(v,_)}return null}function p(v,_,b,M){var k=_!==null?_.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return k!==null?null:a(v,_,""+b,M);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Cp:return b.key===k?l(v,_,b,M):null;case Iu:return b.key===k?u(v,_,b,M):null;case Uo:return k=b._init,p(v,_,k(b._payload),M)}if(Ff(b)||hf(b))return k!==null?null:f(v,_,b,M,null);Bp(v,b)}return null}function m(v,_,b,M,k){if(typeof M=="string"&&M!==""||typeof M=="number")return v=v.get(b)||null,a(_,v,""+M,k);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Cp:return v=v.get(M.key===null?b:M.key)||null,l(_,v,M,k);case Iu:return v=v.get(M.key===null?b:M.key)||null,u(_,v,M,k);case Uo:var E=M._init;return m(v,_,b,E(M._payload),k)}if(Ff(M)||hf(M))return v=v.get(b)||null,f(_,v,M,k,null);Bp(_,M)}return null}function g(v,_,b,M){for(var k=null,E=null,I=_,C=_=0,L=null;I!==null&&C<b.length;C++){I.index>C?(L=I,I=null):L=I.sibling;var R=p(v,I,b[C],M);if(R===null){I===null&&(I=L);break}t&&I&&R.alternate===null&&e(v,I),_=s(R,_,C),E===null?k=R:E.sibling=R,E=R,I=L}if(C===b.length)return n(v,I),un&&ja(v,C),k;if(I===null){for(;C<b.length;C++)I=d(v,b[C],M),I!==null&&(_=s(I,_,C),E===null?k=I:E.sibling=I,E=I);return un&&ja(v,C),k}for(I=i(v,I);C<b.length;C++)L=m(I,v,C,b[C],M),L!==null&&(t&&L.alternate!==null&&I.delete(L.key===null?C:L.key),_=s(L,_,C),E===null?k=L:E.sibling=L,E=L);return t&&I.forEach(function(O){return e(v,O)}),un&&ja(v,C),k}function y(v,_,b,M){var k=hf(b);if(typeof k!="function")throw Error(Se(150));if(b=k.call(b),b==null)throw Error(Se(151));for(var E=k=null,I=_,C=_=0,L=null,R=b.next();I!==null&&!R.done;C++,R=b.next()){I.index>C?(L=I,I=null):L=I.sibling;var O=p(v,I,R.value,M);if(O===null){I===null&&(I=L);break}t&&I&&O.alternate===null&&e(v,I),_=s(O,_,C),E===null?k=O:E.sibling=O,E=O,I=L}if(R.done)return n(v,I),un&&ja(v,C),k;if(I===null){for(;!R.done;C++,R=b.next())R=d(v,R.value,M),R!==null&&(_=s(R,_,C),E===null?k=R:E.sibling=R,E=R);return un&&ja(v,C),k}for(I=i(v,I);!R.done;C++,R=b.next())R=m(I,v,C,R.value,M),R!==null&&(t&&R.alternate!==null&&I.delete(R.key===null?C:R.key),_=s(R,_,C),E===null?k=R:E.sibling=R,E=R);return t&&I.forEach(function(q){return e(v,q)}),un&&ja(v,C),k}function w(v,_,b,M){if(typeof b=="object"&&b!==null&&b.type===Du&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Cp:e:{for(var k=b.key,E=_;E!==null;){if(E.key===k){if(k=b.type,k===Du){if(E.tag===7){n(v,E.sibling),_=r(E,b.props.children),_.return=v,v=_;break e}}else if(E.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Uo&&A3(k)===E.type){n(v,E.sibling),_=r(E,b.props),_.ref=xf(v,E,b),_.return=v,v=_;break e}n(v,E);break}else e(v,E);E=E.sibling}b.type===Du?(_=dl(b.props.children,v.mode,M,b.key),_.return=v,v=_):(M=eg(b.type,b.key,b.props,null,v.mode,M),M.ref=xf(v,_,b),M.return=v,v=M)}return o(v);case Iu:e:{for(E=b.key;_!==null;){if(_.key===E)if(_.tag===4&&_.stateNode.containerInfo===b.containerInfo&&_.stateNode.implementation===b.implementation){n(v,_.sibling),_=r(_,b.children||[]),_.return=v,v=_;break e}else{n(v,_);break}else e(v,_);_=_.sibling}_=Yx(b,v.mode,M),_.return=v,v=_}return o(v);case Uo:return E=b._init,w(v,_,E(b._payload),M)}if(Ff(b))return g(v,_,b,M);if(hf(b))return y(v,_,b,M);Bp(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,_!==null&&_.tag===6?(n(v,_.sibling),_=r(_,b),_.return=v,v=_):(n(v,_),_=qx(b,v.mode,M),_.return=v,v=_),o(v)):n(v,_)}return w}var mc=xP(!0),vP=xP(!1),Dg=va(null),zg=null,Hu=null,oS=null;function aS(){oS=Hu=zg=null}function lS(t){var e=Dg.current;nn(Dg),t._currentValue=e}function J1(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function lc(t,e){zg=t,oS=Hu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Vi=!0),t.firstContext=null)}function Ur(t){var e=t._currentValue;if(oS!==t)if(t={context:t,memoizedValue:e,next:null},Hu===null){if(zg===null)throw Error(Se(308));Hu=t,zg.dependencies={lanes:0,firstContext:t}}else Hu=Hu.next=t;return e}var il=null;function uS(t){il===null?il=[t]:il.push(t)}function wP(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,uS(e)):(n.next=r.next,r.next=n),e.interleaved=n,lo(t,i)}function lo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Vo=!1;function cS(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _P(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function no(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ta(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Rt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,lo(t,n)}return r=i.interleaved,r===null?(e.next=e,uS(i)):(e.next=r.next,r.next=e),i.interleaved=e,lo(t,n)}function qm(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Y_(t,n)}}function P3(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fg(t,e,n,i){var r=t.updateQueue;Vo=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=u:a.next=u,f.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,f=u=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((i&p)===p){f!==null&&(f=f.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,y=a;switch(p=e,m=n,y.tag){case 1:if(g=y.payload,typeof g=="function"){d=g.call(m,d,p);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,p=typeof g=="function"?g.call(m,d,p):g,p==null)break e;d=mn({},d,p);break e;case 2:Vo=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(u=f=m,l=d):f=f.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(1);if(f===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Ml|=o,t.lanes=o,t.memoizedState=d}}function L3(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(Se(191,r));r.call(i)}}}var th={},Es=va(th),wd=va(th),_d=va(th);function rl(t){if(t===th)throw Error(Se(174));return t}function fS(t,e){switch(Yt(_d,e),Yt(wd,t),Yt(Es,th),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:L1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=L1(e,t)}nn(Es),Yt(Es,e)}function gc(){nn(Es),nn(wd),nn(_d)}function SP(t){rl(_d.current);var e=rl(Es.current),n=L1(e,t.type);e!==n&&(Yt(wd,t),Yt(Es,n))}function dS(t){wd.current===t&&(nn(Es),nn(wd))}var fn=va(0);function Ng(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Hx=[];function hS(){for(var t=0;t<Hx.length;t++)Hx[t]._workInProgressVersionPrimary=null;Hx.length=0}var Ym=po.ReactCurrentDispatcher,Wx=po.ReactCurrentBatchConfig,bl=0,pn=null,Bn=null,Xn=null,Og=!1,qf=!1,Sd=0,QN=0;function ai(){throw Error(Se(321))}function pS(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ls(t[n],e[n]))return!1;return!0}function mS(t,e,n,i,r,s){if(bl=s,pn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ym.current=t===null||t.memoizedState===null?iO:rO,t=n(i,r),qf){s=0;do{if(qf=!1,Sd=0,25<=s)throw Error(Se(301));s+=1,Xn=Bn=null,e.updateQueue=null,Ym.current=sO,t=n(i,r)}while(qf)}if(Ym.current=Bg,e=Bn!==null&&Bn.next!==null,bl=0,Xn=Bn=pn=null,Og=!1,e)throw Error(Se(300));return t}function gS(){var t=Sd!==0;return Sd=0,t}function _s(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xn===null?pn.memoizedState=Xn=t:Xn=Xn.next=t,Xn}function Vr(){if(Bn===null){var t=pn.alternate;t=t!==null?t.memoizedState:null}else t=Bn.next;var e=Xn===null?pn.memoizedState:Xn.next;if(e!==null)Xn=e,Bn=t;else{if(t===null)throw Error(Se(310));Bn=t,t={memoizedState:Bn.memoizedState,baseState:Bn.baseState,baseQueue:Bn.baseQueue,queue:Bn.queue,next:null},Xn===null?pn.memoizedState=Xn=t:Xn=Xn.next=t}return Xn}function bd(t,e){return typeof e=="function"?e(t):e}function Gx(t){var e=Vr(),n=e.queue;if(n===null)throw Error(Se(311));n.lastRenderedReducer=t;var i=Bn,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var f=u.lane;if((bl&f)===f)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,pn.lanes|=f,Ml|=f}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,ls(i,e.memoizedState)||(Vi=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,pn.lanes|=s,Ml|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function $x(t){var e=Vr(),n=e.queue;if(n===null)throw Error(Se(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);ls(s,e.memoizedState)||(Vi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function bP(){}function MP(t,e){var n=pn,i=Vr(),r=e(),s=!ls(i.memoizedState,r);if(s&&(i.memoizedState=r,Vi=!0),i=i.queue,yS(kP.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Xn!==null&&Xn.memoizedState.tag&1){if(n.flags|=2048,Md(9,EP.bind(null,n,i,r,e),void 0,null),Jn===null)throw Error(Se(349));bl&30||TP(n,e,r)}return r}function TP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=pn.updateQueue,e===null?(e={lastEffect:null,stores:null},pn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function EP(t,e,n,i){e.value=n,e.getSnapshot=i,CP(e)&&AP(t)}function kP(t,e,n){return n(function(){CP(e)&&AP(t)})}function CP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ls(t,n)}catch{return!0}}function AP(t){var e=lo(t,1);e!==null&&rs(e,t,1,-1)}function R3(t){var e=_s();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bd,lastRenderedState:t},e.queue=t,t=t.dispatch=nO.bind(null,pn,t),[e.memoizedState,t]}function Md(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=pn.updateQueue,e===null?(e={lastEffect:null,stores:null},pn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function PP(){return Vr().memoizedState}function Zm(t,e,n,i){var r=_s();pn.flags|=t,r.memoizedState=Md(1|e,n,void 0,i===void 0?null:i)}function M0(t,e,n,i){var r=Vr();i=i===void 0?null:i;var s=void 0;if(Bn!==null){var o=Bn.memoizedState;if(s=o.destroy,i!==null&&pS(i,o.deps)){r.memoizedState=Md(e,n,s,i);return}}pn.flags|=t,r.memoizedState=Md(1|e,n,s,i)}function I3(t,e){return Zm(8390656,8,t,e)}function yS(t,e){return M0(2048,8,t,e)}function LP(t,e){return M0(4,2,t,e)}function RP(t,e){return M0(4,4,t,e)}function IP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function DP(t,e,n){return n=n!=null?n.concat([t]):null,M0(4,4,IP.bind(null,e,t),n)}function xS(){}function zP(t,e){var n=Vr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&pS(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function FP(t,e){var n=Vr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&pS(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function NP(t,e,n){return bl&21?(ls(n,e)||(n=HA(),pn.lanes|=n,Ml|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Vi=!0),t.memoizedState=n)}function eO(t,e){var n=Wt;Wt=n!==0&&4>n?n:4,t(!0);var i=Wx.transition;Wx.transition={};try{t(!1),e()}finally{Wt=n,Wx.transition=i}}function OP(){return Vr().memoizedState}function tO(t,e,n){var i=ia(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},BP(t))UP(e,n);else if(n=wP(t,e,n,i),n!==null){var r=Ti();rs(n,t,i,r),VP(n,e,i)}}function nO(t,e,n){var i=ia(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(BP(t))UP(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ls(a,o)){var l=e.interleaved;l===null?(r.next=r,uS(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=wP(t,e,r,i),n!==null&&(r=Ti(),rs(n,t,i,r),VP(n,e,i))}}function BP(t){var e=t.alternate;return t===pn||e!==null&&e===pn}function UP(t,e){qf=Og=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function VP(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Y_(t,n)}}var Bg={readContext:Ur,useCallback:ai,useContext:ai,useEffect:ai,useImperativeHandle:ai,useInsertionEffect:ai,useLayoutEffect:ai,useMemo:ai,useReducer:ai,useRef:ai,useState:ai,useDebugValue:ai,useDeferredValue:ai,useTransition:ai,useMutableSource:ai,useSyncExternalStore:ai,useId:ai,unstable_isNewReconciler:!1},iO={readContext:Ur,useCallback:function(t,e){return _s().memoizedState=[t,e===void 0?null:e],t},useContext:Ur,useEffect:I3,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Zm(4194308,4,IP.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Zm(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zm(4,2,t,e)},useMemo:function(t,e){var n=_s();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=_s();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=tO.bind(null,pn,t),[i.memoizedState,t]},useRef:function(t){var e=_s();return t={current:t},e.memoizedState=t},useState:R3,useDebugValue:xS,useDeferredValue:function(t){return _s().memoizedState=t},useTransition:function(){var t=R3(!1),e=t[0];return t=eO.bind(null,t[1]),_s().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=pn,r=_s();if(un){if(n===void 0)throw Error(Se(407));n=n()}else{if(n=e(),Jn===null)throw Error(Se(349));bl&30||TP(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,I3(kP.bind(null,i,s,t),[t]),i.flags|=2048,Md(9,EP.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=_s(),e=Jn.identifierPrefix;if(un){var n=Js,i=Zs;n=(i&~(1<<32-is(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Sd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=QN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},rO={readContext:Ur,useCallback:zP,useContext:Ur,useEffect:yS,useImperativeHandle:DP,useInsertionEffect:LP,useLayoutEffect:RP,useMemo:FP,useReducer:Gx,useRef:PP,useState:function(){return Gx(bd)},useDebugValue:xS,useDeferredValue:function(t){var e=Vr();return NP(e,Bn.memoizedState,t)},useTransition:function(){var t=Gx(bd)[0],e=Vr().memoizedState;return[t,e]},useMutableSource:bP,useSyncExternalStore:MP,useId:OP,unstable_isNewReconciler:!1},sO={readContext:Ur,useCallback:zP,useContext:Ur,useEffect:yS,useImperativeHandle:DP,useInsertionEffect:LP,useLayoutEffect:RP,useMemo:FP,useReducer:$x,useRef:PP,useState:function(){return $x(bd)},useDebugValue:xS,useDeferredValue:function(t){var e=Vr();return Bn===null?e.memoizedState=t:NP(e,Bn.memoizedState,t)},useTransition:function(){var t=$x(bd)[0],e=Vr().memoizedState;return[t,e]},useMutableSource:bP,useSyncExternalStore:MP,useId:OP,unstable_isNewReconciler:!1};function Qr(t,e){if(t&&t.defaultProps){e=mn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function K1(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:mn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var T0={isMounted:function(t){return(t=t._reactInternals)?zl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ti(),r=ia(t),s=no(i,r);s.payload=e,n!=null&&(s.callback=n),e=ta(t,s,r),e!==null&&(rs(e,t,r,i),qm(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ti(),r=ia(t),s=no(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ta(t,s,r),e!==null&&(rs(e,t,r,i),qm(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ti(),i=ia(t),r=no(n,i);r.tag=2,e!=null&&(r.callback=e),e=ta(t,r,i),e!==null&&(rs(e,t,i,n),qm(e,t,i))}};function D3(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!gd(n,i)||!gd(r,s):!0}function HP(t,e,n){var i=!1,r=ca,s=e.contextType;return typeof s=="object"&&s!==null?s=Ur(s):(r=Gi(e)?_l:mi.current,i=e.contextTypes,s=(i=i!=null)?hc(t,r):ca),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=T0,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function z3(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&T0.enqueueReplaceState(e,e.state,null)}function Q1(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},cS(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Ur(s):(s=Gi(e)?_l:mi.current,r.context=hc(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(K1(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&T0.enqueueReplaceState(r,r.state,null),Fg(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function yc(t,e){try{var n="",i=e;do n+=IF(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function jx(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ew(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var oO=typeof WeakMap=="function"?WeakMap:Map;function WP(t,e,n){n=no(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Vg||(Vg=!0,cw=i),ew(t,e)},n}function GP(t,e,n){n=no(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){ew(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ew(t,e),typeof i!="function"&&(na===null?na=new Set([this]):na.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function F3(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new oO;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=wO.bind(null,t,e,n),e.then(t,t))}function N3(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function O3(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=no(-1,1),e.tag=2,ta(n,e,1))),n.lanes|=1),t)}var aO=po.ReactCurrentOwner,Vi=!1;function Si(t,e,n,i){e.child=t===null?vP(e,null,n,i):mc(e,t.child,n,i)}function B3(t,e,n,i,r){n=n.render;var s=e.ref;return lc(e,r),i=mS(t,e,n,i,s,r),n=gS(),t!==null&&!Vi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,uo(t,e,r)):(un&&n&&iS(e),e.flags|=1,Si(t,e,i,r),e.child)}function U3(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!ES(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,$P(t,e,s,i,r)):(t=eg(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:gd,n(o,i)&&t.ref===e.ref)return uo(t,e,r)}return e.flags|=1,t=ra(s,i),t.ref=e.ref,t.return=e,e.child=t}function $P(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(gd(s,i)&&t.ref===e.ref)if(Vi=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Vi=!0);else return e.lanes=t.lanes,uo(t,e,r)}return tw(t,e,n,i,r)}function jP(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yt(Gu,ir),ir|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Yt(Gu,ir),ir|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Yt(Gu,ir),ir|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Yt(Gu,ir),ir|=i;return Si(t,e,r,n),e.child}function XP(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function tw(t,e,n,i,r){var s=Gi(n)?_l:mi.current;return s=hc(e,s),lc(e,r),n=mS(t,e,n,i,s,r),i=gS(),t!==null&&!Vi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,uo(t,e,r)):(un&&i&&iS(e),e.flags|=1,Si(t,e,n,r),e.child)}function V3(t,e,n,i,r){if(Gi(n)){var s=!0;Lg(e)}else s=!1;if(lc(e,r),e.stateNode===null)Jm(t,e),HP(e,n,i),Q1(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ur(u):(u=Gi(n)?_l:mi.current,u=hc(e,u));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&z3(e,o,i,u),Vo=!1;var p=e.memoizedState;o.state=p,Fg(e,i,o,r),l=e.memoizedState,a!==i||p!==l||Wi.current||Vo?(typeof f=="function"&&(K1(e,n,f,i),l=e.memoizedState),(a=Vo||D3(e,n,a,i,p,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,_P(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Qr(e.type,a),o.props=u,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ur(l):(l=Gi(n)?_l:mi.current,l=hc(e,l));var m=n.getDerivedStateFromProps;(f=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&z3(e,o,i,l),Vo=!1,p=e.memoizedState,o.state=p,Fg(e,i,o,r);var g=e.memoizedState;a!==d||p!==g||Wi.current||Vo?(typeof m=="function"&&(K1(e,n,m,i),g=e.memoizedState),(u=Vo||D3(e,n,u,i,p,g,l)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),o.props=i,o.state=g,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return nw(t,e,n,i,s,r)}function nw(t,e,n,i,r,s){XP(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&E3(e,n,!1),uo(t,e,s);i=e.stateNode,aO.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=mc(e,t.child,null,s),e.child=mc(e,null,a,s)):Si(t,e,a,s),e.memoizedState=i.state,r&&E3(e,n,!0),e.child}function qP(t){var e=t.stateNode;e.pendingContext?T3(t,e.pendingContext,e.pendingContext!==e.context):e.context&&T3(t,e.context,!1),fS(t,e.containerInfo)}function H3(t,e,n,i,r){return pc(),sS(r),e.flags|=256,Si(t,e,n,i),e.child}var iw={dehydrated:null,treeContext:null,retryLane:0};function rw(t){return{baseLanes:t,cachePool:null,transitions:null}}function YP(t,e,n){var i=e.pendingProps,r=fn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Yt(fn,r&1),t===null)return Z1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=C0(o,i,0,null),t=dl(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=rw(n),e.memoizedState=iw,t):vS(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return lO(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=ra(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=ra(a,s):(s=dl(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?rw(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=iw,i}return s=t.child,t=s.sibling,i=ra(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function vS(t,e){return e=C0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Up(t,e,n,i){return i!==null&&sS(i),mc(e,t.child,null,n),t=vS(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function lO(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=jx(Error(Se(422))),Up(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=C0({mode:"visible",children:i.children},r,0,null),s=dl(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&mc(e,t.child,null,o),e.child.memoizedState=rw(o),e.memoizedState=iw,s);if(!(e.mode&1))return Up(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Se(419)),i=jx(s,i,void 0),Up(t,e,o,i)}if(a=(o&t.childLanes)!==0,Vi||a){if(i=Jn,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,lo(t,r),rs(i,t,r,-1))}return TS(),i=jx(Error(Se(421))),Up(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=_O.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,rr=ea(r.nextSibling),sr=e,un=!0,ts=null,t!==null&&(Ir[Dr++]=Zs,Ir[Dr++]=Js,Ir[Dr++]=Sl,Zs=t.id,Js=t.overflow,Sl=e),e=vS(e,i.children),e.flags|=4096,e)}function W3(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),J1(t.return,e,n)}function Xx(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function ZP(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Si(t,e,i.children,n),i=fn.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&W3(t,n,e);else if(t.tag===19)W3(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Yt(fn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Ng(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Xx(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Ng(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Xx(e,!0,n,null,s);break;case"together":Xx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Jm(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function uo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ml|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Se(153));if(e.child!==null){for(t=e.child,n=ra(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ra(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function uO(t,e,n){switch(e.tag){case 3:qP(e),pc();break;case 5:SP(e);break;case 1:Gi(e.type)&&Lg(e);break;case 4:fS(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Yt(Dg,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Yt(fn,fn.current&1),e.flags|=128,null):n&e.child.childLanes?YP(t,e,n):(Yt(fn,fn.current&1),t=uo(t,e,n),t!==null?t.sibling:null);Yt(fn,fn.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return ZP(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Yt(fn,fn.current),i)break;return null;case 22:case 23:return e.lanes=0,jP(t,e,n)}return uo(t,e,n)}var JP,sw,KP,QP;JP=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sw=function(){};KP=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,rl(Es.current);var s=null;switch(n){case"input":r=k1(t,r),i=k1(t,i),s=[];break;case"select":r=mn({},r,{value:void 0}),i=mn({},i,{value:void 0}),s=[];break;case"textarea":r=P1(t,r),i=P1(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Ag)}R1(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ud.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ud.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Jt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};QP=function(t,e,n,i){n!==i&&(e.flags|=4)};function vf(t,e){if(!un)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function li(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function cO(t,e,n){var i=e.pendingProps;switch(rS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return li(e),null;case 1:return Gi(e.type)&&Pg(),li(e),null;case 3:return i=e.stateNode,gc(),nn(Wi),nn(mi),hS(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Op(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ts!==null&&(hw(ts),ts=null))),sw(t,e),li(e),null;case 5:dS(e);var r=rl(_d.current);if(n=e.type,t!==null&&e.stateNode!=null)KP(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Se(166));return li(e),null}if(t=rl(Es.current),Op(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Ms]=e,i[vd]=s,t=(e.mode&1)!==0,n){case"dialog":Jt("cancel",i),Jt("close",i);break;case"iframe":case"object":case"embed":Jt("load",i);break;case"video":case"audio":for(r=0;r<Of.length;r++)Jt(Of[r],i);break;case"source":Jt("error",i);break;case"img":case"image":case"link":Jt("error",i),Jt("load",i);break;case"details":Jt("toggle",i);break;case"input":K2(i,s),Jt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Jt("invalid",i);break;case"textarea":e3(i,s),Jt("invalid",i)}R1(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Np(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Np(i.textContent,a,t),r=["children",""+a]):ud.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Jt("scroll",i)}switch(n){case"input":Ap(i),Q2(i,s,!0);break;case"textarea":Ap(i),t3(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Ag)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=kA(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Ms]=e,t[vd]=i,JP(t,e,!1,!1),e.stateNode=t;e:{switch(o=I1(n,i),n){case"dialog":Jt("cancel",t),Jt("close",t),r=i;break;case"iframe":case"object":case"embed":Jt("load",t),r=i;break;case"video":case"audio":for(r=0;r<Of.length;r++)Jt(Of[r],t);r=i;break;case"source":Jt("error",t),r=i;break;case"img":case"image":case"link":Jt("error",t),Jt("load",t),r=i;break;case"details":Jt("toggle",t),r=i;break;case"input":K2(t,i),r=k1(t,i),Jt("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=mn({},i,{value:void 0}),Jt("invalid",t);break;case"textarea":e3(t,i),r=P1(t,i),Jt("invalid",t);break;default:r=i}R1(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?PA(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&CA(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&cd(t,l):typeof l=="number"&&cd(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ud.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Jt("scroll",t):l!=null&&W_(t,s,l,o))}switch(n){case"input":Ap(t),Q2(t,i,!1);break;case"textarea":Ap(t),t3(t);break;case"option":i.value!=null&&t.setAttribute("value",""+ua(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?rc(t,!!i.multiple,s,!1):i.defaultValue!=null&&rc(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Ag)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return li(e),null;case 6:if(t&&e.stateNode!=null)QP(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Se(166));if(n=rl(_d.current),rl(Es.current),Op(e)){if(i=e.stateNode,n=e.memoizedProps,i[Ms]=e,(s=i.nodeValue!==n)&&(t=sr,t!==null))switch(t.tag){case 3:Np(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Np(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Ms]=e,e.stateNode=i}return li(e),null;case 13:if(nn(fn),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(un&&rr!==null&&e.mode&1&&!(e.flags&128))yP(),pc(),e.flags|=98560,s=!1;else if(s=Op(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(Se(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Se(317));s[Ms]=e}else pc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;li(e),s=!1}else ts!==null&&(hw(ts),ts=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||fn.current&1?Un===0&&(Un=3):TS())),e.updateQueue!==null&&(e.flags|=4),li(e),null);case 4:return gc(),sw(t,e),t===null&&yd(e.stateNode.containerInfo),li(e),null;case 10:return lS(e.type._context),li(e),null;case 17:return Gi(e.type)&&Pg(),li(e),null;case 19:if(nn(fn),s=e.memoizedState,s===null)return li(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)vf(s,!1);else{if(Un!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ng(t),o!==null){for(e.flags|=128,vf(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Yt(fn,fn.current&1|2),e.child}t=t.sibling}s.tail!==null&&bn()>xc&&(e.flags|=128,i=!0,vf(s,!1),e.lanes=4194304)}else{if(!i)if(t=Ng(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),vf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!un)return li(e),null}else 2*bn()-s.renderingStartTime>xc&&n!==1073741824&&(e.flags|=128,i=!0,vf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=bn(),e.sibling=null,n=fn.current,Yt(fn,i?n&1|2:n&1),e):(li(e),null);case 22:case 23:return MS(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?ir&1073741824&&(li(e),e.subtreeFlags&6&&(e.flags|=8192)):li(e),null;case 24:return null;case 25:return null}throw Error(Se(156,e.tag))}function fO(t,e){switch(rS(e),e.tag){case 1:return Gi(e.type)&&Pg(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return gc(),nn(Wi),nn(mi),hS(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return dS(e),null;case 13:if(nn(fn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Se(340));pc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return nn(fn),null;case 4:return gc(),null;case 10:return lS(e.type._context),null;case 22:case 23:return MS(),null;case 24:return null;default:return null}}var Vp=!1,di=!1,dO=typeof WeakSet=="function"?WeakSet:Set,je=null;function Wu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){xn(t,e,i)}else n.current=null}function ow(t,e,n){try{n()}catch(i){xn(t,e,i)}}var G3=!1;function hO(t,e){if(W1=Eg,t=rP(),nS(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,f=0,d=t,p=null;t:for(;;){for(var m;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===t)break t;if(p===n&&++u===r&&(a=o),p===s&&++f===i&&(l=o),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(G1={focusedElem:t,selectionRange:n},Eg=!1,je=e;je!==null;)if(e=je,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,je=t;else for(;je!==null;){e=je;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,w=g.memoizedState,v=e.stateNode,_=v.getSnapshotBeforeUpdate(e.elementType===e.type?y:Qr(e.type,y),w);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Se(163))}}catch(M){xn(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,je=t;break}je=e.return}return g=G3,G3=!1,g}function Yf(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&ow(e,n,s)}r=r.next}while(r!==i)}}function E0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function aw(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function eL(t){var e=t.alternate;e!==null&&(t.alternate=null,eL(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ms],delete e[vd],delete e[X1],delete e[YN],delete e[ZN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tL(t){return t.tag===5||t.tag===3||t.tag===4}function $3(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tL(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function lw(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ag));else if(i!==4&&(t=t.child,t!==null))for(lw(t,e,n),t=t.sibling;t!==null;)lw(t,e,n),t=t.sibling}function uw(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(uw(t,e,n),t=t.sibling;t!==null;)uw(t,e,n),t=t.sibling}var Qn=null,es=!1;function Co(t,e,n){for(n=n.child;n!==null;)nL(t,e,n),n=n.sibling}function nL(t,e,n){if(Ts&&typeof Ts.onCommitFiberUnmount=="function")try{Ts.onCommitFiberUnmount(x0,n)}catch{}switch(n.tag){case 5:di||Wu(n,e);case 6:var i=Qn,r=es;Qn=null,Co(t,e,n),Qn=i,es=r,Qn!==null&&(es?(t=Qn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Qn.removeChild(n.stateNode));break;case 18:Qn!==null&&(es?(t=Qn,n=n.stateNode,t.nodeType===8?Ux(t.parentNode,n):t.nodeType===1&&Ux(t,n),pd(t)):Ux(Qn,n.stateNode));break;case 4:i=Qn,r=es,Qn=n.stateNode.containerInfo,es=!0,Co(t,e,n),Qn=i,es=r;break;case 0:case 11:case 14:case 15:if(!di&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ow(n,e,o),r=r.next}while(r!==i)}Co(t,e,n);break;case 1:if(!di&&(Wu(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){xn(n,e,a)}Co(t,e,n);break;case 21:Co(t,e,n);break;case 22:n.mode&1?(di=(i=di)||n.memoizedState!==null,Co(t,e,n),di=i):Co(t,e,n);break;default:Co(t,e,n)}}function j3(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new dO),e.forEach(function(i){var r=SO.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function qr(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Qn=a.stateNode,es=!1;break e;case 3:Qn=a.stateNode.containerInfo,es=!0;break e;case 4:Qn=a.stateNode.containerInfo,es=!0;break e}a=a.return}if(Qn===null)throw Error(Se(160));nL(s,o,r),Qn=null,es=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){xn(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)iL(e,t),e=e.sibling}function iL(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qr(e,t),ws(t),i&4){try{Yf(3,t,t.return),E0(3,t)}catch(y){xn(t,t.return,y)}try{Yf(5,t,t.return)}catch(y){xn(t,t.return,y)}}break;case 1:qr(e,t),ws(t),i&512&&n!==null&&Wu(n,n.return);break;case 5:if(qr(e,t),ws(t),i&512&&n!==null&&Wu(n,n.return),t.flags&32){var r=t.stateNode;try{cd(r,"")}catch(y){xn(t,t.return,y)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&TA(r,s),I1(a,o);var u=I1(a,s);for(o=0;o<l.length;o+=2){var f=l[o],d=l[o+1];f==="style"?PA(r,d):f==="dangerouslySetInnerHTML"?CA(r,d):f==="children"?cd(r,d):W_(r,f,d,u)}switch(a){case"input":C1(r,s);break;case"textarea":EA(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?rc(r,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?rc(r,!!s.multiple,s.defaultValue,!0):rc(r,!!s.multiple,s.multiple?[]:"",!1))}r[vd]=s}catch(y){xn(t,t.return,y)}}break;case 6:if(qr(e,t),ws(t),i&4){if(t.stateNode===null)throw Error(Se(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(y){xn(t,t.return,y)}}break;case 3:if(qr(e,t),ws(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{pd(e.containerInfo)}catch(y){xn(t,t.return,y)}break;case 4:qr(e,t),ws(t);break;case 13:qr(e,t),ws(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(SS=bn())),i&4&&j3(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(di=(u=di)||f,qr(e,t),di=u):qr(e,t),ws(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!f&&t.mode&1)for(je=t,f=t.child;f!==null;){for(d=je=f;je!==null;){switch(p=je,m=p.child,p.tag){case 0:case 11:case 14:case 15:Yf(4,p,p.return);break;case 1:Wu(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){i=p,n=p.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){xn(i,n,y)}}break;case 5:Wu(p,p.return);break;case 22:if(p.memoizedState!==null){q3(d);continue}}m!==null?(m.return=p,je=m):q3(d)}f=f.sibling}e:for(f=null,d=t;;){if(d.tag===5){if(f===null){f=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=AA("display",o))}catch(y){xn(t,t.return,y)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){xn(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:qr(e,t),ws(t),i&4&&j3(t);break;case 21:break;default:qr(e,t),ws(t)}}function ws(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(tL(n)){var i=n;break e}n=n.return}throw Error(Se(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(cd(r,""),i.flags&=-33);var s=$3(t);uw(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=$3(t);lw(t,a,o);break;default:throw Error(Se(161))}}catch(l){xn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function pO(t,e,n){je=t,rL(t)}function rL(t,e,n){for(var i=(t.mode&1)!==0;je!==null;){var r=je,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Vp;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||di;a=Vp;var u=di;if(Vp=o,(di=l)&&!u)for(je=r;je!==null;)o=je,l=o.child,o.tag===22&&o.memoizedState!==null?Y3(r):l!==null?(l.return=o,je=l):Y3(r);for(;s!==null;)je=s,rL(s),s=s.sibling;je=r,Vp=a,di=u}X3(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,je=s):X3(t)}}function X3(t){for(;je!==null;){var e=je;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:di||E0(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!di)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Qr(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&L3(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}L3(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&pd(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Se(163))}di||e.flags&512&&aw(e)}catch(p){xn(e,e.return,p)}}if(e===t){je=null;break}if(n=e.sibling,n!==null){n.return=e.return,je=n;break}je=e.return}}function q3(t){for(;je!==null;){var e=je;if(e===t){je=null;break}var n=e.sibling;if(n!==null){n.return=e.return,je=n;break}je=e.return}}function Y3(t){for(;je!==null;){var e=je;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{E0(4,e)}catch(l){xn(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){xn(e,r,l)}}var s=e.return;try{aw(e)}catch(l){xn(e,s,l)}break;case 5:var o=e.return;try{aw(e)}catch(l){xn(e,o,l)}}}catch(l){xn(e,e.return,l)}if(e===t){je=null;break}var a=e.sibling;if(a!==null){a.return=e.return,je=a;break}je=e.return}}var mO=Math.ceil,Ug=po.ReactCurrentDispatcher,wS=po.ReactCurrentOwner,Br=po.ReactCurrentBatchConfig,Rt=0,Jn=null,zn=null,ei=0,ir=0,Gu=va(0),Un=0,Td=null,Ml=0,k0=0,_S=0,Zf=null,Ui=null,SS=0,xc=1/0,js=null,Vg=!1,cw=null,na=null,Hp=!1,qo=null,Hg=0,Jf=0,fw=null,Km=-1,Qm=0;function Ti(){return Rt&6?bn():Km!==-1?Km:Km=bn()}function ia(t){return t.mode&1?Rt&2&&ei!==0?ei&-ei:KN.transition!==null?(Qm===0&&(Qm=HA()),Qm):(t=Wt,t!==0||(t=window.event,t=t===void 0?16:YA(t.type)),t):1}function rs(t,e,n,i){if(50<Jf)throw Jf=0,fw=null,Error(Se(185));Kd(t,n,i),(!(Rt&2)||t!==Jn)&&(t===Jn&&(!(Rt&2)&&(k0|=n),Un===4&&$o(t,ei)),$i(t,i),n===1&&Rt===0&&!(e.mode&1)&&(xc=bn()+500,b0&&wa()))}function $i(t,e){var n=t.callbackNode;KF(t,e);var i=Tg(t,t===Jn?ei:0);if(i===0)n!==null&&r3(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&r3(n),e===1)t.tag===0?JN(Z3.bind(null,t)):pP(Z3.bind(null,t)),XN(function(){!(Rt&6)&&wa()}),n=null;else{switch(WA(i)){case 1:n=q_;break;case 4:n=UA;break;case 16:n=Mg;break;case 536870912:n=VA;break;default:n=Mg}n=dL(n,sL.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sL(t,e){if(Km=-1,Qm=0,Rt&6)throw Error(Se(327));var n=t.callbackNode;if(uc()&&t.callbackNode!==n)return null;var i=Tg(t,t===Jn?ei:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Wg(t,i);else{e=i;var r=Rt;Rt|=2;var s=aL();(Jn!==t||ei!==e)&&(js=null,xc=bn()+500,fl(t,e));do try{xO();break}catch(a){oL(t,a)}while(1);aS(),Ug.current=s,Rt=r,zn!==null?e=0:(Jn=null,ei=0,e=Un)}if(e!==0){if(e===2&&(r=O1(t),r!==0&&(i=r,e=dw(t,r))),e===1)throw n=Td,fl(t,0),$o(t,i),$i(t,bn()),n;if(e===6)$o(t,i);else{if(r=t.current.alternate,!(i&30)&&!gO(r)&&(e=Wg(t,i),e===2&&(s=O1(t),s!==0&&(i=s,e=dw(t,s))),e===1))throw n=Td,fl(t,0),$o(t,i),$i(t,bn()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(Se(345));case 2:Xa(t,Ui,js);break;case 3:if($o(t,i),(i&130023424)===i&&(e=SS+500-bn(),10<e)){if(Tg(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Ti(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=j1(Xa.bind(null,t,Ui,js),e);break}Xa(t,Ui,js);break;case 4:if($o(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-is(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=bn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*mO(i/1960))-i,10<i){t.timeoutHandle=j1(Xa.bind(null,t,Ui,js),i);break}Xa(t,Ui,js);break;case 5:Xa(t,Ui,js);break;default:throw Error(Se(329))}}}return $i(t,bn()),t.callbackNode===n?sL.bind(null,t):null}function dw(t,e){var n=Zf;return t.current.memoizedState.isDehydrated&&(fl(t,e).flags|=256),t=Wg(t,e),t!==2&&(e=Ui,Ui=n,e!==null&&hw(e)),t}function hw(t){Ui===null?Ui=t:Ui.push.apply(Ui,t)}function gO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ls(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function $o(t,e){for(e&=~_S,e&=~k0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-is(e),i=1<<n;t[n]=-1,e&=~i}}function Z3(t){if(Rt&6)throw Error(Se(327));uc();var e=Tg(t,0);if(!(e&1))return $i(t,bn()),null;var n=Wg(t,e);if(t.tag!==0&&n===2){var i=O1(t);i!==0&&(e=i,n=dw(t,i))}if(n===1)throw n=Td,fl(t,0),$o(t,e),$i(t,bn()),n;if(n===6)throw Error(Se(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Xa(t,Ui,js),$i(t,bn()),null}function bS(t,e){var n=Rt;Rt|=1;try{return t(e)}finally{Rt=n,Rt===0&&(xc=bn()+500,b0&&wa())}}function Tl(t){qo!==null&&qo.tag===0&&!(Rt&6)&&uc();var e=Rt;Rt|=1;var n=Br.transition,i=Wt;try{if(Br.transition=null,Wt=1,t)return t()}finally{Wt=i,Br.transition=n,Rt=e,!(Rt&6)&&wa()}}function MS(){ir=Gu.current,nn(Gu)}function fl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,jN(n)),zn!==null)for(n=zn.return;n!==null;){var i=n;switch(rS(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Pg();break;case 3:gc(),nn(Wi),nn(mi),hS();break;case 5:dS(i);break;case 4:gc();break;case 13:nn(fn);break;case 19:nn(fn);break;case 10:lS(i.type._context);break;case 22:case 23:MS()}n=n.return}if(Jn=t,zn=t=ra(t.current,null),ei=ir=e,Un=0,Td=null,_S=k0=Ml=0,Ui=Zf=null,il!==null){for(e=0;e<il.length;e++)if(n=il[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}il=null}return t}function oL(t,e){do{var n=zn;try{if(aS(),Ym.current=Bg,Og){for(var i=pn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Og=!1}if(bl=0,Xn=Bn=pn=null,qf=!1,Sd=0,wS.current=null,n===null||n.return===null){Un=1,Td=e,zn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=ei,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,f=a,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=N3(o);if(m!==null){m.flags&=-257,O3(m,o,a,s,e),m.mode&1&&F3(s,u,e),e=m,l=u;var g=e.updateQueue;if(g===null){var y=new Set;y.add(l),e.updateQueue=y}else g.add(l);break e}else{if(!(e&1)){F3(s,u,e),TS();break e}l=Error(Se(426))}}else if(un&&a.mode&1){var w=N3(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),O3(w,o,a,s,e),sS(yc(l,a));break e}}s=l=yc(l,a),Un!==4&&(Un=2),Zf===null?Zf=[s]:Zf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=WP(s,l,e);P3(s,v);break e;case 1:a=l;var _=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(na===null||!na.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=GP(s,a,e);P3(s,M);break e}}s=s.return}while(s!==null)}uL(n)}catch(k){e=k,zn===n&&n!==null&&(zn=n=n.return);continue}break}while(1)}function aL(){var t=Ug.current;return Ug.current=Bg,t===null?Bg:t}function TS(){(Un===0||Un===3||Un===2)&&(Un=4),Jn===null||!(Ml&268435455)&&!(k0&268435455)||$o(Jn,ei)}function Wg(t,e){var n=Rt;Rt|=2;var i=aL();(Jn!==t||ei!==e)&&(js=null,fl(t,e));do try{yO();break}catch(r){oL(t,r)}while(1);if(aS(),Rt=n,Ug.current=i,zn!==null)throw Error(Se(261));return Jn=null,ei=0,Un}function yO(){for(;zn!==null;)lL(zn)}function xO(){for(;zn!==null&&!WF();)lL(zn)}function lL(t){var e=fL(t.alternate,t,ir);t.memoizedProps=t.pendingProps,e===null?uL(t):zn=e,wS.current=null}function uL(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=fO(n,e),n!==null){n.flags&=32767,zn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Un=6,zn=null;return}}else if(n=cO(n,e,ir),n!==null){zn=n;return}if(e=e.sibling,e!==null){zn=e;return}zn=e=t}while(e!==null);Un===0&&(Un=5)}function Xa(t,e,n){var i=Wt,r=Br.transition;try{Br.transition=null,Wt=1,vO(t,e,n,i)}finally{Br.transition=r,Wt=i}return null}function vO(t,e,n,i){do uc();while(qo!==null);if(Rt&6)throw Error(Se(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Se(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(QF(t,s),t===Jn&&(zn=Jn=null,ei=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Hp||(Hp=!0,dL(Mg,function(){return uc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Br.transition,Br.transition=null;var o=Wt;Wt=1;var a=Rt;Rt|=4,wS.current=null,hO(t,n),iL(n,t),BN(G1),Eg=!!W1,G1=W1=null,t.current=n,pO(n),GF(),Rt=a,Wt=o,Br.transition=s}else t.current=n;if(Hp&&(Hp=!1,qo=t,Hg=r),s=t.pendingLanes,s===0&&(na=null),XF(n.stateNode),$i(t,bn()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Vg)throw Vg=!1,t=cw,cw=null,t;return Hg&1&&t.tag!==0&&uc(),s=t.pendingLanes,s&1?t===fw?Jf++:(Jf=0,fw=t):Jf=0,wa(),null}function uc(){if(qo!==null){var t=WA(Hg),e=Br.transition,n=Wt;try{if(Br.transition=null,Wt=16>t?16:t,qo===null)var i=!1;else{if(t=qo,qo=null,Hg=0,Rt&6)throw Error(Se(331));var r=Rt;for(Rt|=4,je=t.current;je!==null;){var s=je,o=s.child;if(je.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(je=u;je!==null;){var f=je;switch(f.tag){case 0:case 11:case 15:Yf(8,f,s)}var d=f.child;if(d!==null)d.return=f,je=d;else for(;je!==null;){f=je;var p=f.sibling,m=f.return;if(eL(f),f===u){je=null;break}if(p!==null){p.return=m,je=p;break}je=m}}}var g=s.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}je=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,je=o;else e:for(;je!==null;){if(s=je,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Yf(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,je=v;break e}je=s.return}}var _=t.current;for(je=_;je!==null;){o=je;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,je=b;else e:for(o=_;je!==null;){if(a=je,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:E0(9,a)}}catch(k){xn(a,a.return,k)}if(a===o){je=null;break e}var M=a.sibling;if(M!==null){M.return=a.return,je=M;break e}je=a.return}}if(Rt=r,wa(),Ts&&typeof Ts.onPostCommitFiberRoot=="function")try{Ts.onPostCommitFiberRoot(x0,t)}catch{}i=!0}return i}finally{Wt=n,Br.transition=e}}return!1}function J3(t,e,n){e=yc(n,e),e=WP(t,e,1),t=ta(t,e,1),e=Ti(),t!==null&&(Kd(t,1,e),$i(t,e))}function xn(t,e,n){if(t.tag===3)J3(t,t,n);else for(;e!==null;){if(e.tag===3){J3(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(na===null||!na.has(i))){t=yc(n,t),t=GP(e,t,1),e=ta(e,t,1),t=Ti(),e!==null&&(Kd(e,1,t),$i(e,t));break}}e=e.return}}function wO(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Ti(),t.pingedLanes|=t.suspendedLanes&n,Jn===t&&(ei&n)===n&&(Un===4||Un===3&&(ei&130023424)===ei&&500>bn()-SS?fl(t,0):_S|=n),$i(t,e)}function cL(t,e){e===0&&(t.mode&1?(e=Rp,Rp<<=1,!(Rp&130023424)&&(Rp=4194304)):e=1);var n=Ti();t=lo(t,e),t!==null&&(Kd(t,e,n),$i(t,n))}function _O(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cL(t,n)}function SO(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Se(314))}i!==null&&i.delete(e),cL(t,n)}var fL;fL=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Wi.current)Vi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Vi=!1,uO(t,e,n);Vi=!!(t.flags&131072)}else Vi=!1,un&&e.flags&1048576&&mP(e,Ig,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Jm(t,e),t=e.pendingProps;var r=hc(e,mi.current);lc(e,n),r=mS(null,e,i,t,r,n);var s=gS();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Gi(i)?(s=!0,Lg(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,cS(e),r.updater=T0,e.stateNode=r,r._reactInternals=e,Q1(e,i,t,n),e=nw(null,e,i,!0,s,n)):(e.tag=0,un&&s&&iS(e),Si(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Jm(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=MO(i),t=Qr(i,t),r){case 0:e=tw(null,e,i,t,n);break e;case 1:e=V3(null,e,i,t,n);break e;case 11:e=B3(null,e,i,t,n);break e;case 14:e=U3(null,e,i,Qr(i.type,t),n);break e}throw Error(Se(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Qr(i,r),tw(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Qr(i,r),V3(t,e,i,r,n);case 3:e:{if(qP(e),t===null)throw Error(Se(387));i=e.pendingProps,s=e.memoizedState,r=s.element,_P(t,e),Fg(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=yc(Error(Se(423)),e),e=H3(t,e,i,n,r);break e}else if(i!==r){r=yc(Error(Se(424)),e),e=H3(t,e,i,n,r);break e}else for(rr=ea(e.stateNode.containerInfo.firstChild),sr=e,un=!0,ts=null,n=vP(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(pc(),i===r){e=uo(t,e,n);break e}Si(t,e,i,n)}e=e.child}return e;case 5:return SP(e),t===null&&Z1(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,$1(i,r)?o=null:s!==null&&$1(i,s)&&(e.flags|=32),XP(t,e),Si(t,e,o,n),e.child;case 6:return t===null&&Z1(e),null;case 13:return YP(t,e,n);case 4:return fS(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=mc(e,null,i,n):Si(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Qr(i,r),B3(t,e,i,r,n);case 7:return Si(t,e,e.pendingProps,n),e.child;case 8:return Si(t,e,e.pendingProps.children,n),e.child;case 12:return Si(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Yt(Dg,i._currentValue),i._currentValue=o,s!==null)if(ls(s.value,o)){if(s.children===r.children&&!Wi.current){e=uo(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=no(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?l.next=l:(l.next=f.next,f.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),J1(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Se(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),J1(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Si(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,lc(e,n),r=Ur(r),i=i(r),e.flags|=1,Si(t,e,i,n),e.child;case 14:return i=e.type,r=Qr(i,e.pendingProps),r=Qr(i.type,r),U3(t,e,i,r,n);case 15:return $P(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Qr(i,r),Jm(t,e),e.tag=1,Gi(i)?(t=!0,Lg(e)):t=!1,lc(e,n),HP(e,i,r),Q1(e,i,r,n),nw(null,e,i,!0,t,n);case 19:return ZP(t,e,n);case 22:return jP(t,e,n)}throw Error(Se(156,e.tag))};function dL(t,e){return BA(t,e)}function bO(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nr(t,e,n,i){return new bO(t,e,n,i)}function ES(t){return t=t.prototype,!(!t||!t.isReactComponent)}function MO(t){if(typeof t=="function")return ES(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$_)return 11;if(t===j_)return 14}return 2}function ra(t,e){var n=t.alternate;return n===null?(n=Nr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function eg(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")ES(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Du:return dl(n.children,r,s,e);case G_:o=8,r|=8;break;case b1:return t=Nr(12,n,e,r|2),t.elementType=b1,t.lanes=s,t;case M1:return t=Nr(13,n,e,r),t.elementType=M1,t.lanes=s,t;case T1:return t=Nr(19,n,e,r),t.elementType=T1,t.lanes=s,t;case SA:return C0(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case wA:o=10;break e;case _A:o=9;break e;case $_:o=11;break e;case j_:o=14;break e;case Uo:o=16,i=null;break e}throw Error(Se(130,t==null?t:typeof t,""))}return e=Nr(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function dl(t,e,n,i){return t=Nr(7,t,i,e),t.lanes=n,t}function C0(t,e,n,i){return t=Nr(22,t,i,e),t.elementType=SA,t.lanes=n,t.stateNode={isHidden:!1},t}function qx(t,e,n){return t=Nr(6,t,null,e),t.lanes=n,t}function Yx(t,e,n){return e=Nr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function TO(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ax(0),this.expirationTimes=Ax(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ax(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function kS(t,e,n,i,r,s,o,a,l){return t=new TO(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Nr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},cS(s),t}function EO(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Iu,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function hL(t){if(!t)return ca;t=t._reactInternals;e:{if(zl(t)!==t||t.tag!==1)throw Error(Se(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Gi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Se(171))}if(t.tag===1){var n=t.type;if(Gi(n))return hP(t,n,e)}return e}function pL(t,e,n,i,r,s,o,a,l){return t=kS(n,i,!0,t,r,s,o,a,l),t.context=hL(null),n=t.current,i=Ti(),r=ia(n),s=no(i,r),s.callback=e??null,ta(n,s,r),t.current.lanes=r,Kd(t,r,i),$i(t,i),t}function A0(t,e,n,i){var r=e.current,s=Ti(),o=ia(r);return n=hL(n),e.context===null?e.context=n:e.pendingContext=n,e=no(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ta(r,e,o),t!==null&&(rs(t,r,o,s),qm(t,r,o)),o}function Gg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function K3(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function CS(t,e){K3(t,e),(t=t.alternate)&&K3(t,e)}function kO(){return null}var mL=typeof reportError=="function"?reportError:function(t){console.error(t)};function AS(t){this._internalRoot=t}P0.prototype.render=AS.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Se(409));A0(t,e,null,null)};P0.prototype.unmount=AS.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Tl(function(){A0(null,t,null,null)}),e[ao]=null}};function P0(t){this._internalRoot=t}P0.prototype.unstable_scheduleHydration=function(t){if(t){var e=jA();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Go.length&&e!==0&&e<Go[n].priority;n++);Go.splice(n,0,t),n===0&&qA(t)}};function PS(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function L0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Q3(){}function CO(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=Gg(o);s.call(u)}}var o=pL(e,i,t,0,null,!1,!1,"",Q3);return t._reactRootContainer=o,t[ao]=o.current,yd(t.nodeType===8?t.parentNode:t),Tl(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=Gg(l);a.call(u)}}var l=kS(t,0,!1,null,null,!1,!1,"",Q3);return t._reactRootContainer=l,t[ao]=l.current,yd(t.nodeType===8?t.parentNode:t),Tl(function(){A0(e,l,n,i)}),l}function R0(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Gg(o);a.call(l)}}A0(e,o,t,r)}else o=CO(n,e,t,r,i);return Gg(o)}GA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Nf(e.pendingLanes);n!==0&&(Y_(e,n|1),$i(e,bn()),!(Rt&6)&&(xc=bn()+500,wa()))}break;case 13:Tl(function(){var i=lo(t,1);if(i!==null){var r=Ti();rs(i,t,1,r)}}),CS(t,1)}};Z_=function(t){if(t.tag===13){var e=lo(t,134217728);if(e!==null){var n=Ti();rs(e,t,134217728,n)}CS(t,134217728)}};$A=function(t){if(t.tag===13){var e=ia(t),n=lo(t,e);if(n!==null){var i=Ti();rs(n,t,e,i)}CS(t,e)}};jA=function(){return Wt};XA=function(t,e){var n=Wt;try{return Wt=t,e()}finally{Wt=n}};z1=function(t,e,n){switch(e){case"input":if(C1(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=S0(i);if(!r)throw Error(Se(90));MA(i),C1(i,r)}}}break;case"textarea":EA(t,n);break;case"select":e=n.value,e!=null&&rc(t,!!n.multiple,e,!1)}};IA=bS;DA=Tl;var AO={usingClientEntryPoint:!1,Events:[eh,Ou,S0,LA,RA,bS]},wf={findFiberByHostInstance:nl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PO={bundleType:wf.bundleType,version:wf.version,rendererPackageName:wf.rendererPackageName,rendererConfig:wf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:po.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=NA(t),t===null?null:t.stateNode},findFiberByHostInstance:wf.findFiberByHostInstance||kO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wp.isDisabled&&Wp.supportsFiber)try{x0=Wp.inject(PO),Ts=Wp}catch{}}cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AO;cr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!PS(e))throw Error(Se(200));return EO(t,e,null,n)};cr.createRoot=function(t,e){if(!PS(t))throw Error(Se(299));var n=!1,i="",r=mL;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=kS(t,1,!1,null,null,n,!1,i,r),t[ao]=e.current,yd(t.nodeType===8?t.parentNode:t),new AS(e)};cr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Se(188)):(t=Object.keys(t).join(","),Error(Se(268,t)));return t=NA(e),t=t===null?null:t.stateNode,t};cr.flushSync=function(t){return Tl(t)};cr.hydrate=function(t,e,n){if(!L0(e))throw Error(Se(200));return R0(null,t,e,!0,n)};cr.hydrateRoot=function(t,e,n){if(!PS(t))throw Error(Se(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=mL;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=pL(e,null,t,1,n??null,r,!1,s,o),t[ao]=e.current,yd(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new P0(e)};cr.render=function(t,e,n){if(!L0(e))throw Error(Se(200));return R0(null,t,e,!1,n)};cr.unmountComponentAtNode=function(t){if(!L0(t))throw Error(Se(40));return t._reactRootContainer?(Tl(function(){R0(null,null,t,!1,function(){t._reactRootContainer=null,t[ao]=null})}),!0):!1};cr.unstable_batchedUpdates=bS;cr.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!L0(n))throw Error(Se(200));if(t==null||t._reactInternals===void 0)throw Error(Se(38));return R0(t,e,n,!1,i)};cr.version="18.3.1-next-f1338f8080-20240426";function gL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gL)}catch(t){console.error(t)}}gL(),gA.exports=cr;var LO=gA.exports,eT=LO;_1.createRoot=eT.createRoot,_1.hydrateRoot=eT.hydrateRoot;var hi=function(){return hi=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},hi.apply(this,arguments)};function Ed(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var Kt="-ms-",Kf="-moz-",Ut="-webkit-",yL="comm",I0="rule",LS="decl",RO="@import",xL="@keyframes",IO="@layer",vL=Math.abs,RS=String.fromCharCode,pw=Object.assign;function DO(t,e){return qn(t,0)^45?(((e<<2^qn(t,0))<<2^qn(t,1))<<2^qn(t,2))<<2^qn(t,3):0}function wL(t){return t.trim()}function Xs(t,e){return(t=e.exec(t))?t[0]:t}function gt(t,e,n){return t.replace(e,n)}function tg(t,e,n){return t.indexOf(e,n)}function qn(t,e){return t.charCodeAt(e)|0}function vc(t,e,n){return t.slice(e,n)}function bs(t){return t.length}function _L(t){return t.length}function Bf(t,e){return e.push(t),t}function zO(t,e){return t.map(e).join("")}function tT(t,e){return t.filter(function(n){return!Xs(n,e)})}var D0=1,wc=1,SL=0,Hr=0,In=0,Fc="";function z0(t,e,n,i,r,s,o,a){return{value:t,root:e,parent:n,type:i,props:r,children:s,line:D0,column:wc,length:o,return:"",siblings:a}}function Oo(t,e){return pw(z0("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},e)}function au(t){for(;t.root;)t=Oo(t.root,{children:[t]});Bf(t,t.siblings)}function FO(){return In}function NO(){return In=Hr>0?qn(Fc,--Hr):0,wc--,In===10&&(wc=1,D0--),In}function ss(){return In=Hr<SL?qn(Fc,Hr++):0,wc++,In===10&&(wc=1,D0++),In}function hl(){return qn(Fc,Hr)}function ng(){return Hr}function F0(t,e){return vc(Fc,t,e)}function mw(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function OO(t){return D0=wc=1,SL=bs(Fc=t),Hr=0,[]}function BO(t){return Fc="",t}function Zx(t){return wL(F0(Hr-1,gw(t===91?t+2:t===40?t+1:t)))}function UO(t){for(;(In=hl())&&In<33;)ss();return mw(t)>2||mw(In)>3?"":" "}function VO(t,e){for(;--e&&ss()&&!(In<48||In>102||In>57&&In<65||In>70&&In<97););return F0(t,ng()+(e<6&&hl()==32&&ss()==32))}function gw(t){for(;ss();)switch(In){case t:return Hr;case 34:case 39:t!==34&&t!==39&&gw(In);break;case 40:t===41&&gw(t);break;case 92:ss();break}return Hr}function HO(t,e){for(;ss()&&t+In!==47+10;)if(t+In===42+42&&hl()===47)break;return"/*"+F0(e,Hr-1)+"*"+RS(t===47?t:ss())}function WO(t){for(;!mw(hl());)ss();return F0(t,Hr)}function GO(t){return BO(ig("",null,null,null,[""],t=OO(t),0,[0],t))}function ig(t,e,n,i,r,s,o,a,l){for(var u=0,f=0,d=o,p=0,m=0,g=0,y=1,w=1,v=1,_=0,b="",M=r,k=s,E=i,I=b;w;)switch(g=_,_=ss()){case 40:if(g!=108&&qn(I,d-1)==58){tg(I+=gt(Zx(_),"&","&\f"),"&\f",vL(u?a[u-1]:0))!=-1&&(v=-1);break}case 34:case 39:case 91:I+=Zx(_);break;case 9:case 10:case 13:case 32:I+=UO(g);break;case 92:I+=VO(ng()-1,7);continue;case 47:switch(hl()){case 42:case 47:Bf($O(HO(ss(),ng()),e,n,l),l);break;default:I+="/"}break;case 123*y:a[u++]=bs(I)*v;case 125*y:case 59:case 0:switch(_){case 0:case 125:w=0;case 59+f:v==-1&&(I=gt(I,/\f/g,"")),m>0&&bs(I)-d&&Bf(m>32?iT(I+";",i,n,d-1,l):iT(gt(I," ","")+";",i,n,d-2,l),l);break;case 59:I+=";";default:if(Bf(E=nT(I,e,n,u,f,r,a,b,M=[],k=[],d,s),s),_===123)if(f===0)ig(I,e,E,E,M,s,d,a,k);else switch(p===99&&qn(I,3)===110?100:p){case 100:case 108:case 109:case 115:ig(t,E,E,i&&Bf(nT(t,E,E,0,0,r,a,b,r,M=[],d,k),k),r,k,d,a,i?M:k);break;default:ig(I,E,E,E,[""],k,0,a,k)}}u=f=m=0,y=v=1,b=I="",d=o;break;case 58:d=1+bs(I),m=g;default:if(y<1){if(_==123)--y;else if(_==125&&y++==0&&NO()==125)continue}switch(I+=RS(_),_*y){case 38:v=f>0?1:(I+="\f",-1);break;case 44:a[u++]=(bs(I)-1)*v,v=1;break;case 64:hl()===45&&(I+=Zx(ss())),p=hl(),f=d=bs(b=I+=WO(ng())),_++;break;case 45:g===45&&bs(I)==2&&(y=0)}}return s}function nT(t,e,n,i,r,s,o,a,l,u,f,d){for(var p=r-1,m=r===0?s:[""],g=_L(m),y=0,w=0,v=0;y<i;++y)for(var _=0,b=vc(t,p+1,p=vL(w=o[y])),M=t;_<g;++_)(M=wL(w>0?m[_]+" "+b:gt(b,/&\f/g,m[_])))&&(l[v++]=M);return z0(t,e,n,r===0?I0:a,l,u,f,d)}function $O(t,e,n,i){return z0(t,e,n,yL,RS(FO()),vc(t,2,-2),0,i)}function iT(t,e,n,i,r){return z0(t,e,n,LS,vc(t,0,i),vc(t,i+1,-1),i,r)}function bL(t,e,n){switch(DO(t,e)){case 5103:return Ut+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ut+t+t;case 4789:return Kf+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Ut+t+Kf+t+Kt+t+t;case 5936:switch(qn(t,e+11)){case 114:return Ut+t+Kt+gt(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Ut+t+Kt+gt(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Ut+t+Kt+gt(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return Ut+t+Kt+t+t;case 6165:return Ut+t+Kt+"flex-"+t+t;case 5187:return Ut+t+gt(t,/(\w+).+(:[^]+)/,Ut+"box-$1$2"+Kt+"flex-$1$2")+t;case 5443:return Ut+t+Kt+"flex-item-"+gt(t,/flex-|-self/g,"")+(Xs(t,/flex-|baseline/)?"":Kt+"grid-row-"+gt(t,/flex-|-self/g,""))+t;case 4675:return Ut+t+Kt+"flex-line-pack"+gt(t,/align-content|flex-|-self/g,"")+t;case 5548:return Ut+t+Kt+gt(t,"shrink","negative")+t;case 5292:return Ut+t+Kt+gt(t,"basis","preferred-size")+t;case 6060:return Ut+"box-"+gt(t,"-grow","")+Ut+t+Kt+gt(t,"grow","positive")+t;case 4554:return Ut+gt(t,/([^-])(transform)/g,"$1"+Ut+"$2")+t;case 6187:return gt(gt(gt(t,/(zoom-|grab)/,Ut+"$1"),/(image-set)/,Ut+"$1"),t,"")+t;case 5495:case 3959:return gt(t,/(image-set\([^]*)/,Ut+"$1$`$1");case 4968:return gt(gt(t,/(.+:)(flex-)?(.*)/,Ut+"box-pack:$3"+Kt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ut+t+t;case 4200:if(!Xs(t,/flex-|baseline/))return Kt+"grid-column-align"+vc(t,e)+t;break;case 2592:case 3360:return Kt+gt(t,"template-","")+t;case 4384:case 3616:return n&&n.some(function(i,r){return e=r,Xs(i.props,/grid-\w+-end/)})?~tg(t+(n=n[e].value),"span",0)?t:Kt+gt(t,"-start","")+t+Kt+"grid-row-span:"+(~tg(n,"span",0)?Xs(n,/\d+/):+Xs(n,/\d+/)-+Xs(t,/\d+/))+";":Kt+gt(t,"-start","")+t;case 4896:case 4128:return n&&n.some(function(i){return Xs(i.props,/grid-\w+-start/)})?t:Kt+gt(gt(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return gt(t,/(.+)-inline(.+)/,Ut+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(bs(t)-1-e>6)switch(qn(t,e+1)){case 109:if(qn(t,e+4)!==45)break;case 102:return gt(t,/(.+:)(.+)-([^]+)/,"$1"+Ut+"$2-$3$1"+Kf+(qn(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~tg(t,"stretch",0)?bL(gt(t,"stretch","fill-available"),e,n)+t:t}break;case 5152:case 5920:return gt(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(i,r,s,o,a,l,u){return Kt+r+":"+s+u+(o?Kt+r+"-span:"+(a?l:+l-+s)+u:"")+t});case 4949:if(qn(t,e+6)===121)return gt(t,":",":"+Ut)+t;break;case 6444:switch(qn(t,qn(t,14)===45?18:11)){case 120:return gt(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Ut+(qn(t,14)===45?"inline-":"")+"box$3$1"+Ut+"$2$3$1"+Kt+"$2box$3")+t;case 100:return gt(t,":",":"+Kt)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return gt(t,"scroll-","scroll-snap-")+t}return t}function $g(t,e){for(var n="",i=0;i<t.length;i++)n+=e(t[i],i,t,e)||"";return n}function jO(t,e,n,i){switch(t.type){case IO:if(t.children.length)break;case RO:case LS:return t.return=t.return||t.value;case yL:return"";case xL:return t.return=t.value+"{"+$g(t.children,i)+"}";case I0:if(!bs(t.value=t.props.join(",")))return""}return bs(n=$g(t.children,i))?t.return=t.value+"{"+n+"}":""}function XO(t){var e=_L(t);return function(n,i,r,s){for(var o="",a=0;a<e;a++)o+=t[a](n,i,r,s)||"";return o}}function qO(t){return function(e){e.root||(e=e.return)&&t(e)}}function YO(t,e,n,i){if(t.length>-1&&!t.return)switch(t.type){case LS:t.return=bL(t.value,t.length,n);return;case xL:return $g([Oo(t,{value:gt(t.value,"@","@"+Ut)})],i);case I0:if(t.length)return zO(n=t.props,function(r){switch(Xs(r,i=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":au(Oo(t,{props:[gt(r,/:(read-\w+)/,":"+Kf+"$1")]})),au(Oo(t,{props:[r]})),pw(t,{props:tT(n,i)});break;case"::placeholder":au(Oo(t,{props:[gt(r,/:(plac\w+)/,":"+Ut+"input-$1")]})),au(Oo(t,{props:[gt(r,/:(plac\w+)/,":"+Kf+"$1")]})),au(Oo(t,{props:[gt(r,/:(plac\w+)/,Kt+"input-$1")]})),au(Oo(t,{props:[r]})),pw(t,{props:tT(n,i)});break}return""})}}var ZO={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},_c=typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",ML="active",TL="data-styled-version",N0="6.1.19",IS=`/*!sc*/
`,jg=typeof window<"u"&&typeof document<"u",JO=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""&&{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY),O0=Object.freeze([]),Sc=Object.freeze({});function KO(t,e,n){return n===void 0&&(n=Sc),t.theme!==n.theme&&t.theme||e||n.theme}var EL=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),QO=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,eB=/(^-|-$)/g;function rT(t){return t.replace(QO,"-").replace(eB,"")}var tB=/(a)(d)/gi,Gp=52,sT=function(t){return String.fromCharCode(t+(t>25?39:97))};function yw(t){var e,n="";for(e=Math.abs(t);e>Gp;e=e/Gp|0)n=sT(e%Gp)+n;return(sT(e%Gp)+n).replace(tB,"$1-$2")}var Jx,kL=5381,$u=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},CL=function(t){return $u(kL,t)};function AL(t){return yw(CL(t)>>>0)}function nB(t){return t.displayName||t.name||"Component"}function Kx(t){return typeof t=="string"&&!0}var PL=typeof Symbol=="function"&&Symbol.for,LL=PL?Symbol.for("react.memo"):60115,iB=PL?Symbol.for("react.forward_ref"):60112,rB={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},sB={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},RL={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},oB=((Jx={})[iB]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Jx[LL]=RL,Jx);function oT(t){return("type"in(e=t)&&e.type.$$typeof)===LL?RL:"$$typeof"in t?oB[t.$$typeof]:rB;var e}var aB=Object.defineProperty,lB=Object.getOwnPropertyNames,aT=Object.getOwnPropertySymbols,uB=Object.getOwnPropertyDescriptor,cB=Object.getPrototypeOf,lT=Object.prototype;function IL(t,e,n){if(typeof e!="string"){if(lT){var i=cB(e);i&&i!==lT&&IL(t,i,n)}var r=lB(e);aT&&(r=r.concat(aT(e)));for(var s=oT(t),o=oT(e),a=0;a<r.length;++a){var l=r[a];if(!(l in sB||n&&n[l]||o&&l in o||s&&l in s)){var u=uB(e,l);try{aB(t,l,u)}catch{}}}}return t}function El(t){return typeof t=="function"}function DS(t){return typeof t=="object"&&"styledComponentId"in t}function sl(t,e){return t&&e?"".concat(t," ").concat(e):t||e||""}function xw(t,e){if(t.length===0)return"";for(var n=t[0],i=1;i<t.length;i++)n+=e?e+t[i]:t[i];return n}function kd(t){return t!==null&&typeof t=="object"&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function vw(t,e,n){if(n===void 0&&(n=!1),!n&&!kd(t)&&!Array.isArray(t))return e;if(Array.isArray(e))for(var i=0;i<e.length;i++)t[i]=vw(t[i],e[i]);else if(kd(e))for(var i in e)t[i]=vw(t[i],e[i]);return t}function zS(t,e){Object.defineProperty(t,"toString",{value:e})}function kl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var fB=function(){function t(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return t.prototype.indexOfGroup=function(e){for(var n=0,i=0;i<e;i++)n+=this.groupSizes[i];return n},t.prototype.insertRules=function(e,n){if(e>=this.groupSizes.length){for(var i=this.groupSizes,r=i.length,s=r;e>=s;)if((s<<=1)<0)throw kl(16,"".concat(e));this.groupSizes=new Uint32Array(s),this.groupSizes.set(i),this.length=s;for(var o=r;o<s;o++)this.groupSizes[o]=0}for(var a=this.indexOfGroup(e+1),l=(o=0,n.length);o<l;o++)this.tag.insertRule(a,n[o])&&(this.groupSizes[e]++,a++)},t.prototype.clearGroup=function(e){if(e<this.length){var n=this.groupSizes[e],i=this.indexOfGroup(e),r=i+n;this.groupSizes[e]=0;for(var s=i;s<r;s++)this.tag.deleteRule(i)}},t.prototype.getGroup=function(e){var n="";if(e>=this.length||this.groupSizes[e]===0)return n;for(var i=this.groupSizes[e],r=this.indexOfGroup(e),s=r+i,o=r;o<s;o++)n+="".concat(this.tag.getRule(o)).concat(IS);return n},t}(),rg=new Map,Xg=new Map,sg=1,$p=function(t){if(rg.has(t))return rg.get(t);for(;Xg.has(sg);)sg++;var e=sg++;return rg.set(t,e),Xg.set(e,t),e},dB=function(t,e){sg=e+1,rg.set(t,e),Xg.set(e,t)},hB="style[".concat(_c,"][").concat(TL,'="').concat(N0,'"]'),pB=new RegExp("^".concat(_c,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),mB=function(t,e,n){for(var i,r=n.split(","),s=0,o=r.length;s<o;s++)(i=r[s])&&t.registerName(e,i)},gB=function(t,e){for(var n,i=((n=e.textContent)!==null&&n!==void 0?n:"").split(IS),r=[],s=0,o=i.length;s<o;s++){var a=i[s].trim();if(a){var l=a.match(pB);if(l){var u=0|parseInt(l[1],10),f=l[2];u!==0&&(dB(f,u),mB(t,f,l[3]),t.getTag().insertRules(u,r)),r.length=0}else r.push(a)}}},uT=function(t){for(var e=document.querySelectorAll(hB),n=0,i=e.length;n<i;n++){var r=e[n];r&&r.getAttribute(_c)!==ML&&(gB(t,r),r.parentNode&&r.parentNode.removeChild(r))}};function yB(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var DL=function(t){var e=document.head,n=t||e,i=document.createElement("style"),r=function(a){var l=Array.from(a.querySelectorAll("style[".concat(_c,"]")));return l[l.length-1]}(n),s=r!==void 0?r.nextSibling:null;i.setAttribute(_c,ML),i.setAttribute(TL,N0);var o=yB();return o&&i.setAttribute("nonce",o),n.insertBefore(i,s),i},xB=function(){function t(e){this.element=DL(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(n){if(n.sheet)return n.sheet;for(var i=document.styleSheets,r=0,s=i.length;r<s;r++){var o=i[r];if(o.ownerNode===n)return o}throw kl(17)}(this.element),this.length=0}return t.prototype.insertRule=function(e,n){try{return this.sheet.insertRule(n,e),this.length++,!0}catch{return!1}},t.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.prototype.getRule=function(e){var n=this.sheet.cssRules[e];return n&&n.cssText?n.cssText:""},t}(),vB=function(){function t(e){this.element=DL(e),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(e,n){if(e<=this.length&&e>=0){var i=document.createTextNode(n);return this.element.insertBefore(i,this.nodes[e]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},t}(),wB=function(){function t(e){this.rules=[],this.length=0}return t.prototype.insertRule=function(e,n){return e<=this.length&&(this.rules.splice(e,0,n),this.length++,!0)},t.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},t}(),cT=jg,_B={isServer:!jg,useCSSOMInjection:!JO},zL=function(){function t(e,n,i){e===void 0&&(e=Sc),n===void 0&&(n={});var r=this;this.options=hi(hi({},_B),e),this.gs=n,this.names=new Map(i),this.server=!!e.isServer,!this.server&&jg&&cT&&(cT=!1,uT(this)),zS(this,function(){return function(s){for(var o=s.getTag(),a=o.length,l="",u=function(d){var p=function(v){return Xg.get(v)}(d);if(p===void 0)return"continue";var m=s.names.get(p),g=o.getGroup(d);if(m===void 0||!m.size||g.length===0)return"continue";var y="".concat(_c,".g").concat(d,'[id="').concat(p,'"]'),w="";m!==void 0&&m.forEach(function(v){v.length>0&&(w+="".concat(v,","))}),l+="".concat(g).concat(y,'{content:"').concat(w,'"}').concat(IS)},f=0;f<a;f++)u(f);return l}(r)})}return t.registerId=function(e){return $p(e)},t.prototype.rehydrate=function(){!this.server&&jg&&uT(this)},t.prototype.reconstructWithOptions=function(e,n){return n===void 0&&(n=!0),new t(hi(hi({},this.options),e),this.gs,n&&this.names||void 0)},t.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(e=function(n){var i=n.useCSSOMInjection,r=n.target;return n.isServer?new wB(r):i?new xB(r):new vB(r)}(this.options),new fB(e)));var e},t.prototype.hasNameForId=function(e,n){return this.names.has(e)&&this.names.get(e).has(n)},t.prototype.registerName=function(e,n){if($p(e),this.names.has(e))this.names.get(e).add(n);else{var i=new Set;i.add(n),this.names.set(e,i)}},t.prototype.insertRules=function(e,n,i){this.registerName(e,n),this.getTag().insertRules($p(e),i)},t.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.prototype.clearRules=function(e){this.getTag().clearGroup($p(e)),this.clearNames(e)},t.prototype.clearTag=function(){this.tag=void 0},t}(),SB=/&/g,bB=/^\s*\/\/.*$/gm;function FL(t,e){return t.map(function(n){return n.type==="rule"&&(n.value="".concat(e," ").concat(n.value),n.value=n.value.replaceAll(",",",".concat(e," ")),n.props=n.props.map(function(i){return"".concat(e," ").concat(i)})),Array.isArray(n.children)&&n.type!=="@keyframes"&&(n.children=FL(n.children,e)),n})}function MB(t){var e,n,i,r=t===void 0?Sc:t,s=r.options,o=s===void 0?Sc:s,a=r.plugins,l=a===void 0?O0:a,u=function(p,m,g){return g.startsWith(n)&&g.endsWith(n)&&g.replaceAll(n,"").length>0?".".concat(e):p},f=l.slice();f.push(function(p){p.type===I0&&p.value.includes("&")&&(p.props[0]=p.props[0].replace(SB,n).replace(i,u))}),o.prefix&&f.push(YO),f.push(jO);var d=function(p,m,g,y){m===void 0&&(m=""),g===void 0&&(g=""),y===void 0&&(y="&"),e=y,n=m,i=new RegExp("\\".concat(n,"\\b"),"g");var w=p.replace(bB,""),v=GO(g||m?"".concat(g," ").concat(m," { ").concat(w," }"):w);o.namespace&&(v=FL(v,o.namespace));var _=[];return $g(v,XO(f.concat(qO(function(b){return _.push(b)})))),_};return d.hash=l.length?l.reduce(function(p,m){return m.name||kl(15),$u(p,m.name)},kL).toString():"",d}var TB=new zL,ww=MB(),NL=En.createContext({shouldForwardProp:void 0,styleSheet:TB,stylis:ww});NL.Consumer;En.createContext(void 0);function fT(){return H.useContext(NL)}var OL=function(){function t(e,n){var i=this;this.inject=function(r,s){s===void 0&&(s=ww);var o=i.name+s.hash;r.hasNameForId(i.id,o)||r.insertRules(i.id,o,s(i.rules,o,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=n,zS(this,function(){throw kl(12,String(i.name))})}return t.prototype.getName=function(e){return e===void 0&&(e=ww),this.name+e.hash},t}(),EB=function(t){return t>="A"&&t<="Z"};function dT(t){for(var e="",n=0;n<t.length;n++){var i=t[n];if(n===1&&i==="-"&&t[0]==="-")return t;EB(i)?e+="-"+i.toLowerCase():e+=i}return e.startsWith("ms-")?"-"+e:e}var BL=function(t){return t==null||t===!1||t===""},UL=function(t){var e,n,i=[];for(var r in t){var s=t[r];t.hasOwnProperty(r)&&!BL(s)&&(Array.isArray(s)&&s.isCss||El(s)?i.push("".concat(dT(r),":"),s,";"):kd(s)?i.push.apply(i,Ed(Ed(["".concat(r," {")],UL(s),!1),["}"],!1)):i.push("".concat(dT(r),": ").concat((e=r,(n=s)==null||typeof n=="boolean"||n===""?"":typeof n!="number"||n===0||e in ZO||e.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return i};function pl(t,e,n,i){if(BL(t))return[];if(DS(t))return[".".concat(t.styledComponentId)];if(El(t)){if(!El(s=t)||s.prototype&&s.prototype.isReactComponent||!e)return[t];var r=t(e);return pl(r,e,n,i)}var s;return t instanceof OL?n?(t.inject(n,i),[t.getName(i)]):[t]:kd(t)?UL(t):Array.isArray(t)?Array.prototype.concat.apply(O0,t.map(function(o){return pl(o,e,n,i)})):[t.toString()]}function kB(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(El(n)&&!DS(n))return!1}return!0}var CB=CL(N0),AB=function(){function t(e,n,i){this.rules=e,this.staticRulesId="",this.isStatic=(i===void 0||i.isStatic)&&kB(e),this.componentId=n,this.baseHash=$u(CB,n),this.baseStyle=i,zL.registerId(n)}return t.prototype.generateAndInjectStyles=function(e,n,i){var r=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,n,i):"";if(this.isStatic&&!i.hash)if(this.staticRulesId&&n.hasNameForId(this.componentId,this.staticRulesId))r=sl(r,this.staticRulesId);else{var s=xw(pl(this.rules,e,n,i)),o=yw($u(this.baseHash,s)>>>0);if(!n.hasNameForId(this.componentId,o)){var a=i(s,".".concat(o),void 0,this.componentId);n.insertRules(this.componentId,o,a)}r=sl(r,o),this.staticRulesId=o}else{for(var l=$u(this.baseHash,i.hash),u="",f=0;f<this.rules.length;f++){var d=this.rules[f];if(typeof d=="string")u+=d;else if(d){var p=xw(pl(d,e,n,i));l=$u(l,p+f),u+=p}}if(u){var m=yw(l>>>0);n.hasNameForId(this.componentId,m)||n.insertRules(this.componentId,m,i(u,".".concat(m),void 0,this.componentId)),r=sl(r,m)}}return r},t}(),qg=En.createContext(void 0);qg.Consumer;function PB(t){var e=En.useContext(qg),n=H.useMemo(function(){return function(i,r){if(!i)throw kl(14);if(El(i)){var s=i(r);return s}if(Array.isArray(i)||typeof i!="object")throw kl(8);return r?hi(hi({},r),i):i}(t.theme,e)},[t.theme,e]);return t.children?En.createElement(qg.Provider,{value:n},t.children):null}var Qx={};function LB(t,e,n){var i=DS(t),r=t,s=!Kx(t),o=e.attrs,a=o===void 0?O0:o,l=e.componentId,u=l===void 0?function(M,k){var E=typeof M!="string"?"sc":rT(M);Qx[E]=(Qx[E]||0)+1;var I="".concat(E,"-").concat(AL(N0+E+Qx[E]));return k?"".concat(k,"-").concat(I):I}(e.displayName,e.parentComponentId):l,f=e.displayName,d=f===void 0?function(M){return Kx(M)?"styled.".concat(M):"Styled(".concat(nB(M),")")}(t):f,p=e.displayName&&e.componentId?"".concat(rT(e.displayName),"-").concat(e.componentId):e.componentId||u,m=i&&r.attrs?r.attrs.concat(a).filter(Boolean):a,g=e.shouldForwardProp;if(i&&r.shouldForwardProp){var y=r.shouldForwardProp;if(e.shouldForwardProp){var w=e.shouldForwardProp;g=function(M,k){return y(M,k)&&w(M,k)}}else g=y}var v=new AB(n,p,i?r.componentStyle:void 0);function _(M,k){return function(E,I,C){var L=E.attrs,R=E.componentStyle,O=E.defaultProps,q=E.foldedComponentIds,j=E.styledComponentId,G=E.target,W=En.useContext(qg),J=fT(),re=E.shouldForwardProp||J.shouldForwardProp,D=KO(I,W,O)||Sc,F=function(Ce,ie,Ne){for(var We,Ge=hi(hi({},ie),{className:void 0,theme:Ne}),be=0;be<Ce.length;be+=1){var $e=El(We=Ce[be])?We(Ge):We;for(var pe in $e)Ge[pe]=pe==="className"?sl(Ge[pe],$e[pe]):pe==="style"?hi(hi({},Ge[pe]),$e[pe]):$e[pe]}return ie.className&&(Ge.className=sl(Ge.className,ie.className)),Ge}(L,I,D),A=F.as||G,X={};for(var Y in F)F[Y]===void 0||Y[0]==="$"||Y==="as"||Y==="theme"&&F.theme===D||(Y==="forwardedAs"?X.as=F.forwardedAs:re&&!re(Y,A)||(X[Y]=F[Y]));var z=function(Ce,ie){var Ne=fT(),We=Ce.generateAndInjectStyles(ie,Ne.styleSheet,Ne.stylis);return We}(R,F),xe=sl(q,j);return z&&(xe+=" "+z),F.className&&(xe+=" "+F.className),X[Kx(A)&&!EL.has(A)?"class":"className"]=xe,C&&(X.ref=C),H.createElement(A,X)}(b,M,k)}_.displayName=d;var b=En.forwardRef(_);return b.attrs=m,b.componentStyle=v,b.displayName=d,b.shouldForwardProp=g,b.foldedComponentIds=i?sl(r.foldedComponentIds,r.styledComponentId):"",b.styledComponentId=p,b.target=i?r.target:t,Object.defineProperty(b,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(M){this._foldedDefaultProps=i?function(k){for(var E=[],I=1;I<arguments.length;I++)E[I-1]=arguments[I];for(var C=0,L=E;C<L.length;C++)vw(k,L[C],!0);return k}({},r.defaultProps,M):M}}),zS(b,function(){return".".concat(b.styledComponentId)}),s&&IL(b,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),b}function hT(t,e){for(var n=[t[0]],i=0,r=e.length;i<r;i+=1)n.push(e[i],t[i+1]);return n}var pT=function(t){return Object.assign(t,{isCss:!0})};function VL(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(El(t)||kd(t))return pT(pl(hT(O0,Ed([t],e,!0))));var i=t;return e.length===0&&i.length===1&&typeof i[0]=="string"?pl(i):pT(pl(hT(i,e)))}function _w(t,e,n){if(n===void 0&&(n=Sc),!e)throw kl(1,e);var i=function(r){for(var s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];return t(e,n,VL.apply(void 0,Ed([r],s,!1)))};return i.attrs=function(r){return _w(t,e,hi(hi({},n),{attrs:Array.prototype.concat(n.attrs,r).filter(Boolean)}))},i.withConfig=function(r){return _w(t,e,hi(hi({},n),r))},i}var HL=function(t){return _w(LB,t)},ke=HL;EL.forEach(function(t){ke[t]=HL(t)});function B0(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=xw(VL.apply(void 0,Ed([t],e,!1))),r=AL(i);return new OL(r,i)}const WL=H.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),U0=H.createContext({}),V0=H.createContext(null),H0=typeof document<"u",FS=H0?H.useLayoutEffect:H.useEffect,GL=H.createContext({strict:!1}),NS=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),RB="framerAppearId",$L="data-"+NS(RB);function IB(t,e,n,i){const{visualElement:r}=H.useContext(U0),s=H.useContext(GL),o=H.useContext(V0),a=H.useContext(WL).reducedMotion,l=H.useRef();i=i||s.renderer,!l.current&&i&&(l.current=i(t,{visualState:e,parent:r,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;H.useInsertionEffect(()=>{u&&u.update(n,o)});const f=H.useRef(!!(n[$L]&&!window.HandoffComplete));return FS(()=>{u&&(u.render(),f.current&&u.animationState&&u.animationState.animateChanges())}),H.useEffect(()=>{u&&(u.updateFeatures(),!f.current&&u.animationState&&u.animationState.animateChanges(),f.current&&(f.current=!1,window.HandoffComplete=!0))}),u}function ju(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function DB(t,e,n){return H.useCallback(i=>{i&&t.mount&&t.mount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):ju(n)&&(n.current=i))},[e])}function Cd(t){return typeof t=="string"||Array.isArray(t)}function W0(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const OS=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],BS=["initial",...OS];function G0(t){return W0(t.animate)||BS.some(e=>Cd(t[e]))}function jL(t){return!!(G0(t)||t.variants)}function zB(t,e){if(G0(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Cd(n)?n:void 0,animate:Cd(i)?i:void 0}}return t.inherit!==!1?e:{}}function FB(t){const{initial:e,animate:n}=zB(t,H.useContext(U0));return H.useMemo(()=>({initial:e,animate:n}),[mT(e),mT(n)])}function mT(t){return Array.isArray(t)?t.join(" "):t}const gT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ad={};for(const t in gT)Ad[t]={isEnabled:e=>gT[t].some(n=>!!e[n])};function NB(t){for(const e in t)Ad[e]={...Ad[e],...t[e]}}const US=H.createContext({}),XL=H.createContext({}),OB=Symbol.for("motionComponentSymbol");function BB({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){t&&NB(t);function s(a,l){let u;const f={...H.useContext(WL),...a,layoutId:UB(a)},{isStatic:d}=f,p=FB(a),m=i(a,d);if(!d&&H0){p.visualElement=IB(r,m,f,e);const g=H.useContext(XL),y=H.useContext(GL).strict;p.visualElement&&(u=p.visualElement.loadFeatures(f,y,t,g))}return H.createElement(U0.Provider,{value:p},u&&p.visualElement?H.createElement(u,{visualElement:p.visualElement,...f}):null,n(r,a,DB(m,p.visualElement,l),m,d,p.visualElement))}const o=H.forwardRef(s);return o[OB]=r,o}function UB({layoutId:t}){const e=H.useContext(US).id;return e&&t!==void 0?e+"-"+t:t}function VB(t){function e(i,r={}){return BB(t(i,r))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(i,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}const HB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function VS(t){return typeof t!="string"||t.includes("-")?!1:!!(HB.indexOf(t)>-1||/[A-Z]/.test(t))}const Yg={};function WB(t){Object.assign(Yg,t)}const nh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Fl=new Set(nh);function qL(t,{layout:e,layoutId:n}){return Fl.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Yg[t]||t==="opacity")}const qi=t=>!!(t&&t.getVelocity),GB={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},$B=nh.length;function jB(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},i,r){let s="";for(let o=0;o<$B;o++){const a=nh[o];if(t[a]!==void 0){const l=GB[a]||a;s+=`${l}(${t[a]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),r?s=r(t,i?"":s):n&&i&&(s="none"),s}const YL=t=>e=>typeof e=="string"&&e.startsWith(t),ZL=YL("--"),Sw=YL("var(--"),XB=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,qB=(t,e)=>e&&typeof t=="number"?e.transform(t):t,fa=(t,e,n)=>Math.min(Math.max(n,t),e),Nl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Qf={...Nl,transform:t=>fa(0,1,t)},jp={...Nl,default:1},ed=t=>Math.round(t*1e5)/1e5,$0=/(-)?([\d]*\.?[\d])+/g,JL=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,YB=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function ih(t){return typeof t=="string"}const rh=t=>({test:e=>ih(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Bo=rh("deg"),ks=rh("%"),rt=rh("px"),ZB=rh("vh"),JB=rh("vw"),yT={...ks,parse:t=>ks.parse(t)/100,transform:t=>ks.transform(t*100)},xT={...Nl,transform:Math.round},KL={borderWidth:rt,borderTopWidth:rt,borderRightWidth:rt,borderBottomWidth:rt,borderLeftWidth:rt,borderRadius:rt,radius:rt,borderTopLeftRadius:rt,borderTopRightRadius:rt,borderBottomRightRadius:rt,borderBottomLeftRadius:rt,width:rt,maxWidth:rt,height:rt,maxHeight:rt,size:rt,top:rt,right:rt,bottom:rt,left:rt,padding:rt,paddingTop:rt,paddingRight:rt,paddingBottom:rt,paddingLeft:rt,margin:rt,marginTop:rt,marginRight:rt,marginBottom:rt,marginLeft:rt,rotate:Bo,rotateX:Bo,rotateY:Bo,rotateZ:Bo,scale:jp,scaleX:jp,scaleY:jp,scaleZ:jp,skew:Bo,skewX:Bo,skewY:Bo,distance:rt,translateX:rt,translateY:rt,translateZ:rt,x:rt,y:rt,z:rt,perspective:rt,transformPerspective:rt,opacity:Qf,originX:yT,originY:yT,originZ:rt,zIndex:xT,fillOpacity:Qf,strokeOpacity:Qf,numOctaves:xT};function HS(t,e,n,i){const{style:r,vars:s,transform:o,transformOrigin:a}=t;let l=!1,u=!1,f=!0;for(const d in e){const p=e[d];if(ZL(d)){s[d]=p;continue}const m=KL[d],g=qB(p,m);if(Fl.has(d)){if(l=!0,o[d]=g,!f)continue;p!==(m.default||0)&&(f=!1)}else d.startsWith("origin")?(u=!0,a[d]=g):r[d]=g}if(e.transform||(l||i?r.transform=jB(t.transform,n,f,i):r.transform&&(r.transform="none")),u){const{originX:d="50%",originY:p="50%",originZ:m=0}=a;r.transformOrigin=`${d} ${p} ${m}`}}const WS=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function QL(t,e,n){for(const i in e)!qi(e[i])&&!qL(i,n)&&(t[i]=e[i])}function KB({transformTemplate:t},e,n){return H.useMemo(()=>{const i=WS();return HS(i,e,{enableHardwareAcceleration:!n},t),Object.assign({},i.vars,i.style)},[e])}function QB(t,e,n){const i=t.style||{},r={};return QL(r,i,t),Object.assign(r,KB(t,e,n)),t.transformValues?t.transformValues(r):r}function e6(t,e,n){const i={},r=QB(t,e,n);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=r,i}const t6=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Zg(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||t6.has(t)}let eR=t=>!Zg(t);function n6(t){t&&(eR=e=>e.startsWith("on")?!Zg(e):t(e))}try{n6(require("@emotion/is-prop-valid").default)}catch{}function i6(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(eR(r)||n===!0&&Zg(r)||!e&&!Zg(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function vT(t,e,n){return typeof t=="string"?t:rt.transform(e+n*t)}function r6(t,e,n){const i=vT(e,t.x,t.width),r=vT(n,t.y,t.height);return`${i} ${r}`}const s6={offset:"stroke-dashoffset",array:"stroke-dasharray"},o6={offset:"strokeDashoffset",array:"strokeDasharray"};function a6(t,e,n=1,i=0,r=!0){t.pathLength=1;const s=r?s6:o6;t[s.offset]=rt.transform(-i);const o=rt.transform(e),a=rt.transform(n);t[s.array]=`${o} ${a}`}function GS(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},f,d,p){if(HS(t,u,f,p),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:g,dimensions:y}=t;m.transform&&(y&&(g.transform=m.transform),delete m.transform),y&&(r!==void 0||s!==void 0||g.transform)&&(g.transformOrigin=r6(y,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),i!==void 0&&(m.scale=i),o!==void 0&&a6(m,o,a,l,!1)}const tR=()=>({...WS(),attrs:{}}),$S=t=>typeof t=="string"&&t.toLowerCase()==="svg";function l6(t,e,n,i){const r=H.useMemo(()=>{const s=tR();return GS(s,e,{enableHardwareAcceleration:!1},$S(i),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};QL(s,t.style,t),r.style={...s,...r.style}}return r}function u6(t=!1){return(n,i,r,{latestValues:s},o)=>{const l=(VS(n)?l6:e6)(i,s,o,n),f={...i6(i,typeof n=="string",t),...l,ref:r},{children:d}=i,p=H.useMemo(()=>qi(d)?d.get():d,[d]);return H.createElement(n,{...f,children:p})}}function nR(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const s in n)t.style.setProperty(s,n[s])}const iR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function rR(t,e,n,i){nR(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(iR.has(r)?r:NS(r),e.attrs[r])}function jS(t,e){const{style:n}=t,i={};for(const r in n)(qi(n[r])||e.style&&qi(e.style[r])||qL(r,t))&&(i[r]=n[r]);return i}function sR(t,e){const n=jS(t,e);for(const i in t)if(qi(t[i])||qi(e[i])){const r=nh.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[r]=t[i]}return n}function XS(t,e,n,i={},r={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),e}function oR(t){const e=H.useRef(null);return e.current===null&&(e.current=t()),e.current}const Jg=t=>Array.isArray(t),c6=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),f6=t=>Jg(t)?t[t.length-1]||0:t;function og(t){const e=qi(t)?t.get():t;return c6(e)?e.toValue():e}function d6({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},i,r,s){const o={latestValues:h6(i,r,s,t),renderState:e()};return n&&(o.mount=a=>n(i,a,o)),o}const aR=t=>(e,n)=>{const i=H.useContext(U0),r=H.useContext(V0),s=()=>d6(t,e,i,r);return n?s():oR(s)};function h6(t,e,n,i){const r={},s=i(t,{});for(const p in s)r[p]=og(s[p]);let{initial:o,animate:a}=t;const l=G0(t),u=jL(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let f=n?n.initial===!1:!1;f=f||o===!1;const d=f?a:o;return d&&typeof d!="boolean"&&!W0(d)&&(Array.isArray(d)?d:[d]).forEach(m=>{const g=XS(t,m);if(!g)return;const{transitionEnd:y,transition:w,...v}=g;for(const _ in v){let b=v[_];if(Array.isArray(b)){const M=f?b.length-1:0;b=b[M]}b!==null&&(r[_]=b)}for(const _ in y)r[_]=y[_]}),r}const vn=t=>t;class wT{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function p6(t){let e=new wT,n=new wT,i=0,r=!1,s=!1;const o=new WeakSet,a={schedule:(l,u=!1,f=!1)=>{const d=f&&r,p=d?e:n;return u&&o.add(l),p.add(l)&&d&&r&&(i=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(r){s=!0;return}if(r=!0,[e,n]=[n,e],n.clear(),i=e.order.length,i)for(let u=0;u<i;u++){const f=e.order[u];f(l),o.has(f)&&(a.schedule(f),t())}r=!1,s&&(s=!1,a.process(l))}};return a}const Xp=["prepare","read","update","preRender","render","postRender"],m6=40;function g6(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=Xp.reduce((d,p)=>(d[p]=p6(()=>n=!0),d),{}),o=d=>s[d].process(r),a=()=>{const d=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(d-r.timestamp,m6),1),r.timestamp=d,r.isProcessing=!0,Xp.forEach(o),r.isProcessing=!1,n&&e&&(i=!1,t(a))},l=()=>{n=!0,i=!0,r.isProcessing||t(a)};return{schedule:Xp.reduce((d,p)=>{const m=s[p];return d[p]=(g,y=!1,w=!1)=>(n||l(),m.schedule(g,y,w)),d},{}),cancel:d=>Xp.forEach(p=>s[p].cancel(d)),state:r,steps:s}}const{schedule:Zt,cancel:co,state:fi,steps:ev}=g6(typeof requestAnimationFrame<"u"?requestAnimationFrame:vn,!0),y6={useVisualState:aR({scrapeMotionValuesFromProps:sR,createRenderState:tR,onMount:(t,e,{renderState:n,latestValues:i})=>{Zt.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Zt.render(()=>{GS(n,i,{enableHardwareAcceleration:!1},$S(e.tagName),t.transformTemplate),rR(e,n)})}})},x6={useVisualState:aR({scrapeMotionValuesFromProps:jS,createRenderState:WS})};function v6(t,{forwardMotionProps:e=!1},n,i){return{...VS(t)?y6:x6,preloadedFeatures:n,useRender:u6(e),createVisualElement:i,Component:t}}function Ks(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}const lR=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function j0(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const w6=t=>e=>lR(e)&&t(e,j0(e));function io(t,e,n,i){return Ks(t,e,w6(n),i)}const _6=(t,e)=>n=>e(t(n)),sa=(...t)=>t.reduce(_6);function uR(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const _T=uR("dragHorizontal"),ST=uR("dragVertical");function cR(t){let e=!1;if(t==="y")e=ST();else if(t==="x")e=_T();else{const n=_T(),i=ST();n&&i?e=()=>{n(),i()}:(n&&n(),i&&i())}return e}function fR(){const t=cR(!0);return t?(t(),!1):!0}class _a{constructor(e){this.isMounted=!1,this.node=e}update(){}}function bT(t,e){const n="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(s,o)=>{if(s.pointerType==="touch"||fR())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[i]&&Zt.update(()=>a[i](s,o))};return io(t.current,n,r,{passive:!t.getProps()[i]})}class S6 extends _a{mount(){this.unmount=sa(bT(this.node,!0),bT(this.node,!1))}unmount(){}}class b6 extends _a{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=sa(Ks(this.node.current,"focus",()=>this.onFocus()),Ks(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const dR=(t,e)=>e?t===e?!0:dR(t,e.parentElement):!1;function tv(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,j0(n))}class M6 extends _a{constructor(){super(...arguments),this.removeStartListeners=vn,this.removeEndListeners=vn,this.removeAccessibleListeners=vn,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),s=io(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:f,globalTapTarget:d}=this.node.getProps();Zt.update(()=>{!d&&!dR(this.node.current,a.target)?f&&f(a,l):u&&u(a,l)})},{passive:!(i.onTap||i.onPointerUp)}),o=io(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=sa(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||tv("up",(l,u)=>{const{onTap:f}=this.node.getProps();f&&Zt.update(()=>f(l,u))})};this.removeEndListeners(),this.removeEndListeners=Ks(this.node.current,"keyup",o),tv("down",(a,l)=>{this.startPress(a,l)})},n=Ks(this.node.current,"keydown",e),i=()=>{this.isPressing&&tv("cancel",(s,o)=>this.cancelPress(s,o))},r=Ks(this.node.current,"blur",i);this.removeAccessibleListeners=sa(n,r)}}startPress(e,n){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&Zt.update(()=>i(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!fR()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&Zt.update(()=>i(e,n))}mount(){const e=this.node.getProps(),n=io(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=Ks(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=sa(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const bw=new WeakMap,nv=new WeakMap,T6=t=>{const e=bw.get(t.target);e&&e(t)},E6=t=>{t.forEach(T6)};function k6({root:t,...e}){const n=t||document;nv.has(n)||nv.set(n,{});const i=nv.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(E6,{root:t,...e})),i[r]}function C6(t,e,n){const i=k6(e);return bw.set(t,n),i.observe(t),()=>{bw.delete(t),i.unobserve(t)}}const A6={some:0,all:1};class P6 extends _a{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:A6[r]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:f,onViewportLeave:d}=this.node.getProps(),p=u?f:d;p&&p(l)};return C6(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(L6(e,n))&&this.startObserver()}unmount(){}}function L6({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const R6={inView:{Feature:P6},tap:{Feature:M6},focus:{Feature:b6},hover:{Feature:S6}};function hR(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function I6(t){const e={};return t.values.forEach((n,i)=>e[i]=n.get()),e}function D6(t){const e={};return t.values.forEach((n,i)=>e[i]=n.getVelocity()),e}function X0(t,e,n){const i=t.getProps();return XS(i,e,n!==void 0?n:i.custom,I6(t),D6(t))}let z6=vn,qS=vn;const oa=t=>t*1e3,ro=t=>t/1e3,F6={current:!1},pR=t=>Array.isArray(t)&&typeof t[0]=="number";function mR(t){return!!(!t||typeof t=="string"&&gR[t]||pR(t)||Array.isArray(t)&&t.every(mR))}const Uf=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,gR={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Uf([0,.65,.55,1]),circOut:Uf([.55,0,1,.45]),backIn:Uf([.31,.01,.66,-.59]),backOut:Uf([.33,1.53,.69,.99])};function yR(t){if(t)return pR(t)?Uf(t):Array.isArray(t)?t.map(yR):gR[t]}function N6(t,e,n,{delay:i=0,duration:r,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const u={[e]:n};l&&(u.offset=l);const f=yR(a);return Array.isArray(f)&&(u.easing=f),t.animate(u,{delay:i,duration:r,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function O6(t,{repeat:e,repeatType:n="loop"}){const i=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[i]}const xR=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,B6=1e-7,U6=12;function V6(t,e,n,i,r){let s,o,a=0;do o=e+(n-e)/2,s=xR(o,i,r)-t,s>0?n=o:e=o;while(Math.abs(s)>B6&&++a<U6);return o}function sh(t,e,n,i){if(t===e&&n===i)return vn;const r=s=>V6(s,0,1,t,n);return s=>s===0||s===1?s:xR(r(s),e,i)}const H6=sh(.42,0,1,1),W6=sh(0,0,.58,1),vR=sh(.42,0,.58,1),G6=t=>Array.isArray(t)&&typeof t[0]!="number",wR=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,_R=t=>e=>1-t(1-e),YS=t=>1-Math.sin(Math.acos(t)),SR=_R(YS),$6=wR(YS),bR=sh(.33,1.53,.69,.99),ZS=_R(bR),j6=wR(ZS),X6=t=>(t*=2)<1?.5*ZS(t):.5*(2-Math.pow(2,-10*(t-1))),q6={linear:vn,easeIn:H6,easeInOut:vR,easeOut:W6,circIn:YS,circInOut:$6,circOut:SR,backIn:ZS,backInOut:j6,backOut:bR,anticipate:X6},MT=t=>{if(Array.isArray(t)){qS(t.length===4);const[e,n,i,r]=t;return sh(e,n,i,r)}else if(typeof t=="string")return q6[t];return t},JS=(t,e)=>n=>!!(ih(n)&&YB.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),MR=(t,e,n)=>i=>{if(!ih(i))return i;const[r,s,o,a]=i.match($0);return{[t]:parseFloat(r),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Y6=t=>fa(0,255,t),iv={...Nl,transform:t=>Math.round(Y6(t))},ol={test:JS("rgb","red"),parse:MR("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+iv.transform(t)+", "+iv.transform(e)+", "+iv.transform(n)+", "+ed(Qf.transform(i))+")"};function Z6(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const Mw={test:JS("#"),parse:Z6,transform:ol.transform},Xu={test:JS("hsl","hue"),parse:MR("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+ks.transform(ed(e))+", "+ks.transform(ed(n))+", "+ed(Qf.transform(i))+")"},_i={test:t=>ol.test(t)||Mw.test(t)||Xu.test(t),parse:t=>ol.test(t)?ol.parse(t):Xu.test(t)?Xu.parse(t):Mw.parse(t),transform:t=>ih(t)?t:t.hasOwnProperty("red")?ol.transform(t):Xu.transform(t)},dn=(t,e,n)=>-n*t+n*e+t;function rv(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function J6({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,s=0,o=0;if(!e)r=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;r=rv(l,a,t+1/3),s=rv(l,a,t),o=rv(l,a,t-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}const sv=(t,e,n)=>{const i=t*t;return Math.sqrt(Math.max(0,n*(e*e-i)+i))},K6=[Mw,ol,Xu],Q6=t=>K6.find(e=>e.test(t));function TT(t){const e=Q6(t);let n=e.parse(t);return e===Xu&&(n=J6(n)),n}const TR=(t,e)=>{const n=TT(t),i=TT(e),r={...n};return s=>(r.red=sv(n.red,i.red,s),r.green=sv(n.green,i.green,s),r.blue=sv(n.blue,i.blue,s),r.alpha=dn(n.alpha,i.alpha,s),ol.transform(r))};function e8(t){var e,n;return isNaN(t)&&ih(t)&&(((e=t.match($0))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(JL))===null||n===void 0?void 0:n.length)||0)>0}const ER={regex:XB,countKey:"Vars",token:"${v}",parse:vn},kR={regex:JL,countKey:"Colors",token:"${c}",parse:_i.parse},CR={regex:$0,countKey:"Numbers",token:"${n}",parse:Nl.parse};function ov(t,{regex:e,countKey:n,token:i,parse:r}){const s=t.tokenised.match(e);s&&(t["num"+n]=s.length,t.tokenised=t.tokenised.replace(e,i),t.values.push(...s.map(r)))}function Kg(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&ov(n,ER),ov(n,kR),ov(n,CR),n}function AR(t){return Kg(t).values}function PR(t){const{values:e,numColors:n,numVars:i,tokenised:r}=Kg(t),s=e.length;return o=>{let a=r;for(let l=0;l<s;l++)l<i?a=a.replace(ER.token,o[l]):l<i+n?a=a.replace(kR.token,_i.transform(o[l])):a=a.replace(CR.token,ed(o[l]));return a}}const t8=t=>typeof t=="number"?0:t;function n8(t){const e=AR(t);return PR(t)(e.map(t8))}const da={test:e8,parse:AR,createTransformer:PR,getAnimatableNone:n8},LR=(t,e)=>n=>`${n>0?e:t}`;function RR(t,e){return typeof t=="number"?n=>dn(t,e,n):_i.test(t)?TR(t,e):t.startsWith("var(")?LR(t,e):DR(t,e)}const IR=(t,e)=>{const n=[...t],i=n.length,r=t.map((s,o)=>RR(s,e[o]));return s=>{for(let o=0;o<i;o++)n[o]=r[o](s);return n}},i8=(t,e)=>{const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=RR(t[r],e[r]));return r=>{for(const s in i)n[s]=i[s](r);return n}},DR=(t,e)=>{const n=da.createTransformer(e),i=Kg(t),r=Kg(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?sa(IR(i.values,r.values),n):LR(t,e)},Pd=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},ET=(t,e)=>n=>dn(t,e,n);function r8(t){return typeof t=="number"?ET:typeof t=="string"?_i.test(t)?TR:DR:Array.isArray(t)?IR:typeof t=="object"?i8:ET}function s8(t,e,n){const i=[],r=n||r8(t[0]),s=t.length-1;for(let o=0;o<s;o++){let a=r(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||vn:e;a=sa(l,a)}i.push(a)}return i}function zR(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const s=t.length;if(qS(s===e.length),s===1)return()=>e[0];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=s8(e,i,r),a=o.length,l=u=>{let f=0;if(a>1)for(;f<t.length-2&&!(u<t[f+1]);f++);const d=Pd(t[f],t[f+1],u);return o[f](d)};return n?u=>l(fa(t[0],t[s-1],u)):l}function o8(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Pd(0,e,i);t.push(dn(n,1,r))}}function a8(t){const e=[0];return o8(e,t.length-1),e}function l8(t,e){return t.map(n=>n*e)}function u8(t,e){return t.map(()=>e||vR).splice(0,t.length-1)}function Qg({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=G6(i)?i.map(MT):MT(i),s={done:!1,value:e[0]},o=l8(n&&n.length===e.length?n:a8(e),t),a=zR(o,e,{ease:Array.isArray(r)?r:u8(e,r)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}function FR(t,e){return e?t*(1e3/e):0}const c8=5;function NR(t,e,n){const i=Math.max(e-c8,0);return FR(n-t(i),e-i)}const av=.001,f8=.01,kT=10,d8=.05,h8=1;function p8({duration:t=800,bounce:e=.25,velocity:n=0,mass:i=1}){let r,s;z6(t<=oa(kT));let o=1-e;o=fa(d8,h8,o),t=fa(f8,kT,ro(t)),o<1?(r=u=>{const f=u*o,d=f*t,p=f-n,m=Tw(u,o),g=Math.exp(-d);return av-p/m*g},s=u=>{const d=u*o*t,p=d*n+n,m=Math.pow(o,2)*Math.pow(u,2)*t,g=Math.exp(-d),y=Tw(Math.pow(u,2),o);return(-r(u)+av>0?-1:1)*((p-m)*g)/y}):(r=u=>{const f=Math.exp(-u*t),d=(u-n)*t+1;return-av+f*d},s=u=>{const f=Math.exp(-u*t),d=(n-u)*(t*t);return f*d});const a=5/t,l=g8(r,s,a);if(t=oa(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const u=Math.pow(l,2)*i;return{stiffness:u,damping:o*2*Math.sqrt(i*u),duration:t}}}const m8=12;function g8(t,e,n){let i=n;for(let r=1;r<m8;r++)i=i-t(i)/e(i);return i}function Tw(t,e){return t*Math.sqrt(1-e*e)}const y8=["duration","bounce"],x8=["stiffness","damping","mass"];function CT(t,e){return e.some(n=>t[n]!==void 0)}function v8(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!CT(t,x8)&&CT(t,y8)){const n=p8(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function OR({keyframes:t,restDelta:e,restSpeed:n,...i}){const r=t[0],s=t[t.length-1],o={done:!1,value:r},{stiffness:a,damping:l,mass:u,duration:f,velocity:d,isResolvedFromDuration:p}=v8({...i,velocity:-ro(i.velocity||0)}),m=d||0,g=l/(2*Math.sqrt(a*u)),y=s-r,w=ro(Math.sqrt(a/u)),v=Math.abs(y)<5;n||(n=v?.01:2),e||(e=v?.005:.5);let _;if(g<1){const b=Tw(w,g);_=M=>{const k=Math.exp(-g*w*M);return s-k*((m+g*w*y)/b*Math.sin(b*M)+y*Math.cos(b*M))}}else if(g===1)_=b=>s-Math.exp(-w*b)*(y+(m+w*y)*b);else{const b=w*Math.sqrt(g*g-1);_=M=>{const k=Math.exp(-g*w*M),E=Math.min(b*M,300);return s-k*((m+g*w*y)*Math.sinh(E)+b*y*Math.cosh(E))/b}}return{calculatedDuration:p&&f||null,next:b=>{const M=_(b);if(p)o.done=b>=f;else{let k=m;b!==0&&(g<1?k=NR(_,b,M):k=0);const E=Math.abs(k)<=n,I=Math.abs(s-M)<=e;o.done=E&&I}return o.value=o.done?s:M,o}}}function AT({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:f}){const d=t[0],p={done:!1,value:d},m=C=>a!==void 0&&C<a||l!==void 0&&C>l,g=C=>a===void 0?l:l===void 0||Math.abs(a-C)<Math.abs(l-C)?a:l;let y=n*e;const w=d+y,v=o===void 0?w:o(w);v!==w&&(y=v-d);const _=C=>-y*Math.exp(-C/i),b=C=>v+_(C),M=C=>{const L=_(C),R=b(C);p.done=Math.abs(L)<=u,p.value=p.done?v:R};let k,E;const I=C=>{m(p.value)&&(k=C,E=OR({keyframes:[p.value,g(p.value)],velocity:NR(b,C,p.value),damping:r,stiffness:s,restDelta:u,restSpeed:f}))};return I(0),{calculatedDuration:null,next:C=>{let L=!1;return!E&&k===void 0&&(L=!0,M(C),I(C)),k!==void 0&&C>k?E.next(C-k):(!L&&M(C),p)}}}const w8=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Zt.update(e,!0),stop:()=>co(e),now:()=>fi.isProcessing?fi.timestamp:performance.now()}},PT=2e4;function LT(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<PT;)e+=n,i=t.next(e);return e>=PT?1/0:e}const _8={decay:AT,inertia:AT,tween:Qg,keyframes:Qg,spring:OR};function e0({autoplay:t=!0,delay:e=0,driver:n=w8,keyframes:i,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:u,onComplete:f,onUpdate:d,...p}){let m=1,g=!1,y,w;const v=()=>{w=new Promise(X=>{y=X})};v();let _;const b=_8[r]||Qg;let M;b!==Qg&&typeof i[0]!="number"&&(M=zR([0,100],i,{clamp:!1}),i=[0,100]);const k=b({...p,keyframes:i});let E;a==="mirror"&&(E=b({...p,keyframes:[...i].reverse(),velocity:-(p.velocity||0)}));let I="idle",C=null,L=null,R=null;k.calculatedDuration===null&&s&&(k.calculatedDuration=LT(k));const{calculatedDuration:O}=k;let q=1/0,j=1/0;O!==null&&(q=O+o,j=q*(s+1)-o);let G=0;const W=X=>{if(L===null)return;m>0&&(L=Math.min(L,X)),m<0&&(L=Math.min(X-j/m,L)),C!==null?G=C:G=Math.round(X-L)*m;const Y=G-e*(m>=0?1:-1),z=m>=0?Y<0:Y>j;G=Math.max(Y,0),I==="finished"&&C===null&&(G=j);let xe=G,Ce=k;if(s){const Ge=Math.min(G,j)/q;let be=Math.floor(Ge),$e=Ge%1;!$e&&Ge>=1&&($e=1),$e===1&&be--,be=Math.min(be,s+1),!!(be%2)&&(a==="reverse"?($e=1-$e,o&&($e-=o/q)):a==="mirror"&&(Ce=E)),xe=fa(0,1,$e)*q}const ie=z?{done:!1,value:i[0]}:Ce.next(xe);M&&(ie.value=M(ie.value));let{done:Ne}=ie;!z&&O!==null&&(Ne=m>=0?G>=j:G<=0);const We=C===null&&(I==="finished"||I==="running"&&Ne);return d&&d(ie.value),We&&D(),ie},J=()=>{_&&_.stop(),_=void 0},re=()=>{I="idle",J(),y(),v(),L=R=null},D=()=>{I="finished",f&&f(),J(),y()},F=()=>{if(g)return;_||(_=n(W));const X=_.now();l&&l(),C!==null?L=X-C:(!L||I==="finished")&&(L=X),I==="finished"&&v(),R=L,C=null,I="running",_.start()};t&&F();const A={then(X,Y){return w.then(X,Y)},get time(){return ro(G)},set time(X){X=oa(X),G=X,C!==null||!_||m===0?C=X:L=_.now()-X/m},get duration(){const X=k.calculatedDuration===null?LT(k):k.calculatedDuration;return ro(X)},get speed(){return m},set speed(X){X===m||!_||(m=X,A.time=ro(G))},get state(){return I},play:F,pause:()=>{I="paused",C=G},stop:()=>{g=!0,I!=="idle"&&(I="idle",u&&u(),re())},cancel:()=>{R!==null&&W(R),re()},complete:()=>{I="finished"},sample:X=>(L=0,W(X))};return A}function S8(t){let e;return()=>(e===void 0&&(e=t()),e)}const b8=S8(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),M8=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),qp=10,T8=2e4,E8=(t,e)=>e.type==="spring"||t==="backgroundColor"||!mR(e.ease);function k8(t,e,{onUpdate:n,onComplete:i,...r}){if(!(b8()&&M8.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let o=!1,a,l,u=!1;const f=()=>{l=new Promise(b=>{a=b})};f();let{keyframes:d,duration:p=300,ease:m,times:g}=r;if(E8(e,r)){const b=e0({...r,repeat:0,delay:0});let M={done:!1,value:d[0]};const k=[];let E=0;for(;!M.done&&E<T8;)M=b.sample(E),k.push(M.value),E+=qp;g=void 0,d=k,p=E-qp,m="linear"}const y=N6(t.owner.current,e,d,{...r,duration:p,ease:m,times:g}),w=()=>{u=!1,y.cancel()},v=()=>{u=!0,Zt.update(w),a(),f()};return y.onfinish=()=>{u||(t.set(O6(d,r)),i&&i(),v())},{then(b,M){return l.then(b,M)},attachTimeline(b){return y.timeline=b,y.onfinish=null,vn},get time(){return ro(y.currentTime||0)},set time(b){y.currentTime=oa(b)},get speed(){return y.playbackRate},set speed(b){y.playbackRate=b},get duration(){return ro(p)},play:()=>{o||(y.play(),co(w))},pause:()=>y.pause(),stop:()=>{if(o=!0,y.playState==="idle")return;const{currentTime:b}=y;if(b){const M=e0({...r,autoplay:!1});t.setWithVelocity(M.sample(b-qp).value,M.sample(b).value,qp)}v()},complete:()=>{u||y.finish()},cancel:v}}function C8({keyframes:t,delay:e,onUpdate:n,onComplete:i}){const r=()=>(n&&n(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:vn,pause:vn,stop:vn,then:s=>(s(),Promise.resolve()),cancel:vn,complete:vn});return e?e0({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const A8={type:"spring",stiffness:500,damping:25,restSpeed:10},P8=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),L8={type:"keyframes",duration:.8},R8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},I8=(t,{keyframes:e})=>e.length>2?L8:Fl.has(t)?t.startsWith("scale")?P8(e[1]):A8:R8,Ew=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(da.test(e)||e==="0")&&!e.startsWith("url(")),D8=new Set(["brightness","contrast","saturate","opacity"]);function z8(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match($0)||[];if(!i)return t;const r=n.replace(i,"");let s=D8.has(e)?1:0;return i!==n&&(s*=100),e+"("+s+r+")"}const F8=/([a-z-]*)\(.*?\)/g,kw={...da,getAnimatableNone:t=>{const e=t.match(F8);return e?e.map(z8).join(" "):t}},N8={...KL,color:_i,backgroundColor:_i,outlineColor:_i,fill:_i,stroke:_i,borderColor:_i,borderTopColor:_i,borderRightColor:_i,borderBottomColor:_i,borderLeftColor:_i,filter:kw,WebkitFilter:kw},KS=t=>N8[t];function BR(t,e){let n=KS(t);return n!==kw&&(n=da),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const UR=t=>/^0[^.\s]+$/.test(t);function O8(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||UR(t)}function B8(t,e,n,i){const r=Ew(e,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const o=i.from!==void 0?i.from:t.get();let a;const l=[];for(let u=0;u<s.length;u++)s[u]===null&&(s[u]=u===0?o:s[u-1]),O8(s[u])&&l.push(u),typeof s[u]=="string"&&s[u]!=="none"&&s[u]!=="0"&&(a=s[u]);if(r&&l.length&&a)for(let u=0;u<l.length;u++){const f=l[u];s[f]=BR(e,a)}return s}function U8({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...f}){return!!Object.keys(f).length}function QS(t,e){return t[e]||t.default||t}const V8={skipAnimations:!1},eb=(t,e,n,i={})=>r=>{const s=QS(i,t)||{},o=s.delay||i.delay||0;let{elapsed:a=0}=i;a=a-oa(o);const l=B8(e,t,n,s),u=l[0],f=l[l.length-1],d=Ew(t,u),p=Ew(t,f);let m={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:g=>{e.set(g),s.onUpdate&&s.onUpdate(g)},onComplete:()=>{r(),s.onComplete&&s.onComplete()}};if(U8(s)||(m={...m,...I8(t,m)}),m.duration&&(m.duration=oa(m.duration)),m.repeatDelay&&(m.repeatDelay=oa(m.repeatDelay)),!d||!p||F6.current||s.type===!1||V8.skipAnimations)return C8(m);if(!i.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const g=k8(e,t,m);if(g)return g}return e0(m)};function t0(t){return!!(qi(t)&&t.add)}const VR=t=>/^\-?\d*\.?\d+$/.test(t);function tb(t,e){t.indexOf(e)===-1&&t.push(e)}function nb(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class ib{constructor(){this.subscriptions=[]}add(e){return tb(this.subscriptions,e),()=>nb(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const H8=t=>!isNaN(parseFloat(t));class W8{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:s,timestamp:o}=fi;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,Zt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Zt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=H8(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new ib);const i=this.events[e].add(n);return e==="change"?()=>{i(),Zt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?FR(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function bc(t,e){return new W8(t,e)}const HR=t=>e=>e.test(t),G8={test:t=>t==="auto",parse:t=>t},WR=[Nl,rt,ks,Bo,JB,ZB,G8],_f=t=>WR.find(HR(t)),$8=[...WR,_i,da],j8=t=>$8.find(HR(t));function X8(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,bc(n))}function q8(t,e){const n=X0(t,e);let{transitionEnd:i={},transition:r={},...s}=n?t.makeTargetAnimatable(n,!1):{};s={...s,...i};for(const o in s){const a=f6(s[o]);X8(t,o,a)}}function Y8(t,e,n){var i,r;const s=Object.keys(e).filter(a=>!t.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],u=e[l];let f=null;Array.isArray(u)&&(f=u[0]),f===null&&(f=(r=(i=n[l])!==null&&i!==void 0?i:t.readValue(l))!==null&&r!==void 0?r:e[l]),f!=null&&(typeof f=="string"&&(VR(f)||UR(f))?f=parseFloat(f):!j8(f)&&da.test(u)&&(f=BR(l,u)),t.addValue(l,bc(f,{owner:t})),n[l]===void 0&&(n[l]=f),f!==null&&t.setBaseTarget(l,f))}}function Z8(t,e){return e?(e[t]||e.default||e).from:void 0}function J8(t,e,n){const i={};for(const r in t){const s=Z8(r,e);if(s!==void 0)i[r]=s;else{const o=n.getValue(r);o&&(i[r]=o.get())}}return i}function K8({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function Q8(t,e){const n=t.get();if(Array.isArray(e)){for(let i=0;i<e.length;i++)if(e[i]!==n)return!0}else return n!==e}function GR(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");i&&(s=i);const u=[],f=r&&t.animationState&&t.animationState.getState()[r];for(const d in a){const p=t.getValue(d),m=a[d];if(!p||m===void 0||f&&K8(f,d))continue;const g={delay:n,elapsed:0,...QS(s||{},d)};if(window.HandoffAppearAnimations){const v=t.getProps()[$L];if(v){const _=window.HandoffAppearAnimations(v,d,p,Zt);_!==null&&(g.elapsed=_,g.isHandoff=!0)}}let y=!g.isHandoff&&!Q8(p,m);if(g.type==="spring"&&(p.getVelocity()||g.velocity)&&(y=!1),p.animation&&(y=!1),y)continue;p.start(eb(d,p,m,t.shouldReduceMotion&&Fl.has(d)?{type:!1}:g));const w=p.animation;t0(l)&&(l.add(d),w.then(()=>l.remove(d))),u.push(w)}return o&&Promise.all(u).then(()=>{o&&q8(t,o)}),u}function Cw(t,e,n={}){const i=X0(t,e,n.custom);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const s=i?()=>Promise.all(GR(t,i,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:d}=r;return eU(t,e,u+l,f,d,n)}:()=>Promise.resolve(),{when:a}=r;if(a){const[l,u]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>u())}else return Promise.all([s(),o(n.delay)])}function eU(t,e,n=0,i=0,r=1,s){const o=[],a=(t.variantChildren.size-1)*i,l=r===1?(u=0)=>u*i:(u=0)=>a-u*i;return Array.from(t.variantChildren).sort(tU).forEach((u,f)=>{u.notify("AnimationStart",e),o.push(Cw(u,e,{...s,delay:n+l(f)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function tU(t,e){return t.sortNodePosition(e)}function nU(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>Cw(t,s,n));i=Promise.all(r)}else if(typeof e=="string")i=Cw(t,e,n);else{const r=typeof e=="function"?X0(t,e,n.custom):e;i=Promise.all(GR(t,r,n))}return i.then(()=>t.notify("AnimationComplete",e))}const iU=[...OS].reverse(),rU=OS.length;function sU(t){return e=>Promise.all(e.map(({animation:n,options:i})=>nU(t,n,i)))}function oU(t){let e=sU(t);const n=lU();let i=!0;const r=(l,u)=>{const f=X0(t,u);if(f){const{transition:d,transitionEnd:p,...m}=f;l={...l,...m,...p}}return l};function s(l){e=l(t)}function o(l,u){const f=t.getProps(),d=t.getVariantContext(!0)||{},p=[],m=new Set;let g={},y=1/0;for(let v=0;v<rU;v++){const _=iU[v],b=n[_],M=f[_]!==void 0?f[_]:d[_],k=Cd(M),E=_===u?b.isActive:null;E===!1&&(y=v);let I=M===d[_]&&M!==f[_]&&k;if(I&&i&&t.manuallyAnimateOnMount&&(I=!1),b.protectedKeys={...g},!b.isActive&&E===null||!M&&!b.prevProp||W0(M)||typeof M=="boolean")continue;let L=aU(b.prevProp,M)||_===u&&b.isActive&&!I&&k||v>y&&k,R=!1;const O=Array.isArray(M)?M:[M];let q=O.reduce(r,{});E===!1&&(q={});const{prevResolvedValues:j={}}=b,G={...j,...q},W=J=>{L=!0,m.has(J)&&(R=!0,m.delete(J)),b.needsAnimating[J]=!0};for(const J in G){const re=q[J],D=j[J];if(g.hasOwnProperty(J))continue;let F=!1;Jg(re)&&Jg(D)?F=!hR(re,D):F=re!==D,F?re!==void 0?W(J):m.add(J):re!==void 0&&m.has(J)?W(J):b.protectedKeys[J]=!0}b.prevProp=M,b.prevResolvedValues=q,b.isActive&&(g={...g,...q}),i&&t.blockInitialAnimation&&(L=!1),L&&(!I||R)&&p.push(...O.map(J=>({animation:J,options:{type:_,...l}})))}if(m.size){const v={};m.forEach(_=>{const b=t.getBaseTarget(_);b!==void 0&&(v[_]=b)}),p.push({animation:v})}let w=!!p.length;return i&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(w=!1),i=!1,w?e(p):Promise.resolve()}function a(l,u,f){var d;if(n[l].isActive===u)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(m=>{var g;return(g=m.animationState)===null||g===void 0?void 0:g.setActive(l,u)}),n[l].isActive=u;const p=o(f,l);for(const m in n)n[m].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n}}function aU(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!hR(e,t):!1}function Fa(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function lU(){return{animate:Fa(!0),whileInView:Fa(),whileHover:Fa(),whileTap:Fa(),whileDrag:Fa(),whileFocus:Fa(),exit:Fa()}}class uU extends _a{constructor(e){super(e),e.animationState||(e.animationState=oU(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),W0(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let cU=0;class fU extends _a{constructor(){super(...arguments),this.id=cU++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const dU={animation:{Feature:uU},exit:{Feature:fU}},RT=(t,e)=>Math.abs(t-e);function hU(t,e){const n=RT(t.x,e.x),i=RT(t.y,e.y);return Math.sqrt(n**2+i**2)}class $R{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=uv(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=hU(d.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:g}=d,{timestamp:y}=fi;this.history.push({...g,timestamp:y});const{onStart:w,onMove:v}=this.handlers;p||(w&&w(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,d)},this.handlePointerMove=(d,p)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=lv(p,this.transformPagePoint),Zt.update(this.updatePoint,!0)},this.handlePointerUp=(d,p)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=uv(d.type==="pointercancel"?this.lastMoveEventInfo:lv(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,w),g&&g(d,w)},!lR(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const o=j0(e),a=lv(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=fi;this.history=[{...l,timestamp:u}];const{onSessionStart:f}=n;f&&f(e,uv(a,this.history)),this.removeListeners=sa(io(this.contextWindow,"pointermove",this.handlePointerMove),io(this.contextWindow,"pointerup",this.handlePointerUp),io(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),co(this.updatePoint)}}function lv(t,e){return e?{point:e(t.point)}:t}function IT(t,e){return{x:t.x-e.x,y:t.y-e.y}}function uv({point:t},e){return{point:t,delta:IT(t,jR(e)),offset:IT(t,pU(e)),velocity:mU(e,.1)}}function pU(t){return t[0]}function jR(t){return t[t.length-1]}function mU(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=jR(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>oa(e)));)n--;if(!i)return{x:0,y:0};const s=ro(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ur(t){return t.max-t.min}function Aw(t,e=0,n=.01){return Math.abs(t-e)<=n}function DT(t,e,n,i=.5){t.origin=i,t.originPoint=dn(e.min,e.max,t.origin),t.scale=ur(n)/ur(e),(Aw(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=dn(n.min,n.max,t.origin)-t.originPoint,(Aw(t.translate)||isNaN(t.translate))&&(t.translate=0)}function td(t,e,n,i){DT(t.x,e.x,n.x,i?i.originX:void 0),DT(t.y,e.y,n.y,i?i.originY:void 0)}function zT(t,e,n){t.min=n.min+e.min,t.max=t.min+ur(e)}function gU(t,e,n){zT(t.x,e.x,n.x),zT(t.y,e.y,n.y)}function FT(t,e,n){t.min=e.min-n.min,t.max=t.min+ur(e)}function nd(t,e,n){FT(t.x,e.x,n.x),FT(t.y,e.y,n.y)}function yU(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?dn(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?dn(n,t,i.max):Math.min(t,n)),t}function NT(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function xU(t,{top:e,left:n,bottom:i,right:r}){return{x:NT(t.x,n,r),y:NT(t.y,e,i)}}function OT(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function vU(t,e){return{x:OT(t.x,e.x),y:OT(t.y,e.y)}}function wU(t,e){let n=.5;const i=ur(t),r=ur(e);return r>i?n=Pd(e.min,e.max-i,t.min):i>r&&(n=Pd(t.min,t.max-r,e.min)),fa(0,1,n)}function _U(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Pw=.35;function SU(t=Pw){return t===!1?t=0:t===!0&&(t=Pw),{x:BT(t,"left","right"),y:BT(t,"top","bottom")}}function BT(t,e,n){return{min:UT(t,e),max:UT(t,n)}}function UT(t,e){return typeof t=="number"?t:t[e]||0}const VT=()=>({translate:0,scale:1,origin:0,originPoint:0}),qu=()=>({x:VT(),y:VT()}),HT=()=>({min:0,max:0}),Ln=()=>({x:HT(),y:HT()});function Pr(t){return[t("x"),t("y")]}function XR({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function bU({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function MU(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function cv(t){return t===void 0||t===1}function Lw({scale:t,scaleX:e,scaleY:n}){return!cv(t)||!cv(e)||!cv(n)}function qa(t){return Lw(t)||qR(t)||t.z||t.rotate||t.rotateX||t.rotateY}function qR(t){return WT(t.x)||WT(t.y)}function WT(t){return t&&t!=="0%"}function n0(t,e,n){const i=t-n,r=e*i;return n+r}function GT(t,e,n,i,r){return r!==void 0&&(t=n0(t,r,i)),n0(t,n,i)+e}function Rw(t,e=0,n=1,i,r){t.min=GT(t.min,e,n,i,r),t.max=GT(t.max,e,n,i,r)}function YR(t,{x:e,y:n}){Rw(t.x,e.translate,e.scale,e.originPoint),Rw(t.y,n.translate,n.scale,n.originPoint)}function TU(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=n[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Yu(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,YR(t,o)),i&&qa(s.latestValues)&&Yu(t,s.latestValues))}e.x=$T(e.x),e.y=$T(e.y)}function $T(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Ho(t,e){t.min=t.min+e,t.max=t.max+e}function jT(t,e,[n,i,r]){const s=e[r]!==void 0?e[r]:.5,o=dn(t.min,t.max,s);Rw(t,e[n],e[i],o,e.scale)}const EU=["x","scaleX","originX"],kU=["y","scaleY","originY"];function Yu(t,e){jT(t.x,e,EU),jT(t.y,e,kU)}function ZR(t,e){return XR(MU(t.getBoundingClientRect(),e))}function CU(t,e,n){const i=ZR(t,n),{scroll:r}=e;return r&&(Ho(i.x,r.offset.x),Ho(i.y,r.offset.y)),i}const JR=({current:t})=>t?t.ownerDocument.defaultView:null,AU=new WeakMap;class PU{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ln(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=f=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(j0(f,"page").point)},s=(f,d)=>{const{drag:p,dragPropagation:m,onDragStart:g}=this.getProps();if(p&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=cR(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Pr(w=>{let v=this.getAxisMotionValue(w).get()||0;if(ks.test(v)){const{projection:_}=this.visualElement;if(_&&_.layout){const b=_.layout.layoutBox[w];b&&(v=ur(b)*(parseFloat(v)/100))}}this.originPoint[w]=v}),g&&Zt.update(()=>g(f,d),!1,!0);const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(f,d)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:g,onDrag:y}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:w}=d;if(m&&this.currentDirection===null){this.currentDirection=LU(w),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",d.point,w),this.updateAxis("y",d.point,w),this.visualElement.render(),y&&y(f,d)},a=(f,d)=>this.stop(f,d),l=()=>Pr(f=>{var d;return this.getAnimationState(f)==="paused"&&((d=this.getAxisMotionValue(f).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new $R(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:JR(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&Zt.update(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Yp(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=yU(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&ju(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=xU(r.layoutBox,n):this.constraints=!1,this.elastic=SU(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Pr(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=_U(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ju(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=CU(i,r.root,this.visualElement.getTransformPagePoint());let o=vU(r.layout.layoutBox,s);if(n){const a=n(bU(o));this.hasMutatedConstraints=!!a,a&&(o=XR(a))}return o}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=Pr(f=>{if(!Yp(f,n,this.currentDirection))return;let d=l&&l[f]||{};o&&(d={min:0,max:0});const p=r?200:1e6,m=r?40:1e7,g={type:"inertia",velocity:i?e[f]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(f,g)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return i.start(eb(e,i,0,n))}stopAnimation(){Pr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Pr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Pr(n=>{const{drag:i}=this.getProps();if(!Yp(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(n);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[n];s.set(e[n]-dn(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!ju(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Pr(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();r[o]=wU({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Pr(o=>{if(!Yp(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(dn(l,u,r[o]))})}addListeners(){if(!this.visualElement.current)return;AU.set(this.visualElement,this);const e=this.visualElement.current,n=io(e,"pointerdown",l=>{const{drag:u,dragListener:f=!0}=this.getProps();u&&f&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();ju(l)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const o=Ks(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Pr(f=>{const d=this.getAxisMotionValue(f);d&&(this.originPoint[f]+=l[f].translate,d.set(d.get()+l[f].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=Pw,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Yp(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function LU(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class RU extends _a{constructor(e){super(e),this.removeGroupControls=vn,this.removeListeners=vn,this.controls=new PU(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||vn}unmount(){this.removeGroupControls(),this.removeListeners()}}const XT=t=>(e,n)=>{t&&Zt.update(()=>t(e,n))};class IU extends _a{constructor(){super(...arguments),this.removePointerDownListener=vn}onPointerDown(e){this.session=new $R(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:JR(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:XT(e),onStart:XT(n),onMove:i,onEnd:(s,o)=>{delete this.session,r&&Zt.update(()=>r(s,o))}}}mount(){this.removePointerDownListener=io(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function DU(){const t=H.useContext(V0);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,r=H.useId();return H.useEffect(()=>i(r),[]),!e&&n?[!1,()=>n&&n(r)]:[!0]}const ag={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function qT(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Sf={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(rt.test(t))t=parseFloat(t);else return t;const n=qT(t,e.target.x),i=qT(t,e.target.y);return`${n}% ${i}%`}},zU={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=da.parse(t);if(r.length>5)return i;const s=da.createTransformer(t),o=typeof r[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const u=dn(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=u),typeof r[3+o]=="number"&&(r[3+o]/=u),s(r)}};class FU extends En.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;WB(NU),s&&(n.group&&n.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),ag.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Zt.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function KR(t){const[e,n]=DU(),i=H.useContext(US);return En.createElement(FU,{...t,layoutGroup:i,switchLayoutGroup:H.useContext(XL),isPresent:e,safeToRemove:n})}const NU={borderRadius:{...Sf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Sf,borderTopRightRadius:Sf,borderBottomLeftRadius:Sf,borderBottomRightRadius:Sf,boxShadow:zU},QR=["TopLeft","TopRight","BottomLeft","BottomRight"],OU=QR.length,YT=t=>typeof t=="string"?parseFloat(t):t,ZT=t=>typeof t=="number"||rt.test(t);function BU(t,e,n,i,r,s){r?(t.opacity=dn(0,n.opacity!==void 0?n.opacity:1,UU(i)),t.opacityExit=dn(e.opacity!==void 0?e.opacity:1,0,VU(i))):s&&(t.opacity=dn(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let o=0;o<OU;o++){const a=`border${QR[o]}Radius`;let l=JT(e,a),u=JT(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||ZT(l)===ZT(u)?(t[a]=Math.max(dn(YT(l),YT(u),i),0),(ks.test(u)||ks.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=dn(e.rotate||0,n.rotate||0,i))}function JT(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const UU=eI(0,.5,SR),VU=eI(.5,.95,vn);function eI(t,e,n){return i=>i<t?0:i>e?1:n(Pd(t,e,i))}function KT(t,e){t.min=e.min,t.max=e.max}function kr(t,e){KT(t.x,e.x),KT(t.y,e.y)}function QT(t,e,n,i,r){return t-=e,t=n0(t,1/n,i),r!==void 0&&(t=n0(t,1/r,i)),t}function HU(t,e=0,n=1,i=.5,r,s=t,o=t){if(ks.test(e)&&(e=parseFloat(e),e=dn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=dn(s.min,s.max,i);t===s&&(a-=e),t.min=QT(t.min,e,n,a,r),t.max=QT(t.max,e,n,a,r)}function eE(t,e,[n,i,r],s,o){HU(t,e[n],e[i],e[r],e.scale,s,o)}const WU=["x","scaleX","originX"],GU=["y","scaleY","originY"];function tE(t,e,n,i){eE(t.x,e,WU,n?n.x:void 0,i?i.x:void 0),eE(t.y,e,GU,n?n.y:void 0,i?i.y:void 0)}function nE(t){return t.translate===0&&t.scale===1}function tI(t){return nE(t.x)&&nE(t.y)}function $U(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function nI(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function iE(t){return ur(t.x)/ur(t.y)}class jU{constructor(){this.members=[]}add(e){tb(this.members,e),e.scheduleRender()}remove(e){if(nb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function rE(t,e,n){let i="";const r=t.x.translate/e.x,s=t.y.translate/e.y;if((r||s)&&(i=`translate3d(${r}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:u,rotateY:f}=n;l&&(i+=`rotate(${l}deg) `),u&&(i+=`rotateX(${u}deg) `),f&&(i+=`rotateY(${f}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(i+=`scale(${o}, ${a})`),i||"none"}const XU=(t,e)=>t.depth-e.depth;class qU{constructor(){this.children=[],this.isDirty=!1}add(e){tb(this.children,e),this.isDirty=!0}remove(e){nb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(XU),this.isDirty=!1,this.children.forEach(e)}}function YU(t,e){const n=performance.now(),i=({timestamp:r})=>{const s=r-n;s>=e&&(co(i),t(s-e))};return Zt.read(i,!0),()=>co(i)}function ZU(t){window.MotionDebug&&window.MotionDebug.record(t)}function JU(t){return t instanceof SVGElement&&t.tagName!=="svg"}function KU(t,e,n){const i=qi(t)?t:bc(t);return i.start(eb("",i,e,n)),i.animation}const sE=["","X","Y","Z"],QU={visibility:"hidden"},oE=1e3;let eV=0;const Ya={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function iI({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=eV++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ya.totalNodes=Ya.resolvedTargetDeltas=Ya.recalculatedProjection=0,this.nodes.forEach(iV),this.nodes.forEach(lV),this.nodes.forEach(uV),this.nodes.forEach(rV),ZU(Ya)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new qU)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new ib),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=JU(o),this.instance=o;const{layoutId:l,layout:u,visualElement:f}=this.options;if(f&&!f.current&&f.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),t){let d;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=YU(p,250),ag.hasAnimatedSinceResize&&(ag.hasAnimatedSinceResize=!1,this.nodes.forEach(lE))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&f&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||f.getDefaultTransition()||pV,{onLayoutAnimationStart:w,onLayoutAnimationComplete:v}=f.getProps(),_=!this.targetLayout||!nI(this.targetLayout,g)||m,b=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||p&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,b);const M={...QS(y,"layout"),onPlay:w,onComplete:v};(f.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M)}else p||lE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,co(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(cV),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const d=this.path[f];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(aE);return}this.isUpdating||this.nodes.forEach(oV),this.isUpdating=!1,this.nodes.forEach(aV),this.nodes.forEach(tV),this.nodes.forEach(nV),this.clearAllSnapshots();const a=performance.now();fi.delta=fa(0,1e3/60,a-fi.timestamp),fi.timestamp=a,fi.isProcessing=!0,ev.update.process(fi),ev.preRender.process(fi),ev.render.process(fi),fi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(sV),this.sharedNodes.forEach(fV)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Zt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Zt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ln(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!tI(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,f=u!==this.prevTransformTemplateValue;o&&(a||qa(this.latestValues)||f)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),mV(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Ln();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Ho(a.x,l.offset.x),Ho(a.y,l.offset.y)),a}removeElementScroll(o){const a=Ln();kr(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:f,options:d}=u;if(u!==this.root&&f&&d.layoutScroll){if(f.isRoot){kr(a,o);const{scroll:p}=this.root;p&&(Ho(a.x,-p.offset.x),Ho(a.y,-p.offset.y))}Ho(a.x,f.offset.x),Ho(a.y,f.offset.y)}}return a}applyTransform(o,a=!1){const l=Ln();kr(l,o);for(let u=0;u<this.path.length;u++){const f=this.path[u];!a&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Yu(l,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),qa(f.latestValues)&&Yu(l,f.latestValues)}return qa(this.latestValues)&&Yu(l,this.latestValues),l}removeTransform(o){const a=Ln();kr(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!qa(u.latestValues))continue;Lw(u.latestValues)&&u.updateSnapshot();const f=Ln(),d=u.measurePageBox();kr(f,d),tE(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,f)}return qa(this.latestValues)&&tE(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==fi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:p}=this.options;if(!(!this.layout||!(d||p))){if(this.resolvedRelativeTargetAt=fi.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ln(),this.relativeTargetOrigin=Ln(),nd(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),kr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ln(),this.targetWithTransforms=Ln()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),gU(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):kr(this.target,this.layout.layoutBox),YR(this.target,this.targetDelta)):kr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ln(),this.relativeTargetOrigin=Ln(),nd(this.relativeTargetOrigin,this.target,m.target),kr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ya.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Lw(this.parent.latestValues)||qR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===fi.timestamp&&(u=!1),u)return;const{layout:f,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||d))return;kr(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;TU(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:g}=a;if(!g){this.projectionTransform&&(this.projectionDelta=qu(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=qu(),this.projectionDeltaWithTransform=qu());const y=this.projectionTransform;td(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=rE(this.projectionDelta,this.treeScale),(this.projectionTransform!==y||this.treeScale.x!==p||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),Ya.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},f={...this.latestValues},d=qu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Ln(),m=l?l.source:void 0,g=this.layout?this.layout.source:void 0,y=m!==g,w=this.getStack(),v=!w||w.members.length<=1,_=!!(y&&!v&&this.options.crossfade===!0&&!this.path.some(hV));this.animationProgress=0;let b;this.mixTargetDelta=M=>{const k=M/1e3;uE(d.x,o.x,k),uE(d.y,o.y,k),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(nd(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),dV(this.relativeTarget,this.relativeTargetOrigin,p,k),b&&$U(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Ln()),kr(b,this.relativeTarget)),y&&(this.animationValues=f,BU(f,u,this.latestValues,k,_,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(co(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Zt.update(()=>{ag.hasAnimatedSinceResize=!0,this.currentAnimation=KU(0,oE,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(oE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:f}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&rI(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Ln();const d=ur(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const p=ur(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}kr(a,l),Yu(a,f),td(this.projectionDeltaWithTransform,this.layoutCorrected,a,f)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new jU),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const u={};for(let f=0;f<sE.length;f++){const d="rotate"+sE[f];l[d]&&(u[d]=l[d],o.setStaticValue(d,0))}o.render();for(const f in u)o.setStaticValue(f,u[f]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return QU;const u={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=og(o==null?void 0:o.pointerEvents)||"",u.transform=f?f(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=og(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!qa(this.latestValues)&&(y.transform=f?f({},""):"none",this.hasProjected=!1),y}const p=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=rE(this.projectionDeltaWithTransform,this.treeScale,p),f&&(u.transform=f(p,u.transform));const{x:m,y:g}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=d===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const y in Yg){if(p[y]===void 0)continue;const{correct:w,applyTo:v}=Yg[y],_=u.transform==="none"?p[y]:w(p[y],d);if(v){const b=v.length;for(let M=0;M<b;M++)u[v[M]]=_}else u[y]=_}return this.options.layoutId&&(u.pointerEvents=d===this?og(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(aE),this.root.sharedNodes.clear()}}}function tV(t){t.updateLayout()}function nV(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?Pr(d=>{const p=o?n.measuredBox[d]:n.layoutBox[d],m=ur(p);p.min=i[d].min,p.max=p.min+m}):rI(s,n.layoutBox,i)&&Pr(d=>{const p=o?n.measuredBox[d]:n.layoutBox[d],m=ur(i[d]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+m)});const a=qu();td(a,i,n.layoutBox);const l=qu();o?td(l,t.applyTransform(r,!0),n.measuredBox):td(l,i,n.layoutBox);const u=!tI(a);let f=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:p,layout:m}=d;if(p&&m){const g=Ln();nd(g,n.layoutBox,p.layoutBox);const y=Ln();nd(y,i,m.layoutBox),nI(g,y)||(f=!0),d.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=g,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:f})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function iV(t){Ya.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function rV(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function sV(t){t.clearSnapshot()}function aE(t){t.clearMeasurements()}function oV(t){t.isLayoutDirty=!1}function aV(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function lE(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function lV(t){t.resolveTargetDelta()}function uV(t){t.calcProjection()}function cV(t){t.resetRotation()}function fV(t){t.removeLeadSnapshot()}function uE(t,e,n){t.translate=dn(e.translate,0,n),t.scale=dn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function cE(t,e,n,i){t.min=dn(e.min,n.min,i),t.max=dn(e.max,n.max,i)}function dV(t,e,n,i){cE(t.x,e.x,n.x,i),cE(t.y,e.y,n.y,i)}function hV(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const pV={duration:.45,ease:[.4,0,.1,1]},fE=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),dE=fE("applewebkit/")&&!fE("chrome/")?Math.round:vn;function hE(t){t.min=dE(t.min),t.max=dE(t.max)}function mV(t){hE(t.x),hE(t.y)}function rI(t,e,n){return t==="position"||t==="preserve-aspect"&&!Aw(iE(e),iE(n),.2)}const gV=iI({attachResizeListener:(t,e)=>Ks(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),fv={current:void 0},sI=iI({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!fv.current){const t=new gV({});t.mount(window),t.setOptions({layoutScroll:!0}),fv.current=t}return fv.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),yV={pan:{Feature:IU},drag:{Feature:RU,ProjectionNode:sI,MeasureLayout:KR}},xV=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function vV(t){const e=xV.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]}function Iw(t,e,n=1){const[i,r]=vV(t);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return VR(o)?parseFloat(o):o}else return Sw(r)?Iw(r,e,n+1):r}function wV(t,{...e},n){const i=t.current;if(!(i instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(r=>{const s=r.get();if(!Sw(s))return;const o=Iw(s,i);o&&r.set(o)});for(const r in e){const s=e[r];if(!Sw(s))continue;const o=Iw(s,i);o&&(e[r]=o,n||(n={}),n[r]===void 0&&(n[r]=s))}return{target:e,transitionEnd:n}}const _V=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),oI=t=>_V.has(t),SV=t=>Object.keys(t).some(oI),pE=t=>t===Nl||t===rt,mE=(t,e)=>parseFloat(t.split(", ")[e]),gE=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return mE(r[1],e);{const s=i.match(/^matrix\((.+)\)$/);return s?mE(s[1],t):0}},bV=new Set(["x","y","z"]),MV=nh.filter(t=>!bV.has(t));function TV(t){const e=[];return MV.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Mc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:gE(4,13),y:gE(5,14)};Mc.translateX=Mc.x;Mc.translateY=Mc.y;const EV=(t,e,n)=>{const i=e.measureViewportBox(),r=e.current,s=getComputedStyle(r),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(u=>{a[u]=Mc[u](i,s)}),e.render();const l=e.measureViewportBox();return n.forEach(u=>{const f=e.getValue(u);f&&f.jump(a[u]),t[u]=Mc[u](l,s)}),t},kV=(t,e,n={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(oI);let s=[],o=!1;const a=[];if(r.forEach(l=>{const u=t.getValue(l);if(!t.hasValue(l))return;let f=n[l],d=_f(f);const p=e[l];let m;if(Jg(p)){const g=p.length,y=p[0]===null?1:0;f=p[y],d=_f(f);for(let w=y;w<g&&p[w]!==null;w++)m?qS(_f(p[w])===m):m=_f(p[w])}else m=_f(p);if(d!==m)if(pE(d)&&pE(m)){const g=u.get();typeof g=="string"&&u.set(parseFloat(g)),typeof p=="string"?e[l]=parseFloat(p):Array.isArray(p)&&m===rt&&(e[l]=p.map(parseFloat))}else d!=null&&d.transform&&(m!=null&&m.transform)&&(f===0||p===0)?f===0?u.set(m.transform(f)):e[l]=d.transform(p):(o||(s=TV(t),o=!0),a.push(l),i[l]=i[l]!==void 0?i[l]:e[l],u.jump(p))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,u=EV(e,t,a);return s.length&&s.forEach(([f,d])=>{t.getValue(f).set(d)}),t.render(),H0&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:i}}else return{target:e,transitionEnd:i}};function CV(t,e,n,i){return SV(e)?kV(t,e,n,i):{target:e,transitionEnd:i}}const AV=(t,e,n,i)=>{const r=wV(t,e,i);return e=r.target,i=r.transitionEnd,CV(t,e,n,i)},Dw={current:null},aI={current:!1};function PV(){if(aI.current=!0,!!H0)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Dw.current=t.matches;t.addListener(e),e()}else Dw.current=!1}function LV(t,e,n){const{willChange:i}=e;for(const r in e){const s=e[r],o=n[r];if(qi(s))t.addValue(r,s),t0(i)&&i.add(r);else if(qi(o))t.addValue(r,bc(s,{owner:t})),t0(i)&&i.remove(r);else if(o!==s)if(t.hasValue(r)){const a=t.getValue(r);!a.hasAnimated&&a.set(s)}else{const a=t.getStaticValue(r);t.addValue(r,bc(a!==void 0?a:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const yE=new WeakMap,lI=Object.keys(Ad),RV=lI.length,xE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],IV=BS.length;class DV{constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Zt.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.isControllingVariants=G0(n),this.isVariantNode=jL(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...f}=this.scrapeMotionValuesFromProps(n,{});for(const d in f){const p=f[d];a[d]!==void 0&&qi(p)&&(p.set(a[d],!1),t0(u)&&u.add(d))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,yE.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),aI.current||PV(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Dw.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){yE.delete(this.current),this.projection&&this.projection.unmount(),co(this.notifyUpdate),co(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const i=Fl.has(e),r=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Zt.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},i,r,s){let o,a;for(let l=0;l<RV;l++){const u=lI[l],{isEnabled:f,Feature:d,ProjectionNode:p,MeasureLayout:m}=Ad[u];p&&(o=p),f(n)&&(!this.features[u]&&d&&(this.features[u]=new d(this)),m&&(a=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:f,dragConstraints:d,layoutScroll:p,layoutRoot:m}=n;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!f||d&&ju(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:s,layoutScroll:p,layoutRoot:m})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ln()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<xE.length;i++){const r=xE[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s=e["on"+r];s&&(this.propEventSubscriptions[r]=this.on(r,s))}this.prevMotionValues=LV(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<IV;i++){const r=BS[i],s=this.props[r];(Cd(s)||s===!1)&&(n[r]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=bc(n,{owner:this}),this.addValue(e,i)),i}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(n=XS(this.props,i))===null||n===void 0?void 0:n[e]:void 0;if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!qi(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new ib),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class uI extends DV{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...i},{transformValues:r},s){let o=J8(i,e||{},this);if(r&&(n&&(n=r(n)),i&&(i=r(i)),o&&(o=r(o))),s){Y8(this,i,o);const a=AV(this,i,o,n);n=a.transitionEnd,i=a.target}return{transition:e,transitionEnd:n,...i}}}function zV(t){return window.getComputedStyle(t)}class FV extends uI{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(Fl.has(n)){const i=KS(n);return i&&i.default||0}else{const i=zV(e),r=(ZL(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return ZR(e,n)}build(e,n,i,r){HS(e,n,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,n){return jS(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;qi(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,i,r){nR(e,n,i,r)}}class NV extends uI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Fl.has(n)){const i=KS(n);return i&&i.default||0}return n=iR.has(n)?n:NS(n),e.getAttribute(n)}measureInstanceViewportBox(){return Ln()}scrapeMotionValuesFromProps(e,n){return sR(e,n)}build(e,n,i,r){GS(e,n,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,i,r){rR(e,n,i,r)}mount(e){this.isSVGTag=$S(e.tagName),super.mount(e)}}const OV=(t,e)=>VS(t)?new NV(e,{enableHardwareAcceleration:!1}):new FV(e,{enableHardwareAcceleration:!0}),BV={layout:{ProjectionNode:sI,MeasureLayout:KR}},UV={...dU,...R6,...yV,...BV},Ei=VB((t,e)=>v6(t,e,UV,OV));function cI(){const t=H.useRef(!1);return FS(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function VV(){const t=cI(),[e,n]=H.useState(0),i=H.useCallback(()=>{t.current&&n(e+1)},[e]);return[H.useCallback(()=>Zt.postRender(i),[i]),e]}class HV extends H.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function WV({children:t,isPresent:e}){const n=H.useId(),i=H.useRef(null),r=H.useRef({width:0,height:0,top:0,left:0});return H.useInsertionEffect(()=>{const{width:s,height:o,top:a,left:l}=r.current;if(e||!i.current||!s||!o)return;i.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),H.createElement(HV,{isPresent:e,childRef:i,sizeRef:r},H.cloneElement(t,{ref:i}))}const dv=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:o})=>{const a=oR(GV),l=H.useId(),u=H.useMemo(()=>({id:l,initial:e,isPresent:n,custom:r,onExitComplete:f=>{a.set(f,!0);for(const d of a.values())if(!d)return;i&&i()},register:f=>(a.set(f,!1),()=>a.delete(f))}),s?void 0:[n]);return H.useMemo(()=>{a.forEach((f,d)=>a.set(d,!1))},[n]),H.useEffect(()=>{!n&&!a.size&&i&&i()},[n]),o==="popLayout"&&(t=H.createElement(WV,{isPresent:n},t)),H.createElement(V0.Provider,{value:u},t)};function GV(){return new Map}function $V(t){return H.useEffect(()=>()=>t(),[])}const Za=t=>t.key||"";function jV(t,e){t.forEach(n=>{const i=Za(n);e.set(i,n)})}function XV(t){const e=[];return H.Children.forEach(t,n=>{H.isValidElement(n)&&e.push(n)}),e}const Tc=({children:t,custom:e,initial:n=!0,onExitComplete:i,exitBeforeEnter:r,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=H.useContext(US).forceRender||VV()[0],l=cI(),u=XV(t);let f=u;const d=H.useRef(new Map).current,p=H.useRef(f),m=H.useRef(new Map).current,g=H.useRef(!0);if(FS(()=>{g.current=!1,jV(u,m),p.current=f}),$V(()=>{g.current=!0,m.clear(),d.clear()}),g.current)return H.createElement(H.Fragment,null,f.map(_=>H.createElement(dv,{key:Za(_),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:s,mode:o},_)));f=[...f];const y=p.current.map(Za),w=u.map(Za),v=y.length;for(let _=0;_<v;_++){const b=y[_];w.indexOf(b)===-1&&!d.has(b)&&d.set(b,void 0)}return o==="wait"&&d.size&&(f=[]),d.forEach((_,b)=>{if(w.indexOf(b)!==-1)return;const M=m.get(b);if(!M)return;const k=y.indexOf(b);let E=_;if(!E){const I=()=>{d.delete(b);const C=Array.from(m.keys()).filter(L=>!w.includes(L));if(C.forEach(L=>m.delete(L)),p.current=u.filter(L=>{const R=Za(L);return R===b||C.includes(R)}),!d.size){if(l.current===!1)return;a(),i&&i()}};E=H.createElement(dv,{key:Za(M),isPresent:!1,onExitComplete:I,custom:e,presenceAffectsLayout:s,mode:o},M),d.set(b,E)}f.splice(k,0,E)}),f=f.map(_=>{const b=_.key;return d.has(b)?_:H.createElement(dv,{key:Za(_),isPresent:!0,presenceAffectsLayout:s,mode:o},_)}),H.createElement(H.Fragment,null,d.size?f:f.map(_=>H.cloneElement(_)))};var fI={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},vE=En.createContext&&En.createContext(fI),qV=["attr","size","title"];function YV(t,e){if(t==null)return{};var n=ZV(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function ZV(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function i0(){return i0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},i0.apply(this,arguments)}function wE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function r0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wE(Object(n),!0).forEach(function(i){JV(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wE(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function JV(t,e,n){return e=KV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KV(t){var e=QV(t,"string");return typeof e=="symbol"?e:e+""}function QV(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dI(t){return t&&t.map((e,n)=>En.createElement(e.tag,r0({key:n},e.attr),dI(e.child)))}function dr(t){return e=>En.createElement(e9,i0({attr:r0({},t.attr)},e),dI(t.child))}function e9(t){var e=n=>{var{attr:i,size:r,title:s}=t,o=YV(t,qV),a=r||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),En.createElement("svg",i0({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,o,{className:l,style:r0(r0({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&En.createElement("title",null,s),t.children)};return vE!==void 0?En.createElement(vE.Consumer,null,n=>e(n)):e(fI)}function t9(t){return dr({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(t)}function hI(t){return dr({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"},child:[]},{tag:"path",attr:{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"},child:[]}]})(t)}function n9(t){return dr({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4 2a2 2 0 00-2 2v11a3 3 0 106 0V4a2 2 0 00-2-2H4zm1 14a1 1 0 100-2 1 1 0 000 2zm5-1.757l4.9-4.9a2 2 0 000-2.828L13.485 5.1a2 2 0 00-2.828 0L10 5.757v8.486zM16 18H9.071l6-6H16a2 2 0 012 2v2a2 2 0 01-2 2z",clipRule:"evenodd"},child:[]}]})(t)}function i9(t){return dr({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"},child:[]}]})(t)}function pI(t){return dr({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"},child:[]}]})(t)}function r9(t){return dr({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"},child:[]}]})(t)}function mI(t){return dr({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.707 3.293a1 1 0 010 1.414L5.414 7H11a7 7 0 017 7v2a1 1 0 11-2 0v-2a5 5 0 00-5-5H5.414l2.293 2.293a1 1 0 11-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"},child:[]}]})(t)}function gI(t){return dr({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(t)}/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const q0="144",s9={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o9={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},yI=0,zw=1,xI=2,a9=3,l9=0,rb=1,sb=2,Zu=3,Cl=0,ji=1,Qs=2,so=0,ml=1,Fw=2,Nw=3,Ow=4,vI=5,Qa=100,wI=101,_I=102,Bw=103,Uw=104,SI=200,bI=201,MI=202,TI=203,ob=204,ab=205,EI=206,kI=207,CI=208,AI=209,PI=210,LI=0,RI=1,II=2,s0=3,DI=4,zI=5,FI=6,NI=7,oh=0,OI=1,BI=2,os=0,UI=1,VI=2,HI=3,Y0=4,WI=5,Z0=300,ha=301,pa=302,Ld=303,Rd=304,Nc=306,Al=1e3,bi=1001,Id=1002,Dn=1003,o0=1004,u9=1004,a0=1005,c9=1005,Mn=1006,lb=1007,f9=1007,Ol=1008,d9=1008,ma=1009,GI=1010,$I=1011,ub=1012,jI=1013,Yo=1014,eo=1015,Ec=1016,XI=1017,qI=1018,gl=1020,YI=1021,ZI=1022,Or=1023,JI=1024,KI=1025,aa=1026,Pl=1027,QI=1028,e4=1029,t4=1030,n4=1031,i4=1033,lg=33776,ug=33777,cg=33778,fg=33779,Vw=35840,Hw=35841,Ww=35842,Gw=35843,r4=36196,$w=37492,jw=37496,Xw=37808,qw=37809,Yw=37810,Zw=37811,Jw=37812,Kw=37813,Qw=37814,e_=37815,t_=37816,n_=37817,i_=37818,r_=37819,s_=37820,o_=37821,a_=36492,s4=2200,o4=2201,a4=2202,Dd=2300,zd=2301,dg=2302,al=2400,ll=2401,Fd=2402,J0=2500,cb=2501,h9=0,p9=1,m9=2,fo=3e3,tn=3001,l4=3200,u4=3201,Sa=0,c4=1,g9="",Rr="srgb",Zo="srgb-linear",y9=0,hg=7680,x9=7681,v9=7682,w9=7683,_9=34055,S9=34056,b9=5386,M9=512,T9=513,E9=514,k9=515,C9=516,A9=517,P9=518,f4=519,Nd=35044,L9=35048,R9=35040,I9=35045,D9=35049,z9=35041,F9=35046,N9=35050,O9=35042,B9="100",l_="300 es",l0=1035;class mo{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const ui=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _E=1234567;const yl=Math.PI/180,Od=180/Math.PI;function or(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ui[t&255]+ui[t>>8&255]+ui[t>>16&255]+ui[t>>24&255]+"-"+ui[e&255]+ui[e>>8&255]+"-"+ui[e>>16&15|64]+ui[e>>24&255]+"-"+ui[n&63|128]+ui[n>>8&255]+"-"+ui[n>>16&255]+ui[n>>24&255]+ui[i&255]+ui[i>>8&255]+ui[i>>16&255]+ui[i>>24&255]).toLowerCase()}function Tn(t,e,n){return Math.max(e,Math.min(n,t))}function fb(t,e){return(t%e+e)%e}function U9(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)}function V9(t,e,n){return t!==e?(n-t)/(e-t):0}function id(t,e,n){return(1-n)*t+n*e}function H9(t,e,n,i){return id(t,e,1-Math.exp(-n*i))}function W9(t,e=1){return e-Math.abs(fb(t,e*2)-e)}function G9(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function $9(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function j9(t,e){return t+Math.floor(Math.random()*(e-t+1))}function X9(t,e){return t+Math.random()*(e-t)}function q9(t){return t*(.5-Math.random())}function Y9(t){t!==void 0&&(_E=t);let e=_E+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Z9(t){return t*yl}function J9(t){return t*Od}function u_(t){return(t&t-1)===0&&t!==0}function d4(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function u0(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function K9(t,e,n,i,r){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),u=s((e+i)/2),f=o((e+i)/2),d=s((e-i)/2),p=o((e-i)/2),m=s((i-e)/2),g=o((i-e)/2);switch(r){case"XYX":t.set(a*f,l*d,l*p,a*u);break;case"YZY":t.set(l*p,a*f,l*d,a*u);break;case"ZXZ":t.set(l*d,l*p,a*f,a*u);break;case"XZX":t.set(a*f,l*g,l*m,a*u);break;case"YXY":t.set(l*m,a*f,l*g,a*u);break;case"ZYZ":t.set(l*g,l*m,a*f,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function to(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function $t(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}var Q9=Object.freeze({__proto__:null,DEG2RAD:yl,RAD2DEG:Od,generateUUID:or,clamp:Tn,euclideanModulo:fb,mapLinear:U9,inverseLerp:V9,lerp:id,damp:H9,pingpong:W9,smoothstep:G9,smootherstep:$9,randInt:j9,randFloat:X9,randFloatSpread:q9,seededRandom:Y9,degToRad:Z9,radToDeg:J9,isPowerOfTwo:u_,ceilPowerOfTwo:d4,floorPowerOfTwo:u0,setQuaternionFromProperEuler:K9,normalize:$t,denormalize:to});class ve{constructor(e=0,n=0){ve.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),r=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Hi{constructor(){Hi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,n,i,r,s,o,a,l,u){const f=this.elements;return f[0]=e,f[1]=r,f[2]=a,f[3]=n,f[4]=s,f[5]=l,f[6]=i,f[7]=o,f[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,s=this.elements,o=i[0],a=i[3],l=i[6],u=i[1],f=i[4],d=i[7],p=i[2],m=i[5],g=i[8],y=r[0],w=r[3],v=r[6],_=r[1],b=r[4],M=r[7],k=r[2],E=r[5],I=r[8];return s[0]=o*y+a*_+l*k,s[3]=o*w+a*b+l*E,s[6]=o*v+a*M+l*I,s[1]=u*y+f*_+d*k,s[4]=u*w+f*b+d*E,s[7]=u*v+f*M+d*I,s[2]=p*y+m*_+g*k,s[5]=p*w+m*b+g*E,s[8]=p*v+m*M+g*I,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],f=e[8];return n*o*f-n*a*u-i*s*f+i*a*l+r*s*u-r*o*l}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],f=e[8],d=f*o-a*u,p=a*l-f*s,m=u*s-o*l,g=n*d+i*p+r*m;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/g;return e[0]=d*y,e[1]=(r*u-f*i)*y,e[2]=(a*i-r*o)*y,e[3]=p*y,e[4]=(f*n-r*l)*y,e[5]=(r*s-a*n)*y,e[6]=m*y,e[7]=(i*l-u*n)*y,e[8]=(o*n-i*s)*y,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,r,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(i*l,i*u,-i*(l*o+u*a)+o+e,-r*u,r*l,-r*(-u*o+l*a)+a+n,0,0,1),this}scale(e,n){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=n,i[4]*=n,i[7]*=n,this}rotate(e){const n=Math.cos(e),i=Math.sin(e),r=this.elements,s=r[0],o=r[3],a=r[6],l=r[1],u=r[4],f=r[7];return r[0]=n*s+i*l,r[3]=n*o+i*u,r[6]=n*a+i*f,r[1]=-i*s+n*l,r[4]=-i*o+n*u,r[7]=-i*a+n*f,this}translate(e,n){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=n*i[2],i[4]+=n*i[5],i[7]+=n*i[8],this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<9;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}function h4(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const eH={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Ju(t,e){return new eH[t](e)}function Bd(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function xl(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function pg(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}const hv={[Rr]:{[Zo]:xl},[Zo]:{[Rr]:pg}},Ar={legacyMode:!0,get workingColorSpace(){return Zo},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.legacyMode||e===n||!e||!n)return t;if(hv[e]&&hv[e][n]!==void 0){const i=hv[e][n];return t.r=i(t.r),t.g=i(t.g),t.b=i(t.b),t}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}},p4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},On={r:0,g:0,b:0},Yr={h:0,s:0,l:0},Zp={h:0,s:0,l:0};function pv(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}function Jp(t,e){return e.r=t.r,e.g=t.g,e.b=t.b,e}class Ue{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,n===void 0&&i===void 0?this.set(e):this.setRGB(e,n,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Rr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ar.toWorkingColorSpace(this,n),this}setRGB(e,n,i,r=Zo){return this.r=e,this.g=n,this.b=i,Ar.toWorkingColorSpace(this,r),this}setHSL(e,n,i,r=Zo){if(e=fb(e,1),n=Tn(n,0,1),i=Tn(i,0,1),n===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+n):i+n-i*n,o=2*i-s;this.r=pv(o,s,e+1/3),this.g=pv(o,s,e),this.b=pv(o,s,e-1/3)}return Ar.toWorkingColorSpace(this,r),this}setStyle(e,n=Rr){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,Ar.toWorkingColorSpace(this,n),i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,Ar.toWorkingColorSpace(this,n),i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,u=parseFloat(s[2])/100,f=parseFloat(s[3])/100;return i(s[4]),this.setHSL(l,u,f,n)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,Ar.toWorkingColorSpace(this,n),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,Ar.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}setColorName(e,n=Rr){const i=p4[e.toLowerCase()];return i!==void 0?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=xl(e.r),this.g=xl(e.g),this.b=xl(e.b),this}copyLinearToSRGB(e){return this.r=pg(e.r),this.g=pg(e.g),this.b=pg(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Rr){return Ar.fromWorkingColorSpace(Jp(this,On),e),Tn(On.r*255,0,255)<<16^Tn(On.g*255,0,255)<<8^Tn(On.b*255,0,255)<<0}getHexString(e=Rr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Zo){Ar.fromWorkingColorSpace(Jp(this,On),n);const i=On.r,r=On.g,s=On.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,u;const f=(a+o)/2;if(a===o)l=0,u=0;else{const d=o-a;switch(u=f<=.5?d/(o+a):d/(2-o-a),o){case i:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-i)/d+2;break;case s:l=(i-r)/d+4;break}l/=6}return e.h=l,e.s=u,e.l=f,e}getRGB(e,n=Zo){return Ar.fromWorkingColorSpace(Jp(this,On),n),e.r=On.r,e.g=On.g,e.b=On.b,e}getStyle(e=Rr){return Ar.fromWorkingColorSpace(Jp(this,On),e),e!==Rr?`color(${e} ${On.r} ${On.g} ${On.b})`:`rgb(${On.r*255|0},${On.g*255|0},${On.b*255|0})`}offsetHSL(e,n,i){return this.getHSL(Yr),Yr.h+=e,Yr.s+=n,Yr.l+=i,this.setHSL(Yr.h,Yr.s,Yr.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(Yr),e.getHSL(Zp);const i=id(Yr.h,Zp.h,n),r=id(Yr.s,Zp.s,n),s=id(Yr.l,Zp.l,n);return this.setHSL(i,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}Ue.NAMES=p4;let lu;class db{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{lu===void 0&&(lu=Bd("canvas")),lu.width=e.width,lu.height=e.height;const i=lu.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),n=lu}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Bd("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=xl(s[o]/255)*255;return i.putImageData(r,0,0),n}else if(e.data){const n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(xl(n[i]/255)*255):n[i]=xl(n[i]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class ul{constructor(e=null){this.isSource=!0,this.uuid=or(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(mv(r[o].image)):s.push(mv(r[o]))}else s=mv(r);i.url=s}return n||(e.images[this.uuid]=i),i}}function mv(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?db.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let tH=0;class Fn extends mo{constructor(e=Fn.DEFAULT_IMAGE,n=Fn.DEFAULT_MAPPING,i=bi,r=bi,s=Mn,o=Ol,a=Or,l=ma,u=1,f=fo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:tH++}),this.uuid=or(),this.name="",this.source=new ul(e),this.mipmaps=[],this.mapping=n,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new ve(0,0),this.repeat=new ve(1,1),this.center=new ve(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Hi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),n||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Z0)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Al:e.x=e.x-Math.floor(e.x);break;case bi:e.x=e.x<0?0:1;break;case Id:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Al:e.y=e.y-Math.floor(e.y);break;case bi:e.y=e.y<0?0:1;break;case Id:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}Fn.DEFAULT_IMAGE=null;Fn.DEFAULT_MAPPING=Z0;class Ht{constructor(e=0,n=0,i=0,r=1){Ht.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*n+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*n+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*n+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,r,s;const l=e.elements,u=l[0],f=l[4],d=l[8],p=l[1],m=l[5],g=l[9],y=l[2],w=l[6],v=l[10];if(Math.abs(f-p)<.01&&Math.abs(d-y)<.01&&Math.abs(g-w)<.01){if(Math.abs(f+p)<.1&&Math.abs(d+y)<.1&&Math.abs(g+w)<.1&&Math.abs(u+m+v-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const b=(u+1)/2,M=(m+1)/2,k=(v+1)/2,E=(f+p)/4,I=(d+y)/4,C=(g+w)/4;return b>M&&b>k?b<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(b),r=E/i,s=I/i):M>k?M<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(M),i=E/r,s=C/r):k<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(k),i=I/s,r=C/s),this.set(i,r,s,n),this}let _=Math.sqrt((w-g)*(w-g)+(d-y)*(d-y)+(p-f)*(p-f));return Math.abs(_)<.001&&(_=1),this.x=(w-g)/_,this.y=(d-y)/_,this.z=(p-f)/_,this.w=Math.acos((u+m+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Wr extends mo{constructor(e,n,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Ht(0,0,e,n),this.scissorTest=!1,this.viewport=new Ht(0,0,e,n);const r={width:e,height:n,depth:1};this.texture=new Fn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Mn,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,n,i=1){(this.width!==e||this.height!==n||this.depth!==i)&&(this.width=e,this.height=n,this.depth=i,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new ul(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ah extends Fn{constructor(e=null,n=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=Dn,this.minFilter=Dn,this.wrapR=bi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class nH extends Wr{constructor(e,n,i){super(e,n),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new ah(null,e,n,i),this.texture.isRenderTargetTexture=!0}}class K0 extends Fn{constructor(e=null,n=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=Dn,this.minFilter=Dn,this.wrapR=bi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class iH extends Wr{constructor(e,n,i){super(e,n),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new K0(null,e,n,i),this.texture.isRenderTargetTexture=!0}}class rH extends Wr{constructor(e,n,i,r={}){super(e,n,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,n,i=1){if(this.width!==e||this.height!==n||this.depth!==i){this.width=e,this.height=n,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=n,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let n=0,i=e.texture.length;n<i;n++)this.texture[n]=e.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class Xi{constructor(e=0,n=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=r}static slerpFlat(e,n,i,r,s,o,a){let l=i[r+0],u=i[r+1],f=i[r+2],d=i[r+3];const p=s[o+0],m=s[o+1],g=s[o+2],y=s[o+3];if(a===0){e[n+0]=l,e[n+1]=u,e[n+2]=f,e[n+3]=d;return}if(a===1){e[n+0]=p,e[n+1]=m,e[n+2]=g,e[n+3]=y;return}if(d!==y||l!==p||u!==m||f!==g){let w=1-a;const v=l*p+u*m+f*g+d*y,_=v>=0?1:-1,b=1-v*v;if(b>Number.EPSILON){const k=Math.sqrt(b),E=Math.atan2(k,v*_);w=Math.sin(w*E)/k,a=Math.sin(a*E)/k}const M=a*_;if(l=l*w+p*M,u=u*w+m*M,f=f*w+g*M,d=d*w+y*M,w===1-a){const k=1/Math.sqrt(l*l+u*u+f*f+d*d);l*=k,u*=k,f*=k,d*=k}}e[n]=l,e[n+1]=u,e[n+2]=f,e[n+3]=d}static multiplyQuaternionsFlat(e,n,i,r,s,o){const a=i[r],l=i[r+1],u=i[r+2],f=i[r+3],d=s[o],p=s[o+1],m=s[o+2],g=s[o+3];return e[n]=a*g+f*d+l*m-u*p,e[n+1]=l*g+f*p+u*d-a*m,e[n+2]=u*g+f*m+a*p-l*d,e[n+3]=f*g-a*d-l*p-u*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,r){return this._x=e,this._y=n,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(i/2),f=a(r/2),d=a(s/2),p=l(i/2),m=l(r/2),g=l(s/2);switch(o){case"XYZ":this._x=p*f*d+u*m*g,this._y=u*m*d-p*f*g,this._z=u*f*g+p*m*d,this._w=u*f*d-p*m*g;break;case"YXZ":this._x=p*f*d+u*m*g,this._y=u*m*d-p*f*g,this._z=u*f*g-p*m*d,this._w=u*f*d+p*m*g;break;case"ZXY":this._x=p*f*d-u*m*g,this._y=u*m*d+p*f*g,this._z=u*f*g+p*m*d,this._w=u*f*d-p*m*g;break;case"ZYX":this._x=p*f*d-u*m*g,this._y=u*m*d+p*f*g,this._z=u*f*g-p*m*d,this._w=u*f*d+p*m*g;break;case"YZX":this._x=p*f*d+u*m*g,this._y=u*m*d+p*f*g,this._z=u*f*g-p*m*d,this._w=u*f*d-p*m*g;break;case"XZY":this._x=p*f*d-u*m*g,this._y=u*m*d-p*f*g,this._z=u*f*g+p*m*d,this._w=u*f*d+p*m*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],r=n[4],s=n[8],o=n[1],a=n[5],l=n[9],u=n[2],f=n[6],d=n[10],p=i+a+d;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(f-l)*m,this._y=(s-u)*m,this._z=(o-r)*m}else if(i>a&&i>d){const m=2*Math.sqrt(1+i-a-d);this._w=(f-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+u)/m}else if(a>d){const m=2*Math.sqrt(1+a-i-d);this._w=(s-u)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+f)/m}else{const m=2*Math.sqrt(1+d-i-a);this._w=(o-r)/m,this._x=(s+u)/m,this._y=(l+f)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Tn(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,n/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,r=e._y,s=e._z,o=e._w,a=n._x,l=n._y,u=n._z,f=n._w;return this._x=i*f+o*a+r*u-s*l,this._y=r*f+o*l+s*a-i*u,this._z=s*f+o*u+i*l-r*a,this._w=o*f-i*a-r*l-s*u,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-n;return this._w=m*o+n*this._w,this._x=m*i+n*this._x,this._y=m*r+n*this._y,this._z=m*s+n*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),f=Math.atan2(u,a),d=Math.sin((1-n)*f)/u,p=Math.sin(n*f)/u;return this._w=o*d+this._w*p,this._x=i*d+this._x*p,this._y=r*d+this._y*p,this._z=s*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=Math.random(),n=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(n*Math.cos(r),i*Math.sin(s),i*Math.cos(s),n*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class B{constructor(e=0,n=0,i=0){B.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(SE.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(SE.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[3]*i+s[6]*r,this.y=s[1]*n+s[4]*i+s[7]*r,this.z=s[2]*n+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*n+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*n+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*n+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*n+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const n=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=l*n+o*r-a*i,f=l*i+a*n-s*r,d=l*r+s*i-o*n,p=-s*n-o*i-a*r;return this.x=u*l+p*-s+f*-a-d*-o,this.y=f*l+p*-o+d*-s-u*-a,this.z=d*l+p*-a+u*-o-f*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[4]*i+s[8]*r,this.y=s[1]*n+s[5]*i+s[9]*r,this.z=s[2]*n+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,r=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return gv.copy(this).projectOnVector(e),this.sub(gv)}reflect(e){return this.sub(gv.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(Tn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return n*n+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const r=Math.sin(n)*e;return this.x=r*Math.sin(i),this.y=Math.cos(n)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=r,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(n),this.y=i*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const gv=new B,SE=new Xi;class Bl{constructor(e=new B(1/0,1/0,1/0),n=new B(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){let n=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,u=e.length;l<u;l+=3){const f=e[l],d=e[l+1],p=e[l+2];f<n&&(n=f),d<i&&(i=d),p<r&&(r=p),f>s&&(s=f),d>o&&(o=d),p>a&&(a=p)}return this.min.set(n,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(e){let n=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,u=e.count;l<u;l++){const f=e.getX(l),d=e.getY(l),p=e.getZ(l);f<n&&(n=f),d<i&&(i=d),p<r&&(r=p),f>s&&(s=f),d>o&&(o=d),p>a&&(a=p)}return this.min.set(n,i,r),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=Na.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0)if(n&&i.attributes!=null&&i.attributes.position!==void 0){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)Na.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Na)}else i.boundingBox===null&&i.computeBoundingBox(),yv.copy(i.boundingBox),yv.applyMatrix4(e.matrixWorld),this.union(yv);const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Na),Na.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(bf),Kp.subVectors(this.max,bf),uu.subVectors(e.a,bf),cu.subVectors(e.b,bf),fu.subVectors(e.c,bf),Ao.subVectors(cu,uu),Po.subVectors(fu,cu),Oa.subVectors(uu,fu);let n=[0,-Ao.z,Ao.y,0,-Po.z,Po.y,0,-Oa.z,Oa.y,Ao.z,0,-Ao.x,Po.z,0,-Po.x,Oa.z,0,-Oa.x,-Ao.y,Ao.x,0,-Po.y,Po.x,0,-Oa.y,Oa.x,0];return!xv(n,uu,cu,fu,Kp)||(n=[1,0,0,0,1,0,0,0,1],!xv(n,uu,cu,fu,Kp))?!1:(Qp.crossVectors(Ao,Po),n=[Qp.x,Qp.y,Qp.z],xv(n,uu,cu,fu,Kp))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Na.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Na).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Us[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Us[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Us[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Us[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Us[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Us[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Us[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Us[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Us),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Us=[new B,new B,new B,new B,new B,new B,new B,new B],Na=new B,yv=new Bl,uu=new B,cu=new B,fu=new B,Ao=new B,Po=new B,Oa=new B,bf=new B,Kp=new B,Qp=new B,Ba=new B;function xv(t,e,n,i,r){for(let s=0,o=t.length-3;s<=o;s+=3){Ba.fromArray(t,s);const a=r.x*Math.abs(Ba.x)+r.y*Math.abs(Ba.y)+r.z*Math.abs(Ba.z),l=e.dot(Ba),u=n.dot(Ba),f=i.dot(Ba);if(Math.max(-Math.max(l,u,f),Math.min(l,u,f))>a)return!1}return!0}const sH=new Bl,bE=new B,em=new B,vv=new B;class Ul{constructor(e=new B,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):sH.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){vv.subVectors(e,this.center);const n=vv.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),r=(i-this.radius)*.5;this.center.add(vv.multiplyScalar(r/i)),this.radius+=r}return this}union(e){return this.center.equals(e.center)===!0?em.set(0,0,1).multiplyScalar(e.radius):em.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(bE.copy(e.center).add(em)),this.expandByPoint(bE.copy(e.center).sub(em)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Vs=new B,wv=new B,tm=new B,Lo=new B,_v=new B,nm=new B,Sv=new B;class lh{constructor(e=new B,n=new B(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Vs)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Vs.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Vs.copy(this.direction).multiplyScalar(n).add(this.origin),Vs.distanceToSquared(e))}distanceSqToSegment(e,n,i,r){wv.copy(e).add(n).multiplyScalar(.5),tm.copy(n).sub(e).normalize(),Lo.copy(this.origin).sub(wv);const s=e.distanceTo(n)*.5,o=-this.direction.dot(tm),a=Lo.dot(this.direction),l=-Lo.dot(tm),u=Lo.lengthSq(),f=Math.abs(1-o*o);let d,p,m,g;if(f>0)if(d=o*l-a,p=o*a-l,g=s*f,d>=0)if(p>=-g)if(p<=g){const y=1/f;d*=y,p*=y,m=d*(d+o*p+2*a)+p*(o*d+p+2*l)+u}else p=s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+u;else p=-s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+u;else p<=-g?(d=Math.max(0,-(-o*s+a)),p=d>0?-s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+u):p<=g?(d=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+u):(d=Math.max(0,-(o*s+a)),p=d>0?s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+u);else p=o>0?-s:s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+u;return i&&i.copy(this.direction).multiplyScalar(d).add(this.origin),r&&r.copy(tm).multiplyScalar(p).add(wv),m}intersectSphere(e,n){Vs.subVectors(e.center,this.origin);const i=Vs.dot(this.direction),r=Vs.dot(Vs)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return a<0&&l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,r,s,o,a,l;const u=1/this.direction.x,f=1/this.direction.y,d=1/this.direction.z,p=this.origin;return u>=0?(i=(e.min.x-p.x)*u,r=(e.max.x-p.x)*u):(i=(e.max.x-p.x)*u,r=(e.min.x-p.x)*u),f>=0?(s=(e.min.y-p.y)*f,o=(e.max.y-p.y)*f):(s=(e.max.y-p.y)*f,o=(e.min.y-p.y)*f),i>o||s>r||((s>i||i!==i)&&(i=s),(o<r||r!==r)&&(r=o),d>=0?(a=(e.min.z-p.z)*d,l=(e.max.z-p.z)*d):(a=(e.max.z-p.z)*d,l=(e.min.z-p.z)*d),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,n)}intersectsBox(e){return this.intersectBox(e,Vs)!==null}intersectTriangle(e,n,i,r,s){_v.subVectors(n,e),nm.subVectors(i,e),Sv.crossVectors(_v,nm);let o=this.direction.dot(Sv),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Lo.subVectors(this.origin,e);const l=a*this.direction.dot(nm.crossVectors(Lo,nm));if(l<0)return null;const u=a*this.direction.dot(_v.cross(Lo));if(u<0||l+u>o)return null;const f=-a*Lo.dot(Sv);return f<0?null:this.at(f/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ht{constructor(){ht.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,n,i,r,s,o,a,l,u,f,d,p,m,g,y,w){const v=this.elements;return v[0]=e,v[4]=n,v[8]=i,v[12]=r,v[1]=s,v[5]=o,v[9]=a,v[13]=l,v[2]=u,v[6]=f,v[10]=d,v[14]=p,v[3]=m,v[7]=g,v[11]=y,v[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ht().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,r=1/du.setFromMatrixColumn(e,0).length(),s=1/du.setFromMatrixColumn(e,1).length(),o=1/du.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*s,n[5]=i[5]*s,n[6]=i[6]*s,n[7]=0,n[8]=i[8]*o,n[9]=i[9]*o,n[10]=i[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),u=Math.sin(r),f=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const p=o*f,m=o*d,g=a*f,y=a*d;n[0]=l*f,n[4]=-l*d,n[8]=u,n[1]=m+g*u,n[5]=p-y*u,n[9]=-a*l,n[2]=y-p*u,n[6]=g+m*u,n[10]=o*l}else if(e.order==="YXZ"){const p=l*f,m=l*d,g=u*f,y=u*d;n[0]=p+y*a,n[4]=g*a-m,n[8]=o*u,n[1]=o*d,n[5]=o*f,n[9]=-a,n[2]=m*a-g,n[6]=y+p*a,n[10]=o*l}else if(e.order==="ZXY"){const p=l*f,m=l*d,g=u*f,y=u*d;n[0]=p-y*a,n[4]=-o*d,n[8]=g+m*a,n[1]=m+g*a,n[5]=o*f,n[9]=y-p*a,n[2]=-o*u,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const p=o*f,m=o*d,g=a*f,y=a*d;n[0]=l*f,n[4]=g*u-m,n[8]=p*u+y,n[1]=l*d,n[5]=y*u+p,n[9]=m*u-g,n[2]=-u,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*u,g=a*l,y=a*u;n[0]=l*f,n[4]=y-p*d,n[8]=g*d+m,n[1]=d,n[5]=o*f,n[9]=-a*f,n[2]=-u*f,n[6]=m*d+g,n[10]=p-y*d}else if(e.order==="XZY"){const p=o*l,m=o*u,g=a*l,y=a*u;n[0]=l*f,n[4]=-d,n[8]=u*f,n[1]=p*d+y,n[5]=o*f,n[9]=m*d-g,n[2]=g*d-m,n[6]=a*f,n[10]=y*d+p}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(oH,e,aH)}lookAt(e,n,i){const r=this.elements;return er.subVectors(e,n),er.lengthSq()===0&&(er.z=1),er.normalize(),Ro.crossVectors(i,er),Ro.lengthSq()===0&&(Math.abs(i.z)===1?er.x+=1e-4:er.z+=1e-4,er.normalize(),Ro.crossVectors(i,er)),Ro.normalize(),im.crossVectors(er,Ro),r[0]=Ro.x,r[4]=im.x,r[8]=er.x,r[1]=Ro.y,r[5]=im.y,r[9]=er.y,r[2]=Ro.z,r[6]=im.z,r[10]=er.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,s=this.elements,o=i[0],a=i[4],l=i[8],u=i[12],f=i[1],d=i[5],p=i[9],m=i[13],g=i[2],y=i[6],w=i[10],v=i[14],_=i[3],b=i[7],M=i[11],k=i[15],E=r[0],I=r[4],C=r[8],L=r[12],R=r[1],O=r[5],q=r[9],j=r[13],G=r[2],W=r[6],J=r[10],re=r[14],D=r[3],F=r[7],A=r[11],X=r[15];return s[0]=o*E+a*R+l*G+u*D,s[4]=o*I+a*O+l*W+u*F,s[8]=o*C+a*q+l*J+u*A,s[12]=o*L+a*j+l*re+u*X,s[1]=f*E+d*R+p*G+m*D,s[5]=f*I+d*O+p*W+m*F,s[9]=f*C+d*q+p*J+m*A,s[13]=f*L+d*j+p*re+m*X,s[2]=g*E+y*R+w*G+v*D,s[6]=g*I+y*O+w*W+v*F,s[10]=g*C+y*q+w*J+v*A,s[14]=g*L+y*j+w*re+v*X,s[3]=_*E+b*R+M*G+k*D,s[7]=_*I+b*O+M*W+k*F,s[11]=_*C+b*q+M*J+k*A,s[15]=_*L+b*j+M*re+k*X,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],f=e[2],d=e[6],p=e[10],m=e[14],g=e[3],y=e[7],w=e[11],v=e[15];return g*(+s*l*d-r*u*d-s*a*p+i*u*p+r*a*m-i*l*m)+y*(+n*l*m-n*u*p+s*o*p-r*o*m+r*u*f-s*l*f)+w*(+n*u*d-n*a*m-s*o*d+i*o*m+s*a*f-i*u*f)+v*(-r*a*f-n*l*d+n*a*p+r*o*d-i*o*p+i*l*f)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=n,r[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],f=e[8],d=e[9],p=e[10],m=e[11],g=e[12],y=e[13],w=e[14],v=e[15],_=d*w*u-y*p*u+y*l*m-a*w*m-d*l*v+a*p*v,b=g*p*u-f*w*u-g*l*m+o*w*m+f*l*v-o*p*v,M=f*y*u-g*d*u+g*a*m-o*y*m-f*a*v+o*d*v,k=g*d*l-f*y*l-g*a*p+o*y*p+f*a*w-o*d*w,E=n*_+i*b+r*M+s*k;if(E===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const I=1/E;return e[0]=_*I,e[1]=(y*p*s-d*w*s-y*r*m+i*w*m+d*r*v-i*p*v)*I,e[2]=(a*w*s-y*l*s+y*r*u-i*w*u-a*r*v+i*l*v)*I,e[3]=(d*l*s-a*p*s-d*r*u+i*p*u+a*r*m-i*l*m)*I,e[4]=b*I,e[5]=(f*w*s-g*p*s+g*r*m-n*w*m-f*r*v+n*p*v)*I,e[6]=(g*l*s-o*w*s-g*r*u+n*w*u+o*r*v-n*l*v)*I,e[7]=(o*p*s-f*l*s+f*r*u-n*p*u-o*r*m+n*l*m)*I,e[8]=M*I,e[9]=(g*d*s-f*y*s-g*i*m+n*y*m+f*i*v-n*d*v)*I,e[10]=(o*y*s-g*a*s+g*i*u-n*y*u-o*i*v+n*a*v)*I,e[11]=(f*a*s-o*d*s-f*i*u+n*d*u+o*i*m-n*a*m)*I,e[12]=k*I,e[13]=(f*y*r-g*d*r+g*i*p-n*y*p-f*i*w+n*d*w)*I,e[14]=(g*a*r-o*y*r-g*i*l+n*y*l+o*i*w-n*a*w)*I,e[15]=(o*d*r-f*a*r+f*i*l-n*d*l-o*i*p+n*a*p)*I,this}scale(e){const n=this.elements,i=e.x,r=e.y,s=e.z;return n[0]*=i,n[4]*=r,n[8]*=s,n[1]*=i,n[5]*=r,n[9]*=s,n[2]*=i,n[6]*=r,n[10]*=s,n[3]*=i,n[7]*=r,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,r))}makeTranslation(e,n,i){return this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),r=Math.sin(n),s=1-i,o=e.x,a=e.y,l=e.z,u=s*o,f=s*a;return this.set(u*o+i,u*a-r*l,u*l+r*a,0,u*a+r*l,f*a+i,f*l-r*o,0,u*l-r*a,f*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,n,r,1,0,0,0,0,1),this}compose(e,n,i){const r=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,u=s+s,f=o+o,d=a+a,p=s*u,m=s*f,g=s*d,y=o*f,w=o*d,v=a*d,_=l*u,b=l*f,M=l*d,k=i.x,E=i.y,I=i.z;return r[0]=(1-(y+v))*k,r[1]=(m+M)*k,r[2]=(g-b)*k,r[3]=0,r[4]=(m-M)*E,r[5]=(1-(p+v))*E,r[6]=(w+_)*E,r[7]=0,r[8]=(g+b)*I,r[9]=(w-_)*I,r[10]=(1-(p+y))*I,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,n,i){const r=this.elements;let s=du.set(r[0],r[1],r[2]).length();const o=du.set(r[4],r[5],r[6]).length(),a=du.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Zr.copy(this);const u=1/s,f=1/o,d=1/a;return Zr.elements[0]*=u,Zr.elements[1]*=u,Zr.elements[2]*=u,Zr.elements[4]*=f,Zr.elements[5]*=f,Zr.elements[6]*=f,Zr.elements[8]*=d,Zr.elements[9]*=d,Zr.elements[10]*=d,n.setFromRotationMatrix(Zr),i.x=s,i.y=o,i.z=a,this}makePerspective(e,n,i,r,s,o){const a=this.elements,l=2*s/(n-e),u=2*s/(i-r),f=(n+e)/(n-e),d=(i+r)/(i-r),p=-(o+s)/(o-s),m=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=f,a[12]=0,a[1]=0,a[5]=u,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=p,a[14]=m,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,n,i,r,s,o){const a=this.elements,l=1/(n-e),u=1/(i-r),f=1/(o-s),d=(n+e)*l,p=(i+r)*u,m=(o+s)*f;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-p,a[2]=0,a[6]=0,a[10]=-2*f,a[14]=-m,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<16;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const du=new B,Zr=new ht,oH=new B(0,0,0),aH=new B(1,1,1),Ro=new B,im=new B,er=new B,ME=new ht,TE=new Xi;class Oc{constructor(e=0,n=0,i=0,r=Oc.DefaultOrder){this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,r=this._order){return this._x=e,this._y=n,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],u=r[5],f=r[9],d=r[2],p=r[6],m=r[10];switch(n){case"XYZ":this._y=Math.asin(Tn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-f,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Tn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Tn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Tn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Tn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,u),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-Tn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-f,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return ME.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ME,n,i)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return TE.setFromEuler(this),this.setFromQuaternion(TE,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Oc.DefaultOrder="XYZ";Oc.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class vl{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let lH=0;const EE=new B,hu=new Xi,Hs=new ht,rm=new B,Mf=new B,uH=new B,cH=new Xi,kE=new B(1,0,0),CE=new B(0,1,0),AE=new B(0,0,1),fH={type:"added"},PE={type:"removed"};class Ot extends mo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:lH++}),this.uuid=or(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ot.DefaultUp.clone();const e=new B,n=new Oc,i=new Xi,r=new B(1,1,1);function s(){i.setFromEuler(n,!1)}function o(){n.setFromQuaternion(i,void 0,!1)}n._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new ht},normalMatrix:{value:new Hi}}),this.matrix=new ht,this.matrixWorld=new ht,this.matrixAutoUpdate=Ot.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Ot.DefaultMatrixWorldAutoUpdate,this.layers=new vl,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return hu.setFromAxisAngle(e,n),this.quaternion.multiply(hu),this}rotateOnWorldAxis(e,n){return hu.setFromAxisAngle(e,n),this.quaternion.premultiply(hu),this}rotateX(e){return this.rotateOnAxis(kE,e)}rotateY(e){return this.rotateOnAxis(CE,e)}rotateZ(e){return this.rotateOnAxis(AE,e)}translateOnAxis(e,n){return EE.copy(e).applyQuaternion(this.quaternion),this.position.add(EE.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(kE,e)}translateY(e){return this.translateOnAxis(CE,e)}translateZ(e){return this.translateOnAxis(AE,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Hs.copy(this.matrixWorld).invert())}lookAt(e,n,i){e.isVector3?rm.copy(e):rm.set(e,n,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Mf.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Hs.lookAt(Mf,rm,this.up):Hs.lookAt(rm,Mf,this.up),this.quaternion.setFromRotationMatrix(Hs),r&&(Hs.extractRotation(r.matrixWorld),hu.setFromRotationMatrix(Hs),this.quaternion.premultiply(hu.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(fH)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(PE)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(PE)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Hs.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Hs.multiply(e.parent.matrixWorld)),e.applyMatrix4(Hs),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,n);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Mf,e,uH),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Mf,cH,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let i=0,r=n.length;i<r;i++){const s=n[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,f=l.length;u<f;u++){const d=l[u];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),f=o(e.images),d=o(e.shapes),p=o(e.skeletons),m=o(e.animations),g=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),u.length>0&&(i.textures=u),f.length>0&&(i.images=f),d.length>0&&(i.shapes=d),p.length>0&&(i.skeletons=p),m.length>0&&(i.animations=m),g.length>0&&(i.nodes=g)}return i.object=r,i;function o(a){const l=[];for(const u in a){const f=a[u];delete f.metadata,l.push(f)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Ot.DefaultUp=new B(0,1,0);Ot.DefaultMatrixAutoUpdate=!0;Ot.DefaultMatrixWorldAutoUpdate=!0;const Jr=new B,Ws=new B,bv=new B,Gs=new B,pu=new B,mu=new B,LE=new B,Mv=new B,Tv=new B,Ev=new B;class Fr{constructor(e=new B,n=new B,i=new B){this.a=e,this.b=n,this.c=i}static getNormal(e,n,i,r){r.subVectors(i,n),Jr.subVectors(e,n),r.cross(Jr);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,n,i,r,s){Jr.subVectors(r,n),Ws.subVectors(i,n),bv.subVectors(e,n);const o=Jr.dot(Jr),a=Jr.dot(Ws),l=Jr.dot(bv),u=Ws.dot(Ws),f=Ws.dot(bv),d=o*u-a*a;if(d===0)return s.set(-2,-1,-1);const p=1/d,m=(u*l-a*f)*p,g=(o*f-a*l)*p;return s.set(1-m-g,g,m)}static containsPoint(e,n,i,r){return this.getBarycoord(e,n,i,r,Gs),Gs.x>=0&&Gs.y>=0&&Gs.x+Gs.y<=1}static getUV(e,n,i,r,s,o,a,l){return this.getBarycoord(e,n,i,r,Gs),l.set(0,0),l.addScaledVector(s,Gs.x),l.addScaledVector(o,Gs.y),l.addScaledVector(a,Gs.z),l}static isFrontFacing(e,n,i,r){return Jr.subVectors(i,n),Ws.subVectors(e,n),Jr.cross(Ws).dot(r)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,r){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,n,i,r){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Jr.subVectors(this.c,this.b),Ws.subVectors(this.a,this.b),Jr.cross(Ws).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Fr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Fr.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,i,r,s){return Fr.getUV(e,this.a,this.b,this.c,n,i,r,s)}containsPoint(e){return Fr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Fr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const i=this.a,r=this.b,s=this.c;let o,a;pu.subVectors(r,i),mu.subVectors(s,i),Mv.subVectors(e,i);const l=pu.dot(Mv),u=mu.dot(Mv);if(l<=0&&u<=0)return n.copy(i);Tv.subVectors(e,r);const f=pu.dot(Tv),d=mu.dot(Tv);if(f>=0&&d<=f)return n.copy(r);const p=l*d-f*u;if(p<=0&&l>=0&&f<=0)return o=l/(l-f),n.copy(i).addScaledVector(pu,o);Ev.subVectors(e,s);const m=pu.dot(Ev),g=mu.dot(Ev);if(g>=0&&m<=g)return n.copy(s);const y=m*u-l*g;if(y<=0&&u>=0&&g<=0)return a=u/(u-g),n.copy(i).addScaledVector(mu,a);const w=f*g-m*d;if(w<=0&&d-f>=0&&m-g>=0)return LE.subVectors(s,r),a=(d-f)/(d-f+(m-g)),n.copy(r).addScaledVector(LE,a);const v=1/(w+y+p);return o=y*v,a=p*v,n.copy(i).addScaledVector(pu,o).addScaledVector(mu,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let dH=0;class ni extends mo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:dH++}),this.uuid=or(),this.name="",this.type="Material",this.blending=ml,this.side=Cl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=ob,this.blendDst=ab,this.blendEquation=Qa,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=s0,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=f4,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=hg,this.stencilZFail=hg,this.stencilZPass=hg,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const i=e[n];if(i===void 0){console.warn("THREE.Material: '"+n+"' parameter is undefined.");continue}const r=this[n];if(r===void 0){console.warn("THREE."+this.type+": '"+n+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==ml&&(i.blending=this.blending),this.side!==Cl&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let i=null;if(n!==null){const r=n.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=n[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class ba extends ni{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ue(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=oh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Pn=new B,sm=new ve;class jt{constructor(e,n,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i===!0,this.usage=Nd,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=n.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)sm.fromBufferAttribute(this,n),sm.applyMatrix3(e),this.setXY(n,sm.x,sm.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)Pn.fromBufferAttribute(this,n),Pn.applyMatrix3(e),this.setXYZ(n,Pn.x,Pn.y,Pn.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)Pn.fromBufferAttribute(this,n),Pn.applyMatrix4(e),this.setXYZ(n,Pn.x,Pn.y,Pn.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)Pn.fromBufferAttribute(this,n),Pn.applyNormalMatrix(e),this.setXYZ(n,Pn.x,Pn.y,Pn.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)Pn.fromBufferAttribute(this,n),Pn.transformDirection(e),this.setXYZ(n,Pn.x,Pn.y,Pn.z);return this}set(e,n=0){return this.array.set(e,n),this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=to(n,this.array)),n}setX(e,n){return this.normalized&&(n=$t(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=to(n,this.array)),n}setY(e,n){return this.normalized&&(n=$t(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=to(n,this.array)),n}setZ(e,n){return this.normalized&&(n=$t(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=to(n,this.array)),n}setW(e,n){return this.normalized&&(n=$t(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=$t(n,this.array),i=$t(i,this.array)),this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=$t(n,this.array),i=$t(i,this.array),r=$t(r,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,n,i,r,s){return e*=this.itemSize,this.normalized&&(n=$t(n,this.array),i=$t(i,this.array),r=$t(r,this.array),s=$t(s,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Nd&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class hH extends jt{constructor(e,n,i){super(new Int8Array(e),n,i)}}class pH extends jt{constructor(e,n,i){super(new Uint8Array(e),n,i)}}class mH extends jt{constructor(e,n,i){super(new Uint8ClampedArray(e),n,i)}}class gH extends jt{constructor(e,n,i){super(new Int16Array(e),n,i)}}class hb extends jt{constructor(e,n,i){super(new Uint16Array(e),n,i)}}class yH extends jt{constructor(e,n,i){super(new Int32Array(e),n,i)}}class pb extends jt{constructor(e,n,i){super(new Uint32Array(e),n,i)}}class xH extends jt{constructor(e,n,i){super(new Uint16Array(e),n,i),this.isFloat16BufferAttribute=!0}}class Ze extends jt{constructor(e,n,i){super(new Float32Array(e),n,i)}}class vH extends jt{constructor(e,n,i){super(new Float64Array(e),n,i)}}let wH=0;const Cr=new ht,kv=new Ot,gu=new B,tr=new Bl,Tf=new Bl,$n=new B;class yt extends mo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:wH++}),this.uuid=or(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(h4(e)?pb:hb)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Hi().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Cr.makeRotationFromQuaternion(e),this.applyMatrix4(Cr),this}rotateX(e){return Cr.makeRotationX(e),this.applyMatrix4(Cr),this}rotateY(e){return Cr.makeRotationY(e),this.applyMatrix4(Cr),this}rotateZ(e){return Cr.makeRotationZ(e),this.applyMatrix4(Cr),this}translate(e,n,i){return Cr.makeTranslation(e,n,i),this.applyMatrix4(Cr),this}scale(e,n,i){return Cr.makeScale(e,n,i),this.applyMatrix4(Cr),this}lookAt(e){return kv.lookAt(e),kv.updateMatrix(),this.applyMatrix4(kv.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(gu).negate(),this.translate(gu.x,gu.y,gu.z),this}setFromPoints(e){const n=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ze(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Bl);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new B(-1/0,-1/0,-1/0),new B(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,r=n.length;i<r;i++){const s=n[i];tr.setFromBufferAttribute(s),this.morphTargetsRelative?($n.addVectors(this.boundingBox.min,tr.min),this.boundingBox.expandByPoint($n),$n.addVectors(this.boundingBox.max,tr.max),this.boundingBox.expandByPoint($n)):(this.boundingBox.expandByPoint(tr.min),this.boundingBox.expandByPoint(tr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ul);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new B,1/0);return}if(e){const i=this.boundingSphere.center;if(tr.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];Tf.setFromBufferAttribute(a),this.morphTargetsRelative?($n.addVectors(tr.min,Tf.min),tr.expandByPoint($n),$n.addVectors(tr.max,Tf.max),tr.expandByPoint($n)):(tr.expandByPoint(Tf.min),tr.expandByPoint(Tf.max))}tr.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)$n.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared($n));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let u=0,f=a.count;u<f;u++)$n.fromBufferAttribute(a,u),l&&(gu.fromBufferAttribute(e,u),$n.add(gu)),r=Math.max(r,i.distanceToSquared($n))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=n.position.array,s=n.normal.array,o=n.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new jt(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,u=[],f=[];for(let R=0;R<a;R++)u[R]=new B,f[R]=new B;const d=new B,p=new B,m=new B,g=new ve,y=new ve,w=new ve,v=new B,_=new B;function b(R,O,q){d.fromArray(r,R*3),p.fromArray(r,O*3),m.fromArray(r,q*3),g.fromArray(o,R*2),y.fromArray(o,O*2),w.fromArray(o,q*2),p.sub(d),m.sub(d),y.sub(g),w.sub(g);const j=1/(y.x*w.y-w.x*y.y);isFinite(j)&&(v.copy(p).multiplyScalar(w.y).addScaledVector(m,-y.y).multiplyScalar(j),_.copy(m).multiplyScalar(y.x).addScaledVector(p,-w.x).multiplyScalar(j),u[R].add(v),u[O].add(v),u[q].add(v),f[R].add(_),f[O].add(_),f[q].add(_))}let M=this.groups;M.length===0&&(M=[{start:0,count:i.length}]);for(let R=0,O=M.length;R<O;++R){const q=M[R],j=q.start,G=q.count;for(let W=j,J=j+G;W<J;W+=3)b(i[W+0],i[W+1],i[W+2])}const k=new B,E=new B,I=new B,C=new B;function L(R){I.fromArray(s,R*3),C.copy(I);const O=u[R];k.copy(O),k.sub(I.multiplyScalar(I.dot(O))).normalize(),E.crossVectors(C,O);const j=E.dot(f[R])<0?-1:1;l[R*4]=k.x,l[R*4+1]=k.y,l[R*4+2]=k.z,l[R*4+3]=j}for(let R=0,O=M.length;R<O;++R){const q=M[R],j=q.start,G=q.count;for(let W=j,J=j+G;W<J;W+=3)L(i[W+0]),L(i[W+1]),L(i[W+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new jt(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let p=0,m=i.count;p<m;p++)i.setXYZ(p,0,0,0);const r=new B,s=new B,o=new B,a=new B,l=new B,u=new B,f=new B,d=new B;if(e)for(let p=0,m=e.count;p<m;p+=3){const g=e.getX(p+0),y=e.getX(p+1),w=e.getX(p+2);r.fromBufferAttribute(n,g),s.fromBufferAttribute(n,y),o.fromBufferAttribute(n,w),f.subVectors(o,s),d.subVectors(r,s),f.cross(d),a.fromBufferAttribute(i,g),l.fromBufferAttribute(i,y),u.fromBufferAttribute(i,w),a.add(f),l.add(f),u.add(f),i.setXYZ(g,a.x,a.y,a.z),i.setXYZ(y,l.x,l.y,l.z),i.setXYZ(w,u.x,u.y,u.z)}else for(let p=0,m=n.count;p<m;p+=3)r.fromBufferAttribute(n,p+0),s.fromBufferAttribute(n,p+1),o.fromBufferAttribute(n,p+2),f.subVectors(o,s),d.subVectors(r,s),f.cross(d),i.setXYZ(p+0,f.x,f.y,f.z),i.setXYZ(p+1,f.x,f.y,f.z),i.setXYZ(p+2,f.x,f.y,f.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)$n.fromBufferAttribute(e,n),$n.normalize(),e.setXYZ(n,$n.x,$n.y,$n.z)}toNonIndexed(){function e(a,l){const u=a.array,f=a.itemSize,d=a.normalized,p=new u.constructor(l.length*f);let m=0,g=0;for(let y=0,w=l.length;y<w;y++){a.isInterleavedBufferAttribute?m=l[y]*a.data.stride+a.offset:m=l[y]*f;for(let v=0;v<f;v++)p[g++]=u[m++]}return new jt(p,f,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new yt,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],u=e(l,i);n.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let f=0,d=u.length;f<d;f++){const p=u[f],m=e(p,i);l.push(m)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];n.addGroup(u.start,u.count,u.materialIndex)}return n}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const l in i){const u=i[l];e.data.attributes[l]=u.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],f=[];for(let d=0,p=u.length;d<p;d++){const m=u[d];f.push(m.toJSON(e.data))}f.length>0&&(r[l]=f,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(n));const r=e.attributes;for(const u in r){const f=r[u];this.setAttribute(u,f.clone(n))}const s=e.morphAttributes;for(const u in s){const f=[],d=s[u];for(let p=0,m=d.length;p<m;p++)f.push(d[p].clone(n));this.morphAttributes[u]=f}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,f=o.length;u<f;u++){const d=o[u];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const RE=new ht,yu=new lh,Cv=new Ul,Io=new B,Do=new B,zo=new B,Av=new B,Pv=new B,Lv=new B,om=new B,am=new B,lm=new B,um=new ve,cm=new ve,fm=new ve,Rv=new B,dm=new B;class Zn extends Ot{constructor(e=new yt,n=new ba){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}raycast(e,n){const i=this.geometry,r=this.material,s=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),Cv.copy(i.boundingSphere),Cv.applyMatrix4(s),e.ray.intersectsSphere(Cv)===!1)||(RE.copy(s).invert(),yu.copy(e.ray).applyMatrix4(RE),i.boundingBox!==null&&yu.intersectsBox(i.boundingBox)===!1))return;let o;const a=i.index,l=i.attributes.position,u=i.morphAttributes.position,f=i.morphTargetsRelative,d=i.attributes.uv,p=i.attributes.uv2,m=i.groups,g=i.drawRange;if(a!==null)if(Array.isArray(r))for(let y=0,w=m.length;y<w;y++){const v=m[y],_=r[v.materialIndex],b=Math.max(v.start,g.start),M=Math.min(a.count,Math.min(v.start+v.count,g.start+g.count));for(let k=b,E=M;k<E;k+=3){const I=a.getX(k),C=a.getX(k+1),L=a.getX(k+2);o=hm(this,_,e,yu,l,u,f,d,p,I,C,L),o&&(o.faceIndex=Math.floor(k/3),o.face.materialIndex=v.materialIndex,n.push(o))}}else{const y=Math.max(0,g.start),w=Math.min(a.count,g.start+g.count);for(let v=y,_=w;v<_;v+=3){const b=a.getX(v),M=a.getX(v+1),k=a.getX(v+2);o=hm(this,r,e,yu,l,u,f,d,p,b,M,k),o&&(o.faceIndex=Math.floor(v/3),n.push(o))}}else if(l!==void 0)if(Array.isArray(r))for(let y=0,w=m.length;y<w;y++){const v=m[y],_=r[v.materialIndex],b=Math.max(v.start,g.start),M=Math.min(l.count,Math.min(v.start+v.count,g.start+g.count));for(let k=b,E=M;k<E;k+=3){const I=k,C=k+1,L=k+2;o=hm(this,_,e,yu,l,u,f,d,p,I,C,L),o&&(o.faceIndex=Math.floor(k/3),o.face.materialIndex=v.materialIndex,n.push(o))}}else{const y=Math.max(0,g.start),w=Math.min(l.count,g.start+g.count);for(let v=y,_=w;v<_;v+=3){const b=v,M=v+1,k=v+2;o=hm(this,r,e,yu,l,u,f,d,p,b,M,k),o&&(o.faceIndex=Math.floor(v/3),n.push(o))}}}}function _H(t,e,n,i,r,s,o,a){let l;if(e.side===ji?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side!==Qs,a),l===null)return null;dm.copy(a),dm.applyMatrix4(t.matrixWorld);const u=n.ray.origin.distanceTo(dm);return u<n.near||u>n.far?null:{distance:u,point:dm.clone(),object:t}}function hm(t,e,n,i,r,s,o,a,l,u,f,d){Io.fromBufferAttribute(r,u),Do.fromBufferAttribute(r,f),zo.fromBufferAttribute(r,d);const p=t.morphTargetInfluences;if(s&&p){om.set(0,0,0),am.set(0,0,0),lm.set(0,0,0);for(let g=0,y=s.length;g<y;g++){const w=p[g],v=s[g];w!==0&&(Av.fromBufferAttribute(v,u),Pv.fromBufferAttribute(v,f),Lv.fromBufferAttribute(v,d),o?(om.addScaledVector(Av,w),am.addScaledVector(Pv,w),lm.addScaledVector(Lv,w)):(om.addScaledVector(Av.sub(Io),w),am.addScaledVector(Pv.sub(Do),w),lm.addScaledVector(Lv.sub(zo),w)))}Io.add(om),Do.add(am),zo.add(lm)}t.isSkinnedMesh&&(t.boneTransform(u,Io),t.boneTransform(f,Do),t.boneTransform(d,zo));const m=_H(t,e,n,i,Io,Do,zo,Rv);if(m){a&&(um.fromBufferAttribute(a,u),cm.fromBufferAttribute(a,f),fm.fromBufferAttribute(a,d),m.uv=Fr.getUV(Rv,Io,Do,zo,um,cm,fm,new ve)),l&&(um.fromBufferAttribute(l,u),cm.fromBufferAttribute(l,f),fm.fromBufferAttribute(l,d),m.uv2=Fr.getUV(Rv,Io,Do,zo,um,cm,fm,new ve));const g={a:u,b:f,c:d,normal:new B,materialIndex:0};Fr.getNormal(Io,Do,zo,g.normal),m.face=g}return m}class Ma extends yt{constructor(e=1,n=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],f=[],d=[];let p=0,m=0;g("z","y","x",-1,-1,i,n,e,o,s,0),g("z","y","x",1,-1,i,n,-e,o,s,1),g("x","z","y",1,1,e,i,n,r,o,2),g("x","z","y",1,-1,e,i,-n,r,o,3),g("x","y","z",1,-1,e,n,i,r,s,4),g("x","y","z",-1,-1,e,n,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Ze(u,3)),this.setAttribute("normal",new Ze(f,3)),this.setAttribute("uv",new Ze(d,2));function g(y,w,v,_,b,M,k,E,I,C,L){const R=M/I,O=k/C,q=M/2,j=k/2,G=E/2,W=I+1,J=C+1;let re=0,D=0;const F=new B;for(let A=0;A<J;A++){const X=A*O-j;for(let Y=0;Y<W;Y++){const z=Y*R-q;F[y]=z*_,F[w]=X*b,F[v]=G,u.push(F.x,F.y,F.z),F[y]=0,F[w]=0,F[v]=E>0?1:-1,f.push(F.x,F.y,F.z),d.push(Y/I),d.push(1-A/C),re+=1}}for(let A=0;A<C;A++)for(let X=0;X<I;X++){const Y=p+X+W*A,z=p+X+W*(A+1),xe=p+(X+1)+W*(A+1),Ce=p+(X+1)+W*A;l.push(Y,z,Ce),l.push(z,xe,Ce),D+=6}a.addGroup(m,D,L),m+=D,p+=re}}static fromJSON(e){return new Ma(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function kc(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function ci(t){const e={};for(let n=0;n<t.length;n++){const i=kc(t[n]);for(const r in i)e[r]=i[r]}return e}function SH(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}const m4={clone:kc,merge:ci};var bH=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,MH=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class us extends ni{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=bH,this.fragmentShader=MH,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=kc(e.uniforms),this.uniformsGroups=SH(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?n.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[r]={type:"m4",value:o.toArray()}:n.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}}class uh extends Ot{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ht,this.projectionMatrix=new ht,this.projectionMatrixInverse=new ht}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(-n[8],-n[9],-n[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Yn extends uh{constructor(e=50,n=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Od*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(yl*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Od*2*Math.atan(Math.tan(yl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,i,r,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(yl*.5*this.fov)/this.zoom,i=2*n,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*r/l,n-=o.offsetY*i/u,r*=o.width/l,i*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,n,n-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const xu=90,vu=1;class g4 extends Ot{constructor(e,n,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new Yn(xu,vu,e,n);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new B(1,0,0)),this.add(r);const s=new Yn(xu,vu,e,n);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new B(-1,0,0)),this.add(s);const o=new Yn(xu,vu,e,n);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new B(0,1,0)),this.add(o);const a=new Yn(xu,vu,e,n);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new B(0,-1,0)),this.add(a);const l=new Yn(xu,vu,e,n);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new B(0,0,1)),this.add(l);const u=new Yn(xu,vu,e,n);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new B(0,0,-1)),this.add(u)}update(e,n){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,l,u]=this.children,f=e.getRenderTarget(),d=e.toneMapping,p=e.xr.enabled;e.toneMapping=os,e.xr.enabled=!1;const m=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(n,r),e.setRenderTarget(i,1),e.render(n,s),e.setRenderTarget(i,2),e.render(n,o),e.setRenderTarget(i,3),e.render(n,a),e.setRenderTarget(i,4),e.render(n,l),i.texture.generateMipmaps=m,e.setRenderTarget(i,5),e.render(n,u),e.setRenderTarget(f),e.toneMapping=d,e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}}class ch extends Fn{constructor(e,n,i,r,s,o,a,l,u,f){e=e!==void 0?e:[],n=n!==void 0?n:ha,super(e,n,i,r,s,o,a,l,u,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class y4 extends Wr{constructor(e,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new ch(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Mn}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.encoding=n.encoding,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Ma(5,5,5),s=new us({name:"CubemapFromEquirect",uniforms:kc(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ji,blending:so});s.uniforms.tEquirect.value=n;const o=new Zn(r,s),a=n.minFilter;return n.minFilter===Ol&&(n.minFilter=Mn),new g4(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,i,r);e.setRenderTarget(s)}}const Iv=new B,TH=new B,EH=new Hi;class Wo{constructor(e=new B(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,r){return this.normal.set(e,n,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const r=Iv.subVectors(i,n).cross(TH.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,n){const i=e.delta(Iv),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:n.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||EH.getNormalMatrix(e),r=this.coplanarPoint(Iv).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const wu=new Ul,pm=new B;class Q0{constructor(e=new Wo,n=new Wo,i=new Wo,r=new Wo,s=new Wo,o=new Wo){this.planes=[e,n,i,r,s,o]}set(e,n,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const n=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],u=i[5],f=i[6],d=i[7],p=i[8],m=i[9],g=i[10],y=i[11],w=i[12],v=i[13],_=i[14],b=i[15];return n[0].setComponents(a-r,d-l,y-p,b-w).normalize(),n[1].setComponents(a+r,d+l,y+p,b+w).normalize(),n[2].setComponents(a+s,d+u,y+m,b+v).normalize(),n[3].setComponents(a-s,d-u,y-m,b-v).normalize(),n[4].setComponents(a-o,d-f,y-g,b-_).normalize(),n[5].setComponents(a+o,d+f,y+g,b+_).normalize(),this}intersectsObject(e){const n=e.geometry;return n.boundingSphere===null&&n.computeBoundingSphere(),wu.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(wu)}intersectsSprite(e){return wu.center.set(0,0,0),wu.radius=.7071067811865476,wu.applyMatrix4(e.matrixWorld),this.intersectsSphere(wu)}intersectsSphere(e){const n=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const r=n[i];if(pm.x=r.normal.x>0?e.max.x:e.min.x,pm.y=r.normal.y>0?e.max.y:e.min.y,pm.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(pm)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function x4(){let t=null,e=!1,n=null,i=null;function r(s,o){n(s,o),i=t.requestAnimationFrame(r)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function kH(t,e){const n=e.isWebGL2,i=new WeakMap;function r(u,f){const d=u.array,p=u.usage,m=t.createBuffer();t.bindBuffer(f,m),t.bufferData(f,d,p),u.onUploadCallback();let g;if(d instanceof Float32Array)g=5126;else if(d instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(n)g=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else g=5123;else if(d instanceof Int16Array)g=5122;else if(d instanceof Uint32Array)g=5125;else if(d instanceof Int32Array)g=5124;else if(d instanceof Int8Array)g=5120;else if(d instanceof Uint8Array)g=5121;else if(d instanceof Uint8ClampedArray)g=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:m,type:g,bytesPerElement:d.BYTES_PER_ELEMENT,version:u.version}}function s(u,f,d){const p=f.array,m=f.updateRange;t.bindBuffer(d,u),m.count===-1?t.bufferSubData(d,0,p):(n?t.bufferSubData(d,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count):t.bufferSubData(d,m.offset*p.BYTES_PER_ELEMENT,p.subarray(m.offset,m.offset+m.count)),m.count=-1)}function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),i.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const f=i.get(u);f&&(t.deleteBuffer(f.buffer),i.delete(u))}function l(u,f){if(u.isGLBufferAttribute){const p=i.get(u);(!p||p.version<u.version)&&i.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const d=i.get(u);d===void 0?i.set(u,r(u,f)):d.version<u.version&&(s(d.buffer,u,f),d.version=u.version)}return{get:o,remove:a,update:l}}class Bc extends yt{constructor(e=1,n=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:r};const s=e/2,o=n/2,a=Math.floor(i),l=Math.floor(r),u=a+1,f=l+1,d=e/a,p=n/l,m=[],g=[],y=[],w=[];for(let v=0;v<f;v++){const _=v*p-o;for(let b=0;b<u;b++){const M=b*d-s;g.push(M,-_,0),y.push(0,0,1),w.push(b/a),w.push(1-v/l)}}for(let v=0;v<l;v++)for(let _=0;_<a;_++){const b=_+u*v,M=_+u*(v+1),k=_+1+u*(v+1),E=_+1+u*v;m.push(b,M,E),m.push(M,k,E)}this.setIndex(m),this.setAttribute("position",new Ze(g,3)),this.setAttribute("normal",new Ze(y,3)),this.setAttribute("uv",new Ze(w,2))}static fromJSON(e){return new Bc(e.width,e.height,e.widthSegments,e.heightSegments)}}var CH=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,AH=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,PH=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,LH=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,RH=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,IH=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,DH="vec3 transformed = vec3( position );",zH=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,FH=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,NH=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,OH=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,BH=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,UH=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,VH=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,HH=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,WH=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,GH=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,$H=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,jH=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,XH=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,qH=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,YH=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,ZH=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,JH=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,KH=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,QH=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,eW="gl_FragColor = linearToOutputTexel( gl_FragColor );",tW=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,nW=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,iW=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,rW=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,sW=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,oW=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,aW=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,lW=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,uW=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,cW=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,fW=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,dW=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,hW=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,pW=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,mW=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert
#define Material_LightProbeLOD( material )	(0)`,gW=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,yW=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,xW=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,vW=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,wW=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,_W=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,SW=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,bW=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,MW=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,TW=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,EW=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,kW=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,CW=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,AW=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,PW=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,LW=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,RW=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,IW=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,DW=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,zW=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,FW=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,NW=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,OW=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,BW=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,UW=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,VW=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,HW=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,WW=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,GW=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,$W=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,jW=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,XW=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,qW=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,YW=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,ZW=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,JW=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,KW=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,QW=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,eG=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,tG=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,nG=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,iG=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,rG=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,sG=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,oG=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,aG=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,lG=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,uG=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,cG=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,fG=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,dG=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,hG=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,pG=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,mG=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,gG=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,yG=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,xG=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,vG=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,wG=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,_G=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,SG=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,bG=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,MG=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,TG=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const EG=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,kG=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,CG=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,AG=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,PG=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,LG=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,RG=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,IG=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,DG=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,zG=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,FG=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,NG=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,OG=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,BG=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UG=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,VG=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,HG=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,WG=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,GG=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,$G=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,jG=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,XG=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qG=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,YG=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ZG=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,JG=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,KG=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,QG=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,e7=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,t7=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,n7=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,i7=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,wt={alphamap_fragment:CH,alphamap_pars_fragment:AH,alphatest_fragment:PH,alphatest_pars_fragment:LH,aomap_fragment:RH,aomap_pars_fragment:IH,begin_vertex:DH,beginnormal_vertex:zH,bsdfs:FH,iridescence_fragment:NH,bumpmap_pars_fragment:OH,clipping_planes_fragment:BH,clipping_planes_pars_fragment:UH,clipping_planes_pars_vertex:VH,clipping_planes_vertex:HH,color_fragment:WH,color_pars_fragment:GH,color_pars_vertex:$H,color_vertex:jH,common:XH,cube_uv_reflection_fragment:qH,defaultnormal_vertex:YH,displacementmap_pars_vertex:ZH,displacementmap_vertex:JH,emissivemap_fragment:KH,emissivemap_pars_fragment:QH,encodings_fragment:eW,encodings_pars_fragment:tW,envmap_fragment:nW,envmap_common_pars_fragment:iW,envmap_pars_fragment:rW,envmap_pars_vertex:sW,envmap_physical_pars_fragment:yW,envmap_vertex:oW,fog_vertex:aW,fog_pars_vertex:lW,fog_fragment:uW,fog_pars_fragment:cW,gradientmap_pars_fragment:fW,lightmap_fragment:dW,lightmap_pars_fragment:hW,lights_lambert_fragment:pW,lights_lambert_pars_fragment:mW,lights_pars_begin:gW,lights_toon_fragment:xW,lights_toon_pars_fragment:vW,lights_phong_fragment:wW,lights_phong_pars_fragment:_W,lights_physical_fragment:SW,lights_physical_pars_fragment:bW,lights_fragment_begin:MW,lights_fragment_maps:TW,lights_fragment_end:EW,logdepthbuf_fragment:kW,logdepthbuf_pars_fragment:CW,logdepthbuf_pars_vertex:AW,logdepthbuf_vertex:PW,map_fragment:LW,map_pars_fragment:RW,map_particle_fragment:IW,map_particle_pars_fragment:DW,metalnessmap_fragment:zW,metalnessmap_pars_fragment:FW,morphcolor_vertex:NW,morphnormal_vertex:OW,morphtarget_pars_vertex:BW,morphtarget_vertex:UW,normal_fragment_begin:VW,normal_fragment_maps:HW,normal_pars_fragment:WW,normal_pars_vertex:GW,normal_vertex:$W,normalmap_pars_fragment:jW,clearcoat_normal_fragment_begin:XW,clearcoat_normal_fragment_maps:qW,clearcoat_pars_fragment:YW,iridescence_pars_fragment:ZW,output_fragment:JW,packing:KW,premultiplied_alpha_fragment:QW,project_vertex:eG,dithering_fragment:tG,dithering_pars_fragment:nG,roughnessmap_fragment:iG,roughnessmap_pars_fragment:rG,shadowmap_pars_fragment:sG,shadowmap_pars_vertex:oG,shadowmap_vertex:aG,shadowmask_pars_fragment:lG,skinbase_vertex:uG,skinning_pars_vertex:cG,skinning_vertex:fG,skinnormal_vertex:dG,specularmap_fragment:hG,specularmap_pars_fragment:pG,tonemapping_fragment:mG,tonemapping_pars_fragment:gG,transmission_fragment:yG,transmission_pars_fragment:xG,uv_pars_fragment:vG,uv_pars_vertex:wG,uv_vertex:_G,uv2_pars_fragment:SG,uv2_pars_vertex:bG,uv2_vertex:MG,worldpos_vertex:TG,background_vert:EG,background_frag:kG,cube_vert:CG,cube_frag:AG,depth_vert:PG,depth_frag:LG,distanceRGBA_vert:RG,distanceRGBA_frag:IG,equirect_vert:DG,equirect_frag:zG,linedashed_vert:FG,linedashed_frag:NG,meshbasic_vert:OG,meshbasic_frag:BG,meshlambert_vert:UG,meshlambert_frag:VG,meshmatcap_vert:HG,meshmatcap_frag:WG,meshnormal_vert:GG,meshnormal_frag:$G,meshphong_vert:jG,meshphong_frag:XG,meshphysical_vert:qG,meshphysical_frag:YG,meshtoon_vert:ZG,meshtoon_frag:JG,points_vert:KG,points_frag:QG,shadow_vert:e7,shadow_frag:t7,sprite_vert:n7,sprite_frag:i7},Re={common:{diffuse:{value:new Ue(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Hi},uv2Transform:{value:new Hi},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ve(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ue(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ue(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Hi}},sprite:{diffuse:{value:new Ue(16777215)},opacity:{value:1},center:{value:new ve(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Hi}}},ns={basic:{uniforms:ci([Re.common,Re.specularmap,Re.envmap,Re.aomap,Re.lightmap,Re.fog]),vertexShader:wt.meshbasic_vert,fragmentShader:wt.meshbasic_frag},lambert:{uniforms:ci([Re.common,Re.specularmap,Re.envmap,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.fog,Re.lights,{emissive:{value:new Ue(0)}}]),vertexShader:wt.meshlambert_vert,fragmentShader:wt.meshlambert_frag},phong:{uniforms:ci([Re.common,Re.specularmap,Re.envmap,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.fog,Re.lights,{emissive:{value:new Ue(0)},specular:{value:new Ue(1118481)},shininess:{value:30}}]),vertexShader:wt.meshphong_vert,fragmentShader:wt.meshphong_frag},standard:{uniforms:ci([Re.common,Re.envmap,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.roughnessmap,Re.metalnessmap,Re.fog,Re.lights,{emissive:{value:new Ue(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:wt.meshphysical_vert,fragmentShader:wt.meshphysical_frag},toon:{uniforms:ci([Re.common,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.gradientmap,Re.fog,Re.lights,{emissive:{value:new Ue(0)}}]),vertexShader:wt.meshtoon_vert,fragmentShader:wt.meshtoon_frag},matcap:{uniforms:ci([Re.common,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.fog,{matcap:{value:null}}]),vertexShader:wt.meshmatcap_vert,fragmentShader:wt.meshmatcap_frag},points:{uniforms:ci([Re.points,Re.fog]),vertexShader:wt.points_vert,fragmentShader:wt.points_frag},dashed:{uniforms:ci([Re.common,Re.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:wt.linedashed_vert,fragmentShader:wt.linedashed_frag},depth:{uniforms:ci([Re.common,Re.displacementmap]),vertexShader:wt.depth_vert,fragmentShader:wt.depth_frag},normal:{uniforms:ci([Re.common,Re.bumpmap,Re.normalmap,Re.displacementmap,{opacity:{value:1}}]),vertexShader:wt.meshnormal_vert,fragmentShader:wt.meshnormal_frag},sprite:{uniforms:ci([Re.sprite,Re.fog]),vertexShader:wt.sprite_vert,fragmentShader:wt.sprite_frag},background:{uniforms:{uvTransform:{value:new Hi},t2D:{value:null}},vertexShader:wt.background_vert,fragmentShader:wt.background_frag},cube:{uniforms:ci([Re.envmap,{opacity:{value:1}}]),vertexShader:wt.cube_vert,fragmentShader:wt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:wt.equirect_vert,fragmentShader:wt.equirect_frag},distanceRGBA:{uniforms:ci([Re.common,Re.displacementmap,{referencePosition:{value:new B},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:wt.distanceRGBA_vert,fragmentShader:wt.distanceRGBA_frag},shadow:{uniforms:ci([Re.lights,Re.fog,{color:{value:new Ue(0)},opacity:{value:1}}]),vertexShader:wt.shadow_vert,fragmentShader:wt.shadow_frag}};ns.physical={uniforms:ci([ns.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ve(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Ue(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ve},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Ue(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Ue(1,1,1)},specularColorMap:{value:null}}]),vertexShader:wt.meshphysical_vert,fragmentShader:wt.meshphysical_frag};function r7(t,e,n,i,r,s){const o=new Ue(0);let a=r===!0?0:1,l,u,f=null,d=0,p=null;function m(y,w){let v=!1,_=w.isScene===!0?w.background:null;_&&_.isTexture&&(_=e.get(_));const b=t.xr,M=b.getSession&&b.getSession();M&&M.environmentBlendMode==="additive"&&(_=null),_===null?g(o,a):_&&_.isColor&&(g(_,1),v=!0),(t.autoClear||v)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),_&&(_.isCubeTexture||_.mapping===Nc)?(u===void 0&&(u=new Zn(new Ma(1,1,1),new us({name:"BackgroundCubeMaterial",uniforms:kc(ns.cube.uniforms),vertexShader:ns.cube.vertexShader,fragmentShader:ns.cube.fragmentShader,side:ji,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(k,E,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),u.material.uniforms.envMap.value=_,u.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,(f!==_||d!==_.version||p!==t.toneMapping)&&(u.material.needsUpdate=!0,f=_,d=_.version,p=t.toneMapping),u.layers.enableAll(),y.unshift(u,u.geometry,u.material,0,0,null)):_&&_.isTexture&&(l===void 0&&(l=new Zn(new Bc(2,2),new us({name:"BackgroundMaterial",uniforms:kc(ns.background.uniforms),vertexShader:ns.background.vertexShader,fragmentShader:ns.background.fragmentShader,side:Cl,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=_,_.matrixAutoUpdate===!0&&_.updateMatrix(),l.material.uniforms.uvTransform.value.copy(_.matrix),(f!==_||d!==_.version||p!==t.toneMapping)&&(l.material.needsUpdate=!0,f=_,d=_.version,p=t.toneMapping),l.layers.enableAll(),y.unshift(l,l.geometry,l.material,0,0,null))}function g(y,w){n.buffers.color.setClear(y.r,y.g,y.b,w,s)}return{getClearColor:function(){return o},setClearColor:function(y,w=1){o.set(y),a=w,g(o,a)},getClearAlpha:function(){return a},setClearAlpha:function(y){a=y,g(o,a)},render:m}}function s7(t,e,n,i){const r=t.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=w(null);let u=l,f=!1;function d(G,W,J,re,D){let F=!1;if(o){const A=y(re,J,W);u!==A&&(u=A,m(u.object)),F=v(G,re,J,D),F&&_(G,re,J,D)}else{const A=W.wireframe===!0;(u.geometry!==re.id||u.program!==J.id||u.wireframe!==A)&&(u.geometry=re.id,u.program=J.id,u.wireframe=A,F=!0)}D!==null&&n.update(D,34963),(F||f)&&(f=!1,C(G,W,J,re),D!==null&&t.bindBuffer(34963,n.get(D).buffer))}function p(){return i.isWebGL2?t.createVertexArray():s.createVertexArrayOES()}function m(G){return i.isWebGL2?t.bindVertexArray(G):s.bindVertexArrayOES(G)}function g(G){return i.isWebGL2?t.deleteVertexArray(G):s.deleteVertexArrayOES(G)}function y(G,W,J){const re=J.wireframe===!0;let D=a[G.id];D===void 0&&(D={},a[G.id]=D);let F=D[W.id];F===void 0&&(F={},D[W.id]=F);let A=F[re];return A===void 0&&(A=w(p()),F[re]=A),A}function w(G){const W=[],J=[],re=[];for(let D=0;D<r;D++)W[D]=0,J[D]=0,re[D]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:W,enabledAttributes:J,attributeDivisors:re,object:G,attributes:{},index:null}}function v(G,W,J,re){const D=u.attributes,F=W.attributes;let A=0;const X=J.getAttributes();for(const Y in X)if(X[Y].location>=0){const xe=D[Y];let Ce=F[Y];if(Ce===void 0&&(Y==="instanceMatrix"&&G.instanceMatrix&&(Ce=G.instanceMatrix),Y==="instanceColor"&&G.instanceColor&&(Ce=G.instanceColor)),xe===void 0||xe.attribute!==Ce||Ce&&xe.data!==Ce.data)return!0;A++}return u.attributesNum!==A||u.index!==re}function _(G,W,J,re){const D={},F=W.attributes;let A=0;const X=J.getAttributes();for(const Y in X)if(X[Y].location>=0){let xe=F[Y];xe===void 0&&(Y==="instanceMatrix"&&G.instanceMatrix&&(xe=G.instanceMatrix),Y==="instanceColor"&&G.instanceColor&&(xe=G.instanceColor));const Ce={};Ce.attribute=xe,xe&&xe.data&&(Ce.data=xe.data),D[Y]=Ce,A++}u.attributes=D,u.attributesNum=A,u.index=re}function b(){const G=u.newAttributes;for(let W=0,J=G.length;W<J;W++)G[W]=0}function M(G){k(G,0)}function k(G,W){const J=u.newAttributes,re=u.enabledAttributes,D=u.attributeDivisors;J[G]=1,re[G]===0&&(t.enableVertexAttribArray(G),re[G]=1),D[G]!==W&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](G,W),D[G]=W)}function E(){const G=u.newAttributes,W=u.enabledAttributes;for(let J=0,re=W.length;J<re;J++)W[J]!==G[J]&&(t.disableVertexAttribArray(J),W[J]=0)}function I(G,W,J,re,D,F){i.isWebGL2===!0&&(J===5124||J===5125)?t.vertexAttribIPointer(G,W,J,D,F):t.vertexAttribPointer(G,W,J,re,D,F)}function C(G,W,J,re){if(i.isWebGL2===!1&&(G.isInstancedMesh||re.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;b();const D=re.attributes,F=J.getAttributes(),A=W.defaultAttributeValues;for(const X in F){const Y=F[X];if(Y.location>=0){let z=D[X];if(z===void 0&&(X==="instanceMatrix"&&G.instanceMatrix&&(z=G.instanceMatrix),X==="instanceColor"&&G.instanceColor&&(z=G.instanceColor)),z!==void 0){const xe=z.normalized,Ce=z.itemSize,ie=n.get(z);if(ie===void 0)continue;const Ne=ie.buffer,We=ie.type,Ge=ie.bytesPerElement;if(z.isInterleavedBufferAttribute){const be=z.data,$e=be.stride,pe=z.offset;if(be.isInstancedInterleavedBuffer){for(let de=0;de<Y.locationSize;de++)k(Y.location+de,be.meshPerAttribute);G.isInstancedMesh!==!0&&re._maxInstanceCount===void 0&&(re._maxInstanceCount=be.meshPerAttribute*be.count)}else for(let de=0;de<Y.locationSize;de++)M(Y.location+de);t.bindBuffer(34962,Ne);for(let de=0;de<Y.locationSize;de++)I(Y.location+de,Ce/Y.locationSize,We,xe,$e*Ge,(pe+Ce/Y.locationSize*de)*Ge)}else{if(z.isInstancedBufferAttribute){for(let be=0;be<Y.locationSize;be++)k(Y.location+be,z.meshPerAttribute);G.isInstancedMesh!==!0&&re._maxInstanceCount===void 0&&(re._maxInstanceCount=z.meshPerAttribute*z.count)}else for(let be=0;be<Y.locationSize;be++)M(Y.location+be);t.bindBuffer(34962,Ne);for(let be=0;be<Y.locationSize;be++)I(Y.location+be,Ce/Y.locationSize,We,xe,Ce*Ge,Ce/Y.locationSize*be*Ge)}}else if(A!==void 0){const xe=A[X];if(xe!==void 0)switch(xe.length){case 2:t.vertexAttrib2fv(Y.location,xe);break;case 3:t.vertexAttrib3fv(Y.location,xe);break;case 4:t.vertexAttrib4fv(Y.location,xe);break;default:t.vertexAttrib1fv(Y.location,xe)}}}}E()}function L(){q();for(const G in a){const W=a[G];for(const J in W){const re=W[J];for(const D in re)g(re[D].object),delete re[D];delete W[J]}delete a[G]}}function R(G){if(a[G.id]===void 0)return;const W=a[G.id];for(const J in W){const re=W[J];for(const D in re)g(re[D].object),delete re[D];delete W[J]}delete a[G.id]}function O(G){for(const W in a){const J=a[W];if(J[G.id]===void 0)continue;const re=J[G.id];for(const D in re)g(re[D].object),delete re[D];delete J[G.id]}}function q(){j(),f=!0,u!==l&&(u=l,m(u.object))}function j(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:q,resetDefaultState:j,dispose:L,releaseStatesOfGeometry:R,releaseStatesOfProgram:O,initAttributes:b,enableAttribute:M,disableUnusedAttributes:E}}function o7(t,e,n,i){const r=i.isWebGL2;let s;function o(u){s=u}function a(u,f){t.drawArrays(s,u,f),n.update(f,s,1)}function l(u,f,d){if(d===0)return;let p,m;if(r)p=t,m="drawArraysInstanced";else if(p=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",p===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[m](s,u,f,d),n.update(f,s,d)}this.setMode=o,this.render=a,this.renderInstances=l}function a7(t,e,n){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const I=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(I.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(I){if(I==="highp"){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";I="mediump"}return I==="mediump"&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&t instanceof WebGL2ComputeRenderingContext;let a=n.precision!==void 0?n.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const u=o||e.has("WEBGL_draw_buffers"),f=n.logarithmicDepthBuffer===!0,d=t.getParameter(34930),p=t.getParameter(35660),m=t.getParameter(3379),g=t.getParameter(34076),y=t.getParameter(34921),w=t.getParameter(36347),v=t.getParameter(36348),_=t.getParameter(36349),b=p>0,M=o||e.has("OES_texture_float"),k=b&&M,E=o?t.getParameter(36183):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:f,maxTextures:d,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:g,maxAttributes:y,maxVertexUniforms:w,maxVaryings:v,maxFragmentUniforms:_,vertexTextures:b,floatFragmentTextures:M,floatVertexTextures:k,maxSamples:E}}function l7(t){const e=this;let n=null,i=0,r=!1,s=!1;const o=new Wo,a=new Hi,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p,m){const g=d.length!==0||p||i!==0||r;return r=p,n=f(d,m,0),i=d.length,g},this.beginShadows=function(){s=!0,f(null)},this.endShadows=function(){s=!1,u()},this.setState=function(d,p,m){const g=d.clippingPlanes,y=d.clipIntersection,w=d.clipShadows,v=t.get(d);if(!r||g===null||g.length===0||s&&!w)s?f(null):u();else{const _=s?0:i,b=_*4;let M=v.clippingState||null;l.value=M,M=f(g,p,b,m);for(let k=0;k!==b;++k)M[k]=n[k];v.clippingState=M,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=_}};function u(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function f(d,p,m,g){const y=d!==null?d.length:0;let w=null;if(y!==0){if(w=l.value,g!==!0||w===null){const v=m+y*4,_=p.matrixWorldInverse;a.getNormalMatrix(_),(w===null||w.length<v)&&(w=new Float32Array(v));for(let b=0,M=m;b!==y;++b,M+=4)o.copy(d[b]).applyMatrix4(_,a),o.normal.toArray(w,M),w[M+3]=o.constant}l.value=w,l.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,w}}function u7(t){let e=new WeakMap;function n(o,a){return a===Ld?o.mapping=ha:a===Rd&&(o.mapping=pa),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===Ld||a===Rd)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new y4(l.height/2);return u.fromEquirectangularTexture(t,o),e.set(o,u),o.addEventListener("dispose",r),n(u.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class fh extends uh{constructor(e=-1,n=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+n,l=r-n;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=f*this.view.offsetY,l=a-f*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const Ku=4,IE=[.125,.215,.35,.446,.526,.582],el=20,Dv=new fh,DE=new Ue;let zv=null;const Ja=(1+Math.sqrt(5))/2,_u=1/Ja,zE=[new B(1,1,1),new B(-1,1,1),new B(1,1,-1),new B(-1,1,-1),new B(0,Ja,_u),new B(0,Ja,-_u),new B(_u,0,Ja),new B(-_u,0,Ja),new B(Ja,_u,0),new B(-Ja,_u,0)];class c0{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,i=.1,r=100){zv=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=OE(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=NE(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(zv),e.scissorTest=!1,mm(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===ha||e.mapping===pa?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),zv=this._renderer.getRenderTarget();const i=n||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:Mn,minFilter:Mn,generateMipmaps:!1,type:Ec,format:Or,encoding:fo,depthBuffer:!1},r=FE(e,n,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=FE(e,n,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=c7(s)),this._blurMaterial=f7(s,e,n)}return r}_compileMaterial(e){const n=new Zn(this._lodPlanes[0],e);this._renderer.compile(n,Dv)}_sceneToCubeUV(e,n,i,r){const a=new Yn(90,1,n,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],f=this._renderer,d=f.autoClear,p=f.toneMapping;f.getClearColor(DE),f.toneMapping=os,f.autoClear=!1;const m=new ba({name:"PMREM.Background",side:ji,depthWrite:!1,depthTest:!1}),g=new Zn(new Ma,m);let y=!1;const w=e.background;w?w.isColor&&(m.color.copy(w),e.background=null,y=!0):(m.color.copy(DE),y=!0);for(let v=0;v<6;v++){const _=v%3;_===0?(a.up.set(0,l[v],0),a.lookAt(u[v],0,0)):_===1?(a.up.set(0,0,l[v]),a.lookAt(0,u[v],0)):(a.up.set(0,l[v],0),a.lookAt(0,0,u[v]));const b=this._cubeSize;mm(r,_*b,v>2?b:0,b,b),f.setRenderTarget(r),y&&f.render(g,a),f.render(e,a)}g.geometry.dispose(),g.material.dispose(),f.toneMapping=p,f.autoClear=d,e.background=w}_textureToCubeUV(e,n){const i=this._renderer,r=e.mapping===ha||e.mapping===pa;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=OE()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=NE());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Zn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;mm(n,0,0,3*l,2*l),i.setRenderTarget(n),i.render(o,Dv)}_applyPMREM(e){const n=this._renderer,i=n.autoClear;n.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=zE[(r-1)%zE.length];this._blur(e,r-1,r,s,o)}n.autoClear=i}_blur(e,n,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,n,i,r,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,d=new Zn(this._lodPlanes[r],u),p=u.uniforms,m=this._sizeLods[i]-1,g=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*el-1),y=s/g,w=isFinite(s)?1+Math.floor(f*y):el;w>el&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${el}`);const v=[];let _=0;for(let I=0;I<el;++I){const C=I/y,L=Math.exp(-C*C/2);v.push(L),I===0?_+=L:I<w&&(_+=2*L)}for(let I=0;I<v.length;I++)v[I]=v[I]/_;p.envMap.value=e.texture,p.samples.value=w,p.weights.value=v,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:b}=this;p.dTheta.value=g,p.mipInt.value=b-i;const M=this._sizeLods[r],k=3*M*(r>b-Ku?r-b+Ku:0),E=4*(this._cubeSize-M);mm(n,k,E,3*M,2*M),l.setRenderTarget(n),l.render(d,Dv)}}function c7(t){const e=[],n=[],i=[];let r=t;const s=t-Ku+1+IE.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);n.push(a);let l=1/a;o>t-Ku?l=IE[o-t+Ku-1]:o===0&&(l=0),i.push(l);const u=1/(a-2),f=-u,d=1+u,p=[f,f,d,f,d,d,f,f,d,d,f,d],m=6,g=6,y=3,w=2,v=1,_=new Float32Array(y*g*m),b=new Float32Array(w*g*m),M=new Float32Array(v*g*m);for(let E=0;E<m;E++){const I=E%3*2/3-1,C=E>2?0:-1,L=[I,C,0,I+2/3,C,0,I+2/3,C+1,0,I,C,0,I+2/3,C+1,0,I,C+1,0];_.set(L,y*g*E),b.set(p,w*g*E);const R=[E,E,E,E,E,E];M.set(R,v*g*E)}const k=new yt;k.setAttribute("position",new jt(_,y)),k.setAttribute("uv",new jt(b,w)),k.setAttribute("faceIndex",new jt(M,v)),e.push(k),r>Ku&&r--}return{lodPlanes:e,sizeLods:n,sigmas:i}}function FE(t,e,n){const i=new Wr(t,e,n);return i.texture.mapping=Nc,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function mm(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function f7(t,e,n){const i=new Float32Array(el),r=new B(0,1,0);return new us({name:"SphericalGaussianBlur",defines:{n:el,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:mb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:so,depthTest:!1,depthWrite:!1})}function NE(){return new us({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:mb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:so,depthTest:!1,depthWrite:!1})}function OE(){return new us({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:mb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:so,depthTest:!1,depthWrite:!1})}function mb(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function d7(t){let e=new WeakMap,n=null;function i(a){if(a&&a.isTexture){const l=a.mapping,u=l===Ld||l===Rd,f=l===ha||l===pa;if(u||f)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let d=e.get(a);return n===null&&(n=new c0(t)),d=u?n.fromEquirectangular(a,d):n.fromCubemap(a,d),e.set(a,d),d.texture}else{if(e.has(a))return e.get(a).texture;{const d=a.image;if(u&&d&&d.height>0||f&&d&&r(d)){n===null&&(n=new c0(t));const p=u?n.fromEquirectangular(a):n.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function r(a){let l=0;const u=6;for(let f=0;f<u;f++)a[f]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:o}}function h7(t){const e={};function n(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(i)}return e[i]=r,r}return{has:function(i){return n(i)!==null},init:function(i){i.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(i){const r=n(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function p7(t,e,n,i){const r={},s=new WeakMap;function o(d){const p=d.target;p.index!==null&&e.remove(p.index);for(const g in p.attributes)e.remove(p.attributes[g]);p.removeEventListener("dispose",o),delete r[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,n.memory.geometries--}function a(d,p){return r[p.id]===!0||(p.addEventListener("dispose",o),r[p.id]=!0,n.memory.geometries++),p}function l(d){const p=d.attributes;for(const g in p)e.update(p[g],34962);const m=d.morphAttributes;for(const g in m){const y=m[g];for(let w=0,v=y.length;w<v;w++)e.update(y[w],34962)}}function u(d){const p=[],m=d.index,g=d.attributes.position;let y=0;if(m!==null){const _=m.array;y=m.version;for(let b=0,M=_.length;b<M;b+=3){const k=_[b+0],E=_[b+1],I=_[b+2];p.push(k,E,E,I,I,k)}}else{const _=g.array;y=g.version;for(let b=0,M=_.length/3-1;b<M;b+=3){const k=b+0,E=b+1,I=b+2;p.push(k,E,E,I,I,k)}}const w=new(h4(p)?pb:hb)(p,1);w.version=y;const v=s.get(d);v&&e.remove(v),s.set(d,w)}function f(d){const p=s.get(d);if(p){const m=d.index;m!==null&&p.version<m.version&&u(d)}else u(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:f}}function m7(t,e,n,i){const r=i.isWebGL2;let s;function o(p){s=p}let a,l;function u(p){a=p.type,l=p.bytesPerElement}function f(p,m){t.drawElements(s,m,a,p*l),n.update(m,s,1)}function d(p,m,g){if(g===0)return;let y,w;if(r)y=t,w="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),w="drawElementsInstancedANGLE",y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[w](s,m,a,p*l,g),n.update(m,s,g)}this.setMode=o,this.setIndex=u,this.render=f,this.renderInstances=d}function g7(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(n.calls++,o){case 4:n.triangles+=a*(s/3);break;case 1:n.lines+=a*(s/2);break;case 3:n.lines+=a*(s-1);break;case 2:n.lines+=a*s;break;case 0:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:r,update:i}}function y7(t,e){return t[0]-e[0]}function x7(t,e){return Math.abs(e[1])-Math.abs(t[1])}function v7(t,e,n){const i={},r=new Float32Array(8),s=new WeakMap,o=new Ht,a=[];for(let u=0;u<8;u++)a[u]=[u,0];function l(u,f,d,p){const m=u.morphTargetInfluences;if(e.isWebGL2===!0){const y=f.morphAttributes.position||f.morphAttributes.normal||f.morphAttributes.color,w=y!==void 0?y.length:0;let v=s.get(f);if(v===void 0||v.count!==w){let J=function(){G.dispose(),s.delete(f),f.removeEventListener("dispose",J)};var g=J;v!==void 0&&v.texture.dispose();const M=f.morphAttributes.position!==void 0,k=f.morphAttributes.normal!==void 0,E=f.morphAttributes.color!==void 0,I=f.morphAttributes.position||[],C=f.morphAttributes.normal||[],L=f.morphAttributes.color||[];let R=0;M===!0&&(R=1),k===!0&&(R=2),E===!0&&(R=3);let O=f.attributes.position.count*R,q=1;O>e.maxTextureSize&&(q=Math.ceil(O/e.maxTextureSize),O=e.maxTextureSize);const j=new Float32Array(O*q*4*w),G=new ah(j,O,q,w);G.type=eo,G.needsUpdate=!0;const W=R*4;for(let re=0;re<w;re++){const D=I[re],F=C[re],A=L[re],X=O*q*4*re;for(let Y=0;Y<D.count;Y++){const z=Y*W;M===!0&&(o.fromBufferAttribute(D,Y),j[X+z+0]=o.x,j[X+z+1]=o.y,j[X+z+2]=o.z,j[X+z+3]=0),k===!0&&(o.fromBufferAttribute(F,Y),j[X+z+4]=o.x,j[X+z+5]=o.y,j[X+z+6]=o.z,j[X+z+7]=0),E===!0&&(o.fromBufferAttribute(A,Y),j[X+z+8]=o.x,j[X+z+9]=o.y,j[X+z+10]=o.z,j[X+z+11]=A.itemSize===4?o.w:1)}}v={count:w,texture:G,size:new ve(O,q)},s.set(f,v),f.addEventListener("dispose",J)}let _=0;for(let M=0;M<m.length;M++)_+=m[M];const b=f.morphTargetsRelative?1:1-_;p.getUniforms().setValue(t,"morphTargetBaseInfluence",b),p.getUniforms().setValue(t,"morphTargetInfluences",m),p.getUniforms().setValue(t,"morphTargetsTexture",v.texture,n),p.getUniforms().setValue(t,"morphTargetsTextureSize",v.size)}else{const y=m===void 0?0:m.length;let w=i[f.id];if(w===void 0||w.length!==y){w=[];for(let k=0;k<y;k++)w[k]=[k,0];i[f.id]=w}for(let k=0;k<y;k++){const E=w[k];E[0]=k,E[1]=m[k]}w.sort(x7);for(let k=0;k<8;k++)k<y&&w[k][1]?(a[k][0]=w[k][0],a[k][1]=w[k][1]):(a[k][0]=Number.MAX_SAFE_INTEGER,a[k][1]=0);a.sort(y7);const v=f.morphAttributes.position,_=f.morphAttributes.normal;let b=0;for(let k=0;k<8;k++){const E=a[k],I=E[0],C=E[1];I!==Number.MAX_SAFE_INTEGER&&C?(v&&f.getAttribute("morphTarget"+k)!==v[I]&&f.setAttribute("morphTarget"+k,v[I]),_&&f.getAttribute("morphNormal"+k)!==_[I]&&f.setAttribute("morphNormal"+k,_[I]),r[k]=C,b+=C):(v&&f.hasAttribute("morphTarget"+k)===!0&&f.deleteAttribute("morphTarget"+k),_&&f.hasAttribute("morphNormal"+k)===!0&&f.deleteAttribute("morphNormal"+k),r[k]=0)}const M=f.morphTargetsRelative?1:1-b;p.getUniforms().setValue(t,"morphTargetBaseInfluence",M),p.getUniforms().setValue(t,"morphTargetInfluences",r)}}return{update:l}}function w7(t,e,n,i){let r=new WeakMap;function s(l){const u=i.render.frame,f=l.geometry,d=e.get(l,f);return r.get(d)!==u&&(e.update(d),r.set(d,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),n.update(l.instanceMatrix,34962),l.instanceColor!==null&&n.update(l.instanceColor,34962)),d}function o(){r=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),n.remove(u.instanceMatrix),u.instanceColor!==null&&n.remove(u.instanceColor)}return{update:s,dispose:o}}const v4=new Fn,w4=new ah,_4=new K0,S4=new ch,BE=[],UE=[],VE=new Float32Array(16),HE=new Float32Array(9),WE=new Float32Array(4);function Uc(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let s=BE[r];if(s===void 0&&(s=new Float32Array(r),BE[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function ki(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Ci(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function ey(t,e){let n=UE[e];n===void 0&&(n=new Int32Array(e),UE[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function _7(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function S7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ki(n,e))return;t.uniform2fv(this.addr,e),Ci(n,e)}}function b7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(ki(n,e))return;t.uniform3fv(this.addr,e),Ci(n,e)}}function M7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ki(n,e))return;t.uniform4fv(this.addr,e),Ci(n,e)}}function T7(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(ki(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Ci(n,e)}else{if(ki(n,i))return;WE.set(i),t.uniformMatrix2fv(this.addr,!1,WE),Ci(n,i)}}function E7(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(ki(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Ci(n,e)}else{if(ki(n,i))return;HE.set(i),t.uniformMatrix3fv(this.addr,!1,HE),Ci(n,i)}}function k7(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(ki(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Ci(n,e)}else{if(ki(n,i))return;VE.set(i),t.uniformMatrix4fv(this.addr,!1,VE),Ci(n,i)}}function C7(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function A7(t,e){const n=this.cache;ki(n,e)||(t.uniform2iv(this.addr,e),Ci(n,e))}function P7(t,e){const n=this.cache;ki(n,e)||(t.uniform3iv(this.addr,e),Ci(n,e))}function L7(t,e){const n=this.cache;ki(n,e)||(t.uniform4iv(this.addr,e),Ci(n,e))}function R7(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function I7(t,e){const n=this.cache;ki(n,e)||(t.uniform2uiv(this.addr,e),Ci(n,e))}function D7(t,e){const n=this.cache;ki(n,e)||(t.uniform3uiv(this.addr,e),Ci(n,e))}function z7(t,e){const n=this.cache;ki(n,e)||(t.uniform4uiv(this.addr,e),Ci(n,e))}function F7(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(e||v4,r)}function N7(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||_4,r)}function O7(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||S4,r)}function B7(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||w4,r)}function U7(t){switch(t){case 5126:return _7;case 35664:return S7;case 35665:return b7;case 35666:return M7;case 35674:return T7;case 35675:return E7;case 35676:return k7;case 5124:case 35670:return C7;case 35667:case 35671:return A7;case 35668:case 35672:return P7;case 35669:case 35673:return L7;case 5125:return R7;case 36294:return I7;case 36295:return D7;case 36296:return z7;case 35678:case 36198:case 36298:case 36306:case 35682:return F7;case 35679:case 36299:case 36307:return N7;case 35680:case 36300:case 36308:case 36293:return O7;case 36289:case 36303:case 36311:case 36292:return B7}}function V7(t,e){t.uniform1fv(this.addr,e)}function H7(t,e){const n=Uc(e,this.size,2);t.uniform2fv(this.addr,n)}function W7(t,e){const n=Uc(e,this.size,3);t.uniform3fv(this.addr,n)}function G7(t,e){const n=Uc(e,this.size,4);t.uniform4fv(this.addr,n)}function $7(t,e){const n=Uc(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function j7(t,e){const n=Uc(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function X7(t,e){const n=Uc(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function q7(t,e){t.uniform1iv(this.addr,e)}function Y7(t,e){t.uniform2iv(this.addr,e)}function Z7(t,e){t.uniform3iv(this.addr,e)}function J7(t,e){t.uniform4iv(this.addr,e)}function K7(t,e){t.uniform1uiv(this.addr,e)}function Q7(t,e){t.uniform2uiv(this.addr,e)}function e$(t,e){t.uniform3uiv(this.addr,e)}function t$(t,e){t.uniform4uiv(this.addr,e)}function n$(t,e,n){const i=e.length,r=ey(n,i);t.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)n.setTexture2D(e[s]||v4,r[s])}function i$(t,e,n){const i=e.length,r=ey(n,i);t.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)n.setTexture3D(e[s]||_4,r[s])}function r$(t,e,n){const i=e.length,r=ey(n,i);t.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)n.setTextureCube(e[s]||S4,r[s])}function s$(t,e,n){const i=e.length,r=ey(n,i);t.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)n.setTexture2DArray(e[s]||w4,r[s])}function o$(t){switch(t){case 5126:return V7;case 35664:return H7;case 35665:return W7;case 35666:return G7;case 35674:return $7;case 35675:return j7;case 35676:return X7;case 5124:case 35670:return q7;case 35667:case 35671:return Y7;case 35668:case 35672:return Z7;case 35669:case 35673:return J7;case 5125:return K7;case 36294:return Q7;case 36295:return e$;case 36296:return t$;case 35678:case 36198:case 36298:case 36306:case 35682:return n$;case 35679:case 36299:case 36307:return i$;case 35680:case 36300:case 36308:case 36293:return r$;case 36289:case 36303:case 36311:case 36292:return s$}}class a${constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.setValue=U7(n.type)}}class l${constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.size=n.size,this.setValue=o$(n.type)}}class u${constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,n[a.id],i)}}}const Fv=/(\w+)(\])?(\[|\.)?/g;function GE(t,e){t.seq.push(e),t.map[e.id]=e}function c$(t,e,n){const i=t.name,r=i.length;for(Fv.lastIndex=0;;){const s=Fv.exec(i),o=Fv.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===r){GE(n,u===void 0?new a$(a,t,e):new l$(a,t,e));break}else{let d=n.map[a];d===void 0&&(d=new u$(a),GE(n,d)),n=d}}}class mg{constructor(e,n){this.seq=[],this.map={};const i=e.getProgramParameter(n,35718);for(let r=0;r<i;++r){const s=e.getActiveUniform(n,r),o=e.getUniformLocation(n,s.name);c$(s,o,this)}}setValue(e,n,i,r){const s=this.map[n];s!==void 0&&s.setValue(e,i,r)}setOptional(e,n,i){const r=n[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,n,i,r){for(let s=0,o=n.length;s!==o;++s){const a=n[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,n){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in n&&i.push(o)}return i}}function $E(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}let f$=0;function d$(t,e){const n=t.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return i.join(`
`)}function h$(t){switch(t){case fo:return["Linear","( value )"];case tn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function jE(t,e,n){const i=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+r+`

`+d$(t.getShaderSource(e),o)}else return r}function p$(t,e){const n=h$(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function m$(t,e){let n;switch(e){case UI:n="Linear";break;case VI:n="Reinhard";break;case HI:n="OptimizedCineon";break;case Y0:n="ACESFilmic";break;case WI:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function g$(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Vf).join(`
`)}function y$(t){const e=[];for(const n in t){const i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function x$(t,e){const n={},i=t.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=t.getActiveAttrib(e,r),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function Vf(t){return t!==""}function XE(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function qE(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const v$=/^[ \t]*#include +<([\w\d./]+)>/gm;function c_(t){return t.replace(v$,w$)}function w$(t,e){const n=wt[e];if(n===void 0)throw new Error("Can not resolve #include <"+e+">");return c_(n)}const _$=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function YE(t){return t.replace(_$,S$)}function S$(t,e,n,i){let r="";for(let s=parseInt(e);s<parseInt(n);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function ZE(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function b$(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===rb?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===sb?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Zu&&(e="SHADOWMAP_TYPE_VSM"),e}function M$(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case ha:case pa:e="ENVMAP_TYPE_CUBE";break;case Nc:e="ENVMAP_TYPE_CUBE_UV";break}return e}function T$(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case pa:e="ENVMAP_MODE_REFRACTION";break}return e}function E$(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case oh:e="ENVMAP_BLENDING_MULTIPLY";break;case OI:e="ENVMAP_BLENDING_MIX";break;case BI:e="ENVMAP_BLENDING_ADD";break}return e}function k$(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:i,maxMip:n}}function C$(t,e,n,i){const r=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=b$(n),u=M$(n),f=T$(n),d=E$(n),p=k$(n),m=n.isWebGL2?"":g$(n),g=y$(s),y=r.createProgram();let w,v,_=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(w=[g].filter(Vf).join(`
`),w.length>0&&(w+=`
`),v=[m,g].filter(Vf).join(`
`),v.length>0&&(v+=`
`)):(w=[ZE(n),"#define SHADER_NAME "+n.shaderName,g,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Vf).join(`
`),v=[m,ZE(n),"#define SHADER_NAME "+n.shaderName,g,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+f:"",n.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==os?"#define TONE_MAPPING":"",n.toneMapping!==os?wt.tonemapping_pars_fragment:"",n.toneMapping!==os?m$("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",wt.encodings_pars_fragment,p$("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Vf).join(`
`)),o=c_(o),o=XE(o,n),o=qE(o,n),a=c_(a),a=XE(a,n),a=qE(a,n),o=YE(o),a=YE(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,w=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,v=["#define varying in",n.glslVersion===l_?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===l_?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const b=_+w+o,M=_+v+a,k=$E(r,35633,b),E=$E(r,35632,M);if(r.attachShader(y,k),r.attachShader(y,E),n.index0AttributeName!==void 0?r.bindAttribLocation(y,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y),t.debug.checkShaderErrors){const L=r.getProgramInfoLog(y).trim(),R=r.getShaderInfoLog(k).trim(),O=r.getShaderInfoLog(E).trim();let q=!0,j=!0;if(r.getProgramParameter(y,35714)===!1){q=!1;const G=jE(r,k,"vertex"),W=jE(r,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(y,35715)+`

Program Info Log: `+L+`
`+G+`
`+W)}else L!==""?console.warn("THREE.WebGLProgram: Program Info Log:",L):(R===""||O==="")&&(j=!1);j&&(this.diagnostics={runnable:q,programLog:L,vertexShader:{log:R,prefix:w},fragmentShader:{log:O,prefix:v}})}r.deleteShader(k),r.deleteShader(E);let I;this.getUniforms=function(){return I===void 0&&(I=new mg(r,y)),I};let C;return this.getAttributes=function(){return C===void 0&&(C=x$(r,y)),C},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(y),this.program=void 0},this.name=n.shaderName,this.id=f$++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=k,this.fragmentShader=E,this}let A$=0;class P${constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(n),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const i of n)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let i=n.get(e);return i===void 0&&(i=new Set,n.set(e,i)),i}_getShaderStage(e){const n=this.shaderCache;let i=n.get(e);return i===void 0&&(i=new L$(e),n.set(e,i)),i}}class L${constructor(e){this.id=A$++,this.code=e,this.usedTimes=0}}function R$(t,e,n,i,r,s,o){const a=new vl,l=new P$,u=[],f=r.isWebGL2,d=r.logarithmicDepthBuffer,p=r.vertexTextures;let m=r.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(C,L,R,O,q){const j=O.fog,G=q.geometry,W=C.isMeshStandardMaterial?O.environment:null,J=(C.isMeshStandardMaterial?n:e).get(C.envMap||W),re=J&&J.mapping===Nc?J.image.height:null,D=g[C.type];C.precision!==null&&(m=r.getMaxPrecision(C.precision),m!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",m,"instead."));const F=G.morphAttributes.position||G.morphAttributes.normal||G.morphAttributes.color,A=F!==void 0?F.length:0;let X=0;G.morphAttributes.position!==void 0&&(X=1),G.morphAttributes.normal!==void 0&&(X=2),G.morphAttributes.color!==void 0&&(X=3);let Y,z,xe,Ce;if(D){const $e=ns[D];Y=$e.vertexShader,z=$e.fragmentShader}else Y=C.vertexShader,z=C.fragmentShader,l.update(C),xe=l.getVertexShaderID(C),Ce=l.getFragmentShaderID(C);const ie=t.getRenderTarget(),Ne=C.alphaTest>0,We=C.clearcoat>0,Ge=C.iridescence>0;return{isWebGL2:f,shaderID:D,shaderName:C.type,vertexShader:Y,fragmentShader:z,defines:C.defines,customVertexShaderID:xe,customFragmentShaderID:Ce,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:m,instancing:q.isInstancedMesh===!0,instancingColor:q.isInstancedMesh===!0&&q.instanceColor!==null,supportsVertexTextures:p,outputEncoding:ie===null?t.outputEncoding:ie.isXRRenderTarget===!0?ie.texture.encoding:fo,map:!!C.map,matcap:!!C.matcap,envMap:!!J,envMapMode:J&&J.mapping,envMapCubeUVHeight:re,lightMap:!!C.lightMap,aoMap:!!C.aoMap,emissiveMap:!!C.emissiveMap,bumpMap:!!C.bumpMap,normalMap:!!C.normalMap,objectSpaceNormalMap:C.normalMapType===c4,tangentSpaceNormalMap:C.normalMapType===Sa,decodeVideoTexture:!!C.map&&C.map.isVideoTexture===!0&&C.map.encoding===tn,clearcoat:We,clearcoatMap:We&&!!C.clearcoatMap,clearcoatRoughnessMap:We&&!!C.clearcoatRoughnessMap,clearcoatNormalMap:We&&!!C.clearcoatNormalMap,iridescence:Ge,iridescenceMap:Ge&&!!C.iridescenceMap,iridescenceThicknessMap:Ge&&!!C.iridescenceThicknessMap,displacementMap:!!C.displacementMap,roughnessMap:!!C.roughnessMap,metalnessMap:!!C.metalnessMap,specularMap:!!C.specularMap,specularIntensityMap:!!C.specularIntensityMap,specularColorMap:!!C.specularColorMap,opaque:C.transparent===!1&&C.blending===ml,alphaMap:!!C.alphaMap,alphaTest:Ne,gradientMap:!!C.gradientMap,sheen:C.sheen>0,sheenColorMap:!!C.sheenColorMap,sheenRoughnessMap:!!C.sheenRoughnessMap,transmission:C.transmission>0,transmissionMap:!!C.transmissionMap,thicknessMap:!!C.thicknessMap,combine:C.combine,vertexTangents:!!C.normalMap&&!!G.attributes.tangent,vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!G.attributes.color&&G.attributes.color.itemSize===4,vertexUvs:!!C.map||!!C.bumpMap||!!C.normalMap||!!C.specularMap||!!C.alphaMap||!!C.emissiveMap||!!C.roughnessMap||!!C.metalnessMap||!!C.clearcoatMap||!!C.clearcoatRoughnessMap||!!C.clearcoatNormalMap||!!C.iridescenceMap||!!C.iridescenceThicknessMap||!!C.displacementMap||!!C.transmissionMap||!!C.thicknessMap||!!C.specularIntensityMap||!!C.specularColorMap||!!C.sheenColorMap||!!C.sheenRoughnessMap,uvsVertexOnly:!(C.map||C.bumpMap||C.normalMap||C.specularMap||C.alphaMap||C.emissiveMap||C.roughnessMap||C.metalnessMap||C.clearcoatNormalMap||C.iridescenceMap||C.iridescenceThicknessMap||C.transmission>0||C.transmissionMap||C.thicknessMap||C.specularIntensityMap||C.specularColorMap||C.sheen>0||C.sheenColorMap||C.sheenRoughnessMap)&&!!C.displacementMap,fog:!!j,useFog:C.fog===!0,fogExp2:j&&j.isFogExp2,flatShading:!!C.flatShading,sizeAttenuation:C.sizeAttenuation,logarithmicDepthBuffer:d,skinning:q.isSkinnedMesh===!0,morphTargets:G.morphAttributes.position!==void 0,morphNormals:G.morphAttributes.normal!==void 0,morphColors:G.morphAttributes.color!==void 0,morphTargetsCount:A,morphTextureStride:X,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:C.dithering,shadowMapEnabled:t.shadowMap.enabled&&R.length>0,shadowMapType:t.shadowMap.type,toneMapping:C.toneMapped?t.toneMapping:os,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===Qs,flipSided:C.side===ji,useDepthPacking:!!C.depthPacking,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionDerivatives:C.extensions&&C.extensions.derivatives,extensionFragDepth:C.extensions&&C.extensions.fragDepth,extensionDrawBuffers:C.extensions&&C.extensions.drawBuffers,extensionShaderTextureLOD:C.extensions&&C.extensions.shaderTextureLOD,rendererExtensionFragDepth:f||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:f||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:f||i.has("EXT_shader_texture_lod"),customProgramCacheKey:C.customProgramCacheKey()}}function w(C){const L=[];if(C.shaderID?L.push(C.shaderID):(L.push(C.customVertexShaderID),L.push(C.customFragmentShaderID)),C.defines!==void 0)for(const R in C.defines)L.push(R),L.push(C.defines[R]);return C.isRawShaderMaterial===!1&&(v(L,C),_(L,C),L.push(t.outputEncoding)),L.push(C.customProgramCacheKey),L.join()}function v(C,L){C.push(L.precision),C.push(L.outputEncoding),C.push(L.envMapMode),C.push(L.envMapCubeUVHeight),C.push(L.combine),C.push(L.vertexUvs),C.push(L.fogExp2),C.push(L.sizeAttenuation),C.push(L.morphTargetsCount),C.push(L.morphAttributeCount),C.push(L.numDirLights),C.push(L.numPointLights),C.push(L.numSpotLights),C.push(L.numSpotLightMaps),C.push(L.numHemiLights),C.push(L.numRectAreaLights),C.push(L.numDirLightShadows),C.push(L.numPointLightShadows),C.push(L.numSpotLightShadows),C.push(L.numSpotLightShadowsWithMaps),C.push(L.shadowMapType),C.push(L.toneMapping),C.push(L.numClippingPlanes),C.push(L.numClipIntersection),C.push(L.depthPacking)}function _(C,L){a.disableAll(),L.isWebGL2&&a.enable(0),L.supportsVertexTextures&&a.enable(1),L.instancing&&a.enable(2),L.instancingColor&&a.enable(3),L.map&&a.enable(4),L.matcap&&a.enable(5),L.envMap&&a.enable(6),L.lightMap&&a.enable(7),L.aoMap&&a.enable(8),L.emissiveMap&&a.enable(9),L.bumpMap&&a.enable(10),L.normalMap&&a.enable(11),L.objectSpaceNormalMap&&a.enable(12),L.tangentSpaceNormalMap&&a.enable(13),L.clearcoat&&a.enable(14),L.clearcoatMap&&a.enable(15),L.clearcoatRoughnessMap&&a.enable(16),L.clearcoatNormalMap&&a.enable(17),L.iridescence&&a.enable(18),L.iridescenceMap&&a.enable(19),L.iridescenceThicknessMap&&a.enable(20),L.displacementMap&&a.enable(21),L.specularMap&&a.enable(22),L.roughnessMap&&a.enable(23),L.metalnessMap&&a.enable(24),L.gradientMap&&a.enable(25),L.alphaMap&&a.enable(26),L.alphaTest&&a.enable(27),L.vertexColors&&a.enable(28),L.vertexAlphas&&a.enable(29),L.vertexUvs&&a.enable(30),L.vertexTangents&&a.enable(31),L.uvsVertexOnly&&a.enable(32),C.push(a.mask),a.disableAll(),L.fog&&a.enable(0),L.useFog&&a.enable(1),L.flatShading&&a.enable(2),L.logarithmicDepthBuffer&&a.enable(3),L.skinning&&a.enable(4),L.morphTargets&&a.enable(5),L.morphNormals&&a.enable(6),L.morphColors&&a.enable(7),L.premultipliedAlpha&&a.enable(8),L.shadowMapEnabled&&a.enable(9),L.physicallyCorrectLights&&a.enable(10),L.doubleSided&&a.enable(11),L.flipSided&&a.enable(12),L.useDepthPacking&&a.enable(13),L.dithering&&a.enable(14),L.specularIntensityMap&&a.enable(15),L.specularColorMap&&a.enable(16),L.transmission&&a.enable(17),L.transmissionMap&&a.enable(18),L.thicknessMap&&a.enable(19),L.sheen&&a.enable(20),L.sheenColorMap&&a.enable(21),L.sheenRoughnessMap&&a.enable(22),L.decodeVideoTexture&&a.enable(23),L.opaque&&a.enable(24),C.push(a.mask)}function b(C){const L=g[C.type];let R;if(L){const O=ns[L];R=m4.clone(O.uniforms)}else R=C.uniforms;return R}function M(C,L){let R;for(let O=0,q=u.length;O<q;O++){const j=u[O];if(j.cacheKey===L){R=j,++R.usedTimes;break}}return R===void 0&&(R=new C$(t,L,C,s),u.push(R)),R}function k(C){if(--C.usedTimes===0){const L=u.indexOf(C);u[L]=u[u.length-1],u.pop(),C.destroy()}}function E(C){l.remove(C)}function I(){l.dispose()}return{getParameters:y,getProgramCacheKey:w,getUniforms:b,acquireProgram:M,releaseProgram:k,releaseShaderCache:E,programs:u,dispose:I}}function I$(){let t=new WeakMap;function e(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function n(s){t.delete(s)}function i(s,o,a){t.get(s)[o]=a}function r(){t=new WeakMap}return{get:e,remove:n,update:i,dispose:r}}function D$(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function JE(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function KE(){const t=[];let e=0;const n=[],i=[],r=[];function s(){e=0,n.length=0,i.length=0,r.length=0}function o(d,p,m,g,y,w){let v=t[e];return v===void 0?(v={id:d.id,object:d,geometry:p,material:m,groupOrder:g,renderOrder:d.renderOrder,z:y,group:w},t[e]=v):(v.id=d.id,v.object=d,v.geometry=p,v.material=m,v.groupOrder=g,v.renderOrder=d.renderOrder,v.z=y,v.group=w),e++,v}function a(d,p,m,g,y,w){const v=o(d,p,m,g,y,w);m.transmission>0?i.push(v):m.transparent===!0?r.push(v):n.push(v)}function l(d,p,m,g,y,w){const v=o(d,p,m,g,y,w);m.transmission>0?i.unshift(v):m.transparent===!0?r.unshift(v):n.unshift(v)}function u(d,p){n.length>1&&n.sort(d||D$),i.length>1&&i.sort(p||JE),r.length>1&&r.sort(p||JE)}function f(){for(let d=e,p=t.length;d<p;d++){const m=t[d];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:n,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:f,sort:u}}function z$(){let t=new WeakMap;function e(i,r){const s=t.get(i);let o;return s===void 0?(o=new KE,t.set(i,[o])):r>=s.length?(o=new KE,s.push(o)):o=s[r],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function F$(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new B,color:new Ue};break;case"SpotLight":n={position:new B,direction:new B,color:new Ue,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new B,color:new Ue,distance:0,decay:0};break;case"HemisphereLight":n={direction:new B,skyColor:new Ue,groundColor:new Ue};break;case"RectAreaLight":n={color:new Ue,position:new B,halfWidth:new B,halfHeight:new B};break}return t[e.id]=n,n}}}function N$(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ve};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ve};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ve,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let O$=0;function B$(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function U$(t,e){const n=new F$,i=N$(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let f=0;f<9;f++)r.probe.push(new B);const s=new B,o=new ht,a=new ht;function l(f,d){let p=0,m=0,g=0;for(let O=0;O<9;O++)r.probe[O].set(0,0,0);let y=0,w=0,v=0,_=0,b=0,M=0,k=0,E=0,I=0,C=0;f.sort(B$);const L=d!==!0?Math.PI:1;for(let O=0,q=f.length;O<q;O++){const j=f[O],G=j.color,W=j.intensity,J=j.distance,re=j.shadow&&j.shadow.map?j.shadow.map.texture:null;if(j.isAmbientLight)p+=G.r*W*L,m+=G.g*W*L,g+=G.b*W*L;else if(j.isLightProbe)for(let D=0;D<9;D++)r.probe[D].addScaledVector(j.sh.coefficients[D],W);else if(j.isDirectionalLight){const D=n.get(j);if(D.color.copy(j.color).multiplyScalar(j.intensity*L),j.castShadow){const F=j.shadow,A=i.get(j);A.shadowBias=F.bias,A.shadowNormalBias=F.normalBias,A.shadowRadius=F.radius,A.shadowMapSize=F.mapSize,r.directionalShadow[y]=A,r.directionalShadowMap[y]=re,r.directionalShadowMatrix[y]=j.shadow.matrix,M++}r.directional[y]=D,y++}else if(j.isSpotLight){const D=n.get(j);D.position.setFromMatrixPosition(j.matrixWorld),D.color.copy(G).multiplyScalar(W*L),D.distance=J,D.coneCos=Math.cos(j.angle),D.penumbraCos=Math.cos(j.angle*(1-j.penumbra)),D.decay=j.decay,r.spot[v]=D;const F=j.shadow;if(j.map&&(r.spotLightMap[I]=j.map,I++,F.updateMatrices(j),j.castShadow&&C++),r.spotLightMatrix[v]=F.matrix,j.castShadow){const A=i.get(j);A.shadowBias=F.bias,A.shadowNormalBias=F.normalBias,A.shadowRadius=F.radius,A.shadowMapSize=F.mapSize,r.spotShadow[v]=A,r.spotShadowMap[v]=re,E++}v++}else if(j.isRectAreaLight){const D=n.get(j);D.color.copy(G).multiplyScalar(W),D.halfWidth.set(j.width*.5,0,0),D.halfHeight.set(0,j.height*.5,0),r.rectArea[_]=D,_++}else if(j.isPointLight){const D=n.get(j);if(D.color.copy(j.color).multiplyScalar(j.intensity*L),D.distance=j.distance,D.decay=j.decay,j.castShadow){const F=j.shadow,A=i.get(j);A.shadowBias=F.bias,A.shadowNormalBias=F.normalBias,A.shadowRadius=F.radius,A.shadowMapSize=F.mapSize,A.shadowCameraNear=F.camera.near,A.shadowCameraFar=F.camera.far,r.pointShadow[w]=A,r.pointShadowMap[w]=re,r.pointShadowMatrix[w]=j.shadow.matrix,k++}r.point[w]=D,w++}else if(j.isHemisphereLight){const D=n.get(j);D.skyColor.copy(j.color).multiplyScalar(W*L),D.groundColor.copy(j.groundColor).multiplyScalar(W*L),r.hemi[b]=D,b++}}_>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Re.LTC_FLOAT_1,r.rectAreaLTC2=Re.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Re.LTC_HALF_1,r.rectAreaLTC2=Re.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=p,r.ambient[1]=m,r.ambient[2]=g;const R=r.hash;(R.directionalLength!==y||R.pointLength!==w||R.spotLength!==v||R.rectAreaLength!==_||R.hemiLength!==b||R.numDirectionalShadows!==M||R.numPointShadows!==k||R.numSpotShadows!==E||R.numSpotMaps!==I)&&(r.directional.length=y,r.spot.length=v,r.rectArea.length=_,r.point.length=w,r.hemi.length=b,r.directionalShadow.length=M,r.directionalShadowMap.length=M,r.pointShadow.length=k,r.pointShadowMap.length=k,r.spotShadow.length=E,r.spotShadowMap.length=E,r.directionalShadowMatrix.length=M,r.pointShadowMatrix.length=k,r.spotLightMatrix.length=E+I-C,r.spotLightMap.length=I,r.numSpotLightShadowsWithMaps=C,R.directionalLength=y,R.pointLength=w,R.spotLength=v,R.rectAreaLength=_,R.hemiLength=b,R.numDirectionalShadows=M,R.numPointShadows=k,R.numSpotShadows=E,R.numSpotMaps=I,r.version=O$++)}function u(f,d){let p=0,m=0,g=0,y=0,w=0;const v=d.matrixWorldInverse;for(let _=0,b=f.length;_<b;_++){const M=f[_];if(M.isDirectionalLight){const k=r.directional[p];k.direction.setFromMatrixPosition(M.matrixWorld),s.setFromMatrixPosition(M.target.matrixWorld),k.direction.sub(s),k.direction.transformDirection(v),p++}else if(M.isSpotLight){const k=r.spot[g];k.position.setFromMatrixPosition(M.matrixWorld),k.position.applyMatrix4(v),k.direction.setFromMatrixPosition(M.matrixWorld),s.setFromMatrixPosition(M.target.matrixWorld),k.direction.sub(s),k.direction.transformDirection(v),g++}else if(M.isRectAreaLight){const k=r.rectArea[y];k.position.setFromMatrixPosition(M.matrixWorld),k.position.applyMatrix4(v),a.identity(),o.copy(M.matrixWorld),o.premultiply(v),a.extractRotation(o),k.halfWidth.set(M.width*.5,0,0),k.halfHeight.set(0,M.height*.5,0),k.halfWidth.applyMatrix4(a),k.halfHeight.applyMatrix4(a),y++}else if(M.isPointLight){const k=r.point[m];k.position.setFromMatrixPosition(M.matrixWorld),k.position.applyMatrix4(v),m++}else if(M.isHemisphereLight){const k=r.hemi[w];k.direction.setFromMatrixPosition(M.matrixWorld),k.direction.transformDirection(v),w++}}}return{setup:l,setupView:u,state:r}}function QE(t,e){const n=new U$(t,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(d){i.push(d)}function a(d){r.push(d)}function l(d){n.setup(i,d)}function u(d){n.setupView(i,d)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:l,setupLightsView:u,pushLight:o,pushShadow:a}}function V$(t,e){let n=new WeakMap;function i(s,o=0){const a=n.get(s);let l;return a===void 0?(l=new QE(t,e),n.set(s,[l])):o>=a.length?(l=new QE(t,e),a.push(l)):l=a[o],l}function r(){n=new WeakMap}return{get:i,dispose:r}}class gb extends ni{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=l4,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class yb extends ni{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new B,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const H$=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,W$=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function G$(t,e,n){let i=new Q0;const r=new ve,s=new ve,o=new Ht,a=new gb({depthPacking:u4}),l=new yb,u={},f=n.maxTextureSize,d={0:ji,1:Cl,2:Qs},p=new us({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ve},radius:{value:4}},vertexShader:H$,fragmentShader:W$}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const g=new yt;g.setAttribute("position",new jt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new Zn(g,p),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=rb,this.render=function(M,k,E){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||M.length===0)return;const I=t.getRenderTarget(),C=t.getActiveCubeFace(),L=t.getActiveMipmapLevel(),R=t.state;R.setBlending(so),R.buffers.color.setClear(1,1,1,1),R.buffers.depth.setTest(!0),R.setScissorTest(!1);for(let O=0,q=M.length;O<q;O++){const j=M[O],G=j.shadow;if(G===void 0){console.warn("THREE.WebGLShadowMap:",j,"has no shadow.");continue}if(G.autoUpdate===!1&&G.needsUpdate===!1)continue;r.copy(G.mapSize);const W=G.getFrameExtents();if(r.multiply(W),s.copy(G.mapSize),(r.x>f||r.y>f)&&(r.x>f&&(s.x=Math.floor(f/W.x),r.x=s.x*W.x,G.mapSize.x=s.x),r.y>f&&(s.y=Math.floor(f/W.y),r.y=s.y*W.y,G.mapSize.y=s.y)),G.map===null){const re=this.type!==Zu?{minFilter:Dn,magFilter:Dn}:{};G.map=new Wr(r.x,r.y,re),G.map.texture.name=j.name+".shadowMap",G.camera.updateProjectionMatrix()}t.setRenderTarget(G.map),t.clear();const J=G.getViewportCount();for(let re=0;re<J;re++){const D=G.getViewport(re);o.set(s.x*D.x,s.y*D.y,s.x*D.z,s.y*D.w),R.viewport(o),G.updateMatrices(j,re),i=G.getFrustum(),b(k,E,G.camera,j,this.type)}G.isPointLightShadow!==!0&&this.type===Zu&&v(G,E),G.needsUpdate=!1}w.needsUpdate=!1,t.setRenderTarget(I,C,L)};function v(M,k){const E=e.update(y);p.defines.VSM_SAMPLES!==M.blurSamples&&(p.defines.VSM_SAMPLES=M.blurSamples,m.defines.VSM_SAMPLES=M.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),M.mapPass===null&&(M.mapPass=new Wr(r.x,r.y)),p.uniforms.shadow_pass.value=M.map.texture,p.uniforms.resolution.value=M.mapSize,p.uniforms.radius.value=M.radius,t.setRenderTarget(M.mapPass),t.clear(),t.renderBufferDirect(k,null,E,p,y,null),m.uniforms.shadow_pass.value=M.mapPass.texture,m.uniforms.resolution.value=M.mapSize,m.uniforms.radius.value=M.radius,t.setRenderTarget(M.map),t.clear(),t.renderBufferDirect(k,null,E,m,y,null)}function _(M,k,E,I,C,L){let R=null;const O=E.isPointLight===!0?M.customDistanceMaterial:M.customDepthMaterial;if(O!==void 0?R=O:R=E.isPointLight===!0?l:a,t.localClippingEnabled&&k.clipShadows===!0&&Array.isArray(k.clippingPlanes)&&k.clippingPlanes.length!==0||k.displacementMap&&k.displacementScale!==0||k.alphaMap&&k.alphaTest>0){const q=R.uuid,j=k.uuid;let G=u[q];G===void 0&&(G={},u[q]=G);let W=G[j];W===void 0&&(W=R.clone(),G[j]=W),R=W}return R.visible=k.visible,R.wireframe=k.wireframe,L===Zu?R.side=k.shadowSide!==null?k.shadowSide:k.side:R.side=k.shadowSide!==null?k.shadowSide:d[k.side],R.alphaMap=k.alphaMap,R.alphaTest=k.alphaTest,R.clipShadows=k.clipShadows,R.clippingPlanes=k.clippingPlanes,R.clipIntersection=k.clipIntersection,R.displacementMap=k.displacementMap,R.displacementScale=k.displacementScale,R.displacementBias=k.displacementBias,R.wireframeLinewidth=k.wireframeLinewidth,R.linewidth=k.linewidth,E.isPointLight===!0&&R.isMeshDistanceMaterial===!0&&(R.referencePosition.setFromMatrixPosition(E.matrixWorld),R.nearDistance=I,R.farDistance=C),R}function b(M,k,E,I,C){if(M.visible===!1)return;if(M.layers.test(k.layers)&&(M.isMesh||M.isLine||M.isPoints)&&(M.castShadow||M.receiveShadow&&C===Zu)&&(!M.frustumCulled||i.intersectsObject(M))){M.modelViewMatrix.multiplyMatrices(E.matrixWorldInverse,M.matrixWorld);const O=e.update(M),q=M.material;if(Array.isArray(q)){const j=O.groups;for(let G=0,W=j.length;G<W;G++){const J=j[G],re=q[J.materialIndex];if(re&&re.visible){const D=_(M,re,I,E.near,E.far,C);t.renderBufferDirect(E,null,O,D,M,J)}}}else if(q.visible){const j=_(M,q,I,E.near,E.far,C);t.renderBufferDirect(E,null,O,j,M,null)}}const R=M.children;for(let O=0,q=R.length;O<q;O++)b(R[O],k,E,I,C)}}function $$(t,e,n){const i=n.isWebGL2;function r(){let Q=!1;const De=new Ht;let me=null;const Ve=new Ht(0,0,0,0);return{setMask:function(Be){me!==Be&&!Q&&(t.colorMask(Be,Be,Be,Be),me=Be)},setLocked:function(Be){Q=Be},setClear:function(Be,Ct,kn,rn,Gr){Gr===!0&&(Be*=rn,Ct*=rn,kn*=rn),De.set(Be,Ct,kn,rn),Ve.equals(De)===!1&&(t.clearColor(Be,Ct,kn,rn),Ve.copy(De))},reset:function(){Q=!1,me=null,Ve.set(-1,0,0,0)}}}function s(){let Q=!1,De=null,me=null,Ve=null;return{setTest:function(Be){Be?Ne(2929):We(2929)},setMask:function(Be){De!==Be&&!Q&&(t.depthMask(Be),De=Be)},setFunc:function(Be){if(me!==Be){if(Be)switch(Be){case LI:t.depthFunc(512);break;case RI:t.depthFunc(519);break;case II:t.depthFunc(513);break;case s0:t.depthFunc(515);break;case DI:t.depthFunc(514);break;case zI:t.depthFunc(518);break;case FI:t.depthFunc(516);break;case NI:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);me=Be}},setLocked:function(Be){Q=Be},setClear:function(Be){Ve!==Be&&(t.clearDepth(Be),Ve=Be)},reset:function(){Q=!1,De=null,me=null,Ve=null}}}function o(){let Q=!1,De=null,me=null,Ve=null,Be=null,Ct=null,kn=null,rn=null,Gr=null;return{setTest:function(sn){Q||(sn?Ne(2960):We(2960))},setMask:function(sn){De!==sn&&!Q&&(t.stencilMask(sn),De=sn)},setFunc:function(sn,pr,yi){(me!==sn||Ve!==pr||Be!==yi)&&(t.stencilFunc(sn,pr,yi),me=sn,Ve=pr,Be=yi)},setOp:function(sn,pr,yi){(Ct!==sn||kn!==pr||rn!==yi)&&(t.stencilOp(sn,pr,yi),Ct=sn,kn=pr,rn=yi)},setLocked:function(sn){Q=sn},setClear:function(sn){Gr!==sn&&(t.clearStencil(sn),Gr=sn)},reset:function(){Q=!1,De=null,me=null,Ve=null,Be=null,Ct=null,kn=null,rn=null,Gr=null}}}const a=new r,l=new s,u=new o,f=new WeakMap,d=new WeakMap;let p={},m={},g=new WeakMap,y=[],w=null,v=!1,_=null,b=null,M=null,k=null,E=null,I=null,C=null,L=!1,R=null,O=null,q=null,j=null,G=null;const W=t.getParameter(35661);let J=!1,re=0;const D=t.getParameter(7938);D.indexOf("WebGL")!==-1?(re=parseFloat(/^WebGL (\d)/.exec(D)[1]),J=re>=1):D.indexOf("OpenGL ES")!==-1&&(re=parseFloat(/^OpenGL ES (\d)/.exec(D)[1]),J=re>=2);let F=null,A={};const X=t.getParameter(3088),Y=t.getParameter(2978),z=new Ht().fromArray(X),xe=new Ht().fromArray(Y);function Ce(Q,De,me){const Ve=new Uint8Array(4),Be=t.createTexture();t.bindTexture(Q,Be),t.texParameteri(Q,10241,9728),t.texParameteri(Q,10240,9728);for(let Ct=0;Ct<me;Ct++)t.texImage2D(De+Ct,0,6408,1,1,0,6408,5121,Ve);return Be}const ie={};ie[3553]=Ce(3553,3553,1),ie[34067]=Ce(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),Ne(2929),l.setFunc(s0),Ie(!1),ot(zw),Ne(2884),Ae(so);function Ne(Q){p[Q]!==!0&&(t.enable(Q),p[Q]=!0)}function We(Q){p[Q]!==!1&&(t.disable(Q),p[Q]=!1)}function Ge(Q,De){return m[Q]!==De?(t.bindFramebuffer(Q,De),m[Q]=De,i&&(Q===36009&&(m[36160]=De),Q===36160&&(m[36009]=De)),!0):!1}function be(Q,De){let me=y,Ve=!1;if(Q)if(me=g.get(De),me===void 0&&(me=[],g.set(De,me)),Q.isWebGLMultipleRenderTargets){const Be=Q.texture;if(me.length!==Be.length||me[0]!==36064){for(let Ct=0,kn=Be.length;Ct<kn;Ct++)me[Ct]=36064+Ct;me.length=Be.length,Ve=!0}}else me[0]!==36064&&(me[0]=36064,Ve=!0);else me[0]!==1029&&(me[0]=1029,Ve=!0);Ve&&(n.isWebGL2?t.drawBuffers(me):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(me))}function $e(Q){return w!==Q?(t.useProgram(Q),w=Q,!0):!1}const pe={[Qa]:32774,[wI]:32778,[_I]:32779};if(i)pe[Bw]=32775,pe[Uw]=32776;else{const Q=e.get("EXT_blend_minmax");Q!==null&&(pe[Bw]=Q.MIN_EXT,pe[Uw]=Q.MAX_EXT)}const de={[SI]:0,[bI]:1,[MI]:768,[ob]:770,[PI]:776,[CI]:774,[EI]:772,[TI]:769,[ab]:771,[AI]:775,[kI]:773};function Ae(Q,De,me,Ve,Be,Ct,kn,rn){if(Q===so){v===!0&&(We(3042),v=!1);return}if(v===!1&&(Ne(3042),v=!0),Q!==vI){if(Q!==_||rn!==L){if((b!==Qa||E!==Qa)&&(t.blendEquation(32774),b=Qa,E=Qa),rn)switch(Q){case ml:t.blendFuncSeparate(1,771,1,771);break;case Fw:t.blendFunc(1,1);break;case Nw:t.blendFuncSeparate(0,769,0,1);break;case Ow:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Q);break}else switch(Q){case ml:t.blendFuncSeparate(770,771,1,771);break;case Fw:t.blendFunc(770,1);break;case Nw:t.blendFuncSeparate(0,769,0,1);break;case Ow:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Q);break}M=null,k=null,I=null,C=null,_=Q,L=rn}return}Be=Be||De,Ct=Ct||me,kn=kn||Ve,(De!==b||Be!==E)&&(t.blendEquationSeparate(pe[De],pe[Be]),b=De,E=Be),(me!==M||Ve!==k||Ct!==I||kn!==C)&&(t.blendFuncSeparate(de[me],de[Ve],de[Ct],de[kn]),M=me,k=Ve,I=Ct,C=kn),_=Q,L=null}function qe(Q,De){Q.side===Qs?We(2884):Ne(2884);let me=Q.side===ji;De&&(me=!me),Ie(me),Q.blending===ml&&Q.transparent===!1?Ae(so):Ae(Q.blending,Q.blendEquation,Q.blendSrc,Q.blendDst,Q.blendEquationAlpha,Q.blendSrcAlpha,Q.blendDstAlpha,Q.premultipliedAlpha),l.setFunc(Q.depthFunc),l.setTest(Q.depthTest),l.setMask(Q.depthWrite),a.setMask(Q.colorWrite);const Ve=Q.stencilWrite;u.setTest(Ve),Ve&&(u.setMask(Q.stencilWriteMask),u.setFunc(Q.stencilFunc,Q.stencilRef,Q.stencilFuncMask),u.setOp(Q.stencilFail,Q.stencilZFail,Q.stencilZPass)),Qe(Q.polygonOffset,Q.polygonOffsetFactor,Q.polygonOffsetUnits),Q.alphaToCoverage===!0?Ne(32926):We(32926)}function Ie(Q){R!==Q&&(Q?t.frontFace(2304):t.frontFace(2305),R=Q)}function ot(Q){Q!==yI?(Ne(2884),Q!==O&&(Q===zw?t.cullFace(1029):Q===xI?t.cullFace(1028):t.cullFace(1032))):We(2884),O=Q}function it(Q){Q!==q&&(J&&t.lineWidth(Q),q=Q)}function Qe(Q,De,me){Q?(Ne(32823),(j!==De||G!==me)&&(t.polygonOffset(De,me),j=De,G=me)):We(32823)}function kt(Q){Q?Ne(3089):We(3089)}function It(Q){Q===void 0&&(Q=33984+W-1),F!==Q&&(t.activeTexture(Q),F=Q)}function $(Q,De){F===null&&It();let me=A[F];me===void 0&&(me={type:void 0,texture:void 0},A[F]=me),(me.type!==Q||me.texture!==De)&&(t.bindTexture(Q,De||ie[Q]),me.type=Q,me.texture=De)}function N(){const Q=A[F];Q!==void 0&&Q.type!==void 0&&(t.bindTexture(Q.type,null),Q.type=void 0,Q.texture=void 0)}function fe(){try{t.compressedTexImage2D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function _e(){try{t.texSubImage2D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Z(){try{t.texSubImage3D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function le(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Te(){try{t.texStorage2D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function se(){try{t.texStorage3D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Pe(){try{t.texImage2D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Le(){try{t.texImage3D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Ye(Q){z.equals(Q)===!1&&(t.scissor(Q.x,Q.y,Q.z,Q.w),z.copy(Q))}function Fe(Q){xe.equals(Q)===!1&&(t.viewport(Q.x,Q.y,Q.z,Q.w),xe.copy(Q))}function st(Q,De){let me=d.get(De);me===void 0&&(me=new WeakMap,d.set(De,me));let Ve=me.get(Q);Ve===void 0&&(Ve=t.getUniformBlockIndex(De,Q.name),me.set(Q,Ve))}function vt(Q,De){const Ve=d.get(De).get(Q);f.get(Q)!==Ve&&(t.uniformBlockBinding(De,Ve,Q.__bindingPointIndex),f.set(Q,Ve))}function _t(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),i===!0&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),p={},F=null,A={},m={},g=new WeakMap,y=[],w=null,v=!1,_=null,b=null,M=null,k=null,E=null,I=null,C=null,L=!1,R=null,O=null,q=null,j=null,G=null,z.set(0,0,t.canvas.width,t.canvas.height),xe.set(0,0,t.canvas.width,t.canvas.height),a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:Ne,disable:We,bindFramebuffer:Ge,drawBuffers:be,useProgram:$e,setBlending:Ae,setMaterial:qe,setFlipSided:Ie,setCullFace:ot,setLineWidth:it,setPolygonOffset:Qe,setScissorTest:kt,activeTexture:It,bindTexture:$,unbindTexture:N,compressedTexImage2D:fe,texImage2D:Pe,texImage3D:Le,updateUBOMapping:st,uniformBlockBinding:vt,texStorage2D:Te,texStorage3D:se,texSubImage2D:_e,texSubImage3D:Z,compressedTexSubImage2D:le,scissor:Ye,viewport:Fe,reset:_t}}function j$(t,e,n,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,u=r.maxCubemapSize,f=r.maxTextureSize,d=r.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap;let y;const w=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _($,N){return v?new OffscreenCanvas($,N):Bd("canvas")}function b($,N,fe,_e){let Z=1;if(($.width>_e||$.height>_e)&&(Z=_e/Math.max($.width,$.height)),Z<1||N===!0)if(typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&$ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&$ instanceof ImageBitmap){const le=N?u0:Math.floor,Te=le(Z*$.width),se=le(Z*$.height);y===void 0&&(y=_(Te,se));const Pe=fe?_(Te,se):y;return Pe.width=Te,Pe.height=se,Pe.getContext("2d").drawImage($,0,0,Te,se),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+$.width+"x"+$.height+") to ("+Te+"x"+se+")."),Pe}else return"data"in $&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+$.width+"x"+$.height+")."),$;return $}function M($){return u_($.width)&&u_($.height)}function k($){return a?!1:$.wrapS!==bi||$.wrapT!==bi||$.minFilter!==Dn&&$.minFilter!==Mn}function E($,N){return $.generateMipmaps&&N&&$.minFilter!==Dn&&$.minFilter!==Mn}function I($){t.generateMipmap($)}function C($,N,fe,_e,Z=!1){if(a===!1)return N;if($!==null){if(t[$]!==void 0)return t[$];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+$+"'")}let le=N;return N===6403&&(fe===5126&&(le=33326),fe===5131&&(le=33325),fe===5121&&(le=33321)),N===33319&&(fe===5126&&(le=33328),fe===5131&&(le=33327),fe===5121&&(le=33323)),N===6408&&(fe===5126&&(le=34836),fe===5131&&(le=34842),fe===5121&&(le=_e===tn&&Z===!1?35907:32856),fe===32819&&(le=32854),fe===32820&&(le=32855)),(le===33325||le===33326||le===33327||le===33328||le===34842||le===34836)&&e.get("EXT_color_buffer_float"),le}function L($,N,fe){return E($,fe)===!0||$.isFramebufferTexture&&$.minFilter!==Dn&&$.minFilter!==Mn?Math.log2(Math.max(N.width,N.height))+1:$.mipmaps!==void 0&&$.mipmaps.length>0?$.mipmaps.length:$.isCompressedTexture&&Array.isArray($.image)?N.mipmaps.length:1}function R($){return $===Dn||$===o0||$===a0?9728:9729}function O($){const N=$.target;N.removeEventListener("dispose",O),j(N),N.isVideoTexture&&g.delete(N)}function q($){const N=$.target;N.removeEventListener("dispose",q),W(N)}function j($){const N=i.get($);if(N.__webglInit===void 0)return;const fe=$.source,_e=w.get(fe);if(_e){const Z=_e[N.__cacheKey];Z.usedTimes--,Z.usedTimes===0&&G($),Object.keys(_e).length===0&&w.delete(fe)}i.remove($)}function G($){const N=i.get($);t.deleteTexture(N.__webglTexture);const fe=$.source,_e=w.get(fe);delete _e[N.__cacheKey],o.memory.textures--}function W($){const N=$.texture,fe=i.get($),_e=i.get(N);if(_e.__webglTexture!==void 0&&(t.deleteTexture(_e.__webglTexture),o.memory.textures--),$.depthTexture&&$.depthTexture.dispose(),$.isWebGLCubeRenderTarget)for(let Z=0;Z<6;Z++)t.deleteFramebuffer(fe.__webglFramebuffer[Z]),fe.__webglDepthbuffer&&t.deleteRenderbuffer(fe.__webglDepthbuffer[Z]);else{if(t.deleteFramebuffer(fe.__webglFramebuffer),fe.__webglDepthbuffer&&t.deleteRenderbuffer(fe.__webglDepthbuffer),fe.__webglMultisampledFramebuffer&&t.deleteFramebuffer(fe.__webglMultisampledFramebuffer),fe.__webglColorRenderbuffer)for(let Z=0;Z<fe.__webglColorRenderbuffer.length;Z++)fe.__webglColorRenderbuffer[Z]&&t.deleteRenderbuffer(fe.__webglColorRenderbuffer[Z]);fe.__webglDepthRenderbuffer&&t.deleteRenderbuffer(fe.__webglDepthRenderbuffer)}if($.isWebGLMultipleRenderTargets)for(let Z=0,le=N.length;Z<le;Z++){const Te=i.get(N[Z]);Te.__webglTexture&&(t.deleteTexture(Te.__webglTexture),o.memory.textures--),i.remove(N[Z])}i.remove(N),i.remove($)}let J=0;function re(){J=0}function D(){const $=J;return $>=l&&console.warn("THREE.WebGLTextures: Trying to use "+$+" texture units while this GPU supports only "+l),J+=1,$}function F($){const N=[];return N.push($.wrapS),N.push($.wrapT),N.push($.magFilter),N.push($.minFilter),N.push($.anisotropy),N.push($.internalFormat),N.push($.format),N.push($.type),N.push($.generateMipmaps),N.push($.premultiplyAlpha),N.push($.flipY),N.push($.unpackAlignment),N.push($.encoding),N.join()}function A($,N){const fe=i.get($);if($.isVideoTexture&&kt($),$.isRenderTargetTexture===!1&&$.version>0&&fe.__version!==$.version){const _e=$.image;if(_e===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(_e.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{We(fe,$,N);return}}n.activeTexture(33984+N),n.bindTexture(3553,fe.__webglTexture)}function X($,N){const fe=i.get($);if($.version>0&&fe.__version!==$.version){We(fe,$,N);return}n.activeTexture(33984+N),n.bindTexture(35866,fe.__webglTexture)}function Y($,N){const fe=i.get($);if($.version>0&&fe.__version!==$.version){We(fe,$,N);return}n.activeTexture(33984+N),n.bindTexture(32879,fe.__webglTexture)}function z($,N){const fe=i.get($);if($.version>0&&fe.__version!==$.version){Ge(fe,$,N);return}n.activeTexture(33984+N),n.bindTexture(34067,fe.__webglTexture)}const xe={[Al]:10497,[bi]:33071,[Id]:33648},Ce={[Dn]:9728,[o0]:9984,[a0]:9986,[Mn]:9729,[lb]:9985,[Ol]:9987};function ie($,N,fe){if(fe?(t.texParameteri($,10242,xe[N.wrapS]),t.texParameteri($,10243,xe[N.wrapT]),($===32879||$===35866)&&t.texParameteri($,32882,xe[N.wrapR]),t.texParameteri($,10240,Ce[N.magFilter]),t.texParameteri($,10241,Ce[N.minFilter])):(t.texParameteri($,10242,33071),t.texParameteri($,10243,33071),($===32879||$===35866)&&t.texParameteri($,32882,33071),(N.wrapS!==bi||N.wrapT!==bi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri($,10240,R(N.magFilter)),t.texParameteri($,10241,R(N.minFilter)),N.minFilter!==Dn&&N.minFilter!==Mn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const _e=e.get("EXT_texture_filter_anisotropic");if(N.type===eo&&e.has("OES_texture_float_linear")===!1||a===!1&&N.type===Ec&&e.has("OES_texture_half_float_linear")===!1)return;(N.anisotropy>1||i.get(N).__currentAnisotropy)&&(t.texParameterf($,_e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(N.anisotropy,r.getMaxAnisotropy())),i.get(N).__currentAnisotropy=N.anisotropy)}}function Ne($,N){let fe=!1;$.__webglInit===void 0&&($.__webglInit=!0,N.addEventListener("dispose",O));const _e=N.source;let Z=w.get(_e);Z===void 0&&(Z={},w.set(_e,Z));const le=F(N);if(le!==$.__cacheKey){Z[le]===void 0&&(Z[le]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,fe=!0),Z[le].usedTimes++;const Te=Z[$.__cacheKey];Te!==void 0&&(Z[$.__cacheKey].usedTimes--,Te.usedTimes===0&&G(N)),$.__cacheKey=le,$.__webglTexture=Z[le].texture}return fe}function We($,N,fe){let _e=3553;N.isDataArrayTexture&&(_e=35866),N.isData3DTexture&&(_e=32879);const Z=Ne($,N),le=N.source;if(n.activeTexture(33984+fe),n.bindTexture(_e,$.__webglTexture),le.version!==le.__currentVersion||Z===!0){t.pixelStorei(37440,N.flipY),t.pixelStorei(37441,N.premultiplyAlpha),t.pixelStorei(3317,N.unpackAlignment),t.pixelStorei(37443,0);const Te=k(N)&&M(N.image)===!1;let se=b(N.image,Te,!1,f);se=It(N,se);const Pe=M(se)||a,Le=s.convert(N.format,N.encoding);let Ye=s.convert(N.type),Fe=C(N.internalFormat,Le,Ye,N.encoding,N.isVideoTexture);ie(_e,N,Pe);let st;const vt=N.mipmaps,_t=a&&N.isVideoTexture!==!0,Q=le.__currentVersion===void 0||Z===!0,De=L(N,se,Pe);if(N.isDepthTexture)Fe=6402,a?N.type===eo?Fe=36012:N.type===Yo?Fe=33190:N.type===gl?Fe=35056:Fe=33189:N.type===eo&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),N.format===aa&&Fe===6402&&N.type!==ub&&N.type!==Yo&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),N.type=Yo,Ye=s.convert(N.type)),N.format===Pl&&Fe===6402&&(Fe=34041,N.type!==gl&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),N.type=gl,Ye=s.convert(N.type))),Q&&(_t?n.texStorage2D(3553,1,Fe,se.width,se.height):n.texImage2D(3553,0,Fe,se.width,se.height,0,Le,Ye,null));else if(N.isDataTexture)if(vt.length>0&&Pe){_t&&Q&&n.texStorage2D(3553,De,Fe,vt[0].width,vt[0].height);for(let me=0,Ve=vt.length;me<Ve;me++)st=vt[me],_t?n.texSubImage2D(3553,me,0,0,st.width,st.height,Le,Ye,st.data):n.texImage2D(3553,me,Fe,st.width,st.height,0,Le,Ye,st.data);N.generateMipmaps=!1}else _t?(Q&&n.texStorage2D(3553,De,Fe,se.width,se.height),n.texSubImage2D(3553,0,0,0,se.width,se.height,Le,Ye,se.data)):n.texImage2D(3553,0,Fe,se.width,se.height,0,Le,Ye,se.data);else if(N.isCompressedTexture){_t&&Q&&n.texStorage2D(3553,De,Fe,vt[0].width,vt[0].height);for(let me=0,Ve=vt.length;me<Ve;me++)st=vt[me],N.format!==Or?Le!==null?_t?n.compressedTexSubImage2D(3553,me,0,0,st.width,st.height,Le,st.data):n.compressedTexImage2D(3553,me,Fe,st.width,st.height,0,st.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):_t?n.texSubImage2D(3553,me,0,0,st.width,st.height,Le,Ye,st.data):n.texImage2D(3553,me,Fe,st.width,st.height,0,Le,Ye,st.data)}else if(N.isDataArrayTexture)_t?(Q&&n.texStorage3D(35866,De,Fe,se.width,se.height,se.depth),n.texSubImage3D(35866,0,0,0,0,se.width,se.height,se.depth,Le,Ye,se.data)):n.texImage3D(35866,0,Fe,se.width,se.height,se.depth,0,Le,Ye,se.data);else if(N.isData3DTexture)_t?(Q&&n.texStorage3D(32879,De,Fe,se.width,se.height,se.depth),n.texSubImage3D(32879,0,0,0,0,se.width,se.height,se.depth,Le,Ye,se.data)):n.texImage3D(32879,0,Fe,se.width,se.height,se.depth,0,Le,Ye,se.data);else if(N.isFramebufferTexture){if(Q)if(_t)n.texStorage2D(3553,De,Fe,se.width,se.height);else{let me=se.width,Ve=se.height;for(let Be=0;Be<De;Be++)n.texImage2D(3553,Be,Fe,me,Ve,0,Le,Ye,null),me>>=1,Ve>>=1}}else if(vt.length>0&&Pe){_t&&Q&&n.texStorage2D(3553,De,Fe,vt[0].width,vt[0].height);for(let me=0,Ve=vt.length;me<Ve;me++)st=vt[me],_t?n.texSubImage2D(3553,me,0,0,Le,Ye,st):n.texImage2D(3553,me,Fe,Le,Ye,st);N.generateMipmaps=!1}else _t?(Q&&n.texStorage2D(3553,De,Fe,se.width,se.height),n.texSubImage2D(3553,0,0,0,Le,Ye,se)):n.texImage2D(3553,0,Fe,Le,Ye,se);E(N,Pe)&&I(_e),le.__currentVersion=le.version,N.onUpdate&&N.onUpdate(N)}$.__version=N.version}function Ge($,N,fe){if(N.image.length!==6)return;const _e=Ne($,N),Z=N.source;if(n.activeTexture(33984+fe),n.bindTexture(34067,$.__webglTexture),Z.version!==Z.__currentVersion||_e===!0){t.pixelStorei(37440,N.flipY),t.pixelStorei(37441,N.premultiplyAlpha),t.pixelStorei(3317,N.unpackAlignment),t.pixelStorei(37443,0);const le=N.isCompressedTexture||N.image[0].isCompressedTexture,Te=N.image[0]&&N.image[0].isDataTexture,se=[];for(let me=0;me<6;me++)!le&&!Te?se[me]=b(N.image[me],!1,!0,u):se[me]=Te?N.image[me].image:N.image[me],se[me]=It(N,se[me]);const Pe=se[0],Le=M(Pe)||a,Ye=s.convert(N.format,N.encoding),Fe=s.convert(N.type),st=C(N.internalFormat,Ye,Fe,N.encoding),vt=a&&N.isVideoTexture!==!0,_t=Z.__currentVersion===void 0||_e===!0;let Q=L(N,Pe,Le);ie(34067,N,Le);let De;if(le){vt&&_t&&n.texStorage2D(34067,Q,st,Pe.width,Pe.height);for(let me=0;me<6;me++){De=se[me].mipmaps;for(let Ve=0;Ve<De.length;Ve++){const Be=De[Ve];N.format!==Or?Ye!==null?vt?n.compressedTexSubImage2D(34069+me,Ve,0,0,Be.width,Be.height,Ye,Be.data):n.compressedTexImage2D(34069+me,Ve,st,Be.width,Be.height,0,Be.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):vt?n.texSubImage2D(34069+me,Ve,0,0,Be.width,Be.height,Ye,Fe,Be.data):n.texImage2D(34069+me,Ve,st,Be.width,Be.height,0,Ye,Fe,Be.data)}}}else{De=N.mipmaps,vt&&_t&&(De.length>0&&Q++,n.texStorage2D(34067,Q,st,se[0].width,se[0].height));for(let me=0;me<6;me++)if(Te){vt?n.texSubImage2D(34069+me,0,0,0,se[me].width,se[me].height,Ye,Fe,se[me].data):n.texImage2D(34069+me,0,st,se[me].width,se[me].height,0,Ye,Fe,se[me].data);for(let Ve=0;Ve<De.length;Ve++){const Ct=De[Ve].image[me].image;vt?n.texSubImage2D(34069+me,Ve+1,0,0,Ct.width,Ct.height,Ye,Fe,Ct.data):n.texImage2D(34069+me,Ve+1,st,Ct.width,Ct.height,0,Ye,Fe,Ct.data)}}else{vt?n.texSubImage2D(34069+me,0,0,0,Ye,Fe,se[me]):n.texImage2D(34069+me,0,st,Ye,Fe,se[me]);for(let Ve=0;Ve<De.length;Ve++){const Be=De[Ve];vt?n.texSubImage2D(34069+me,Ve+1,0,0,Ye,Fe,Be.image[me]):n.texImage2D(34069+me,Ve+1,st,Ye,Fe,Be.image[me])}}}E(N,Le)&&I(34067),Z.__currentVersion=Z.version,N.onUpdate&&N.onUpdate(N)}$.__version=N.version}function be($,N,fe,_e,Z){const le=s.convert(fe.format,fe.encoding),Te=s.convert(fe.type),se=C(fe.internalFormat,le,Te,fe.encoding);i.get(N).__hasExternalTextures||(Z===32879||Z===35866?n.texImage3D(Z,0,se,N.width,N.height,N.depth,0,le,Te,null):n.texImage2D(Z,0,se,N.width,N.height,0,le,Te,null)),n.bindFramebuffer(36160,$),Qe(N)?p.framebufferTexture2DMultisampleEXT(36160,_e,Z,i.get(fe).__webglTexture,0,it(N)):t.framebufferTexture2D(36160,_e,Z,i.get(fe).__webglTexture,0),n.bindFramebuffer(36160,null)}function $e($,N,fe){if(t.bindRenderbuffer(36161,$),N.depthBuffer&&!N.stencilBuffer){let _e=33189;if(fe||Qe(N)){const Z=N.depthTexture;Z&&Z.isDepthTexture&&(Z.type===eo?_e=36012:Z.type===Yo&&(_e=33190));const le=it(N);Qe(N)?p.renderbufferStorageMultisampleEXT(36161,le,_e,N.width,N.height):t.renderbufferStorageMultisample(36161,le,_e,N.width,N.height)}else t.renderbufferStorage(36161,_e,N.width,N.height);t.framebufferRenderbuffer(36160,36096,36161,$)}else if(N.depthBuffer&&N.stencilBuffer){const _e=it(N);fe&&Qe(N)===!1?t.renderbufferStorageMultisample(36161,_e,35056,N.width,N.height):Qe(N)?p.renderbufferStorageMultisampleEXT(36161,_e,35056,N.width,N.height):t.renderbufferStorage(36161,34041,N.width,N.height),t.framebufferRenderbuffer(36160,33306,36161,$)}else{const _e=N.isWebGLMultipleRenderTargets===!0?N.texture:[N.texture];for(let Z=0;Z<_e.length;Z++){const le=_e[Z],Te=s.convert(le.format,le.encoding),se=s.convert(le.type),Pe=C(le.internalFormat,Te,se,le.encoding),Le=it(N);fe&&Qe(N)===!1?t.renderbufferStorageMultisample(36161,Le,Pe,N.width,N.height):Qe(N)?p.renderbufferStorageMultisampleEXT(36161,Le,Pe,N.width,N.height):t.renderbufferStorage(36161,Pe,N.width,N.height)}}t.bindRenderbuffer(36161,null)}function pe($,N){if(N&&N.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,$),!(N.depthTexture&&N.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(N.depthTexture).__webglTexture||N.depthTexture.image.width!==N.width||N.depthTexture.image.height!==N.height)&&(N.depthTexture.image.width=N.width,N.depthTexture.image.height=N.height,N.depthTexture.needsUpdate=!0),A(N.depthTexture,0);const _e=i.get(N.depthTexture).__webglTexture,Z=it(N);if(N.depthTexture.format===aa)Qe(N)?p.framebufferTexture2DMultisampleEXT(36160,36096,3553,_e,0,Z):t.framebufferTexture2D(36160,36096,3553,_e,0);else if(N.depthTexture.format===Pl)Qe(N)?p.framebufferTexture2DMultisampleEXT(36160,33306,3553,_e,0,Z):t.framebufferTexture2D(36160,33306,3553,_e,0);else throw new Error("Unknown depthTexture format")}function de($){const N=i.get($),fe=$.isWebGLCubeRenderTarget===!0;if($.depthTexture&&!N.__autoAllocateDepthBuffer){if(fe)throw new Error("target.depthTexture not supported in Cube render targets");pe(N.__webglFramebuffer,$)}else if(fe){N.__webglDepthbuffer=[];for(let _e=0;_e<6;_e++)n.bindFramebuffer(36160,N.__webglFramebuffer[_e]),N.__webglDepthbuffer[_e]=t.createRenderbuffer(),$e(N.__webglDepthbuffer[_e],$,!1)}else n.bindFramebuffer(36160,N.__webglFramebuffer),N.__webglDepthbuffer=t.createRenderbuffer(),$e(N.__webglDepthbuffer,$,!1);n.bindFramebuffer(36160,null)}function Ae($,N,fe){const _e=i.get($);N!==void 0&&be(_e.__webglFramebuffer,$,$.texture,36064,3553),fe!==void 0&&de($)}function qe($){const N=$.texture,fe=i.get($),_e=i.get(N);$.addEventListener("dispose",q),$.isWebGLMultipleRenderTargets!==!0&&(_e.__webglTexture===void 0&&(_e.__webglTexture=t.createTexture()),_e.__version=N.version,o.memory.textures++);const Z=$.isWebGLCubeRenderTarget===!0,le=$.isWebGLMultipleRenderTargets===!0,Te=M($)||a;if(Z){fe.__webglFramebuffer=[];for(let se=0;se<6;se++)fe.__webglFramebuffer[se]=t.createFramebuffer()}else{if(fe.__webglFramebuffer=t.createFramebuffer(),le)if(r.drawBuffers){const se=$.texture;for(let Pe=0,Le=se.length;Pe<Le;Pe++){const Ye=i.get(se[Pe]);Ye.__webglTexture===void 0&&(Ye.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&$.samples>0&&Qe($)===!1){const se=le?N:[N];fe.__webglMultisampledFramebuffer=t.createFramebuffer(),fe.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,fe.__webglMultisampledFramebuffer);for(let Pe=0;Pe<se.length;Pe++){const Le=se[Pe];fe.__webglColorRenderbuffer[Pe]=t.createRenderbuffer(),t.bindRenderbuffer(36161,fe.__webglColorRenderbuffer[Pe]);const Ye=s.convert(Le.format,Le.encoding),Fe=s.convert(Le.type),st=C(Le.internalFormat,Ye,Fe,Le.encoding),vt=it($);t.renderbufferStorageMultisample(36161,vt,st,$.width,$.height),t.framebufferRenderbuffer(36160,36064+Pe,36161,fe.__webglColorRenderbuffer[Pe])}t.bindRenderbuffer(36161,null),$.depthBuffer&&(fe.__webglDepthRenderbuffer=t.createRenderbuffer(),$e(fe.__webglDepthRenderbuffer,$,!0)),n.bindFramebuffer(36160,null)}}if(Z){n.bindTexture(34067,_e.__webglTexture),ie(34067,N,Te);for(let se=0;se<6;se++)be(fe.__webglFramebuffer[se],$,N,36064,34069+se);E(N,Te)&&I(34067),n.unbindTexture()}else if(le){const se=$.texture;for(let Pe=0,Le=se.length;Pe<Le;Pe++){const Ye=se[Pe],Fe=i.get(Ye);n.bindTexture(3553,Fe.__webglTexture),ie(3553,Ye,Te),be(fe.__webglFramebuffer,$,Ye,36064+Pe,3553),E(Ye,Te)&&I(3553)}n.unbindTexture()}else{let se=3553;($.isWebGL3DRenderTarget||$.isWebGLArrayRenderTarget)&&(a?se=$.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(se,_e.__webglTexture),ie(se,N,Te),be(fe.__webglFramebuffer,$,N,36064,se),E(N,Te)&&I(se),n.unbindTexture()}$.depthBuffer&&de($)}function Ie($){const N=M($)||a,fe=$.isWebGLMultipleRenderTargets===!0?$.texture:[$.texture];for(let _e=0,Z=fe.length;_e<Z;_e++){const le=fe[_e];if(E(le,N)){const Te=$.isWebGLCubeRenderTarget?34067:3553,se=i.get(le).__webglTexture;n.bindTexture(Te,se),I(Te),n.unbindTexture()}}}function ot($){if(a&&$.samples>0&&Qe($)===!1){const N=$.isWebGLMultipleRenderTargets?$.texture:[$.texture],fe=$.width,_e=$.height;let Z=16384;const le=[],Te=$.stencilBuffer?33306:36096,se=i.get($),Pe=$.isWebGLMultipleRenderTargets===!0;if(Pe)for(let Le=0;Le<N.length;Le++)n.bindFramebuffer(36160,se.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+Le,36161,null),n.bindFramebuffer(36160,se.__webglFramebuffer),t.framebufferTexture2D(36009,36064+Le,3553,null,0);n.bindFramebuffer(36008,se.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,se.__webglFramebuffer);for(let Le=0;Le<N.length;Le++){le.push(36064+Le),$.depthBuffer&&le.push(Te);const Ye=se.__ignoreDepthValues!==void 0?se.__ignoreDepthValues:!1;if(Ye===!1&&($.depthBuffer&&(Z|=256),$.stencilBuffer&&(Z|=1024)),Pe&&t.framebufferRenderbuffer(36008,36064,36161,se.__webglColorRenderbuffer[Le]),Ye===!0&&(t.invalidateFramebuffer(36008,[Te]),t.invalidateFramebuffer(36009,[Te])),Pe){const Fe=i.get(N[Le]).__webglTexture;t.framebufferTexture2D(36009,36064,3553,Fe,0)}t.blitFramebuffer(0,0,fe,_e,0,0,fe,_e,Z,9728),m&&t.invalidateFramebuffer(36008,le)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),Pe)for(let Le=0;Le<N.length;Le++){n.bindFramebuffer(36160,se.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+Le,36161,se.__webglColorRenderbuffer[Le]);const Ye=i.get(N[Le]).__webglTexture;n.bindFramebuffer(36160,se.__webglFramebuffer),t.framebufferTexture2D(36009,36064+Le,3553,Ye,0)}n.bindFramebuffer(36009,se.__webglMultisampledFramebuffer)}}function it($){return Math.min(d,$.samples)}function Qe($){const N=i.get($);return a&&$.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&N.__useRenderToTexture!==!1}function kt($){const N=o.render.frame;g.get($)!==N&&(g.set($,N),$.update())}function It($,N){const fe=$.encoding,_e=$.format,Z=$.type;return $.isCompressedTexture===!0||$.isVideoTexture===!0||$.format===l0||fe!==fo&&(fe===tn?a===!1?e.has("EXT_sRGB")===!0&&_e===Or?($.format=l0,$.minFilter=Mn,$.generateMipmaps=!1):N=db.sRGBToLinear(N):(_e!==Or||Z!==ma)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",fe)),N}this.allocateTextureUnit=D,this.resetTextureUnits=re,this.setTexture2D=A,this.setTexture2DArray=X,this.setTexture3D=Y,this.setTextureCube=z,this.rebindTextures=Ae,this.setupRenderTarget=qe,this.updateRenderTargetMipmap=Ie,this.updateMultisampleRenderTarget=ot,this.setupDepthRenderbuffer=de,this.setupFrameBufferTexture=be,this.useMultisampledRTT=Qe}function b4(t,e,n){const i=n.isWebGL2;function r(s,o=null){let a;if(s===ma)return 5121;if(s===XI)return 32819;if(s===qI)return 32820;if(s===GI)return 5120;if(s===$I)return 5122;if(s===ub)return 5123;if(s===jI)return 5124;if(s===Yo)return 5125;if(s===eo)return 5126;if(s===Ec)return i?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===YI)return 6406;if(s===Or)return 6408;if(s===JI)return 6409;if(s===KI)return 6410;if(s===aa)return 6402;if(s===Pl)return 34041;if(s===QI)return 6403;if(s===ZI)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===l0)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===e4)return 36244;if(s===t4)return 33319;if(s===n4)return 33320;if(s===i4)return 36249;if(s===lg||s===ug||s===cg||s===fg)if(o===tn)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===lg)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===ug)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===cg)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===fg)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===lg)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===ug)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===cg)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===fg)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===Vw||s===Hw||s===Ww||s===Gw)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===Vw)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===Hw)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===Ww)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===Gw)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===r4)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===$w||s===jw)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===$w)return o===tn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===jw)return o===tn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===Xw||s===qw||s===Yw||s===Zw||s===Jw||s===Kw||s===Qw||s===e_||s===t_||s===n_||s===i_||s===r_||s===s_||s===o_)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===Xw)return o===tn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===qw)return o===tn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===Yw)return o===tn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===Zw)return o===tn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===Jw)return o===tn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===Kw)return o===tn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===Qw)return o===tn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===e_)return o===tn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===t_)return o===tn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===n_)return o===tn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===i_)return o===tn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===r_)return o===tn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===s_)return o===tn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===o_)return o===tn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===a_)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===a_)return o===tn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return s===gl?i?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):t[s]!==void 0?t[s]:null}return{convert:r}}class M4 extends Yn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Qu extends Ot{constructor(){super(),this.isGroup=!0,this.type="Group"}}const X$={type:"move"};class Nv{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Qu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Qu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new B,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new B),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Qu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new B,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new B),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const y of e.hand.values()){const w=n.getJointPose(y,i);if(u.joints[y.jointName]===void 0){const _=new Qu;_.matrixAutoUpdate=!1,_.visible=!1,u.joints[y.jointName]=_,u.add(_)}const v=u.joints[y.jointName];w!==null&&(v.matrix.fromArray(w.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=w.radius),v.visible=w!==null}const f=u.joints["index-finger-tip"],d=u.joints["thumb-tip"],p=f.position.distanceTo(d.position),m=.02,g=.005;u.inputState.pinching&&p>m+g?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&p<=m-g&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=n.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(X$)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}}class T4 extends Fn{constructor(e,n,i,r,s,o,a,l,u,f){if(f=f!==void 0?f:aa,f!==aa&&f!==Pl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&f===aa&&(i=Yo),i===void 0&&f===Pl&&(i=gl),super(null,r,s,o,a,l,f,i,u),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:Dn,this.minFilter=l!==void 0?l:Dn,this.flipY=!1,this.generateMipmaps=!1}}class q$ extends mo{constructor(e,n){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=null,u=null,f=null,d=null,p=null,m=null;const g=n.getContextAttributes();let y=null,w=null;const v=[],_=[],b=new Yn;b.layers.enable(1),b.viewport=new Ht;const M=new Yn;M.layers.enable(2),M.viewport=new Ht;const k=[b,M],E=new M4;E.layers.enable(1),E.layers.enable(2);let I=null,C=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(F){let A=v[F];return A===void 0&&(A=new Nv,v[F]=A),A.getTargetRaySpace()},this.getControllerGrip=function(F){let A=v[F];return A===void 0&&(A=new Nv,v[F]=A),A.getGripSpace()},this.getHand=function(F){let A=v[F];return A===void 0&&(A=new Nv,v[F]=A),A.getHandSpace()};function L(F){const A=_.indexOf(F.inputSource);if(A===-1)return;const X=v[A];X!==void 0&&X.dispatchEvent({type:F.type,data:F.inputSource})}function R(){r.removeEventListener("select",L),r.removeEventListener("selectstart",L),r.removeEventListener("selectend",L),r.removeEventListener("squeeze",L),r.removeEventListener("squeezestart",L),r.removeEventListener("squeezeend",L),r.removeEventListener("end",R),r.removeEventListener("inputsourceschange",O);for(let F=0;F<v.length;F++){const A=_[F];A!==null&&(_[F]=null,v[F].disconnect(A))}I=null,C=null,e.setRenderTarget(y),p=null,d=null,f=null,r=null,w=null,D.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(F){s=F,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(F){a=F,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(F){l=F},this.getBaseLayer=function(){return d!==null?d:p},this.getBinding=function(){return f},this.getFrame=function(){return m},this.getSession=function(){return r},this.setSession=async function(F){if(r=F,r!==null){if(y=e.getRenderTarget(),r.addEventListener("select",L),r.addEventListener("selectstart",L),r.addEventListener("selectend",L),r.addEventListener("squeeze",L),r.addEventListener("squeezestart",L),r.addEventListener("squeezeend",L),r.addEventListener("end",R),r.addEventListener("inputsourceschange",O),g.xrCompatible!==!0&&await n.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const A={antialias:r.renderState.layers===void 0?g.antialias:!0,alpha:g.alpha,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(r,n,A),r.updateRenderState({baseLayer:p}),w=new Wr(p.framebufferWidth,p.framebufferHeight,{format:Or,type:ma,encoding:e.outputEncoding,stencilBuffer:g.stencil})}else{let A=null,X=null,Y=null;g.depth&&(Y=g.stencil?35056:33190,A=g.stencil?Pl:aa,X=g.stencil?gl:Yo);const z={colorFormat:32856,depthFormat:Y,scaleFactor:s};f=new XRWebGLBinding(r,n),d=f.createProjectionLayer(z),r.updateRenderState({layers:[d]}),w=new Wr(d.textureWidth,d.textureHeight,{format:Or,type:ma,depthTexture:new T4(d.textureWidth,d.textureHeight,X,void 0,void 0,void 0,void 0,void 0,void 0,A),stencilBuffer:g.stencil,encoding:e.outputEncoding,samples:g.antialias?4:0});const xe=e.properties.get(w);xe.__ignoreDepthValues=d.ignoreDepthValues}w.isXRRenderTarget=!0,this.setFoveation(1),l=null,o=await r.requestReferenceSpace(a),D.setContext(r),D.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function O(F){for(let A=0;A<F.removed.length;A++){const X=F.removed[A],Y=_.indexOf(X);Y>=0&&(_[Y]=null,v[Y].dispatchEvent({type:"disconnected",data:X}))}for(let A=0;A<F.added.length;A++){const X=F.added[A];let Y=_.indexOf(X);if(Y===-1){for(let xe=0;xe<v.length;xe++)if(xe>=_.length){_.push(X),Y=xe;break}else if(_[xe]===null){_[xe]=X,Y=xe;break}if(Y===-1)break}const z=v[Y];z&&z.dispatchEvent({type:"connected",data:X})}}const q=new B,j=new B;function G(F,A,X){q.setFromMatrixPosition(A.matrixWorld),j.setFromMatrixPosition(X.matrixWorld);const Y=q.distanceTo(j),z=A.projectionMatrix.elements,xe=X.projectionMatrix.elements,Ce=z[14]/(z[10]-1),ie=z[14]/(z[10]+1),Ne=(z[9]+1)/z[5],We=(z[9]-1)/z[5],Ge=(z[8]-1)/z[0],be=(xe[8]+1)/xe[0],$e=Ce*Ge,pe=Ce*be,de=Y/(-Ge+be),Ae=de*-Ge;A.matrixWorld.decompose(F.position,F.quaternion,F.scale),F.translateX(Ae),F.translateZ(de),F.matrixWorld.compose(F.position,F.quaternion,F.scale),F.matrixWorldInverse.copy(F.matrixWorld).invert();const qe=Ce+de,Ie=ie+de,ot=$e-Ae,it=pe+(Y-Ae),Qe=Ne*ie/Ie*qe,kt=We*ie/Ie*qe;F.projectionMatrix.makePerspective(ot,it,Qe,kt,qe,Ie)}function W(F,A){A===null?F.matrixWorld.copy(F.matrix):F.matrixWorld.multiplyMatrices(A.matrixWorld,F.matrix),F.matrixWorldInverse.copy(F.matrixWorld).invert()}this.updateCamera=function(F){if(r===null)return;E.near=M.near=b.near=F.near,E.far=M.far=b.far=F.far,(I!==E.near||C!==E.far)&&(r.updateRenderState({depthNear:E.near,depthFar:E.far}),I=E.near,C=E.far);const A=F.parent,X=E.cameras;W(E,A);for(let z=0;z<X.length;z++)W(X[z],A);E.matrixWorld.decompose(E.position,E.quaternion,E.scale),F.matrix.copy(E.matrix),F.matrix.decompose(F.position,F.quaternion,F.scale);const Y=F.children;for(let z=0,xe=Y.length;z<xe;z++)Y[z].updateMatrixWorld(!0);X.length===2?G(E,b,M):E.projectionMatrix.copy(b.projectionMatrix)},this.getCamera=function(){return E},this.getFoveation=function(){if(d!==null)return d.fixedFoveation;if(p!==null)return p.fixedFoveation},this.setFoveation=function(F){d!==null&&(d.fixedFoveation=F),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=F)};let J=null;function re(F,A){if(u=A.getViewerPose(l||o),m=A,u!==null){const X=u.views;p!==null&&(e.setRenderTargetFramebuffer(w,p.framebuffer),e.setRenderTarget(w));let Y=!1;X.length!==E.cameras.length&&(E.cameras.length=0,Y=!0);for(let z=0;z<X.length;z++){const xe=X[z];let Ce=null;if(p!==null)Ce=p.getViewport(xe);else{const Ne=f.getViewSubImage(d,xe);Ce=Ne.viewport,z===0&&(e.setRenderTargetTextures(w,Ne.colorTexture,d.ignoreDepthValues?void 0:Ne.depthStencilTexture),e.setRenderTarget(w))}let ie=k[z];ie===void 0&&(ie=new Yn,ie.layers.enable(z),ie.viewport=new Ht,k[z]=ie),ie.matrix.fromArray(xe.transform.matrix),ie.projectionMatrix.fromArray(xe.projectionMatrix),ie.viewport.set(Ce.x,Ce.y,Ce.width,Ce.height),z===0&&E.matrix.copy(ie.matrix),Y===!0&&E.cameras.push(ie)}}for(let X=0;X<v.length;X++){const Y=_[X],z=v[X];Y!==null&&z!==void 0&&z.update(Y,A,l||o)}J&&J(F,A),m=null}const D=new x4;D.setAnimationLoop(re),this.setAnimationLoop=function(F){J=F},this.dispose=function(){}}}function Y$(t,e){function n(y,w){y.fogColor.value.copy(w.color),w.isFog?(y.fogNear.value=w.near,y.fogFar.value=w.far):w.isFogExp2&&(y.fogDensity.value=w.density)}function i(y,w,v,_,b){w.isMeshBasicMaterial||w.isMeshLambertMaterial?r(y,w):w.isMeshToonMaterial?(r(y,w),f(y,w)):w.isMeshPhongMaterial?(r(y,w),u(y,w)):w.isMeshStandardMaterial?(r(y,w),d(y,w),w.isMeshPhysicalMaterial&&p(y,w,b)):w.isMeshMatcapMaterial?(r(y,w),m(y,w)):w.isMeshDepthMaterial?r(y,w):w.isMeshDistanceMaterial?(r(y,w),g(y,w)):w.isMeshNormalMaterial?r(y,w):w.isLineBasicMaterial?(s(y,w),w.isLineDashedMaterial&&o(y,w)):w.isPointsMaterial?a(y,w,v,_):w.isSpriteMaterial?l(y,w):w.isShadowMaterial?(y.color.value.copy(w.color),y.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}function r(y,w){y.opacity.value=w.opacity,w.color&&y.diffuse.value.copy(w.color),w.emissive&&y.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(y.map.value=w.map),w.alphaMap&&(y.alphaMap.value=w.alphaMap),w.bumpMap&&(y.bumpMap.value=w.bumpMap,y.bumpScale.value=w.bumpScale,w.side===ji&&(y.bumpScale.value*=-1)),w.displacementMap&&(y.displacementMap.value=w.displacementMap,y.displacementScale.value=w.displacementScale,y.displacementBias.value=w.displacementBias),w.emissiveMap&&(y.emissiveMap.value=w.emissiveMap),w.normalMap&&(y.normalMap.value=w.normalMap,y.normalScale.value.copy(w.normalScale),w.side===ji&&y.normalScale.value.negate()),w.specularMap&&(y.specularMap.value=w.specularMap),w.alphaTest>0&&(y.alphaTest.value=w.alphaTest);const v=e.get(w).envMap;if(v&&(y.envMap.value=v,y.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=w.reflectivity,y.ior.value=w.ior,y.refractionRatio.value=w.refractionRatio),w.lightMap){y.lightMap.value=w.lightMap;const M=t.physicallyCorrectLights!==!0?Math.PI:1;y.lightMapIntensity.value=w.lightMapIntensity*M}w.aoMap&&(y.aoMap.value=w.aoMap,y.aoMapIntensity.value=w.aoMapIntensity);let _;w.map?_=w.map:w.specularMap?_=w.specularMap:w.displacementMap?_=w.displacementMap:w.normalMap?_=w.normalMap:w.bumpMap?_=w.bumpMap:w.roughnessMap?_=w.roughnessMap:w.metalnessMap?_=w.metalnessMap:w.alphaMap?_=w.alphaMap:w.emissiveMap?_=w.emissiveMap:w.clearcoatMap?_=w.clearcoatMap:w.clearcoatNormalMap?_=w.clearcoatNormalMap:w.clearcoatRoughnessMap?_=w.clearcoatRoughnessMap:w.iridescenceMap?_=w.iridescenceMap:w.iridescenceThicknessMap?_=w.iridescenceThicknessMap:w.specularIntensityMap?_=w.specularIntensityMap:w.specularColorMap?_=w.specularColorMap:w.transmissionMap?_=w.transmissionMap:w.thicknessMap?_=w.thicknessMap:w.sheenColorMap?_=w.sheenColorMap:w.sheenRoughnessMap&&(_=w.sheenRoughnessMap),_!==void 0&&(_.isWebGLRenderTarget&&(_=_.texture),_.matrixAutoUpdate===!0&&_.updateMatrix(),y.uvTransform.value.copy(_.matrix));let b;w.aoMap?b=w.aoMap:w.lightMap&&(b=w.lightMap),b!==void 0&&(b.isWebGLRenderTarget&&(b=b.texture),b.matrixAutoUpdate===!0&&b.updateMatrix(),y.uv2Transform.value.copy(b.matrix))}function s(y,w){y.diffuse.value.copy(w.color),y.opacity.value=w.opacity}function o(y,w){y.dashSize.value=w.dashSize,y.totalSize.value=w.dashSize+w.gapSize,y.scale.value=w.scale}function a(y,w,v,_){y.diffuse.value.copy(w.color),y.opacity.value=w.opacity,y.size.value=w.size*v,y.scale.value=_*.5,w.map&&(y.map.value=w.map),w.alphaMap&&(y.alphaMap.value=w.alphaMap),w.alphaTest>0&&(y.alphaTest.value=w.alphaTest);let b;w.map?b=w.map:w.alphaMap&&(b=w.alphaMap),b!==void 0&&(b.matrixAutoUpdate===!0&&b.updateMatrix(),y.uvTransform.value.copy(b.matrix))}function l(y,w){y.diffuse.value.copy(w.color),y.opacity.value=w.opacity,y.rotation.value=w.rotation,w.map&&(y.map.value=w.map),w.alphaMap&&(y.alphaMap.value=w.alphaMap),w.alphaTest>0&&(y.alphaTest.value=w.alphaTest);let v;w.map?v=w.map:w.alphaMap&&(v=w.alphaMap),v!==void 0&&(v.matrixAutoUpdate===!0&&v.updateMatrix(),y.uvTransform.value.copy(v.matrix))}function u(y,w){y.specular.value.copy(w.specular),y.shininess.value=Math.max(w.shininess,1e-4)}function f(y,w){w.gradientMap&&(y.gradientMap.value=w.gradientMap)}function d(y,w){y.roughness.value=w.roughness,y.metalness.value=w.metalness,w.roughnessMap&&(y.roughnessMap.value=w.roughnessMap),w.metalnessMap&&(y.metalnessMap.value=w.metalnessMap),e.get(w).envMap&&(y.envMapIntensity.value=w.envMapIntensity)}function p(y,w,v){y.ior.value=w.ior,w.sheen>0&&(y.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),y.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(y.sheenColorMap.value=w.sheenColorMap),w.sheenRoughnessMap&&(y.sheenRoughnessMap.value=w.sheenRoughnessMap)),w.clearcoat>0&&(y.clearcoat.value=w.clearcoat,y.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(y.clearcoatMap.value=w.clearcoatMap),w.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap),w.clearcoatNormalMap&&(y.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),y.clearcoatNormalMap.value=w.clearcoatNormalMap,w.side===ji&&y.clearcoatNormalScale.value.negate())),w.iridescence>0&&(y.iridescence.value=w.iridescence,y.iridescenceIOR.value=w.iridescenceIOR,y.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(y.iridescenceMap.value=w.iridescenceMap),w.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=w.iridescenceThicknessMap)),w.transmission>0&&(y.transmission.value=w.transmission,y.transmissionSamplerMap.value=v.texture,y.transmissionSamplerSize.value.set(v.width,v.height),w.transmissionMap&&(y.transmissionMap.value=w.transmissionMap),y.thickness.value=w.thickness,w.thicknessMap&&(y.thicknessMap.value=w.thicknessMap),y.attenuationDistance.value=w.attenuationDistance,y.attenuationColor.value.copy(w.attenuationColor)),y.specularIntensity.value=w.specularIntensity,y.specularColor.value.copy(w.specularColor),w.specularIntensityMap&&(y.specularIntensityMap.value=w.specularIntensityMap),w.specularColorMap&&(y.specularColorMap.value=w.specularColorMap)}function m(y,w){w.matcap&&(y.matcap.value=w.matcap)}function g(y,w){y.referencePosition.value.copy(w.referencePosition),y.nearDistance.value=w.nearDistance,y.farDistance.value=w.farDistance}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function Z$(t,e,n,i){let r={},s={},o=[];const a=n.isWebGL2?t.getParameter(35375):0;function l(_,b){const M=b.program;i.uniformBlockBinding(_,M)}function u(_,b){let M=r[_.id];M===void 0&&(g(_),M=f(_),r[_.id]=M,_.addEventListener("dispose",w));const k=b.program;i.updateUBOMapping(_,k);const E=e.render.frame;s[_.id]!==E&&(p(_),s[_.id]=E)}function f(_){const b=d();_.__bindingPointIndex=b;const M=t.createBuffer(),k=_.__size,E=_.usage;return t.bindBuffer(35345,M),t.bufferData(35345,k,E),t.bindBuffer(35345,null),t.bindBufferBase(35345,b,M),M}function d(){for(let _=0;_<a;_++)if(o.indexOf(_)===-1)return o.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(_){const b=r[_.id],M=_.uniforms,k=_.__cache;t.bindBuffer(35345,b);for(let E=0,I=M.length;E<I;E++){const C=M[E];if(m(C,E,k)===!0){const L=C.value,R=C.__offset;typeof L=="number"?(C.__data[0]=L,t.bufferSubData(35345,R,C.__data)):(C.value.isMatrix3?(C.__data[0]=C.value.elements[0],C.__data[1]=C.value.elements[1],C.__data[2]=C.value.elements[2],C.__data[3]=C.value.elements[0],C.__data[4]=C.value.elements[3],C.__data[5]=C.value.elements[4],C.__data[6]=C.value.elements[5],C.__data[7]=C.value.elements[0],C.__data[8]=C.value.elements[6],C.__data[9]=C.value.elements[7],C.__data[10]=C.value.elements[8],C.__data[11]=C.value.elements[0]):L.toArray(C.__data),t.bufferSubData(35345,R,C.__data))}}t.bindBuffer(35345,null)}function m(_,b,M){const k=_.value;if(M[b]===void 0)return typeof k=="number"?M[b]=k:M[b]=k.clone(),!0;if(typeof k=="number"){if(M[b]!==k)return M[b]=k,!0}else{const E=M[b];if(E.equals(k)===!1)return E.copy(k),!0}return!1}function g(_){const b=_.uniforms;let M=0;const k=16;let E=0;for(let I=0,C=b.length;I<C;I++){const L=b[I],R=y(L);if(L.__data=new Float32Array(R.storage/Float32Array.BYTES_PER_ELEMENT),L.__offset=M,I>0){E=M%k;const O=k-E;E!==0&&O-R.boundary<0&&(M+=k-E,L.__offset=M)}M+=R.storage}return E=M%k,E>0&&(M+=k-E),_.__size=M,_.__cache={},this}function y(_){const b=_.value,M={boundary:0,storage:0};return typeof b=="number"?(M.boundary=4,M.storage=4):b.isVector2?(M.boundary=8,M.storage=8):b.isVector3||b.isColor?(M.boundary=16,M.storage=12):b.isVector4?(M.boundary=16,M.storage=16):b.isMatrix3?(M.boundary=48,M.storage=48):b.isMatrix4?(M.boundary=64,M.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),M}function w(_){const b=_.target;b.removeEventListener("dispose",w);const M=o.indexOf(b.__bindingPointIndex);o.splice(M,1),t.deleteBuffer(r[b.id]),delete r[b.id],delete s[b.id]}function v(){for(const _ in r)t.deleteBuffer(r[_]);o=[],r={},s={}}return{bind:l,update:u,dispose:v}}function J$(){const t=Bd("canvas");return t.style.display="block",t}function xb(t={}){this.isWebGLRenderer=!0;const e=t.canvas!==void 0?t.canvas:J$(),n=t.context!==void 0?t.context:null,i=t.depth!==void 0?t.depth:!0,r=t.stencil!==void 0?t.stencil:!0,s=t.antialias!==void 0?t.antialias:!1,o=t.premultipliedAlpha!==void 0?t.premultipliedAlpha:!0,a=t.preserveDrawingBuffer!==void 0?t.preserveDrawingBuffer:!1,l=t.powerPreference!==void 0?t.powerPreference:"default",u=t.failIfMajorPerformanceCaveat!==void 0?t.failIfMajorPerformanceCaveat:!1;let f;n!==null?f=n.getContextAttributes().alpha:f=t.alpha!==void 0?t.alpha:!1;let d=null,p=null;const m=[],g=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=fo,this.physicallyCorrectLights=!1,this.toneMapping=os,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const y=this;let w=!1,v=0,_=0,b=null,M=-1,k=null;const E=new Ht,I=new Ht;let C=null,L=e.width,R=e.height,O=1,q=null,j=null;const G=new Ht(0,0,L,R),W=new Ht(0,0,L,R);let J=!1;const re=new Q0;let D=!1,F=!1,A=null;const X=new ht,Y=new ve,z=new B,xe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ce(){return b===null?O:1}let ie=n;function Ne(U,ae){for(let ge=0;ge<U.length;ge++){const oe=U[ge],ye=e.getContext(oe,ae);if(ye!==null)return ye}return null}try{const U={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${q0}`),e.addEventListener("webglcontextlost",st,!1),e.addEventListener("webglcontextrestored",vt,!1),e.addEventListener("webglcontextcreationerror",_t,!1),ie===null){const ae=["webgl2","webgl","experimental-webgl"];if(y.isWebGL1Renderer===!0&&ae.shift(),ie=Ne(ae,U),ie===null)throw Ne(ae)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}ie.getShaderPrecisionFormat===void 0&&(ie.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(U){throw console.error("THREE.WebGLRenderer: "+U.message),U}let We,Ge,be,$e,pe,de,Ae,qe,Ie,ot,it,Qe,kt,It,$,N,fe,_e,Z,le,Te,se,Pe,Le;function Ye(){We=new h7(ie),Ge=new a7(ie,We,t),We.init(Ge),se=new b4(ie,We,Ge),be=new $$(ie,We,Ge),$e=new g7,pe=new I$,de=new j$(ie,We,be,pe,Ge,se,$e),Ae=new u7(y),qe=new d7(y),Ie=new kH(ie,Ge),Pe=new s7(ie,We,Ie,Ge),ot=new p7(ie,Ie,$e,Pe),it=new w7(ie,ot,Ie,$e),Z=new v7(ie,Ge,de),N=new l7(pe),Qe=new R$(y,Ae,qe,We,Ge,Pe,N),kt=new Y$(y,pe),It=new z$,$=new V$(We,Ge),_e=new r7(y,Ae,be,it,f,o),fe=new G$(y,it,Ge),Le=new Z$(ie,$e,Ge,be),le=new o7(ie,We,$e,Ge),Te=new m7(ie,We,$e,Ge),$e.programs=Qe.programs,y.capabilities=Ge,y.extensions=We,y.properties=pe,y.renderLists=It,y.shadowMap=fe,y.state=be,y.info=$e}Ye();const Fe=new q$(y,ie);this.xr=Fe,this.getContext=function(){return ie},this.getContextAttributes=function(){return ie.getContextAttributes()},this.forceContextLoss=function(){const U=We.get("WEBGL_lose_context");U&&U.loseContext()},this.forceContextRestore=function(){const U=We.get("WEBGL_lose_context");U&&U.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(U){U!==void 0&&(O=U,this.setSize(L,R,!1))},this.getSize=function(U){return U.set(L,R)},this.setSize=function(U,ae,ge){if(Fe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}L=U,R=ae,e.width=Math.floor(U*O),e.height=Math.floor(ae*O),ge!==!1&&(e.style.width=U+"px",e.style.height=ae+"px"),this.setViewport(0,0,U,ae)},this.getDrawingBufferSize=function(U){return U.set(L*O,R*O).floor()},this.setDrawingBufferSize=function(U,ae,ge){L=U,R=ae,O=ge,e.width=Math.floor(U*ge),e.height=Math.floor(ae*ge),this.setViewport(0,0,U,ae)},this.getCurrentViewport=function(U){return U.copy(E)},this.getViewport=function(U){return U.copy(G)},this.setViewport=function(U,ae,ge,oe){U.isVector4?G.set(U.x,U.y,U.z,U.w):G.set(U,ae,ge,oe),be.viewport(E.copy(G).multiplyScalar(O).floor())},this.getScissor=function(U){return U.copy(W)},this.setScissor=function(U,ae,ge,oe){U.isVector4?W.set(U.x,U.y,U.z,U.w):W.set(U,ae,ge,oe),be.scissor(I.copy(W).multiplyScalar(O).floor())},this.getScissorTest=function(){return J},this.setScissorTest=function(U){be.setScissorTest(J=U)},this.setOpaqueSort=function(U){q=U},this.setTransparentSort=function(U){j=U},this.getClearColor=function(U){return U.copy(_e.getClearColor())},this.setClearColor=function(){_e.setClearColor.apply(_e,arguments)},this.getClearAlpha=function(){return _e.getClearAlpha()},this.setClearAlpha=function(){_e.setClearAlpha.apply(_e,arguments)},this.clear=function(U=!0,ae=!0,ge=!0){let oe=0;U&&(oe|=16384),ae&&(oe|=256),ge&&(oe|=1024),ie.clear(oe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",st,!1),e.removeEventListener("webglcontextrestored",vt,!1),e.removeEventListener("webglcontextcreationerror",_t,!1),It.dispose(),$.dispose(),pe.dispose(),Ae.dispose(),qe.dispose(),it.dispose(),Pe.dispose(),Le.dispose(),Qe.dispose(),Fe.dispose(),Fe.removeEventListener("sessionstart",Ct),Fe.removeEventListener("sessionend",kn),A&&(A.dispose(),A=null),rn.stop()};function st(U){U.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function vt(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const U=$e.autoReset,ae=fe.enabled,ge=fe.autoUpdate,oe=fe.needsUpdate,ye=fe.type;Ye(),$e.autoReset=U,fe.enabled=ae,fe.autoUpdate=ge,fe.needsUpdate=oe,fe.type=ye}function _t(U){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",U.statusMessage)}function Q(U){const ae=U.target;ae.removeEventListener("dispose",Q),De(ae)}function De(U){me(U),pe.remove(U)}function me(U){const ae=pe.get(U).programs;ae!==void 0&&(ae.forEach(function(ge){Qe.releaseProgram(ge)}),U.isShaderMaterial&&Qe.releaseShaderCache(U))}this.renderBufferDirect=function(U,ae,ge,oe,ye,et){ae===null&&(ae=xe);const at=ye.isMesh&&ye.matrixWorld.determinant()<0,pt=vy(U,ae,ge,oe,ye);be.setMaterial(oe,at);let lt=ge.index;const Dt=ge.attributes.position;if(lt===null){if(Dt===void 0||Dt.count===0)return}else if(lt.count===0)return;let Tt=1;oe.wireframe===!0&&(lt=ot.getWireframeAttribute(ge),Tt=2),Pe.setup(ye,oe,pt,ge,lt);let Et,on=le;lt!==null&&(Et=Ie.get(lt),on=Te,on.setIndex(Et));const Ls=lt!==null?lt.count:Dt.count,xo=ge.drawRange.start*Tt,vo=ge.drawRange.count*Tt,Ri=et!==null?et.start*Tt:0,Mt=et!==null?et.count*Tt:1/0,ds=Math.max(xo,Ri),an=Math.min(Ls,xo+vo,Ri+Mt)-1,Ii=Math.max(0,an-ds+1);if(Ii!==0){if(ye.isMesh)oe.wireframe===!0?(be.setLineWidth(oe.wireframeLinewidth*Ce()),on.setMode(1)):on.setMode(4);else if(ye.isLine){let mr=oe.linewidth;mr===void 0&&(mr=1),be.setLineWidth(mr*Ce()),ye.isLineSegments?on.setMode(1):ye.isLineLoop?on.setMode(2):on.setMode(3)}else ye.isPoints?on.setMode(0):ye.isSprite&&on.setMode(4);if(ye.isInstancedMesh)on.renderInstances(ds,Ii,ye.count);else if(ge.isInstancedBufferGeometry){const mr=Math.min(ge.instanceCount,ge._maxInstanceCount);on.renderInstances(ds,Ii,mr)}else on.render(ds,Ii)}},this.compile=function(U,ae){function ge(oe,ye,et){oe.transparent===!0&&oe.side===Qs?(oe.side=ji,oe.needsUpdate=!0,Xl(oe,ye,et),oe.side=Cl,oe.needsUpdate=!0,Xl(oe,ye,et),oe.side=Qs):Xl(oe,ye,et)}p=$.get(U),p.init(),g.push(p),U.traverseVisible(function(oe){oe.isLight&&oe.layers.test(ae.layers)&&(p.pushLight(oe),oe.castShadow&&p.pushShadow(oe))}),p.setupLights(y.physicallyCorrectLights),U.traverse(function(oe){const ye=oe.material;if(ye)if(Array.isArray(ye))for(let et=0;et<ye.length;et++){const at=ye[et];ge(at,U,oe)}else ge(ye,U,oe)}),g.pop(),p=null};let Ve=null;function Be(U){Ve&&Ve(U)}function Ct(){rn.stop()}function kn(){rn.start()}const rn=new x4;rn.setAnimationLoop(Be),typeof self<"u"&&rn.setContext(self),this.setAnimationLoop=function(U){Ve=U,Fe.setAnimationLoop(U),U===null?rn.stop():rn.start()},Fe.addEventListener("sessionstart",Ct),Fe.addEventListener("sessionend",kn),this.render=function(U,ae){if(ae!==void 0&&ae.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;U.matrixWorldAutoUpdate===!0&&U.updateMatrixWorld(),ae.parent===null&&ae.matrixWorldAutoUpdate===!0&&ae.updateMatrixWorld(),Fe.enabled===!0&&Fe.isPresenting===!0&&(Fe.cameraAutoUpdate===!0&&Fe.updateCamera(ae),ae=Fe.getCamera()),U.isScene===!0&&U.onBeforeRender(y,U,ae,b),p=$.get(U,g.length),p.init(),g.push(p),X.multiplyMatrices(ae.projectionMatrix,ae.matrixWorldInverse),re.setFromProjectionMatrix(X),F=this.localClippingEnabled,D=N.init(this.clippingPlanes,F,ae),d=It.get(U,m.length),d.init(),m.push(d),Gr(U,ae,0,y.sortObjects),d.finish(),y.sortObjects===!0&&d.sort(q,j),D===!0&&N.beginShadows();const ge=p.state.shadowsArray;if(fe.render(ge,U,ae),D===!0&&N.endShadows(),this.info.autoReset===!0&&this.info.reset(),_e.render(d,U),p.setupLights(y.physicallyCorrectLights),ae.isArrayCamera){const oe=ae.cameras;for(let ye=0,et=oe.length;ye<et;ye++){const at=oe[ye];sn(d,U,at,at.viewport)}}else sn(d,U,ae);b!==null&&(de.updateMultisampleRenderTarget(b),de.updateRenderTargetMipmap(b)),U.isScene===!0&&U.onAfterRender(y,U,ae),Pe.resetDefaultState(),M=-1,k=null,g.pop(),g.length>0?p=g[g.length-1]:p=null,m.pop(),m.length>0?d=m[m.length-1]:d=null};function Gr(U,ae,ge,oe){if(U.visible===!1)return;if(U.layers.test(ae.layers)){if(U.isGroup)ge=U.renderOrder;else if(U.isLOD)U.autoUpdate===!0&&U.update(ae);else if(U.isLight)p.pushLight(U),U.castShadow&&p.pushShadow(U);else if(U.isSprite){if(!U.frustumCulled||re.intersectsSprite(U)){oe&&z.setFromMatrixPosition(U.matrixWorld).applyMatrix4(X);const at=it.update(U),pt=U.material;pt.visible&&d.push(U,at,pt,ge,z.z,null)}}else if((U.isMesh||U.isLine||U.isPoints)&&(U.isSkinnedMesh&&U.skeleton.frame!==$e.render.frame&&(U.skeleton.update(),U.skeleton.frame=$e.render.frame),!U.frustumCulled||re.intersectsObject(U))){oe&&z.setFromMatrixPosition(U.matrixWorld).applyMatrix4(X);const at=it.update(U),pt=U.material;if(Array.isArray(pt)){const lt=at.groups;for(let Dt=0,Tt=lt.length;Dt<Tt;Dt++){const Et=lt[Dt],on=pt[Et.materialIndex];on&&on.visible&&d.push(U,at,on,ge,z.z,Et)}}else pt.visible&&d.push(U,at,pt,ge,z.z,null)}}const et=U.children;for(let at=0,pt=et.length;at<pt;at++)Gr(et[at],ae,ge,oe)}function sn(U,ae,ge,oe){const ye=U.opaque,et=U.transmissive,at=U.transparent;p.setupLightsView(ge),et.length>0&&pr(ye,ae,ge),oe&&be.viewport(E.copy(oe)),ye.length>0&&yi(ye,ae,ge),et.length>0&&yi(et,ae,ge),at.length>0&&yi(at,ae,ge),be.buffers.depth.setTest(!0),be.buffers.depth.setMask(!0),be.buffers.color.setMask(!0),be.setPolygonOffset(!1)}function pr(U,ae,ge){const oe=Ge.isWebGL2;A===null&&(A=new Wr(1,1,{generateMipmaps:!0,type:We.has("EXT_color_buffer_half_float")?Ec:ma,minFilter:Ol,samples:oe&&s===!0?4:0})),y.getDrawingBufferSize(Y),oe?A.setSize(Y.x,Y.y):A.setSize(u0(Y.x),u0(Y.y));const ye=y.getRenderTarget();y.setRenderTarget(A),y.clear();const et=y.toneMapping;y.toneMapping=os,yi(U,ae,ge),y.toneMapping=et,de.updateMultisampleRenderTarget(A),de.updateRenderTargetMipmap(A),y.setRenderTarget(ye)}function yi(U,ae,ge){const oe=ae.isScene===!0?ae.overrideMaterial:null;for(let ye=0,et=U.length;ye<et;ye++){const at=U[ye],pt=at.object,lt=at.geometry,Dt=oe===null?at.material:oe,Tt=at.group;pt.layers.test(ge.layers)&&Ph(pt,ae,ge,lt,Dt,Tt)}}function Ph(U,ae,ge,oe,ye,et){U.onBeforeRender(y,ae,ge,oe,ye,et),U.modelViewMatrix.multiplyMatrices(ge.matrixWorldInverse,U.matrixWorld),U.normalMatrix.getNormalMatrix(U.modelViewMatrix),ye.onBeforeRender(y,ae,ge,oe,U,et),ye.transparent===!0&&ye.side===Qs?(ye.side=ji,ye.needsUpdate=!0,y.renderBufferDirect(ge,ae,oe,ye,U,et),ye.side=Cl,ye.needsUpdate=!0,y.renderBufferDirect(ge,ae,oe,ye,U,et),ye.side=Qs):y.renderBufferDirect(ge,ae,oe,ye,U,et),U.onAfterRender(y,ae,ge,oe,ye,et)}function Xl(U,ae,ge){ae.isScene!==!0&&(ae=xe);const oe=pe.get(U),ye=p.state.lights,et=p.state.shadowsArray,at=ye.state.version,pt=Qe.getParameters(U,ye.state,et,ae,ge),lt=Qe.getProgramCacheKey(pt);let Dt=oe.programs;oe.environment=U.isMeshStandardMaterial?ae.environment:null,oe.fog=ae.fog,oe.envMap=(U.isMeshStandardMaterial?qe:Ae).get(U.envMap||oe.environment),Dt===void 0&&(U.addEventListener("dispose",Q),Dt=new Map,oe.programs=Dt);let Tt=Dt.get(lt);if(Tt!==void 0){if(oe.currentProgram===Tt&&oe.lightsStateVersion===at)return Lh(U,pt),Tt}else pt.uniforms=Qe.getUniforms(U),U.onBuild(ge,pt,y),U.onBeforeCompile(pt,y),Tt=Qe.acquireProgram(pt,lt),Dt.set(lt,Tt),oe.uniforms=pt.uniforms;const Et=oe.uniforms;(!U.isShaderMaterial&&!U.isRawShaderMaterial||U.clipping===!0)&&(Et.clippingPlanes=N.uniform),Lh(U,pt),oe.needsLights=jc(U),oe.lightsStateVersion=at,oe.needsLights&&(Et.ambientLightColor.value=ye.state.ambient,Et.lightProbe.value=ye.state.probe,Et.directionalLights.value=ye.state.directional,Et.directionalLightShadows.value=ye.state.directionalShadow,Et.spotLights.value=ye.state.spot,Et.spotLightShadows.value=ye.state.spotShadow,Et.rectAreaLights.value=ye.state.rectArea,Et.ltc_1.value=ye.state.rectAreaLTC1,Et.ltc_2.value=ye.state.rectAreaLTC2,Et.pointLights.value=ye.state.point,Et.pointLightShadows.value=ye.state.pointShadow,Et.hemisphereLights.value=ye.state.hemi,Et.directionalShadowMap.value=ye.state.directionalShadowMap,Et.directionalShadowMatrix.value=ye.state.directionalShadowMatrix,Et.spotShadowMap.value=ye.state.spotShadowMap,Et.spotLightMatrix.value=ye.state.spotLightMatrix,Et.spotLightMap.value=ye.state.spotLightMap,Et.pointShadowMap.value=ye.state.pointShadowMap,Et.pointShadowMatrix.value=ye.state.pointShadowMatrix);const on=Tt.getUniforms(),Ls=mg.seqWithValue(on.seq,Et);return oe.currentProgram=Tt,oe.uniformsList=Ls,Tt}function Lh(U,ae){const ge=pe.get(U);ge.outputEncoding=ae.outputEncoding,ge.instancing=ae.instancing,ge.skinning=ae.skinning,ge.morphTargets=ae.morphTargets,ge.morphNormals=ae.morphNormals,ge.morphColors=ae.morphColors,ge.morphTargetsCount=ae.morphTargetsCount,ge.numClippingPlanes=ae.numClippingPlanes,ge.numIntersection=ae.numClipIntersection,ge.vertexAlphas=ae.vertexAlphas,ge.vertexTangents=ae.vertexTangents,ge.toneMapping=ae.toneMapping}function vy(U,ae,ge,oe,ye){ae.isScene!==!0&&(ae=xe),de.resetTextureUnits();const et=ae.fog,at=oe.isMeshStandardMaterial?ae.environment:null,pt=b===null?y.outputEncoding:b.isXRRenderTarget===!0?b.texture.encoding:fo,lt=(oe.isMeshStandardMaterial?qe:Ae).get(oe.envMap||at),Dt=oe.vertexColors===!0&&!!ge.attributes.color&&ge.attributes.color.itemSize===4,Tt=!!oe.normalMap&&!!ge.attributes.tangent,Et=!!ge.morphAttributes.position,on=!!ge.morphAttributes.normal,Ls=!!ge.morphAttributes.color,xo=oe.toneMapped?y.toneMapping:os,vo=ge.morphAttributes.position||ge.morphAttributes.normal||ge.morphAttributes.color,Ri=vo!==void 0?vo.length:0,Mt=pe.get(oe),ds=p.state.lights;if(D===!0&&(F===!0||U!==k)){const Bt=U===k&&oe.id===M;N.setState(oe,U,Bt)}let an=!1;oe.version===Mt.__version?(Mt.needsLights&&Mt.lightsStateVersion!==ds.state.version||Mt.outputEncoding!==pt||ye.isInstancedMesh&&Mt.instancing===!1||!ye.isInstancedMesh&&Mt.instancing===!0||ye.isSkinnedMesh&&Mt.skinning===!1||!ye.isSkinnedMesh&&Mt.skinning===!0||Mt.envMap!==lt||oe.fog===!0&&Mt.fog!==et||Mt.numClippingPlanes!==void 0&&(Mt.numClippingPlanes!==N.numPlanes||Mt.numIntersection!==N.numIntersection)||Mt.vertexAlphas!==Dt||Mt.vertexTangents!==Tt||Mt.morphTargets!==Et||Mt.morphNormals!==on||Mt.morphColors!==Ls||Mt.toneMapping!==xo||Ge.isWebGL2===!0&&Mt.morphTargetsCount!==Ri)&&(an=!0):(an=!0,Mt.__version=oe.version);let Ii=Mt.currentProgram;an===!0&&(Ii=Xl(oe,ae,ye));let mr=!1,gr=!1,yr=!1;const ft=Ii.getUniforms(),At=Mt.uniforms;if(be.useProgram(Ii.program)&&(mr=!0,gr=!0,yr=!0),oe.id!==M&&(M=oe.id,gr=!0),mr||k!==U){if(ft.setValue(ie,"projectionMatrix",U.projectionMatrix),Ge.logarithmicDepthBuffer&&ft.setValue(ie,"logDepthBufFC",2/(Math.log(U.far+1)/Math.LN2)),k!==U&&(k=U,gr=!0,yr=!0),oe.isShaderMaterial||oe.isMeshPhongMaterial||oe.isMeshToonMaterial||oe.isMeshStandardMaterial||oe.envMap){const Bt=ft.map.cameraPosition;Bt!==void 0&&Bt.setValue(ie,z.setFromMatrixPosition(U.matrixWorld))}(oe.isMeshPhongMaterial||oe.isMeshToonMaterial||oe.isMeshLambertMaterial||oe.isMeshBasicMaterial||oe.isMeshStandardMaterial||oe.isShaderMaterial)&&ft.setValue(ie,"isOrthographic",U.isOrthographicCamera===!0),(oe.isMeshPhongMaterial||oe.isMeshToonMaterial||oe.isMeshLambertMaterial||oe.isMeshBasicMaterial||oe.isMeshStandardMaterial||oe.isShaderMaterial||oe.isShadowMaterial||ye.isSkinnedMesh)&&ft.setValue(ie,"viewMatrix",U.matrixWorldInverse)}if(ye.isSkinnedMesh){ft.setOptional(ie,ye,"bindMatrix"),ft.setOptional(ie,ye,"bindMatrixInverse");const Bt=ye.skeleton;Bt&&(Ge.floatVertexTextures?(Bt.boneTexture===null&&Bt.computeBoneTexture(),ft.setValue(ie,"boneTexture",Bt.boneTexture,de),ft.setValue(ie,"boneTextureSize",Bt.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const xr=ge.morphAttributes;if((xr.position!==void 0||xr.normal!==void 0||xr.color!==void 0&&Ge.isWebGL2===!0)&&Z.update(ye,ge,oe,Ii),(gr||Mt.receiveShadow!==ye.receiveShadow)&&(Mt.receiveShadow=ye.receiveShadow,ft.setValue(ie,"receiveShadow",ye.receiveShadow)),oe.isMeshGouraudMaterial&&oe.envMap!==null&&(At.envMap.value=lt,At.flipEnvMap.value=lt.isCubeTexture&&lt.isRenderTargetTexture===!1?-1:1),gr&&(ft.setValue(ie,"toneMappingExposure",y.toneMappingExposure),Mt.needsLights&&Rh(At,yr),et&&oe.fog===!0&&kt.refreshFogUniforms(At,et),kt.refreshMaterialUniforms(At,oe,O,R,A),mg.upload(ie,Mt.uniformsList,At,de)),oe.isShaderMaterial&&oe.uniformsNeedUpdate===!0&&(mg.upload(ie,Mt.uniformsList,At,de),oe.uniformsNeedUpdate=!1),oe.isSpriteMaterial&&ft.setValue(ie,"center",ye.center),ft.setValue(ie,"modelViewMatrix",ye.modelViewMatrix),ft.setValue(ie,"normalMatrix",ye.normalMatrix),ft.setValue(ie,"modelMatrix",ye.matrixWorld),oe.isShaderMaterial||oe.isRawShaderMaterial){const Bt=oe.uniformsGroups;for(let Vn=0,Rs=Bt.length;Vn<Rs;Vn++)if(Ge.isWebGL2){const Is=Bt[Vn];Le.update(Is,Ii),Le.bind(Is,Ii)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Ii}function Rh(U,ae){U.ambientLightColor.needsUpdate=ae,U.lightProbe.needsUpdate=ae,U.directionalLights.needsUpdate=ae,U.directionalLightShadows.needsUpdate=ae,U.pointLights.needsUpdate=ae,U.pointLightShadows.needsUpdate=ae,U.spotLights.needsUpdate=ae,U.spotLightShadows.needsUpdate=ae,U.rectAreaLights.needsUpdate=ae,U.hemisphereLights.needsUpdate=ae}function jc(U){return U.isMeshLambertMaterial||U.isMeshToonMaterial||U.isMeshPhongMaterial||U.isMeshStandardMaterial||U.isShadowMaterial||U.isShaderMaterial&&U.lights===!0}this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(U,ae,ge){pe.get(U.texture).__webglTexture=ae,pe.get(U.depthTexture).__webglTexture=ge;const oe=pe.get(U);oe.__hasExternalTextures=!0,oe.__hasExternalTextures&&(oe.__autoAllocateDepthBuffer=ge===void 0,oe.__autoAllocateDepthBuffer||We.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),oe.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(U,ae){const ge=pe.get(U);ge.__webglFramebuffer=ae,ge.__useDefaultFramebuffer=ae===void 0},this.setRenderTarget=function(U,ae=0,ge=0){b=U,v=ae,_=ge;let oe=!0;if(U){const lt=pe.get(U);lt.__useDefaultFramebuffer!==void 0?(be.bindFramebuffer(36160,null),oe=!1):lt.__webglFramebuffer===void 0?de.setupRenderTarget(U):lt.__hasExternalTextures&&de.rebindTextures(U,pe.get(U.texture).__webglTexture,pe.get(U.depthTexture).__webglTexture)}let ye=null,et=!1,at=!1;if(U){const lt=U.texture;(lt.isData3DTexture||lt.isDataArrayTexture)&&(at=!0);const Dt=pe.get(U).__webglFramebuffer;U.isWebGLCubeRenderTarget?(ye=Dt[ae],et=!0):Ge.isWebGL2&&U.samples>0&&de.useMultisampledRTT(U)===!1?ye=pe.get(U).__webglMultisampledFramebuffer:ye=Dt,E.copy(U.viewport),I.copy(U.scissor),C=U.scissorTest}else E.copy(G).multiplyScalar(O).floor(),I.copy(W).multiplyScalar(O).floor(),C=J;if(be.bindFramebuffer(36160,ye)&&Ge.drawBuffers&&oe&&be.drawBuffers(U,ye),be.viewport(E),be.scissor(I),be.setScissorTest(C),et){const lt=pe.get(U.texture);ie.framebufferTexture2D(36160,36064,34069+ae,lt.__webglTexture,ge)}else if(at){const lt=pe.get(U.texture),Dt=ae||0;ie.framebufferTextureLayer(36160,36064,lt.__webglTexture,ge||0,Dt)}M=-1},this.readRenderTargetPixels=function(U,ae,ge,oe,ye,et,at){if(!(U&&U.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let pt=pe.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&at!==void 0&&(pt=pt[at]),pt){be.bindFramebuffer(36160,pt);try{const lt=U.texture,Dt=lt.format,Tt=lt.type;if(Dt!==Or&&se.convert(Dt)!==ie.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Et=Tt===Ec&&(We.has("EXT_color_buffer_half_float")||Ge.isWebGL2&&We.has("EXT_color_buffer_float"));if(Tt!==ma&&se.convert(Tt)!==ie.getParameter(35738)&&!(Tt===eo&&(Ge.isWebGL2||We.has("OES_texture_float")||We.has("WEBGL_color_buffer_float")))&&!Et){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ae>=0&&ae<=U.width-oe&&ge>=0&&ge<=U.height-ye&&ie.readPixels(ae,ge,oe,ye,se.convert(Dt),se.convert(Tt),et)}finally{const lt=b!==null?pe.get(b).__webglFramebuffer:null;be.bindFramebuffer(36160,lt)}}},this.copyFramebufferToTexture=function(U,ae,ge=0){const oe=Math.pow(2,-ge),ye=Math.floor(ae.image.width*oe),et=Math.floor(ae.image.height*oe);de.setTexture2D(ae,0),ie.copyTexSubImage2D(3553,ge,0,0,U.x,U.y,ye,et),be.unbindTexture()},this.copyTextureToTexture=function(U,ae,ge,oe=0){const ye=ae.image.width,et=ae.image.height,at=se.convert(ge.format),pt=se.convert(ge.type);de.setTexture2D(ge,0),ie.pixelStorei(37440,ge.flipY),ie.pixelStorei(37441,ge.premultiplyAlpha),ie.pixelStorei(3317,ge.unpackAlignment),ae.isDataTexture?ie.texSubImage2D(3553,oe,U.x,U.y,ye,et,at,pt,ae.image.data):ae.isCompressedTexture?ie.compressedTexSubImage2D(3553,oe,U.x,U.y,ae.mipmaps[0].width,ae.mipmaps[0].height,at,ae.mipmaps[0].data):ie.texSubImage2D(3553,oe,U.x,U.y,at,pt,ae.image),oe===0&&ge.generateMipmaps&&ie.generateMipmap(3553),be.unbindTexture()},this.copyTextureToTexture3D=function(U,ae,ge,oe,ye=0){if(y.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const et=U.max.x-U.min.x+1,at=U.max.y-U.min.y+1,pt=U.max.z-U.min.z+1,lt=se.convert(oe.format),Dt=se.convert(oe.type);let Tt;if(oe.isData3DTexture)de.setTexture3D(oe,0),Tt=32879;else if(oe.isDataArrayTexture)de.setTexture2DArray(oe,0),Tt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ie.pixelStorei(37440,oe.flipY),ie.pixelStorei(37441,oe.premultiplyAlpha),ie.pixelStorei(3317,oe.unpackAlignment);const Et=ie.getParameter(3314),on=ie.getParameter(32878),Ls=ie.getParameter(3316),xo=ie.getParameter(3315),vo=ie.getParameter(32877),Ri=ge.isCompressedTexture?ge.mipmaps[0]:ge.image;ie.pixelStorei(3314,Ri.width),ie.pixelStorei(32878,Ri.height),ie.pixelStorei(3316,U.min.x),ie.pixelStorei(3315,U.min.y),ie.pixelStorei(32877,U.min.z),ge.isDataTexture||ge.isData3DTexture?ie.texSubImage3D(Tt,ye,ae.x,ae.y,ae.z,et,at,pt,lt,Dt,Ri.data):ge.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ie.compressedTexSubImage3D(Tt,ye,ae.x,ae.y,ae.z,et,at,pt,lt,Ri.data)):ie.texSubImage3D(Tt,ye,ae.x,ae.y,ae.z,et,at,pt,lt,Dt,Ri),ie.pixelStorei(3314,Et),ie.pixelStorei(32878,on),ie.pixelStorei(3316,Ls),ie.pixelStorei(3315,xo),ie.pixelStorei(32877,vo),ye===0&&oe.generateMipmaps&&ie.generateMipmap(Tt),be.unbindTexture()},this.initTexture=function(U){U.isCubeTexture?de.setTextureCube(U,0):U.isData3DTexture?de.setTexture3D(U,0):U.isDataArrayTexture?de.setTexture2DArray(U,0):de.setTexture2D(U,0),be.unbindTexture()},this.resetState=function(){v=0,_=0,b=null,be.reset(),Pe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class E4 extends xb{}E4.prototype.isWebGL1Renderer=!0;class ty{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ue(e),this.density=n}clone(){return new ty(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class ny{constructor(e,n=1,i=1e3){this.isFog=!0,this.name="",this.color=new Ue(e),this.near=n,this.far=i}clone(){return new ny(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class iy extends Ot{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),n}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class ry{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=Nd,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=or()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,i){e*=this.stride,i*=n.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=n.array[i+r];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=or()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(n,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=or()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const wi=new B;class Ll{constructor(e,n,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=i,this.normalized=r===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,i=this.data.count;n<i;n++)wi.fromBufferAttribute(this,n),wi.applyMatrix4(e),this.setXYZ(n,wi.x,wi.y,wi.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)wi.fromBufferAttribute(this,n),wi.applyNormalMatrix(e),this.setXYZ(n,wi.x,wi.y,wi.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)wi.fromBufferAttribute(this,n),wi.transformDirection(e),this.setXYZ(n,wi.x,wi.y,wi.z);return this}setX(e,n){return this.normalized&&(n=$t(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=$t(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=$t(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=$t(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=to(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=to(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=to(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=to(n,this.array)),n}setXY(e,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=$t(n,this.array),i=$t(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this}setXYZ(e,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=$t(n,this.array),i=$t(i,this.array),r=$t(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,n,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=$t(n,this.array),i=$t(i,this.array),r=$t(r,this.array),s=$t(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[r+s])}return new jt(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ll(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class vb extends ni{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ue(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Su;const Ef=new B,bu=new B,Mu=new B,Tu=new ve,kf=new ve,k4=new ht,gm=new B,Cf=new B,ym=new B,ek=new ve,Ov=new ve,tk=new ve;class C4 extends Ot{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",Su===void 0){Su=new yt;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new ry(n,5);Su.setIndex([0,1,2,0,2,3]),Su.setAttribute("position",new Ll(i,3,0,!1)),Su.setAttribute("uv",new Ll(i,2,3,!1))}this.geometry=Su,this.material=e!==void 0?e:new vb,this.center=new ve(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),bu.setFromMatrixScale(this.matrixWorld),k4.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Mu.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&bu.multiplyScalar(-Mu.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;xm(gm.set(-.5,-.5,0),Mu,o,bu,r,s),xm(Cf.set(.5,-.5,0),Mu,o,bu,r,s),xm(ym.set(.5,.5,0),Mu,o,bu,r,s),ek.set(0,0),Ov.set(1,0),tk.set(1,1);let a=e.ray.intersectTriangle(gm,Cf,ym,!1,Ef);if(a===null&&(xm(Cf.set(-.5,.5,0),Mu,o,bu,r,s),Ov.set(0,1),a=e.ray.intersectTriangle(gm,ym,Cf,!1,Ef),a===null))return;const l=e.ray.origin.distanceTo(Ef);l<e.near||l>e.far||n.push({distance:l,point:Ef.clone(),uv:Fr.getUV(Ef,gm,Cf,ym,ek,Ov,tk,new ve),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function xm(t,e,n,i,r,s){Tu.subVectors(t,n).addScalar(.5).multiply(i),r!==void 0?(kf.x=s*Tu.x-r*Tu.y,kf.y=r*Tu.x+s*Tu.y):kf.copy(Tu),t.copy(e),t.x+=kf.x,t.y+=kf.y,t.applyMatrix4(k4)}const vm=new B,nk=new B;class A4 extends Ot{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let i=0,r=n.length;i<r;i++){const s=n[i];this.addLevel(s.object.clone(),s.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0){n=Math.abs(n);const i=this.levels;let r;for(r=0;r<i.length&&!(n<i[r].distance);r++);return i.splice(r,0,{distance:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let i,r;for(i=1,r=n.length;i<r&&!(e<n[i].distance);i++);return n[i-1].object}return null}raycast(e,n){if(this.levels.length>0){vm.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(vm);this.getObjectForDistance(r).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){vm.setFromMatrixPosition(e.matrixWorld),nk.setFromMatrixPosition(this.matrixWorld);const i=vm.distanceTo(nk)/e.zoom;n[0].object.visible=!0;let r,s;for(r=1,s=n.length;r<s&&i>=n[r].distance;r++)n[r-1].object.visible=!1,n[r].object.visible=!0;for(this._currentLevel=r-1;r<s;r++)n[r].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];n.object.levels.push({object:o.object.uuid,distance:o.distance})}return n}}const ik=new B,rk=new Ht,sk=new Ht,K$=new B,ok=new ht;class P4 extends Zn{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ht,this.bindMatrixInverse=new ht}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ht,n=this.geometry.attributes.skinWeight;for(let i=0,r=n.count;i<r;i++){e.fromBufferAttribute(n,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,n){const i=this.skeleton,r=this.geometry;rk.fromBufferAttribute(r.attributes.skinIndex,e),sk.fromBufferAttribute(r.attributes.skinWeight,e),ik.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const o=sk.getComponent(s);if(o!==0){const a=rk.getComponent(s);ok.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),n.addScaledVector(K$.copy(ik).applyMatrix4(ok),o)}}return n.applyMatrix4(this.bindMatrixInverse)}}class wb extends Ot{constructor(){super(),this.isBone=!0,this.type="Bone"}}class cc extends Fn{constructor(e=null,n=1,i=1,r,s,o,a,l,u=Dn,f=Dn,d,p){super(null,o,a,l,u,f,r,s,d,p),this.isDataTexture=!0,this.image={data:e,width:n,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const ak=new ht,Q$=new ht;class sy{constructor(e=[],n=[]){this.uuid=or(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new ht)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const i=new ht;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,n=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:Q$;ak.multiplyMatrices(a,n[s]),ak.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new sy(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=d4(e),e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const i=new cc(n,e,e,Or,eo);return i.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let n=0,i=this.bones.length;n<i;n++){const r=this.bones[n];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=n[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new wb),this.bones.push(o),this.boneInverses.push(new ht().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,i=this.boneInverses;for(let r=0,s=n.length;r<s;r++){const o=n[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class Cc extends jt{constructor(e,n,i,r=1){super(e,n,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const lk=new ht,uk=new ht,wm=[],Af=new Zn;class L4 extends Zn{constructor(e,n,i){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new Cc(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const i=this.matrixWorld,r=this.count;if(Af.geometry=this.geometry,Af.material=this.material,Af.material!==void 0)for(let s=0;s<r;s++){this.getMatrixAt(s,lk),uk.multiplyMatrices(i,lk),Af.matrixWorld=uk,Af.raycast(e,wm);for(let o=0,a=wm.length;o<a;o++){const l=wm[o];l.instanceId=s,l.object=this,n.push(l)}wm.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new Cc(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Li extends ni{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ue(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const ck=new B,fk=new B,dk=new ht,Bv=new lh,_m=new Ul;class ga extends Ot{constructor(e=new yt,n=new Li){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[0];for(let r=1,s=n.count;r<s;r++)ck.fromBufferAttribute(n,r-1),fk.fromBufferAttribute(n,r),i[r]=i[r-1],i[r]+=ck.distanceTo(fk);e.setAttribute("lineDistance",new Ze(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),_m.copy(i.boundingSphere),_m.applyMatrix4(r),_m.radius+=s,e.ray.intersectsSphere(_m)===!1)return;dk.copy(r).invert(),Bv.copy(e.ray).applyMatrix4(dk);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=new B,f=new B,d=new B,p=new B,m=this.isLineSegments?2:1,g=i.index,w=i.attributes.position;if(g!==null){const v=Math.max(0,o.start),_=Math.min(g.count,o.start+o.count);for(let b=v,M=_-1;b<M;b+=m){const k=g.getX(b),E=g.getX(b+1);if(u.fromBufferAttribute(w,k),f.fromBufferAttribute(w,E),Bv.distanceSqToSegment(u,f,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const C=e.ray.origin.distanceTo(p);C<e.near||C>e.far||n.push({distance:C,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else{const v=Math.max(0,o.start),_=Math.min(w.count,o.start+o.count);for(let b=v,M=_-1;b<M;b+=m){if(u.fromBufferAttribute(w,b),f.fromBufferAttribute(w,b+1),Bv.distanceSqToSegment(u,f,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const E=e.ray.origin.distanceTo(p);E<e.near||E>e.far||n.push({distance:E,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const hk=new B,pk=new B;class As extends ga{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[];for(let r=0,s=n.count;r<s;r+=2)hk.fromBufferAttribute(n,r),pk.fromBufferAttribute(n,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+hk.distanceTo(pk);e.setAttribute("lineDistance",new Ze(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class R4 extends ga{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class _b extends ni{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ue(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const mk=new ht,f_=new lh,Sm=new Ul,bm=new B;class I4 extends Ot{constructor(e=new yt,n=new _b){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Sm.copy(i.boundingSphere),Sm.applyMatrix4(r),Sm.radius+=s,e.ray.intersectsSphere(Sm)===!1)return;mk.copy(r).invert(),f_.copy(e.ray).applyMatrix4(mk);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=i.index,d=i.attributes.position;if(u!==null){const p=Math.max(0,o.start),m=Math.min(u.count,o.start+o.count);for(let g=p,y=m;g<y;g++){const w=u.getX(g);bm.fromBufferAttribute(d,w),gk(bm,w,l,r,e,n,this)}}else{const p=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);for(let g=p,y=m;g<y;g++)bm.fromBufferAttribute(d,g),gk(bm,g,l,r,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function gk(t,e,n,i,r,s,o){const a=f_.distanceSqToPoint(t);if(a<n){const l=new B;f_.closestPointToPoint(t,l),l.applyMatrix4(i);const u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class ej extends Fn{constructor(e,n,i,r,s,o,a,l,u){super(e,n,i,r,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Mn,this.magFilter=s!==void 0?s:Mn,this.generateMipmaps=!1;const f=this;function d(){f.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class tj extends Fn{constructor(e,n,i){super({width:e,height:n}),this.isFramebufferTexture=!0,this.format=i,this.magFilter=Dn,this.minFilter=Dn,this.generateMipmaps=!1,this.needsUpdate=!0}}class D4 extends Fn{constructor(e,n,i,r,s,o,a,l,u,f,d,p){super(null,o,a,l,u,f,r,s,d,p),this.isCompressedTexture=!0,this.image={width:n,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class z4 extends Fn{constructor(e,n,i,r,s,o,a,l,u){super(e,n,i,r,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class cs{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const i=this.getUtoTmapping(e);return this.getPoint(i,n)}getPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return n}getSpacedPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPointAt(i/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let i,r=this.getPoint(0),s=0;n.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),n.push(s),r=i;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const i=this.getLengths();let r=0;const s=i.length;let o;n?o=n:o=e*i[s-1];let a=0,l=s-1,u;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),u=i[r]-o,u<0)a=r+1;else if(u>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const f=i[r],p=i[r+1]-f,m=(o-f)/p;return(r+m)/(s-1)}getTangent(e,n){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=n||(o.isVector2?new ve:new B);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,n){const i=this.getUtoTmapping(e);return this.getTangent(i,n)}computeFrenetFrames(e,n){const i=new B,r=[],s=[],o=[],a=new B,l=new ht;for(let m=0;m<=e;m++){const g=m/e;r[m]=this.getTangentAt(g,new B)}s[0]=new B,o[0]=new B;let u=Number.MAX_VALUE;const f=Math.abs(r[0].x),d=Math.abs(r[0].y),p=Math.abs(r[0].z);f<=u&&(u=f,i.set(1,0,0)),d<=u&&(u=d,i.set(0,1,0)),p<=u&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(Tn(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,g))}o[m].crossVectors(r[m],s[m])}if(n===!0){let m=Math.acos(Tn(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(r[g],m*g)),o[g].crossVectors(r[g],s[g])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class oy extends cs{constructor(e=0,n=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,n){const i=n||new ve,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const f=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=l-this.aX,m=u-this.aY;l=p*f-m*d+this.aX,u=p*d+m*f+this.aY}return i.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class F4 extends oy{constructor(e,n,i,r,s,o){super(e,n,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function Sb(){let t=0,e=0,n=0,i=0;function r(s,o,a,l){t=s,e=a,n=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){r(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,f,d){let p=(o-s)/u-(a-s)/(u+f)+(a-o)/f,m=(a-o)/f-(l-o)/(f+d)+(l-a)/d;p*=f,m*=f,r(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return t+e*s+n*o+i*a}}}const Mm=new B,Uv=new Sb,Vv=new Sb,Hv=new Sb;class N4 extends cs{constructor(e=[],n=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=i,this.tension=r}getPoint(e,n=new B){const i=n,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,f;this.closed||a>0?u=r[(a-1)%s]:(Mm.subVectors(r[0],r[1]).add(r[0]),u=Mm);const d=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?f=r[(a+2)%s]:(Mm.subVectors(r[s-1],r[s-2]).add(r[s-1]),f=Mm),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let g=Math.pow(u.distanceToSquared(d),m),y=Math.pow(d.distanceToSquared(p),m),w=Math.pow(p.distanceToSquared(f),m);y<1e-4&&(y=1),g<1e-4&&(g=y),w<1e-4&&(w=y),Uv.initNonuniformCatmullRom(u.x,d.x,p.x,f.x,g,y,w),Vv.initNonuniformCatmullRom(u.y,d.y,p.y,f.y,g,y,w),Hv.initNonuniformCatmullRom(u.z,d.z,p.z,f.z,g,y,w)}else this.curveType==="catmullrom"&&(Uv.initCatmullRom(u.x,d.x,p.x,f.x,this.tension),Vv.initCatmullRom(u.y,d.y,p.y,f.y,this.tension),Hv.initCatmullRom(u.z,d.z,p.z,f.z,this.tension));return i.set(Uv.calc(l),Vv.calc(l),Hv.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new B().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function yk(t,e,n,i,r){const s=(i-e)*.5,o=(r-n)*.5,a=t*t,l=t*a;return(2*n-2*i+s+o)*l+(-3*n+3*i-2*s-o)*a+s*t+n}function nj(t,e){const n=1-t;return n*n*e}function ij(t,e){return 2*(1-t)*t*e}function rj(t,e){return t*t*e}function rd(t,e,n,i){return nj(t,e)+ij(t,n)+rj(t,i)}function sj(t,e){const n=1-t;return n*n*n*e}function oj(t,e){const n=1-t;return 3*n*n*t*e}function aj(t,e){return 3*(1-t)*t*t*e}function lj(t,e){return t*t*t*e}function sd(t,e,n,i,r){return sj(t,e)+oj(t,n)+aj(t,i)+lj(t,r)}class bb extends cs{constructor(e=new ve,n=new ve,i=new ve,r=new ve){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new ve){const i=n,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(sd(e,r.x,s.x,o.x,a.x),sd(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class O4 extends cs{constructor(e=new B,n=new B,i=new B,r=new B){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new B){const i=n,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(sd(e,r.x,s.x,o.x,a.x),sd(e,r.y,s.y,o.y,a.y),sd(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ay extends cs{constructor(e=new ve,n=new ve){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new ve){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n){const i=n||new ve;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class B4 extends cs{constructor(e=new B,n=new B){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new B){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Mb extends cs{constructor(e=new ve,n=new ve,i=new ve){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new ve){const i=n,r=this.v0,s=this.v1,o=this.v2;return i.set(rd(e,r.x,s.x,o.x),rd(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Tb extends cs{constructor(e=new B,n=new B,i=new B){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new B){const i=n,r=this.v0,s=this.v1,o=this.v2;return i.set(rd(e,r.x,s.x,o.x),rd(e,r.y,s.y,o.y),rd(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Eb extends cs{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new ve){const i=n,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],u=r[o],f=r[o>r.length-2?r.length-1:o+1],d=r[o>r.length-3?r.length-1:o+2];return i.set(yk(a,l.x,u.x,f.x,d.x),yk(a,l.y,u.y,f.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new ve().fromArray(r))}return this}}var kb=Object.freeze({__proto__:null,ArcCurve:F4,CatmullRomCurve3:N4,CubicBezierCurve:bb,CubicBezierCurve3:O4,EllipseCurve:oy,LineCurve:ay,LineCurve3:B4,QuadraticBezierCurve:Mb,QuadraticBezierCurve3:Tb,SplineCurve:Eb});class U4 extends cs{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);e.equals(n)||this.curves.push(new ay(n,e))}getPoint(e,n){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let i=0,r=this.curves.length;i<r;i++)n+=this.curves[i].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const f=l[u];i&&i.equals(f)||(n.push(f),i=f)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,i=this.curves.length;n<i;n++){const r=this.curves[n];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(new kb[r.type]().fromJSON(r))}return this}}class Ud extends U4{constructor(e){super(),this.type="Path",this.currentPoint=new ve,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,i=e.length;n<i;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const i=new ay(this.currentPoint.clone(),new ve(e,n));return this.curves.push(i),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,i,r){const s=new Mb(this.currentPoint.clone(),new ve(e,n),new ve(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,n,i,r,s,o){const a=new bb(this.currentPoint.clone(),new ve(e,n),new ve(i,r),new ve(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),i=new Eb(n);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,i,r,s,o),this}absarc(e,n,i,r,s,o){return this.absellipse(e,n,i,i,r,s,o),this}ellipse(e,n,i,r,s,o,a,l){const u=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+u,n+f,i,r,s,o,a,l),this}absellipse(e,n,i,r,s,o,a,l){const u=new oy(e,n,i,r,s,o,a,l);if(this.curves.length>0){const d=u.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(u);const f=u.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Vc extends yt{constructor(e=[new ve(0,-.5),new ve(.5,0),new ve(0,.5)],n=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:i,phiLength:r},n=Math.floor(n),r=Tn(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],f=1/n,d=new B,p=new ve,m=new B,g=new B,y=new B;let w=0,v=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:w=e[_+1].x-e[_].x,v=e[_+1].y-e[_].y,m.x=v*1,m.y=-w,m.z=v*0,y.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(y.x,y.y,y.z);break;default:w=e[_+1].x-e[_].x,v=e[_+1].y-e[_].y,m.x=v*1,m.y=-w,m.z=v*0,g.copy(m),m.x+=y.x,m.y+=y.y,m.z+=y.z,m.normalize(),l.push(m.x,m.y,m.z),y.copy(g)}for(let _=0;_<=n;_++){const b=i+_*f*r,M=Math.sin(b),k=Math.cos(b);for(let E=0;E<=e.length-1;E++){d.x=e[E].x*M,d.y=e[E].y,d.z=e[E].x*k,o.push(d.x,d.y,d.z),p.x=_/n,p.y=E/(e.length-1),a.push(p.x,p.y);const I=l[3*E+0]*M,C=l[3*E+1],L=l[3*E+0]*k;u.push(I,C,L)}}for(let _=0;_<n;_++)for(let b=0;b<e.length-1;b++){const M=b+_*e.length,k=M,E=M+e.length,I=M+e.length+1,C=M+1;s.push(k,E,C),s.push(I,C,E)}this.setIndex(s),this.setAttribute("position",new Ze(o,3)),this.setAttribute("uv",new Ze(a,2)),this.setAttribute("normal",new Ze(u,3))}static fromJSON(e){return new Vc(e.points,e.segments,e.phiStart,e.phiLength)}}class dh extends Vc{constructor(e=1,n=1,i=4,r=8){const s=new Ud;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:n,capSegments:i,radialSegments:r}}static fromJSON(e){return new dh(e.radius,e.length,e.capSegments,e.radialSegments)}}class hh extends yt{constructor(e=1,n=8,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:i,thetaLength:r},n=Math.max(3,n);const s=[],o=[],a=[],l=[],u=new B,f=new ve;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,p=3;d<=n;d++,p+=3){const m=i+d/n*r;u.x=e*Math.cos(m),u.y=e*Math.sin(m),o.push(u.x,u.y,u.z),a.push(0,0,1),f.x=(o[p]/e+1)/2,f.y=(o[p+1]/e+1)/2,l.push(f.x,f.y)}for(let d=1;d<=n;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new Ze(o,3)),this.setAttribute("normal",new Ze(a,3)),this.setAttribute("uv",new Ze(l,2))}static fromJSON(e){return new hh(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Vl extends yt{constructor(e=1,n=1,i=1,r=8,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;r=Math.floor(r),s=Math.floor(s);const f=[],d=[],p=[],m=[];let g=0;const y=[],w=i/2;let v=0;_(),o===!1&&(e>0&&b(!0),n>0&&b(!1)),this.setIndex(f),this.setAttribute("position",new Ze(d,3)),this.setAttribute("normal",new Ze(p,3)),this.setAttribute("uv",new Ze(m,2));function _(){const M=new B,k=new B;let E=0;const I=(n-e)/i;for(let C=0;C<=s;C++){const L=[],R=C/s,O=R*(n-e)+e;for(let q=0;q<=r;q++){const j=q/r,G=j*l+a,W=Math.sin(G),J=Math.cos(G);k.x=O*W,k.y=-R*i+w,k.z=O*J,d.push(k.x,k.y,k.z),M.set(W,I,J).normalize(),p.push(M.x,M.y,M.z),m.push(j,1-R),L.push(g++)}y.push(L)}for(let C=0;C<r;C++)for(let L=0;L<s;L++){const R=y[L][C],O=y[L+1][C],q=y[L+1][C+1],j=y[L][C+1];f.push(R,O,j),f.push(O,q,j),E+=6}u.addGroup(v,E,0),v+=E}function b(M){const k=g,E=new ve,I=new B;let C=0;const L=M===!0?e:n,R=M===!0?1:-1;for(let q=1;q<=r;q++)d.push(0,w*R,0),p.push(0,R,0),m.push(.5,.5),g++;const O=g;for(let q=0;q<=r;q++){const G=q/r*l+a,W=Math.cos(G),J=Math.sin(G);I.x=L*J,I.y=w*R,I.z=L*W,d.push(I.x,I.y,I.z),p.push(0,R,0),E.x=W*.5+.5,E.y=J*.5*R+.5,m.push(E.x,E.y),g++}for(let q=0;q<r;q++){const j=k+q,G=O+q;M===!0?f.push(G,G+1,j):f.push(G+1,G,j),C+=3}u.addGroup(v,C,M===!0?1:2),v+=C}}static fromJSON(e){return new Vl(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ph extends Vl{constructor(e=1,n=1,i=8,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,n,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new ph(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class go extends yt{constructor(e=[],n=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:i,detail:r};const s=[],o=[];a(r),u(i),f(),this.setAttribute("position",new Ze(s,3)),this.setAttribute("normal",new Ze(s.slice(),3)),this.setAttribute("uv",new Ze(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(_){const b=new B,M=new B,k=new B;for(let E=0;E<n.length;E+=3)m(n[E+0],b),m(n[E+1],M),m(n[E+2],k),l(b,M,k,_)}function l(_,b,M,k){const E=k+1,I=[];for(let C=0;C<=E;C++){I[C]=[];const L=_.clone().lerp(M,C/E),R=b.clone().lerp(M,C/E),O=E-C;for(let q=0;q<=O;q++)q===0&&C===E?I[C][q]=L:I[C][q]=L.clone().lerp(R,q/O)}for(let C=0;C<E;C++)for(let L=0;L<2*(E-C)-1;L++){const R=Math.floor(L/2);L%2===0?(p(I[C][R+1]),p(I[C+1][R]),p(I[C][R])):(p(I[C][R+1]),p(I[C+1][R+1]),p(I[C+1][R]))}}function u(_){const b=new B;for(let M=0;M<s.length;M+=3)b.x=s[M+0],b.y=s[M+1],b.z=s[M+2],b.normalize().multiplyScalar(_),s[M+0]=b.x,s[M+1]=b.y,s[M+2]=b.z}function f(){const _=new B;for(let b=0;b<s.length;b+=3){_.x=s[b+0],_.y=s[b+1],_.z=s[b+2];const M=w(_)/2/Math.PI+.5,k=v(_)/Math.PI+.5;o.push(M,1-k)}g(),d()}function d(){for(let _=0;_<o.length;_+=6){const b=o[_+0],M=o[_+2],k=o[_+4],E=Math.max(b,M,k),I=Math.min(b,M,k);E>.9&&I<.1&&(b<.2&&(o[_+0]+=1),M<.2&&(o[_+2]+=1),k<.2&&(o[_+4]+=1))}}function p(_){s.push(_.x,_.y,_.z)}function m(_,b){const M=_*3;b.x=e[M+0],b.y=e[M+1],b.z=e[M+2]}function g(){const _=new B,b=new B,M=new B,k=new B,E=new ve,I=new ve,C=new ve;for(let L=0,R=0;L<s.length;L+=9,R+=6){_.set(s[L+0],s[L+1],s[L+2]),b.set(s[L+3],s[L+4],s[L+5]),M.set(s[L+6],s[L+7],s[L+8]),E.set(o[R+0],o[R+1]),I.set(o[R+2],o[R+3]),C.set(o[R+4],o[R+5]),k.copy(_).add(b).add(M).divideScalar(3);const O=w(k);y(E,R+0,_,O),y(I,R+2,b,O),y(C,R+4,M,O)}}function y(_,b,M,k){k<0&&_.x===1&&(o[b]=_.x-1),M.x===0&&M.z===0&&(o[b]=k/2/Math.PI+.5)}function w(_){return Math.atan2(_.z,-_.x)}function v(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}static fromJSON(e){return new go(e.vertices,e.indices,e.radius,e.details)}}class mh extends go{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new mh(e.radius,e.detail)}}const Tm=new B,Em=new B,Wv=new B,km=new Fr;class V4 extends yt{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const r=Math.pow(10,4),s=Math.cos(yl*n),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],f=["a","b","c"],d=new Array(3),p={},m=[];for(let g=0;g<l;g+=3){o?(u[0]=o.getX(g),u[1]=o.getX(g+1),u[2]=o.getX(g+2)):(u[0]=g,u[1]=g+1,u[2]=g+2);const{a:y,b:w,c:v}=km;if(y.fromBufferAttribute(a,u[0]),w.fromBufferAttribute(a,u[1]),v.fromBufferAttribute(a,u[2]),km.getNormal(Wv),d[0]=`${Math.round(y.x*r)},${Math.round(y.y*r)},${Math.round(y.z*r)}`,d[1]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,d[2]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let _=0;_<3;_++){const b=(_+1)%3,M=d[_],k=d[b],E=km[f[_]],I=km[f[b]],C=`${M}_${k}`,L=`${k}_${M}`;L in p&&p[L]?(Wv.dot(p[L].normal)<=s&&(m.push(E.x,E.y,E.z),m.push(I.x,I.y,I.z)),p[L]=null):C in p||(p[C]={index0:u[_],index1:u[b],normal:Wv.clone()})}}for(const g in p)if(p[g]){const{index0:y,index1:w}=p[g];Tm.fromBufferAttribute(a,y),Em.fromBufferAttribute(a,w),m.push(Tm.x,Tm.y,Tm.z),m.push(Em.x,Em.y,Em.z)}this.setAttribute("position",new Ze(m,3))}}}class wl extends Ud{constructor(e){super(e),this.uuid=or(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let i=0,r=this.holes.length;i<r;i++)n[i]=this.holes[i].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,i=this.holes.length;n<i;n++){const r=this.holes[n];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(new Ud().fromJSON(r))}return this}}const uj={triangulate:function(t,e,n=2){const i=e&&e.length,r=i?e[0]*n:t.length;let s=H4(t,0,r,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,f,d,p,m;if(i&&(s=pj(t,e,s,n)),t.length>80*n){a=u=t[0],l=f=t[1];for(let g=n;g<r;g+=n)d=t[g],p=t[g+1],d<a&&(a=d),p<l&&(l=p),d>u&&(u=d),p>f&&(f=p);m=Math.max(u-a,f-l),m=m!==0?1/m:0}return Vd(s,o,n,a,l,m),o}};function H4(t,e,n,i,r){let s,o;if(r===Tj(t,e,n,i)>0)for(s=e;s<n;s+=i)o=xk(s,t[s],t[s+1],o);else for(s=n-i;s>=e;s-=i)o=xk(s,t[s],t[s+1],o);return o&&ly(o,o.next)&&(Wd(o),o=o.next),o}function ya(t,e){if(!t)return t;e||(e=t);let n=t,i;do if(i=!1,!n.steiner&&(ly(n,n.next)||hn(n.prev,n,n.next)===0)){if(Wd(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function Vd(t,e,n,i,r,s,o){if(!t)return;!o&&s&&vj(t,i,r,s);let a=t,l,u;for(;t.prev!==t.next;){if(l=t.prev,u=t.next,s?fj(t,i,r,s):cj(t)){e.push(l.i/n),e.push(t.i/n),e.push(u.i/n),Wd(t),t=u.next,a=u.next;continue}if(t=u,t===a){o?o===1?(t=dj(ya(t),e,n),Vd(t,e,n,i,r,s,2)):o===2&&hj(t,e,n,i,r,s):Vd(ya(t),e,n,i,r,s,1);break}}}function cj(t){const e=t.prev,n=t,i=t.next;if(hn(e,n,i)>=0)return!1;let r=t.next.next;for(;r!==t.prev;){if(ec(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&hn(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function fj(t,e,n,i){const r=t.prev,s=t,o=t.next;if(hn(r,s,o)>=0)return!1;const a=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,l=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,u=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,f=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,d=d_(a,l,e,n,i),p=d_(u,f,e,n,i);let m=t.prevZ,g=t.nextZ;for(;m&&m.z>=d&&g&&g.z<=p;){if(m!==t.prev&&m!==t.next&&ec(r.x,r.y,s.x,s.y,o.x,o.y,m.x,m.y)&&hn(m.prev,m,m.next)>=0||(m=m.prevZ,g!==t.prev&&g!==t.next&&ec(r.x,r.y,s.x,s.y,o.x,o.y,g.x,g.y)&&hn(g.prev,g,g.next)>=0))return!1;g=g.nextZ}for(;m&&m.z>=d;){if(m!==t.prev&&m!==t.next&&ec(r.x,r.y,s.x,s.y,o.x,o.y,m.x,m.y)&&hn(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;g&&g.z<=p;){if(g!==t.prev&&g!==t.next&&ec(r.x,r.y,s.x,s.y,o.x,o.y,g.x,g.y)&&hn(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function dj(t,e,n){let i=t;do{const r=i.prev,s=i.next.next;!ly(r,s)&&W4(r,i,i.next,s)&&Hd(r,s)&&Hd(s,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(s.i/n),Wd(i),Wd(i.next),i=t=s),i=i.next}while(i!==t);return ya(i)}function hj(t,e,n,i,r,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Sj(o,a)){let l=G4(o,a);o=ya(o,o.next),l=ya(l,l.next),Vd(o,e,n,i,r,s),Vd(l,e,n,i,r,s);return}a=a.next}o=o.next}while(o!==t)}function pj(t,e,n,i){const r=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:t.length,u=H4(t,a,l,i,!1),u===u.next&&(u.steiner=!0),r.push(_j(u));for(r.sort(mj),s=0;s<r.length;s++)gj(r[s],n),n=ya(n,n.next);return n}function mj(t,e){return t.x-e.x}function gj(t,e){if(e=yj(t,e),e){const n=G4(e,t);ya(e,e.next),ya(n,n.next)}}function yj(t,e){let n=e;const i=t.x,r=t.y;let s=-1/0,o;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const p=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(p<=i&&p>s){if(s=p,p===i){if(r===n.y)return n;if(r===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!o)return null;if(i===s)return o;const a=o,l=o.x,u=o.y;let f=1/0,d;n=o;do i>=n.x&&n.x>=l&&i!==n.x&&ec(r<u?i:s,r,l,u,r<u?s:i,r,n.x,n.y)&&(d=Math.abs(r-n.y)/(i-n.x),Hd(n,t)&&(d<f||d===f&&(n.x>o.x||n.x===o.x&&xj(o,n)))&&(o=n,f=d)),n=n.next;while(n!==a);return o}function xj(t,e){return hn(t.prev,t,e.prev)<0&&hn(e.next,t,t.next)<0}function vj(t,e,n,i){let r=t;do r.z===null&&(r.z=d_(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,wj(r)}function wj(t){let e,n,i,r,s,o,a,l,u=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,i=n,a=0,e=0;e<u&&(a++,i=i.nextZ,!!i);e++);for(l=u;a>0||l>0&&i;)a!==0&&(l===0||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,u*=2}while(o>1);return t}function d_(t,e,n,i,r){return t=32767*(t-n)*r,e=32767*(e-i)*r,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function _j(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function ec(t,e,n,i,r,s,o,a){return(r-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(i-a)-(n-o)*(e-a)>=0&&(n-o)*(s-a)-(r-o)*(i-a)>=0}function Sj(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!bj(t,e)&&(Hd(t,e)&&Hd(e,t)&&Mj(t,e)&&(hn(t.prev,t,e.prev)||hn(t,e.prev,e))||ly(t,e)&&hn(t.prev,t,t.next)>0&&hn(e.prev,e,e.next)>0)}function hn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function ly(t,e){return t.x===e.x&&t.y===e.y}function W4(t,e,n,i){const r=Am(hn(t,e,n)),s=Am(hn(t,e,i)),o=Am(hn(n,i,t)),a=Am(hn(n,i,e));return!!(r!==s&&o!==a||r===0&&Cm(t,n,e)||s===0&&Cm(t,i,e)||o===0&&Cm(n,t,i)||a===0&&Cm(n,e,i))}function Cm(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Am(t){return t>0?1:t<0?-1:0}function bj(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&W4(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Hd(t,e){return hn(t.prev,t,t.next)<0?hn(t,e,t.next)>=0&&hn(t,t.prev,e)>=0:hn(t,e,t.prev)<0||hn(t,t.next,e)<0}function Mj(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function G4(t,e){const n=new h_(t.i,t.x,t.y),i=new h_(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function xk(t,e,n,i){const r=new h_(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Wd(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function h_(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Tj(t,e,n,i){let r=0;for(let s=e,o=n-i;s<n;s+=i)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}class Cs{static area(e){const n=e.length;let i=0;for(let r=n-1,s=0;s<n;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Cs.area(e)<0}static triangulateShape(e,n){const i=[],r=[],s=[];vk(e),wk(i,e);let o=e.length;n.forEach(vk);for(let l=0;l<n.length;l++)r.push(o),o+=n[l].length,wk(i,n[l]);const a=uj.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function vk(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function wk(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class gh extends yt{constructor(e=new wl([new ve(.5,.5),new ve(-.5,.5),new ve(-.5,-.5),new ve(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new Ze(r,3)),this.setAttribute("uv",new Ze(s,2)),this.computeVertexNormals();function o(a){const l=[],u=n.curveSegments!==void 0?n.curveSegments:12,f=n.steps!==void 0?n.steps:1,d=n.depth!==void 0?n.depth:1;let p=n.bevelEnabled!==void 0?n.bevelEnabled:!0,m=n.bevelThickness!==void 0?n.bevelThickness:.2,g=n.bevelSize!==void 0?n.bevelSize:m-.1,y=n.bevelOffset!==void 0?n.bevelOffset:0,w=n.bevelSegments!==void 0?n.bevelSegments:3;const v=n.extrudePath,_=n.UVGenerator!==void 0?n.UVGenerator:Ej;let b,M=!1,k,E,I,C;v&&(b=v.getSpacedPoints(f),M=!0,p=!1,k=v.computeFrenetFrames(f,!1),E=new B,I=new B,C=new B),p||(w=0,m=0,g=0,y=0);const L=a.extractPoints(u);let R=L.shape;const O=L.holes;if(!Cs.isClockWise(R)){R=R.reverse();for(let pe=0,de=O.length;pe<de;pe++){const Ae=O[pe];Cs.isClockWise(Ae)&&(O[pe]=Ae.reverse())}}const j=Cs.triangulateShape(R,O),G=R;for(let pe=0,de=O.length;pe<de;pe++){const Ae=O[pe];R=R.concat(Ae)}function W(pe,de,Ae){return de||console.error("THREE.ExtrudeGeometry: vec does not exist"),de.clone().multiplyScalar(Ae).add(pe)}const J=R.length,re=j.length;function D(pe,de,Ae){let qe,Ie,ot;const it=pe.x-de.x,Qe=pe.y-de.y,kt=Ae.x-pe.x,It=Ae.y-pe.y,$=it*it+Qe*Qe,N=it*It-Qe*kt;if(Math.abs(N)>Number.EPSILON){const fe=Math.sqrt($),_e=Math.sqrt(kt*kt+It*It),Z=de.x-Qe/fe,le=de.y+it/fe,Te=Ae.x-It/_e,se=Ae.y+kt/_e,Pe=((Te-Z)*It-(se-le)*kt)/(it*It-Qe*kt);qe=Z+it*Pe-pe.x,Ie=le+Qe*Pe-pe.y;const Le=qe*qe+Ie*Ie;if(Le<=2)return new ve(qe,Ie);ot=Math.sqrt(Le/2)}else{let fe=!1;it>Number.EPSILON?kt>Number.EPSILON&&(fe=!0):it<-Number.EPSILON?kt<-Number.EPSILON&&(fe=!0):Math.sign(Qe)===Math.sign(It)&&(fe=!0),fe?(qe=-Qe,Ie=it,ot=Math.sqrt($)):(qe=it,Ie=Qe,ot=Math.sqrt($/2))}return new ve(qe/ot,Ie/ot)}const F=[];for(let pe=0,de=G.length,Ae=de-1,qe=pe+1;pe<de;pe++,Ae++,qe++)Ae===de&&(Ae=0),qe===de&&(qe=0),F[pe]=D(G[pe],G[Ae],G[qe]);const A=[];let X,Y=F.concat();for(let pe=0,de=O.length;pe<de;pe++){const Ae=O[pe];X=[];for(let qe=0,Ie=Ae.length,ot=Ie-1,it=qe+1;qe<Ie;qe++,ot++,it++)ot===Ie&&(ot=0),it===Ie&&(it=0),X[qe]=D(Ae[qe],Ae[ot],Ae[it]);A.push(X),Y=Y.concat(X)}for(let pe=0;pe<w;pe++){const de=pe/w,Ae=m*Math.cos(de*Math.PI/2),qe=g*Math.sin(de*Math.PI/2)+y;for(let Ie=0,ot=G.length;Ie<ot;Ie++){const it=W(G[Ie],F[Ie],qe);Ne(it.x,it.y,-Ae)}for(let Ie=0,ot=O.length;Ie<ot;Ie++){const it=O[Ie];X=A[Ie];for(let Qe=0,kt=it.length;Qe<kt;Qe++){const It=W(it[Qe],X[Qe],qe);Ne(It.x,It.y,-Ae)}}}const z=g+y;for(let pe=0;pe<J;pe++){const de=p?W(R[pe],Y[pe],z):R[pe];M?(I.copy(k.normals[0]).multiplyScalar(de.x),E.copy(k.binormals[0]).multiplyScalar(de.y),C.copy(b[0]).add(I).add(E),Ne(C.x,C.y,C.z)):Ne(de.x,de.y,0)}for(let pe=1;pe<=f;pe++)for(let de=0;de<J;de++){const Ae=p?W(R[de],Y[de],z):R[de];M?(I.copy(k.normals[pe]).multiplyScalar(Ae.x),E.copy(k.binormals[pe]).multiplyScalar(Ae.y),C.copy(b[pe]).add(I).add(E),Ne(C.x,C.y,C.z)):Ne(Ae.x,Ae.y,d/f*pe)}for(let pe=w-1;pe>=0;pe--){const de=pe/w,Ae=m*Math.cos(de*Math.PI/2),qe=g*Math.sin(de*Math.PI/2)+y;for(let Ie=0,ot=G.length;Ie<ot;Ie++){const it=W(G[Ie],F[Ie],qe);Ne(it.x,it.y,d+Ae)}for(let Ie=0,ot=O.length;Ie<ot;Ie++){const it=O[Ie];X=A[Ie];for(let Qe=0,kt=it.length;Qe<kt;Qe++){const It=W(it[Qe],X[Qe],qe);M?Ne(It.x,It.y+b[f-1].y,b[f-1].x+Ae):Ne(It.x,It.y,d+Ae)}}}xe(),Ce();function xe(){const pe=r.length/3;if(p){let de=0,Ae=J*de;for(let qe=0;qe<re;qe++){const Ie=j[qe];We(Ie[2]+Ae,Ie[1]+Ae,Ie[0]+Ae)}de=f+w*2,Ae=J*de;for(let qe=0;qe<re;qe++){const Ie=j[qe];We(Ie[0]+Ae,Ie[1]+Ae,Ie[2]+Ae)}}else{for(let de=0;de<re;de++){const Ae=j[de];We(Ae[2],Ae[1],Ae[0])}for(let de=0;de<re;de++){const Ae=j[de];We(Ae[0]+J*f,Ae[1]+J*f,Ae[2]+J*f)}}i.addGroup(pe,r.length/3-pe,0)}function Ce(){const pe=r.length/3;let de=0;ie(G,de),de+=G.length;for(let Ae=0,qe=O.length;Ae<qe;Ae++){const Ie=O[Ae];ie(Ie,de),de+=Ie.length}i.addGroup(pe,r.length/3-pe,1)}function ie(pe,de){let Ae=pe.length;for(;--Ae>=0;){const qe=Ae;let Ie=Ae-1;Ie<0&&(Ie=pe.length-1);for(let ot=0,it=f+w*2;ot<it;ot++){const Qe=J*ot,kt=J*(ot+1),It=de+qe+Qe,$=de+Ie+Qe,N=de+Ie+kt,fe=de+qe+kt;Ge(It,$,N,fe)}}}function Ne(pe,de,Ae){l.push(pe),l.push(de),l.push(Ae)}function We(pe,de,Ae){be(pe),be(de),be(Ae);const qe=r.length/3,Ie=_.generateTopUV(i,r,qe-3,qe-2,qe-1);$e(Ie[0]),$e(Ie[1]),$e(Ie[2])}function Ge(pe,de,Ae,qe){be(pe),be(de),be(qe),be(de),be(Ae),be(qe);const Ie=r.length/3,ot=_.generateSideWallUV(i,r,Ie-6,Ie-3,Ie-2,Ie-1);$e(ot[0]),$e(ot[1]),$e(ot[3]),$e(ot[1]),$e(ot[2]),$e(ot[3])}function be(pe){r.push(l[pe*3+0]),r.push(l[pe*3+1]),r.push(l[pe*3+2])}function $e(pe){s.push(pe.x),s.push(pe.y)}}}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,i=this.parameters.options;return kj(n,i,e)}static fromJSON(e,n){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=n[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new kb[r.type]().fromJSON(r)),new gh(i,e.options)}}const Ej={generateTopUV:function(t,e,n,i,r){const s=e[n*3],o=e[n*3+1],a=e[i*3],l=e[i*3+1],u=e[r*3],f=e[r*3+1];return[new ve(s,o),new ve(a,l),new ve(u,f)]},generateSideWallUV:function(t,e,n,i,r,s){const o=e[n*3],a=e[n*3+1],l=e[n*3+2],u=e[i*3],f=e[i*3+1],d=e[i*3+2],p=e[r*3],m=e[r*3+1],g=e[r*3+2],y=e[s*3],w=e[s*3+1],v=e[s*3+2];return Math.abs(a-f)<Math.abs(o-u)?[new ve(o,1-l),new ve(u,1-d),new ve(p,1-g),new ve(y,1-v)]:[new ve(a,1-l),new ve(f,1-d),new ve(m,1-g),new ve(w,1-v)]}};function kj(t,e,n){if(n.shapes=[],Array.isArray(t))for(let i=0,r=t.length;i<r;i++){const s=t[i];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class yh extends go{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new yh(e.radius,e.detail)}}class Hc extends go{constructor(e=1,n=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Hc(e.radius,e.detail)}}class xh extends yt{constructor(e=.5,n=1,i=8,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],u=[],f=[];let d=e;const p=(n-e)/r,m=new B,g=new ve;for(let y=0;y<=r;y++){for(let w=0;w<=i;w++){const v=s+w/i*o;m.x=d*Math.cos(v),m.y=d*Math.sin(v),l.push(m.x,m.y,m.z),u.push(0,0,1),g.x=(m.x/n+1)/2,g.y=(m.y/n+1)/2,f.push(g.x,g.y)}d+=p}for(let y=0;y<r;y++){const w=y*(i+1);for(let v=0;v<i;v++){const _=v+w,b=_,M=_+i+1,k=_+i+2,E=_+1;a.push(b,M,E),a.push(M,k,E)}}this.setIndex(a),this.setAttribute("position",new Ze(l,3)),this.setAttribute("normal",new Ze(u,3)),this.setAttribute("uv",new Ze(f,2))}static fromJSON(e){return new xh(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class vh extends yt{constructor(e=new wl([new ve(0,.5),new ve(-.5,-.5),new ve(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let f=0;f<e.length;f++)u(e[f]),this.addGroup(a,l,f),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new Ze(r,3)),this.setAttribute("normal",new Ze(s,3)),this.setAttribute("uv",new Ze(o,2));function u(f){const d=r.length/3,p=f.extractPoints(n);let m=p.shape;const g=p.holes;Cs.isClockWise(m)===!1&&(m=m.reverse());for(let w=0,v=g.length;w<v;w++){const _=g[w];Cs.isClockWise(_)===!0&&(g[w]=_.reverse())}const y=Cs.triangulateShape(m,g);for(let w=0,v=g.length;w<v;w++){const _=g[w];m=m.concat(_)}for(let w=0,v=m.length;w<v;w++){const _=m[w];r.push(_.x,_.y,0),s.push(0,0,1),o.push(_.x,_.y)}for(let w=0,v=y.length;w<v;w++){const _=y[w],b=_[0]+d,M=_[1]+d,k=_[2]+d;i.push(b,M,k),l+=3}}}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return Cj(n,e)}static fromJSON(e,n){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=n[e.shapes[r]];i.push(o)}return new vh(i,e.curveSegments)}}function Cj(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}class Hl extends yt{constructor(e=1,n=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let u=0;const f=[],d=new B,p=new B,m=[],g=[],y=[],w=[];for(let v=0;v<=i;v++){const _=[],b=v/i;let M=0;v==0&&o==0?M=.5/n:v==i&&l==Math.PI&&(M=-.5/n);for(let k=0;k<=n;k++){const E=k/n;d.x=-e*Math.cos(r+E*s)*Math.sin(o+b*a),d.y=e*Math.cos(o+b*a),d.z=e*Math.sin(r+E*s)*Math.sin(o+b*a),g.push(d.x,d.y,d.z),p.copy(d).normalize(),y.push(p.x,p.y,p.z),w.push(E+M,1-b),_.push(u++)}f.push(_)}for(let v=0;v<i;v++)for(let _=0;_<n;_++){const b=f[v][_+1],M=f[v][_],k=f[v+1][_],E=f[v+1][_+1];(v!==0||o>0)&&m.push(b,M,E),(v!==i-1||l<Math.PI)&&m.push(M,k,E)}this.setIndex(m),this.setAttribute("position",new Ze(g,3)),this.setAttribute("normal",new Ze(y,3)),this.setAttribute("uv",new Ze(w,2))}static fromJSON(e){return new Hl(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class wh extends go{constructor(e=1,n=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new wh(e.radius,e.detail)}}class _h extends yt{constructor(e=1,n=.4,i=8,r=6,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],u=[],f=new B,d=new B,p=new B;for(let m=0;m<=i;m++)for(let g=0;g<=r;g++){const y=g/r*s,w=m/i*Math.PI*2;d.x=(e+n*Math.cos(w))*Math.cos(y),d.y=(e+n*Math.cos(w))*Math.sin(y),d.z=n*Math.sin(w),a.push(d.x,d.y,d.z),f.x=e*Math.cos(y),f.y=e*Math.sin(y),p.subVectors(d,f).normalize(),l.push(p.x,p.y,p.z),u.push(g/r),u.push(m/i)}for(let m=1;m<=i;m++)for(let g=1;g<=r;g++){const y=(r+1)*m+g-1,w=(r+1)*(m-1)+g-1,v=(r+1)*(m-1)+g,_=(r+1)*m+g;o.push(y,w,_),o.push(w,v,_)}this.setIndex(o),this.setAttribute("position",new Ze(a,3)),this.setAttribute("normal",new Ze(l,3)),this.setAttribute("uv",new Ze(u,2))}static fromJSON(e){return new _h(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Sh extends yt{constructor(e=1,n=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],u=[],f=[],d=new B,p=new B,m=new B,g=new B,y=new B,w=new B,v=new B;for(let b=0;b<=i;++b){const M=b/i*s*Math.PI*2;_(M,s,o,e,m),_(M+.01,s,o,e,g),w.subVectors(g,m),v.addVectors(g,m),y.crossVectors(w,v),v.crossVectors(y,w),y.normalize(),v.normalize();for(let k=0;k<=r;++k){const E=k/r*Math.PI*2,I=-n*Math.cos(E),C=n*Math.sin(E);d.x=m.x+(I*v.x+C*y.x),d.y=m.y+(I*v.y+C*y.y),d.z=m.z+(I*v.z+C*y.z),l.push(d.x,d.y,d.z),p.subVectors(d,m).normalize(),u.push(p.x,p.y,p.z),f.push(b/i),f.push(k/r)}}for(let b=1;b<=i;b++)for(let M=1;M<=r;M++){const k=(r+1)*(b-1)+(M-1),E=(r+1)*b+(M-1),I=(r+1)*b+M,C=(r+1)*(b-1)+M;a.push(k,E,C),a.push(E,I,C)}this.setIndex(a),this.setAttribute("position",new Ze(l,3)),this.setAttribute("normal",new Ze(u,3)),this.setAttribute("uv",new Ze(f,2));function _(b,M,k,E,I){const C=Math.cos(b),L=Math.sin(b),R=k/M*b,O=Math.cos(R);I.x=E*(2+O)*.5*C,I.y=E*(2+O)*L*.5,I.z=E*Math.sin(R)*.5}}static fromJSON(e){return new Sh(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class bh extends yt{constructor(e=new Tb(new B(-1,-1,0),new B(-1,1,0),new B(1,1,0)),n=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(n,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new B,l=new B,u=new ve;let f=new B;const d=[],p=[],m=[],g=[];y(),this.setIndex(g),this.setAttribute("position",new Ze(d,3)),this.setAttribute("normal",new Ze(p,3)),this.setAttribute("uv",new Ze(m,2));function y(){for(let b=0;b<n;b++)w(b);w(s===!1?n:0),_(),v()}function w(b){f=e.getPointAt(b/n,f);const M=o.normals[b],k=o.binormals[b];for(let E=0;E<=r;E++){const I=E/r*Math.PI*2,C=Math.sin(I),L=-Math.cos(I);l.x=L*M.x+C*k.x,l.y=L*M.y+C*k.y,l.z=L*M.z+C*k.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=f.x+i*l.x,a.y=f.y+i*l.y,a.z=f.z+i*l.z,d.push(a.x,a.y,a.z)}}function v(){for(let b=1;b<=n;b++)for(let M=1;M<=r;M++){const k=(r+1)*(b-1)+(M-1),E=(r+1)*b+(M-1),I=(r+1)*b+M,C=(r+1)*(b-1)+M;g.push(k,E,C),g.push(E,I,C)}}function _(){for(let b=0;b<=n;b++)for(let M=0;M<=r;M++)u.x=b/n,u.y=M/r,m.push(u.x,u.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new bh(new kb[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class $4 extends yt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],i=new Set,r=new B,s=new B;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,f=l.length;u<f;++u){const d=l[u],p=d.start,m=d.count;for(let g=p,y=p+m;g<y;g+=3)for(let w=0;w<3;w++){const v=a.getX(g+w),_=a.getX(g+(w+1)%3);r.fromBufferAttribute(o,v),s.fromBufferAttribute(o,_),_k(r,s,i)===!0&&(n.push(r.x,r.y,r.z),n.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const f=3*a+u,d=3*a+(u+1)%3;r.fromBufferAttribute(o,f),s.fromBufferAttribute(o,d),_k(r,s,i)===!0&&(n.push(r.x,r.y,r.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ze(n,3))}}}function _k(t,e,n){const i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(i)===!0||n.has(r)===!0?!1:(n.add(i),n.add(r),!0)}var Sk=Object.freeze({__proto__:null,BoxGeometry:Ma,CapsuleGeometry:dh,CircleGeometry:hh,ConeGeometry:ph,CylinderGeometry:Vl,DodecahedronGeometry:mh,EdgesGeometry:V4,ExtrudeGeometry:gh,IcosahedronGeometry:yh,LatheGeometry:Vc,OctahedronGeometry:Hc,PlaneGeometry:Bc,PolyhedronGeometry:go,RingGeometry:xh,ShapeGeometry:vh,SphereGeometry:Hl,TetrahedronGeometry:wh,TorusGeometry:_h,TorusKnotGeometry:Sh,TubeGeometry:bh,WireframeGeometry:$4});class j4 extends ni{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ue(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class X4 extends us{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Cb extends ni{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ue(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ue(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sa,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class q4 extends Cb{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ve(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Tn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ue(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Ue(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ue(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Y4 extends ni{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ue(16777215),this.specular=new Ue(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ue(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sa,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=oh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Z4 extends ni{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ue(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ue(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sa,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class J4 extends ni{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sa,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class K4 extends ni{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ue(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ue(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sa,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=oh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Q4 extends ni{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ue(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sa,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class eD extends Li{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Lr(t,e,n){return Ab(t)?new t.constructor(t.subarray(e,n!==void 0?n:t.length)):t.slice(e,n)}function cl(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function Ab(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function tD(t){function e(r,s){return t[r]-t[s]}const n=t.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(e),i}function p_(t,e,n){const i=t.length,r=new t.constructor(i);for(let s=0,o=0;o!==i;++s){const a=n[s]*e;for(let l=0;l!==e;++l)r[o++]=t[a+l]}return r}function Pb(t,e,n,i){let r=1,s=t[0];for(;s!==void 0&&s[i]===void 0;)s=t[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),n.push.apply(n,o)),s=t[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(n,n.length)),s=t[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),n.push(o)),s=t[r++];while(s!==void 0)}function Aj(t,e,n,i,r=30){const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],f=u.getValueSize(),d=[],p=[];for(let m=0;m<u.times.length;++m){const g=u.times[m]*r;if(!(g<n||g>=i)){d.push(u.times[m]);for(let y=0;y<f;++y)p.push(u.values[m*f+y])}}d.length!==0&&(u.times=cl(d,u.times.constructor),u.values=cl(p,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function Pj(t,e=0,n=t,i=30){i<=0&&(i=30);const r=n.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=t.tracks.find(function(v){return v.name===a.name&&v.ValueTypeName===l});if(u===void 0)continue;let f=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=d/3);let p=0;const m=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const g=a.times.length-1;let y;if(s<=a.times[0]){const v=f,_=d-f;y=Lr(a.values,v,_)}else if(s>=a.times[g]){const v=g*d+f,_=v+d-f;y=Lr(a.values,v,_)}else{const v=a.createInterpolant(),_=f,b=d-f;v.evaluate(s),y=Lr(v.resultBuffer,_,b)}l==="quaternion"&&new Xi().fromArray(y).normalize().conjugate().toArray(y);const w=u.times.length;for(let v=0;v<w;++v){const _=v*m+p;if(l==="quaternion")Xi.multiplyQuaternionsFlat(u.values,_,y,0,u.values,_);else{const b=m-p*2;for(let M=0;M<b;++M)u.values[_+M]-=y[M]}}}return t.blendMode=cb,t}var Lj=Object.freeze({__proto__:null,arraySlice:Lr,convertArray:cl,isTypedArray:Ab,getKeyframeOrder:tD,sortedArray:p_,flattenJSON:Pb,subclip:Aj,makeClipAdditive:Pj});class Mh{constructor(e,n,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let i=this._cachedIndex,r=n[i],s=n[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=n[++i],e<r)break t}o=n.length;break n}if(!(e>=s)){const a=n[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=n[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<n[a]?o=a:i=a+1}if(r=n[i],s=n[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)n[o]=i[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class nD extends Mh{constructor(e,n,i,r){super(e,n,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:al,endingEnd:al}}intervalChanged_(e,n,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case ll:s=e,a=2*n-i;break;case Fd:s=r.length-2,a=n+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case ll:o=e,l=2*i-n;break;case Fd:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=n}const u=(i-n)*.5,f=this.valueSize;this._weightPrev=u/(n-a),this._weightNext=u/(l-i),this._offsetPrev=s*f,this._offsetNext=o*f}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,f=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,m=this._weightNext,g=(i-n)/(r-n),y=g*g,w=y*g,v=-p*w+2*p*y-p*g,_=(1+p)*w+(-1.5-2*p)*y+(-.5+p)*g+1,b=(-1-m)*w+(1.5+m)*y+.5*g,M=m*w-m*y;for(let k=0;k!==a;++k)s[k]=v*o[f+k]+_*o[u+k]+b*o[l+k]+M*o[d+k];return s}}class Lb extends Mh{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,f=(i-n)/(r-n),d=1-f;for(let p=0;p!==a;++p)s[p]=o[u+p]*d+o[l+p]*f;return s}}class iD extends Mh{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class fs{constructor(e,n,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=cl(n,this.TimeBufferType),this.values=cl(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let i;if(n.toJSON!==this.toJSON)i=n.toJSON(e);else{i={name:e.name,times:cl(e.times,Array),values:cl(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new iD(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Lb(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new nD(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case Dd:n=this.InterpolantFactoryMethodDiscrete;break;case zd:n=this.InterpolantFactoryMethodLinear;break;case dg:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Dd;case this.InterpolantFactoryMethodLinear:return zd;case this.InterpolantFactoryMethodSmooth:return dg}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]*=e}return this}trim(e,n){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>n;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=Lr(i,s,o),this.values=Lr(this.values,s*a,o*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&Ab(r))for(let a=0,l=r.length;a!==l;++a){const u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=Lr(this.times),n=Lr(this.values),i=this.getValueSize(),r=this.getInterpolation()===dg,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],f=e[a+1];if(u!==f&&(a!==1||u!==e[0]))if(r)l=!0;else{const d=a*i,p=d-i,m=d+i;for(let g=0;g!==i;++g){const y=n[d+g];if(y!==n[p+g]||y!==n[m+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*i,p=o*i;for(let m=0;m!==i;++m)n[p+m]=n[d+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,u=0;u!==i;++u)n[l+u]=n[a+u];++o}return o!==e.length?(this.times=Lr(e,0,o),this.values=Lr(n,0,o*i)):(this.times=e,this.values=n),this}clone(){const e=Lr(this.times,0),n=Lr(this.values,0),i=this.constructor,r=new i(this.name,e,n);return r.createInterpolant=this.createInterpolant,r}}fs.prototype.TimeBufferType=Float32Array;fs.prototype.ValueBufferType=Float32Array;fs.prototype.DefaultInterpolation=zd;class Wl extends fs{}Wl.prototype.ValueTypeName="bool";Wl.prototype.ValueBufferType=Array;Wl.prototype.DefaultInterpolation=Dd;Wl.prototype.InterpolantFactoryMethodLinear=void 0;Wl.prototype.InterpolantFactoryMethodSmooth=void 0;class Rb extends fs{}Rb.prototype.ValueTypeName="color";class Gd extends fs{}Gd.prototype.ValueTypeName="number";class rD extends Mh{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-n)/(r-n);let u=e*a;for(let f=u+a;u!==f;u+=4)Xi.slerpFlat(s,0,o,u-a,o,u,l);return s}}class Wc extends fs{InterpolantFactoryMethodLinear(e){return new rD(this.times,this.values,this.getValueSize(),e)}}Wc.prototype.ValueTypeName="quaternion";Wc.prototype.DefaultInterpolation=zd;Wc.prototype.InterpolantFactoryMethodSmooth=void 0;class Gl extends fs{}Gl.prototype.ValueTypeName="string";Gl.prototype.ValueBufferType=Array;Gl.prototype.DefaultInterpolation=Dd;Gl.prototype.InterpolantFactoryMethodLinear=void 0;Gl.prototype.InterpolantFactoryMethodSmooth=void 0;class $d extends fs{}$d.prototype.ValueTypeName="vector";class jd{constructor(e,n=-1,i,r=J0){this.name=e,this.tracks=i,this.duration=n,this.blendMode=r,this.uuid=or(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)n.push(Ij(i[o]).scale(r));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)n.push(fs.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,n,i,r){const s=n.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const f=tD(l);l=p_(l,1,f),u=p_(u,1,f),!r&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new Gd(".morphTargetInfluences["+n[a].name+"]",l,u).scale(1/i))}return new this(e,-1,o)}static findByName(e,n){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===n)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,n,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],f=u.name.match(s);if(f&&f.length>1){const d=f[1];let p=r[d];p||(r[d]=p=[]),p.push(u)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],n,i));return o}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,p,m,g,y){if(m.length!==0){const w=[],v=[];Pb(m,w,v,g),w.length!==0&&y.push(new d(p,w,v))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let d=0;d<u.length;d++){const p=u[d].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let g;for(g=0;g<p.length;g++)if(p[g].morphTargets)for(let y=0;y<p[g].morphTargets.length;y++)m[p[g].morphTargets[y]]=-1;for(const y in m){const w=[],v=[];for(let _=0;_!==p[g].morphTargets.length;++_){const b=p[g];w.push(b.time),v.push(b.morphTarget===y?1:0)}r.push(new Gd(".morphTargetInfluence["+y+"]",w,v))}l=m.length*o}else{const m=".bones["+n[d].name+"]";i($d,m+".position",p,"pos",r),i(Wc,m+".quaternion",p,"rot",r),i($d,m+".scale",p,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let n=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Rj(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Gd;case"vector":case"vector2":case"vector3":case"vector4":return $d;case"color":return Rb;case"quaternion":return Wc;case"bool":case"boolean":return Wl;case"string":return Gl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function Ij(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Rj(t.type);if(t.times===void 0){const n=[],i=[];Pb(t.keys,n,i,"value"),t.times=n,t.values=i}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Rl={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class Ib{constructor(e,n,i){const r=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this.itemStart=function(f){a++,s===!1&&r.onStart!==void 0&&r.onStart(f,o,a),s=!0},this.itemEnd=function(f){o++,r.onProgress!==void 0&&r.onProgress(f,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(f){r.onError!==void 0&&r.onError(f)},this.resolveURL=function(f){return l?l(f):f},this.setURLModifier=function(f){return l=f,this},this.addHandler=function(f,d){return u.push(f,d),this},this.removeHandler=function(f){const d=u.indexOf(f);return d!==-1&&u.splice(d,2),this},this.getHandler=function(f){for(let d=0,p=u.length;d<p;d+=2){const m=u[d],g=u[d+1];if(m.global&&(m.lastIndex=0),m.test(f))return g}return null}}}const sD=new Ib;class hr{constructor(e){this.manager=e!==void 0?e:sD,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const i=this;return new Promise(function(r,s){i.load(e,r,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const $s={};class Dj extends Error{constructor(e,n){super(e),this.response=n}}class ho extends hr{constructor(e){super(e)}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Rl.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if($s[e]!==void 0){$s[e].push({onLoad:n,onProgress:i,onError:r});return}$s[e]=[],$s[e].push({onLoad:n,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const f=$s[e],d=u.body.getReader(),p=u.headers.get("Content-Length"),m=p?parseInt(p):0,g=m!==0;let y=0;const w=new ReadableStream({start(v){_();function _(){d.read().then(({done:b,value:M})=>{if(b)v.close();else{y+=M.byteLength;const k=new ProgressEvent("progress",{lengthComputable:g,loaded:y,total:m});for(let E=0,I=f.length;E<I;E++){const C=f[E];C.onProgress&&C.onProgress(k)}v.enqueue(M),_()}})}}});return new Response(w)}else throw new Dj(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(f=>new DOMParser().parseFromString(f,a));case"json":return u.json();default:if(a===void 0)return u.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),p=d&&d[1]?d[1].toLowerCase():void 0,m=new TextDecoder(p);return u.arrayBuffer().then(g=>m.decode(g))}}}).then(u=>{Rl.add(e,u);const f=$s[e];delete $s[e];for(let d=0,p=f.length;d<p;d++){const m=f[d];m.onLoad&&m.onLoad(u)}}).catch(u=>{const f=$s[e];if(f===void 0)throw this.manager.itemError(e),u;delete $s[e];for(let d=0,p=f.length;d<p;d++){const m=f[d];m.onError&&m.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class zj extends hr{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new ho(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n=[];for(let i=0;i<e.length;i++){const r=jd.parse(e[i]);n.push(r)}return n}}class Fj extends hr{constructor(e){super(e)}load(e,n,i,r){const s=this,o=[],a=new D4,l=new ho(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function f(d){l.load(e[d],function(p){const m=s.parse(p,!0);o[d]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},u+=1,u===6&&(m.mipmapCount===1&&(a.minFilter=Mn),a.image=o,a.format=m.format,a.needsUpdate=!0,n&&n(a))},i,r)}if(Array.isArray(e))for(let d=0,p=e.length;d<p;++d)f(d);else l.load(e,function(d){const p=s.parse(d,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let g=0;g<m;g++){o[g]={mipmaps:[]};for(let y=0;y<p.mipmapCount;y++)o[g].mipmaps.push(p.mipmaps[g*p.mipmapCount+y]),o[g].format=p.format,o[g].width=p.width,o[g].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=Mn),a.format=p.format,a.needsUpdate=!0,n&&n(a)},i,r);return a}}class Xd extends hr{constructor(e){super(e)}load(e,n,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Rl.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a=Bd("img");function l(){f(),Rl.add(e,this),n&&n(this),s.manager.itemEnd(e)}function u(d){f(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function f(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class Nj extends hr{constructor(e){super(e)}load(e,n,i,r){const s=new ch,o=new Xd(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(f){s.images[u]=f,a++,a===6&&(s.needsUpdate=!0,n&&n(s))},void 0,r)}for(let u=0;u<e.length;++u)l(u);return s}}class Oj extends hr{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new cc,a=new ho(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const u=s.parse(l);u&&(u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:bi,o.wrapT=u.wrapT!==void 0?u.wrapT:bi,o.magFilter=u.magFilter!==void 0?u.magFilter:Mn,o.minFilter=u.minFilter!==void 0?u.minFilter:Mn,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.encoding!==void 0&&(o.encoding=u.encoding),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=Ol),u.mipmapCount===1&&(o.minFilter=Mn),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,n&&n(o,u))},i,r),o}}class Bj extends hr{constructor(e){super(e)}load(e,n,i,r){const s=new Fn,o=new Xd(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,n!==void 0&&n(s)},i,r),s}}class Ta extends Ot{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Ue(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class oD extends Ta{constructor(e,n,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Ot.DefaultUp),this.updateMatrix(),this.groundColor=new Ue(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const bk=new ht,Mk=new B,Tk=new B;class Db{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ve(512,512),this.map=null,this.mapPass=null,this.matrix=new ht,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Q0,this._frameExtents=new ve(1,1),this._viewportCount=1,this._viewports=[new Ht(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,i=this.matrix;Mk.setFromMatrixPosition(e.matrixWorld),n.position.copy(Mk),Tk.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(Tk),n.updateMatrixWorld(),bk.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(bk),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(n.projectionMatrix),i.multiply(n.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Uj extends Db{constructor(){super(new Yn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,i=Od*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(i!==n.fov||r!==n.aspect||s!==n.far)&&(n.fov=i,n.aspect=r,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class aD extends Ta{constructor(e,n,i=0,r=Math.PI/3,s=0,o=1){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ot.DefaultUp),this.updateMatrix(),this.target=new Ot,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Uj}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Ek=new ht,Pf=new B,Gv=new B;class Vj extends Db{constructor(){super(new Yn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ve(4,2),this._viewportCount=6,this._viewports=[new Ht(2,1,1,1),new Ht(0,1,1,1),new Ht(3,1,1,1),new Ht(1,1,1,1),new Ht(3,0,1,1),new Ht(1,0,1,1)],this._cubeDirections=[new B(1,0,0),new B(-1,0,0),new B(0,0,1),new B(0,0,-1),new B(0,1,0),new B(0,-1,0)],this._cubeUps=[new B(0,1,0),new B(0,1,0),new B(0,1,0),new B(0,1,0),new B(0,0,1),new B(0,0,-1)]}updateMatrices(e,n=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Pf.setFromMatrixPosition(e.matrixWorld),i.position.copy(Pf),Gv.copy(i.position),Gv.add(this._cubeDirections[n]),i.up.copy(this._cubeUps[n]),i.lookAt(Gv),i.updateMatrixWorld(),r.makeTranslation(-Pf.x,-Pf.y,-Pf.z),Ek.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ek)}}class lD extends Ta{constructor(e,n,i=0,r=1){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new Vj}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Hj extends Db{constructor(){super(new fh(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class zb extends Ta{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ot.DefaultUp),this.updateMatrix(),this.target=new Ot,this.shadow=new Hj}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class uD extends Ta{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class cD extends Ta{constructor(e,n,i=10,r=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class fD{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new B)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*r),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*i),n.addScaledVector(o[4],1.092548*(i*r)),n.addScaledVector(o[5],1.092548*(r*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(i*s)),n.addScaledVector(o[8],.546274*(i*i-r*r)),n}getIrradianceAt(e,n){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*r),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*i),n.addScaledVector(o[4],2*.429043*i*r),n.addScaledVector(o[5],2*.429043*r*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*i*s),n.addScaledVector(o[8],.429043*(i*i-r*r)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,n+r*3);return this}toArray(e=[],n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,n+r*3);return e}static getBasisAt(e,n){const i=e.x,r=e.y,s=e.z;n[0]=.282095,n[1]=.488603*r,n[2]=.488603*s,n[3]=.488603*i,n[4]=1.092548*i*r,n[5]=1.092548*r*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*i*s,n[8]=.546274*(i*i-r*r)}}class uy extends Ta{constructor(e=new fD,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class cy extends hr{constructor(e){super(e),this.textures={}}load(e,n,i,r){const s=this,o=new ho(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n=this.textures;function i(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const r=cy.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Ue().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new Ue().setHex(o.value);break;case"v2":r.uniforms[s].value=new ve().fromArray(o.value);break;case"v3":r.uniforms[s].value=new B().fromArray(o.value);break;case"v4":r.uniforms[s].value=new Ht().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Hi().fromArray(o.value);break;case"m4":r.uniforms[s].value=new ht().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new ve().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new ve().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:j4,SpriteMaterial:vb,RawShaderMaterial:X4,ShaderMaterial:us,PointsMaterial:_b,MeshPhysicalMaterial:q4,MeshStandardMaterial:Cb,MeshPhongMaterial:Y4,MeshToonMaterial:Z4,MeshNormalMaterial:J4,MeshLambertMaterial:K4,MeshDepthMaterial:gb,MeshDistanceMaterial:yb,MeshBasicMaterial:ba,MeshMatcapMaterial:Q4,LineDashedMaterial:eD,LineBasicMaterial:Li,Material:ni};return new n[e]}}class m_{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let i=0,r=e.length;i<r;i++)n+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class dD extends yt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class hD extends hr{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new ho(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n={},i={};function r(m,g){if(n[g]!==void 0)return n[g];const w=m.interleavedBuffers[g],v=s(m,w.buffer),_=Ju(w.type,v),b=new ry(_,w.stride);return b.uuid=w.uuid,n[g]=b,b}function s(m,g){if(i[g]!==void 0)return i[g];const w=m.arrayBuffers[g],v=new Uint32Array(w).buffer;return i[g]=v,v}const o=e.isInstancedBufferGeometry?new dD:new yt,a=e.data.index;if(a!==void 0){const m=Ju(a.type,a.array);o.setIndex(new jt(m,1))}const l=e.data.attributes;for(const m in l){const g=l[m];let y;if(g.isInterleavedBufferAttribute){const w=r(e.data,g.data);y=new Ll(w,g.itemSize,g.offset,g.normalized)}else{const w=Ju(g.type,g.array),v=g.isInstancedBufferAttribute?Cc:jt;y=new v(w,g.itemSize,g.normalized)}g.name!==void 0&&(y.name=g.name),g.usage!==void 0&&y.setUsage(g.usage),g.updateRange!==void 0&&(y.updateRange.offset=g.updateRange.offset,y.updateRange.count=g.updateRange.count),o.setAttribute(m,y)}const u=e.data.morphAttributes;if(u)for(const m in u){const g=u[m],y=[];for(let w=0,v=g.length;w<v;w++){const _=g[w];let b;if(_.isInterleavedBufferAttribute){const M=r(e.data,_.data);b=new Ll(M,_.itemSize,_.offset,_.normalized)}else{const M=Ju(_.type,_.array);b=new jt(M,_.itemSize,_.normalized)}_.name!==void 0&&(b.name=_.name),y.push(b)}o.morphAttributes[m]=y}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let m=0,g=d.length;m!==g;++m){const y=d[m];o.addGroup(y.start,y.count,y.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new B;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new Ul(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class Wj extends hr{constructor(e){super(e)}load(e,n,i,r){const s=this,o=this.path===""?m_.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new ho(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(d){r!==void 0&&r(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const f=u.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,n)},i,r)}async loadAsync(e,n){const i=this,r=this.path===""?m_.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new ho(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,n),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,n){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){n!==void 0&&n(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,i),f=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,f),n!==void 0){let d=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){d=!0;break}d===!1&&n(u)}return u}async parseAsync(e){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,n),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const n={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new wl().fromJSON(e[i]);n[s.uuid]=s}return n}parseSkeletons(e,n){const i={},r={};if(n.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new sy().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,n){const i={};if(e!==void 0){const r=new hD;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in Sk?a=Sk[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),a.isBufferGeometry===!0&&l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,n){const i={},r={};if(e!==void 0){const s=new cy;s.setTextures(n);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const n={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=jd.parse(r);n[s.uuid]=s}return n}parseImages(e,n){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:i.resourcePath+u;return o(f)}else return l.data?{data:Ju(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new Ib(n);s=new Xd(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,f=e.length;u<f;u++){const d=e[u],p=d.url;if(Array.isArray(p)){const m=[];for(let g=0,y=p.length;g<y;g++){const w=p[g],v=a(w);v!==null&&(v instanceof HTMLImageElement?m.push(v):m.push(new cc(v.data,v.width,v.height)))}r[d.uuid]=new ul(m)}else{const m=a(d.url);r[d.uuid]=new ul(m)}}}return r}async parseImagesAsync(e){const n=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:Ju(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new Xd(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const f=[];for(let d=0,p=u.length;d<p;d++){const m=u[d],g=await s(m);g!==null&&(g instanceof HTMLImageElement?f.push(g):f.push(new cc(g.data,g.width,g.height)))}i[l.uuid]=new ul(f)}else{const f=await s(l.url);i[l.uuid]=new ul(f)}}}return i}parseTextures(e,n){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=n[a.image],u=l.data;let f;Array.isArray(u)?(f=new ch,u.length===6&&(f.needsUpdate=!0)):(u&&u.data?f=new cc:f=new Fn,u&&(f.needsUpdate=!0)),f.source=l,f.uuid=a.uuid,a.name!==void 0&&(f.name=a.name),a.mapping!==void 0&&(f.mapping=i(a.mapping,Gj)),a.offset!==void 0&&f.offset.fromArray(a.offset),a.repeat!==void 0&&f.repeat.fromArray(a.repeat),a.center!==void 0&&f.center.fromArray(a.center),a.rotation!==void 0&&(f.rotation=a.rotation),a.wrap!==void 0&&(f.wrapS=i(a.wrap[0],kk),f.wrapT=i(a.wrap[1],kk)),a.format!==void 0&&(f.format=a.format),a.type!==void 0&&(f.type=a.type),a.encoding!==void 0&&(f.encoding=a.encoding),a.minFilter!==void 0&&(f.minFilter=i(a.minFilter,Ck)),a.magFilter!==void 0&&(f.magFilter=i(a.magFilter,Ck)),a.anisotropy!==void 0&&(f.anisotropy=a.anisotropy),a.flipY!==void 0&&(f.flipY=a.flipY),a.premultiplyAlpha!==void 0&&(f.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(f.unpackAlignment=a.unpackAlignment),a.userData!==void 0&&(f.userData=a.userData),r[a.uuid]=f}return r}parseObject(e,n,i,r,s){let o;function a(p){return n[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),n[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let g=0,y=p.length;g<y;g++){const w=p[g];i[w]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",w),m.push(i[w])}return m}return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),i[p]}}function u(p){return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),r[p]}let f,d;switch(e.type){case"Scene":o=new iy,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Ue(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new ny(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new ty(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":o=new Yn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new fh(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new uD(e.color,e.intensity);break;case"DirectionalLight":o=new zb(e.color,e.intensity);break;case"PointLight":o=new lD(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new cD(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new aD(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new oD(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new uy().fromJSON(e);break;case"SkinnedMesh":f=a(e.geometry),d=l(e.material),o=new P4(f,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":f=a(e.geometry),d=l(e.material),o=new Zn(f,d);break;case"InstancedMesh":f=a(e.geometry),d=l(e.material);const p=e.count,m=e.instanceMatrix,g=e.instanceColor;o=new L4(f,d,p),o.instanceMatrix=new Cc(new Float32Array(m.array),16),g!==void 0&&(o.instanceColor=new Cc(new Float32Array(g.array),g.itemSize));break;case"LOD":o=new A4;break;case"Line":o=new ga(a(e.geometry),l(e.material));break;case"LineLoop":o=new R4(a(e.geometry),l(e.material));break;case"LineSegments":o=new As(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new I4(a(e.geometry),l(e.material));break;case"Sprite":o=new C4(l(e.material));break;case"Group":o=new Qu;break;case"Bone":o=new wb;break;default:o=new Ot}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],n,i,r,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const g=p[m];o.animations.push(s[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const g=p[m],y=o.getObjectByProperty("uuid",g.object);y!==void 0&&o.addLevel(y,g.distance)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=n[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const Gj={UVMapping:Z0,CubeReflectionMapping:ha,CubeRefractionMapping:pa,EquirectangularReflectionMapping:Ld,EquirectangularRefractionMapping:Rd,CubeUVReflectionMapping:Nc},kk={RepeatWrapping:Al,ClampToEdgeWrapping:bi,MirroredRepeatWrapping:Id},Ck={NearestFilter:Dn,NearestMipmapNearestFilter:o0,NearestMipmapLinearFilter:a0,LinearFilter:Mn,LinearMipmapNearestFilter:lb,LinearMipmapLinearFilter:Ol};class $j extends hr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Rl.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Rl.add(e,l),n&&n(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let Pm;const Fb={getContext:function(){return Pm===void 0&&(Pm=new(window.AudioContext||window.webkitAudioContext)),Pm},setContext:function(t){Pm=t}};class jj extends hr{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new ho(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const l=a.slice(0);Fb.getContext().decodeAudioData(l,function(f){n(f)})}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}}class Xj extends uy{constructor(e,n,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const r=new Ue().set(e),s=new Ue().set(n),o=new B(r.r,r.g,r.b),a=new B(s.r,s.g,s.b),l=Math.sqrt(Math.PI),u=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}}class qj extends uy{constructor(e,n=1){super(void 0,n),this.isAmbientLightProbe=!0;const i=new Ue().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const Ak=new ht,Pk=new ht,Ua=new ht;class Yj{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Yn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Yn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Ua.copy(e.projectionMatrix);const r=n.eyeSep/2,s=r*n.near/n.focus,o=n.near*Math.tan(yl*n.fov*.5)/n.zoom;let a,l;Pk.elements[12]=-r,Ak.elements[12]=r,a=-o*n.aspect+s,l=o*n.aspect+s,Ua.elements[0]=2*n.near/(l-a),Ua.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Ua),a=-o*n.aspect-s,l=o*n.aspect-s,Ua.elements[0]=2*n.near/(l-a),Ua.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Ua)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Pk),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Ak)}}class Nb{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Lk(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=Lk();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function Lk(){return(typeof performance>"u"?Date:performance).now()}const Va=new B,Rk=new Xi,Zj=new B,Ha=new B;class Jj extends Ot{constructor(){super(),this.type="AudioListener",this.context=Fb.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Nb}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Va,Rk,Zj),Ha.set(0,0,-1).applyQuaternion(Rk),n.positionX){const r=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Va.x,r),n.positionY.linearRampToValueAtTime(Va.y,r),n.positionZ.linearRampToValueAtTime(Va.z,r),n.forwardX.linearRampToValueAtTime(Ha.x,r),n.forwardY.linearRampToValueAtTime(Ha.y,r),n.forwardZ.linearRampToValueAtTime(Ha.z,r),n.upX.linearRampToValueAtTime(i.x,r),n.upY.linearRampToValueAtTime(i.y,r),n.upZ.linearRampToValueAtTime(i.z,r)}else n.setPosition(Va.x,Va.y,Va.z),n.setOrientation(Ha.x,Ha.y,Ha.z,i.x,i.y,i.z)}}class pD extends Ot{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Wa=new B,Ik=new Xi,Kj=new B,Ga=new B;class Qj extends pD{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Wa,Ik,Kj),Ga.set(0,0,1).applyQuaternion(Ik);const n=this.panner;if(n.positionX){const i=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Wa.x,i),n.positionY.linearRampToValueAtTime(Wa.y,i),n.positionZ.linearRampToValueAtTime(Wa.z,i),n.orientationX.linearRampToValueAtTime(Ga.x,i),n.orientationY.linearRampToValueAtTime(Ga.y,i),n.orientationZ.linearRampToValueAtTime(Ga.z,i)}else n.setPosition(Wa.x,Wa.y,Wa.z),n.setOrientation(Ga.x,Ga.y,Ga.z)}}class eX{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let i=0;i<n.length;i++)e+=n[i];return e/n.length}}class mD{constructor(e,n,i){this.binding=e,this.valueSize=i;let r,s,o;switch(n){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=n}else{o+=n;const a=n/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,i=this.buffer,r=e*n+n,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(i,r,l,1-s,n)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*n,1,n);for(let l=n,u=n+n;l!==u;++l)if(i[l]!==i[l+n]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,n=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(n,r);for(let s=i,o=r;s!==o;++s)n[s]=n[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let i=e;i<n;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[n+i]=this.buffer[e+i]}_select(e,n,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[n+o]=e[i+o]}_slerp(e,n,i,r){Xi.slerpFlat(e,n,e,n,e,i,r)}_slerpAdditive(e,n,i,r,s){const o=this._workIndex*s;Xi.multiplyQuaternionsFlat(e,o,e,n,e,i),Xi.slerpFlat(e,n,e,n,e,o,r)}_lerp(e,n,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=n+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,n,i,r,s){for(let o=0;o!==s;++o){const a=n+o;e[a]=e[a]+e[i+o]*r}}}const Ob="\\[\\]\\.:\\/",tX=new RegExp("["+Ob+"]","g"),Bb="[^"+Ob+"]",nX="[^"+Ob.replace("\\.","")+"]",iX=/((?:WC+[\/:])*)/.source.replace("WC",Bb),rX=/(WCOD+)?/.source.replace("WCOD",nX),sX=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Bb),oX=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Bb),aX=new RegExp("^"+iX+rX+sX+oX+"$"),lX=["material","materials","bones","map"];class uX{constructor(e,n,i){const r=i||Lt.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,r)}getValue(e,n){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,n)}setValue(e,n){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].unbind()}}class Lt{constructor(e,n,i){this.path=n,this.parsedPath=i||Lt.parseTrackName(n),this.node=Lt.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,i){return e&&e.isAnimationObjectGroup?new Lt.Composite(e,n,i):new Lt(e,n,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(tX,"")}static parseTrackName(e){const n=aX.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);lX.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(n);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===n||a.uuid===n)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[n++]=i[r]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,i=n.objectName,r=n.propertyName;let s=n.propertyIndex;if(e||(e=Lt.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let u=n.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let f=0;f<e.length;f++)if(e[f].name===u){u=f;break}break;case"map":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[r];if(o===void 0){const u=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Lt.Composite=uX;Lt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Lt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Lt.prototype.GetterByBindingType=[Lt.prototype._getValue_direct,Lt.prototype._getValue_array,Lt.prototype._getValue_arrayElement,Lt.prototype._getValue_toArray];Lt.prototype.SetterByBindingTypeAndVersioning=[[Lt.prototype._setValue_direct,Lt.prototype._setValue_direct_setNeedsUpdate,Lt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Lt.prototype._setValue_array,Lt.prototype._setValue_array_setNeedsUpdate,Lt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Lt.prototype._setValue_arrayElement,Lt.prototype._setValue_arrayElement_setNeedsUpdate,Lt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Lt.prototype._setValue_fromArray,Lt.prototype._setValue_fromArray_setNeedsUpdate,Lt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class cX{constructor(){this.isAnimationObjectGroup=!0,this.uuid=or(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let f=0,d=arguments.length;f!==d;++f){const p=arguments[f],m=p.uuid;let g=n[m];if(g===void 0){g=l++,n[m]=g,e.push(p);for(let y=0,w=o;y!==w;++y)s[y].push(new Lt(p,i[y],r[y]))}else if(g<u){a=e[g];const y=--u,w=e[y];n[w.uuid]=g,e[g]=w,n[m]=y,e[y]=p;for(let v=0,_=o;v!==_;++v){const b=s[v],M=b[y];let k=b[g];b[g]=M,k===void 0&&(k=new Lt(p,i[v],r[v])),b[y]=k}}else e[g]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,f=n[u];if(f!==void 0&&f>=s){const d=s++,p=e[d];n[p.uuid]=f,e[f]=p,n[u]=d,e[d]=l;for(let m=0,g=r;m!==g;++m){const y=i[m],w=y[d],v=y[f];y[f]=w,y[d]=v}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],f=u.uuid,d=n[f];if(d!==void 0)if(delete n[f],d<s){const p=--s,m=e[p],g=--o,y=e[g];n[m.uuid]=d,e[d]=m,n[y.uuid]=p,e[p]=y,e.pop();for(let w=0,v=r;w!==v;++w){const _=i[w],b=_[p],M=_[g];_[d]=b,_[p]=M,_.pop()}}else{const p=--o,m=e[p];p>0&&(n[m.uuid]=d),e[d]=m,e.pop();for(let g=0,y=r;g!==y;++g){const w=i[g];w[d]=w[p],w.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,f=this.nCachedObjects_,d=new Array(u);r=s.length,i[e]=r,o.push(e),a.push(n),s.push(d);for(let p=f,m=l.length;p!==m;++p){const g=l[p];d[p]=new Lt(g,e,n)}return d}unsubscribe_(e){const n=this._bindingsIndicesByPath,i=n[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];n[u]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class fX{constructor(e,n,i=null,r=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=i,this.blendMode=r;const s=n.tracks,o=s.length,a=new Array(o),l={endingStart:al,endingEnd:al};for(let u=0;u!==o;++u){const f=s[u].createInterpolant(null);a[u]=f,f.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=o4,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,i){if(e.fadeOut(n),this.fadeIn(n),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,i){return e.crossFadeFrom(this,n,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+i,u[0]=e/o,u[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?n=0:(this._startTime=null,n=i*l)}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case cb:for(let f=0,d=l.length;f!==d;++f)l[f].evaluate(o),u[f].accumulateAdditive(a);break;case J0:default:for(let f=0,d=l.length;f!==d;++f)l[f].evaluate(o),u[f].accumulate(r,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===a4;if(e===0)return s===-1?r:o&&(s&1)===1?n-r:r;if(i===s4){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=n)r=n;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=n||r<0){const a=Math.floor(r/n);r-=n*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?n:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return n-r}return r}_setEndings(e,n,i){const r=this._interpolantSettings;i?(r.endingStart=ll,r.endingEnd=ll):(e?r.endingStart=this.zeroSlopeAtStart?ll:al:r.endingStart=Fd,n?r.endingEnd=this.zeroSlopeAtEnd?ll:al:r.endingEnd=Fd)}_scheduleFading(e,n,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=n,a[1]=s+e,l[1]=i,this}}const dX=new Float32Array(1);class hX extends mo{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,u=this._bindingsByRootAndName;let f=u[l];f===void 0&&(f={},u[l]=f);for(let d=0;d!==s;++d){const p=r[d],m=p.name;let g=f[m];if(g!==void 0)++g.referenceCount,o[d]=g;else{if(g=o[d],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,m));continue}const y=n&&n._propertyBindings[d].binding.parsedPath;g=new mD(Lt.create(i,m,y),p.ValueTypeName,p.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,m),o[d]=g}a[d].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,i){const r=this._actions,s=this._actionsByClip;let o=s[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const n=this._actions,i=n[n.length-1],r=e._cacheIndex;i._cacheIndex=r,n[r]=i,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],f=e._byClipCacheIndex;u._byClipCacheIndex=f,l[f]=u,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete d[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_takeBackAction(e){const n=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_addInactiveBinding(e,n,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[n];o===void 0&&(o={},r[n]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=n[n.length-1],u=e._cacheIndex;l._cacheIndex=u,n[u]=l,n.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const n=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_takeBackBinding(e){const n=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let i=e[n];return i===void 0&&(i=new Lb(new Float32Array(2),new Float32Array(2),1,dX),i.__cacheIndex=n,e[n]=i),i}_takeBackControlInterpolant(e){const n=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=n[r];e.__cacheIndex=r,n[r]=e,s.__cacheIndex=i,n[i]=s}clipAction(e,n,i){const r=n||this._root,s=r.uuid;let o=typeof e=="string"?jd.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(i===void 0&&(o!==null?i=o.blendMode:i=J0),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===i)return d;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const f=new fX(this,o,n,i);return this._bindAction(f,u),this._addInactiveAction(f,a,s),f}existingAction(e,n){const i=n||this._root,r=i.uuid,s=typeof e=="string"?jd.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let i=n-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const n=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==i;++u)n[u]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const f=u._cacheIndex,d=n[n.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,d._cacheIndex=f,n[f]=d,n.pop(),this._removeInactiveBindingsForAction(u)}delete r[i]}}uncacheRoot(e){const n=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[n];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const i=this.existingAction(e,n);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class Ub{constructor(e){this.value=e}clone(){return new Ub(this.value.clone===void 0?this.value:this.value.clone())}}let pX=0;class mX extends mo{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:pX++}),this.name="",this.usage=Nd,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let i=0,r=n.length;i<r;i++)this.uniforms.push(n[i].clone());return this}clone(){return new this.constructor().copy(this)}}class gX extends ry{constructor(e,n,i=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class yX{constructor(e,n,i,r,s){this.isGLBufferAttribute=!0,this.buffer=e,this.type=n,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class gD{constructor(e,n,i=0,r=1/0){this.ray=new lh(e,n),this.near=i,this.far=r,this.camera=null,this.layers=new vl,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,i=[]){return g_(e,this,i,n),i.sort(Dk),i}intersectObjects(e,n=!0,i=[]){for(let r=0,s=e.length;r<s;r++)g_(e[r],this,i,n);return i.sort(Dk),i}}function Dk(t,e){return t.distance-e.distance}function g_(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),i===!0){const r=t.children;for(let s=0,o=r.length;s<o;s++)g_(r[s],e,n,!0)}}class xX{constructor(e=1,n=0,i=0){return this.radius=e,this.phi=n,this.theta=i,this}set(e,n,i){return this.radius=e,this.phi=n,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+n*n+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Tn(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class vX{constructor(e=1,n=0,i=0){return this.radius=e,this.theta=n,this.y=i,this}set(e,n,i){return this.radius=e,this.theta=n,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=n,this}clone(){return new this.constructor().copy(this)}}const zk=new ve;class wX{constructor(e=new ve(1/0,1/0),n=new ve(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=zk.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return zk.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Fk=new B,Lm=new B;class _X{constructor(e=new B,n=new B){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){Fk.subVectors(e,this.start),Lm.subVectors(this.end,this.start);const i=Lm.dot(Lm);let s=Lm.dot(Fk)/i;return n&&(s=Tn(s,0,1)),s}closestPointToPoint(e,n,i){const r=this.closestPointToPointParameter(e,n);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const Nk=new B;class SX extends Ot{constructor(e,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const i=new yt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,f=a/l*Math.PI*2;r.push(Math.cos(u),Math.sin(u),1,Math.cos(f),Math.sin(f),1)}i.setAttribute("position",new Ze(r,3));const s=new Li({fog:!1,toneMapped:!1});this.cone=new As(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),Nk.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Nk),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Fo=new B,Rm=new ht,$v=new ht;class bX extends As{constructor(e){const n=yD(e),i=new yt,r=[],s=[],o=new Ue(0,0,1),a=new Ue(0,1,0);for(let u=0;u<n.length;u++){const f=n[u];f.parent&&f.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new Ze(r,3)),i.setAttribute("color",new Ze(s,3));const l=new Li({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,i=this.geometry,r=i.getAttribute("position");$v.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&(Rm.multiplyMatrices($v,a.matrixWorld),Fo.setFromMatrixPosition(Rm),r.setXYZ(o,Fo.x,Fo.y,Fo.z),Rm.multiplyMatrices($v,a.parent.matrixWorld),Fo.setFromMatrixPosition(Rm),r.setXYZ(o+1,Fo.x,Fo.y,Fo.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function yD(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,yD(t.children[n]));return e}class MX extends Zn{constructor(e,n,i){const r=new Hl(n,4,2),s=new ba({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.light.updateMatrixWorld(),this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const TX=new B,Ok=new Ue,Bk=new Ue;class EX extends Ot{constructor(e,n,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;const r=new Hc(n);r.rotateY(Math.PI*.5),this.material=new ba({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new jt(o,3)),this.add(new Zn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");Ok.copy(this.light.color),Bk.copy(this.light.groundColor);for(let i=0,r=n.count;i<r;i++){const s=i<r/2?Ok:Bk;n.setXYZ(i,s.r,s.g,s.b)}n.needsUpdate=!0}e.lookAt(TX.setFromMatrixPosition(this.light.matrixWorld).negate())}}class kX extends As{constructor(e=10,n=10,i=4473924,r=8947848){i=new Ue(i),r=new Ue(r);const s=n/2,o=e/n,a=e/2,l=[],u=[];for(let p=0,m=0,g=-a;p<=n;p++,g+=o){l.push(-a,0,g,a,0,g),l.push(g,0,-a,g,0,a);const y=p===s?i:r;y.toArray(u,m),m+=3,y.toArray(u,m),m+=3,y.toArray(u,m),m+=3,y.toArray(u,m),m+=3}const f=new yt;f.setAttribute("position",new Ze(l,3)),f.setAttribute("color",new Ze(u,3));const d=new Li({vertexColors:!0,toneMapped:!1});super(f,d),this.type="GridHelper"}}class CX extends As{constructor(e=10,n=16,i=8,r=64,s=4473924,o=8947848){s=new Ue(s),o=new Ue(o);const a=[],l=[];if(n>1)for(let d=0;d<n;d++){const p=d/n*(Math.PI*2),m=Math.sin(p)*e,g=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,g);const y=d&1?s:o;l.push(y.r,y.g,y.b),l.push(y.r,y.g,y.b)}for(let d=0;d<i;d++){const p=d&1?s:o,m=e-e/i*d;for(let g=0;g<r;g++){let y=g/r*(Math.PI*2),w=Math.sin(y)*m,v=Math.cos(y)*m;a.push(w,0,v),l.push(p.r,p.g,p.b),y=(g+1)/r*(Math.PI*2),w=Math.sin(y)*m,v=Math.cos(y)*m,a.push(w,0,v),l.push(p.r,p.g,p.b)}}const u=new yt;u.setAttribute("position",new Ze(a,3)),u.setAttribute("color",new Ze(l,3));const f=new Li({vertexColors:!0,toneMapped:!1});super(u,f),this.type="PolarGridHelper"}}const Uk=new B,Im=new B,Vk=new B;class AX extends Ot{constructor(e,n,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,n===void 0&&(n=1);let r=new yt;r.setAttribute("position",new Ze([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new Li({fog:!1,toneMapped:!1});this.lightPlane=new ga(r,s),this.add(this.lightPlane),r=new yt,r.setAttribute("position",new Ze([0,0,0,0,0,1],3)),this.targetLine=new ga(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){Uk.setFromMatrixPosition(this.light.matrixWorld),Im.setFromMatrixPosition(this.light.target.matrixWorld),Vk.subVectors(Im,Uk),this.lightPlane.lookAt(Im),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Im),this.targetLine.scale.z=Vk.length()}}const Dm=new B,yn=new uh;class PX extends As{constructor(e){const n=new yt,i=new Li({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(g,y){l(g),l(y)}function l(g){r.push(0,0,0),s.push(0,0,0),o[g]===void 0&&(o[g]=[]),o[g].push(r.length/3-1)}n.setAttribute("position",new Ze(r,3)),n.setAttribute("color",new Ze(s,3)),super(n,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new Ue(16755200),f=new Ue(16711680),d=new Ue(43775),p=new Ue(16777215),m=new Ue(3355443);this.setColors(u,f,d,p,m)}setColors(e,n,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,i=1,r=1;yn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),_n("c",n,e,yn,0,0,-1),_n("t",n,e,yn,0,0,1),_n("n1",n,e,yn,-i,-r,-1),_n("n2",n,e,yn,i,-r,-1),_n("n3",n,e,yn,-i,r,-1),_n("n4",n,e,yn,i,r,-1),_n("f1",n,e,yn,-i,-r,1),_n("f2",n,e,yn,i,-r,1),_n("f3",n,e,yn,-i,r,1),_n("f4",n,e,yn,i,r,1),_n("u1",n,e,yn,i*.7,r*1.1,-1),_n("u2",n,e,yn,-i*.7,r*1.1,-1),_n("u3",n,e,yn,0,r*2,-1),_n("cf1",n,e,yn,-i,0,1),_n("cf2",n,e,yn,i,0,1),_n("cf3",n,e,yn,0,-r,1),_n("cf4",n,e,yn,0,r,1),_n("cn1",n,e,yn,-i,0,-1),_n("cn2",n,e,yn,i,0,-1),_n("cn3",n,e,yn,0,-r,-1),_n("cn4",n,e,yn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function _n(t,e,n,i,r,s,o){Dm.set(r,s,o).unproject(i);const a=e[t];if(a!==void 0){const l=n.getAttribute("position");for(let u=0,f=a.length;u<f;u++)l.setXYZ(a[u],Dm.x,Dm.y,Dm.z)}}const zm=new Bl;class LX extends As{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new yt;s.setIndex(new jt(i,1)),s.setAttribute("position",new jt(r,3)),super(s,new Li({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&zm.setFromObject(this.object),zm.isEmpty())return;const n=zm.min,i=zm.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=n.x,s[4]=i.y,s[5]=i.z,s[6]=n.x,s[7]=n.y,s[8]=i.z,s[9]=i.x,s[10]=n.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=n.z,s[15]=n.x,s[16]=i.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=i.x,s[22]=n.y,s[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}}class RX extends As{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new yt;s.setIndex(new jt(i,1)),s.setAttribute("position",new Ze(r,3)),super(s,new Li({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class IX extends ga{constructor(e,n=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new yt;o.setAttribute("position",new Ze(s,3)),o.computeBoundingSphere(),super(o,new Li({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new yt;l.setAttribute("position",new Ze(a,3)),l.computeBoundingSphere(),this.add(new Zn(l,new ba({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}}const Hk=new B;let Fm,jv;class DX extends Ot{constructor(e=new B(0,0,1),n=new B(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",Fm===void 0&&(Fm=new yt,Fm.setAttribute("position",new Ze([0,0,0,0,1,0],3)),jv=new Vl(0,.5,1,5,1),jv.translate(0,-.5,0)),this.position.copy(n),this.line=new ga(Fm,new Li({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Zn(jv,new ba({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Hk.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(Hk,n)}}setLength(e,n=e*.2,i=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(i,n,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class zX extends As{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new yt;r.setAttribute("position",new Ze(n,3)),r.setAttribute("color",new Ze(i,3));const s=new Li({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,n,i){const r=new Ue,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(n),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class FX{constructor(){this.type="ShapePath",this.color=new Ue,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new Ud,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,i,r){return this.currentPath.quadraticCurveTo(e,n,i,r),this}bezierCurveTo(e,n,i,r,s,o){return this.currentPath.bezierCurveTo(e,n,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(v){const _=[];for(let b=0,M=v.length;b<M;b++){const k=v[b],E=new wl;E.curves=k.curves,_.push(E)}return _}function i(v,_){const b=_.length;let M=!1;for(let k=b-1,E=0;E<b;k=E++){let I=_[k],C=_[E],L=C.x-I.x,R=C.y-I.y;if(Math.abs(R)>Number.EPSILON){if(R<0&&(I=_[E],L=-L,C=_[k],R=-R),v.y<I.y||v.y>C.y)continue;if(v.y===I.y){if(v.x===I.x)return!0}else{const O=R*(v.x-I.x)-L*(v.y-I.y);if(O===0)return!0;if(O<0)continue;M=!M}}else{if(v.y!==I.y)continue;if(C.x<=v.x&&v.x<=I.x||I.x<=v.x&&v.x<=C.x)return!0}}return M}const r=Cs.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new wl,l.curves=a.curves,u.push(l),u;let f=!r(s[0].getPoints());f=e?!f:f;const d=[],p=[];let m=[],g=0,y;p[g]=void 0,m[g]=[];for(let v=0,_=s.length;v<_;v++)a=s[v],y=a.getPoints(),o=r(y),o=e?!o:o,o?(!f&&p[g]&&g++,p[g]={s:new wl,p:y},p[g].s.curves=a.curves,f&&g++,m[g]=[]):m[g].push({h:a,p:y[0]});if(!p[0])return n(s);if(p.length>1){let v=!1,_=0;for(let b=0,M=p.length;b<M;b++)d[b]=[];for(let b=0,M=p.length;b<M;b++){const k=m[b];for(let E=0;E<k.length;E++){const I=k[E];let C=!0;for(let L=0;L<p.length;L++)i(I.p,p[L].p)&&(b!==L&&_++,C?(C=!1,d[L].push(I)):v=!0);C&&d[b].push(I)}}_>0&&v===!1&&(m=d)}let w;for(let v=0,_=p.length;v<_;v++){l=p[v].s,u.push(l),w=m[v];for(let b=0,M=w.length;b<M;b++)l.holes.push(w[b].h)}return u}}const Ys=NX();function NX(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):u<-14?(i[l]=1024>>-u-14,i[l|256]=1024>>-u-14|32768,r[l]=-u-1,r[l|256]=-u-1):u<=15?(i[l]=u+15<<10,i[l|256]=u+15<<10|32768,r[l]=13,r[l|256]=13):u<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,f=0;for(;!(u&8388608);)u<<=1,f-=8388608;u&=-8388609,f+=947912704,s[l]=u|f}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function OX(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Tn(t,-65504,65504),Ys.floatView[0]=t;const e=Ys.uint32View[0],n=e>>23&511;return Ys.baseTable[n]+((e&8388607)>>Ys.shiftTable[n])}function BX(t){const e=t>>10;return Ys.uint32View[0]=Ys.mantissaTable[Ys.offsetTable[e]+(t&1023)]+Ys.exponentTable[e],Ys.floatView[0]}var UX=Object.freeze({__proto__:null,toHalfFloat:OX,fromHalfFloat:BX});function VX(){console.error("THREE.ImmediateRenderObject has been removed.")}class HX extends Wr{constructor(e,n,i){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,n,i),this.samples=4}}class WX extends ah{constructor(e,n,i,r){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(e,n,i,r)}}class GX extends K0{constructor(e,n,i,r){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(e,n,i,r)}}class $X extends Ma{constructor(e,n,i,r,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,n,i,r,s,o)}}class jX extends dh{constructor(e,n,i,r){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,n,i,r)}}class XX extends hh{constructor(e,n,i,r){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,n,i,r)}}class qX extends ph{constructor(e,n,i,r,s,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,n,i,r,s,o,a)}}class YX extends Vl{constructor(e,n,i,r,s,o,a,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,n,i,r,s,o,a,l)}}class ZX extends mh{constructor(e,n){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,n)}}class JX extends gh{constructor(e,n){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,n)}}class KX extends yh{constructor(e,n){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,n)}}class QX extends Vc{constructor(e,n,i,r){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,n,i,r)}}class eq extends Hc{constructor(e,n){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,n)}}class tq extends Bc{constructor(e,n,i,r){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,n,i,r)}}class nq extends go{constructor(e,n,i,r){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,n,i,r)}}class iq extends xh{constructor(e,n,i,r,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,n,i,r,s,o)}}class rq extends vh{constructor(e,n){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,n)}}class sq extends Hl{constructor(e,n,i,r,s,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,n,i,r,s,o,a)}}class oq extends wh{constructor(e,n){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,n)}}class aq extends _h{constructor(e,n,i,r,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,n,i,r,s)}}class lq extends Sh{constructor(e,n,i,r,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,n,i,r,s,o)}}class uq extends bh{constructor(e,n,i,r,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,n,i,r,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:q0}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=q0);const f0=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Y0,AddEquation:Qa,AddOperation:BI,AdditiveAnimationBlendMode:cb,AdditiveBlending:Fw,AlphaFormat:YI,AlwaysDepth:RI,AlwaysStencilFunc:f4,AmbientLight:uD,AmbientLightProbe:qj,AnimationClip:jd,AnimationLoader:zj,AnimationMixer:hX,AnimationObjectGroup:cX,AnimationUtils:Lj,ArcCurve:F4,ArrayCamera:M4,ArrowHelper:DX,Audio:pD,AudioAnalyser:eX,AudioContext:Fb,AudioListener:Jj,AudioLoader:jj,AxesHelper:zX,BackSide:ji,BasicDepthPacking:l4,BasicShadowMap:l9,Bone:wb,BooleanKeyframeTrack:Wl,Box2:wX,Box3:Bl,Box3Helper:RX,BoxBufferGeometry:$X,BoxGeometry:Ma,BoxHelper:LX,BufferAttribute:jt,BufferGeometry:yt,BufferGeometryLoader:hD,ByteType:GI,Cache:Rl,Camera:uh,CameraHelper:PX,CanvasTexture:z4,CapsuleBufferGeometry:jX,CapsuleGeometry:dh,CatmullRomCurve3:N4,CineonToneMapping:HI,CircleBufferGeometry:XX,CircleGeometry:hh,ClampToEdgeWrapping:bi,Clock:Nb,Color:Ue,ColorKeyframeTrack:Rb,ColorManagement:Ar,CompressedTexture:D4,CompressedTextureLoader:Fj,ConeBufferGeometry:qX,ConeGeometry:ph,CubeCamera:g4,CubeReflectionMapping:ha,CubeRefractionMapping:pa,CubeTexture:ch,CubeTextureLoader:Nj,CubeUVReflectionMapping:Nc,CubicBezierCurve:bb,CubicBezierCurve3:O4,CubicInterpolant:nD,CullFaceBack:zw,CullFaceFront:xI,CullFaceFrontBack:a9,CullFaceNone:yI,Curve:cs,CurvePath:U4,CustomBlending:vI,CustomToneMapping:WI,CylinderBufferGeometry:YX,CylinderGeometry:Vl,Cylindrical:vX,Data3DTexture:K0,DataArrayTexture:ah,DataTexture:cc,DataTexture2DArray:WX,DataTexture3D:GX,DataTextureLoader:Oj,DataUtils:UX,DecrementStencilOp:w9,DecrementWrapStencilOp:S9,DefaultLoadingManager:sD,DepthFormat:aa,DepthStencilFormat:Pl,DepthTexture:T4,DirectionalLight:zb,DirectionalLightHelper:AX,DiscreteInterpolant:iD,DodecahedronBufferGeometry:ZX,DodecahedronGeometry:mh,DoubleSide:Qs,DstAlphaFactor:EI,DstColorFactor:CI,DynamicCopyUsage:N9,DynamicDrawUsage:L9,DynamicReadUsage:D9,EdgesGeometry:V4,EllipseCurve:oy,EqualDepth:DI,EqualStencilFunc:E9,EquirectangularReflectionMapping:Ld,EquirectangularRefractionMapping:Rd,Euler:Oc,EventDispatcher:mo,ExtrudeBufferGeometry:JX,ExtrudeGeometry:gh,FileLoader:ho,Float16BufferAttribute:xH,Float32BufferAttribute:Ze,Float64BufferAttribute:vH,FloatType:eo,Fog:ny,FogExp2:ty,FramebufferTexture:tj,FrontSide:Cl,Frustum:Q0,GLBufferAttribute:yX,GLSL1:B9,GLSL3:l_,GreaterDepth:FI,GreaterEqualDepth:zI,GreaterEqualStencilFunc:P9,GreaterStencilFunc:C9,GridHelper:kX,Group:Qu,HalfFloatType:Ec,HemisphereLight:oD,HemisphereLightHelper:EX,HemisphereLightProbe:Xj,IcosahedronBufferGeometry:KX,IcosahedronGeometry:yh,ImageBitmapLoader:$j,ImageLoader:Xd,ImageUtils:db,ImmediateRenderObject:VX,IncrementStencilOp:v9,IncrementWrapStencilOp:_9,InstancedBufferAttribute:Cc,InstancedBufferGeometry:dD,InstancedInterleavedBuffer:gX,InstancedMesh:L4,Int16BufferAttribute:gH,Int32BufferAttribute:yH,Int8BufferAttribute:hH,IntType:jI,InterleavedBuffer:ry,InterleavedBufferAttribute:Ll,Interpolant:Mh,InterpolateDiscrete:Dd,InterpolateLinear:zd,InterpolateSmooth:dg,InvertStencilOp:b9,KeepStencilOp:hg,KeyframeTrack:fs,LOD:A4,LatheBufferGeometry:QX,LatheGeometry:Vc,Layers:vl,LessDepth:II,LessEqualDepth:s0,LessEqualStencilFunc:k9,LessStencilFunc:T9,Light:Ta,LightProbe:uy,Line:ga,Line3:_X,LineBasicMaterial:Li,LineCurve:ay,LineCurve3:B4,LineDashedMaterial:eD,LineLoop:R4,LineSegments:As,LinearEncoding:fo,LinearFilter:Mn,LinearInterpolant:Lb,LinearMipMapLinearFilter:d9,LinearMipMapNearestFilter:f9,LinearMipmapLinearFilter:Ol,LinearMipmapNearestFilter:lb,LinearSRGBColorSpace:Zo,LinearToneMapping:UI,Loader:hr,LoaderUtils:m_,LoadingManager:Ib,LoopOnce:s4,LoopPingPong:a4,LoopRepeat:o4,LuminanceAlphaFormat:KI,LuminanceFormat:JI,MOUSE:s9,Material:ni,MaterialLoader:cy,MathUtils:Q9,Matrix3:Hi,Matrix4:ht,MaxEquation:Uw,Mesh:Zn,MeshBasicMaterial:ba,MeshDepthMaterial:gb,MeshDistanceMaterial:yb,MeshLambertMaterial:K4,MeshMatcapMaterial:Q4,MeshNormalMaterial:J4,MeshPhongMaterial:Y4,MeshPhysicalMaterial:q4,MeshStandardMaterial:Cb,MeshToonMaterial:Z4,MinEquation:Bw,MirroredRepeatWrapping:Id,MixOperation:OI,MultiplyBlending:Ow,MultiplyOperation:oh,NearestFilter:Dn,NearestMipMapLinearFilter:c9,NearestMipMapNearestFilter:u9,NearestMipmapLinearFilter:a0,NearestMipmapNearestFilter:o0,NeverDepth:LI,NeverStencilFunc:M9,NoBlending:so,NoColorSpace:g9,NoToneMapping:os,NormalAnimationBlendMode:J0,NormalBlending:ml,NotEqualDepth:NI,NotEqualStencilFunc:A9,NumberKeyframeTrack:Gd,Object3D:Ot,ObjectLoader:Wj,ObjectSpaceNormalMap:c4,OctahedronBufferGeometry:eq,OctahedronGeometry:Hc,OneFactor:bI,OneMinusDstAlphaFactor:kI,OneMinusDstColorFactor:AI,OneMinusSrcAlphaFactor:ab,OneMinusSrcColorFactor:TI,OrthographicCamera:fh,PCFShadowMap:rb,PCFSoftShadowMap:sb,PMREMGenerator:c0,Path:Ud,PerspectiveCamera:Yn,Plane:Wo,PlaneBufferGeometry:tq,PlaneGeometry:Bc,PlaneHelper:IX,PointLight:lD,PointLightHelper:MX,Points:I4,PointsMaterial:_b,PolarGridHelper:CX,PolyhedronBufferGeometry:nq,PolyhedronGeometry:go,PositionalAudio:Qj,PropertyBinding:Lt,PropertyMixer:mD,QuadraticBezierCurve:Mb,QuadraticBezierCurve3:Tb,Quaternion:Xi,QuaternionKeyframeTrack:Wc,QuaternionLinearInterpolant:rD,REVISION:q0,RGBADepthPacking:u4,RGBAFormat:Or,RGBAIntegerFormat:i4,RGBA_ASTC_10x10_Format:r_,RGBA_ASTC_10x5_Format:t_,RGBA_ASTC_10x6_Format:n_,RGBA_ASTC_10x8_Format:i_,RGBA_ASTC_12x10_Format:s_,RGBA_ASTC_12x12_Format:o_,RGBA_ASTC_4x4_Format:Xw,RGBA_ASTC_5x4_Format:qw,RGBA_ASTC_5x5_Format:Yw,RGBA_ASTC_6x5_Format:Zw,RGBA_ASTC_6x6_Format:Jw,RGBA_ASTC_8x5_Format:Kw,RGBA_ASTC_8x6_Format:Qw,RGBA_ASTC_8x8_Format:e_,RGBA_BPTC_Format:a_,RGBA_ETC2_EAC_Format:jw,RGBA_PVRTC_2BPPV1_Format:Gw,RGBA_PVRTC_4BPPV1_Format:Ww,RGBA_S3TC_DXT1_Format:ug,RGBA_S3TC_DXT3_Format:cg,RGBA_S3TC_DXT5_Format:fg,RGBFormat:ZI,RGB_ETC1_Format:r4,RGB_ETC2_Format:$w,RGB_PVRTC_2BPPV1_Format:Hw,RGB_PVRTC_4BPPV1_Format:Vw,RGB_S3TC_DXT1_Format:lg,RGFormat:t4,RGIntegerFormat:n4,RawShaderMaterial:X4,Ray:lh,Raycaster:gD,RectAreaLight:cD,RedFormat:QI,RedIntegerFormat:e4,ReinhardToneMapping:VI,RepeatWrapping:Al,ReplaceStencilOp:x9,ReverseSubtractEquation:_I,RingBufferGeometry:iq,RingGeometry:xh,SRGBColorSpace:Rr,Scene:iy,ShaderChunk:wt,ShaderLib:ns,ShaderMaterial:us,ShadowMaterial:j4,Shape:wl,ShapeBufferGeometry:rq,ShapeGeometry:vh,ShapePath:FX,ShapeUtils:Cs,ShortType:$I,Skeleton:sy,SkeletonHelper:bX,SkinnedMesh:P4,Source:ul,Sphere:Ul,SphereBufferGeometry:sq,SphereGeometry:Hl,Spherical:xX,SphericalHarmonics3:fD,SplineCurve:Eb,SpotLight:aD,SpotLightHelper:SX,Sprite:C4,SpriteMaterial:vb,SrcAlphaFactor:ob,SrcAlphaSaturateFactor:PI,SrcColorFactor:MI,StaticCopyUsage:F9,StaticDrawUsage:Nd,StaticReadUsage:I9,StereoCamera:Yj,StreamCopyUsage:O9,StreamDrawUsage:R9,StreamReadUsage:z9,StringKeyframeTrack:Gl,SubtractEquation:wI,SubtractiveBlending:Nw,TOUCH:o9,TangentSpaceNormalMap:Sa,TetrahedronBufferGeometry:oq,TetrahedronGeometry:wh,Texture:Fn,TextureLoader:Bj,TorusBufferGeometry:aq,TorusGeometry:_h,TorusKnotBufferGeometry:lq,TorusKnotGeometry:Sh,Triangle:Fr,TriangleFanDrawMode:m9,TriangleStripDrawMode:p9,TrianglesDrawMode:h9,TubeBufferGeometry:uq,TubeGeometry:bh,UVMapping:Z0,Uint16BufferAttribute:hb,Uint32BufferAttribute:pb,Uint8BufferAttribute:pH,Uint8ClampedBufferAttribute:mH,Uniform:Ub,UniformsGroup:mX,UniformsLib:Re,UniformsUtils:m4,UnsignedByteType:ma,UnsignedInt248Type:gl,UnsignedIntType:Yo,UnsignedShort4444Type:XI,UnsignedShort5551Type:qI,UnsignedShortType:ub,VSMShadowMap:Zu,Vector2:ve,Vector3:B,Vector4:Ht,VectorKeyframeTrack:$d,VideoTexture:ej,WebGL1Renderer:E4,WebGL3DRenderTarget:iH,WebGLArrayRenderTarget:nH,WebGLCubeRenderTarget:y4,WebGLMultipleRenderTargets:rH,WebGLMultisampleRenderTarget:HX,WebGLRenderTarget:Wr,WebGLRenderer:xb,WebGLUtils:b4,WireframeGeometry:$4,WrapAroundEnding:Fd,ZeroCurvatureEnding:al,ZeroFactor:SI,ZeroSlopeEnding:ll,ZeroStencilOp:y9,_SRGBAFormat:l0,sRGBEncoding:tn},Symbol.toStringTag,{value:"Module"}));var xD={exports:{}},$l={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */$l.ConcurrentRoot=1;$l.ContinuousEventPriority=4;$l.DefaultEventPriority=16;$l.DiscreteEventPriority=1;$l.IdleEventPriority=536870912;$l.LegacyRoot=0;xD.exports=$l;var tc=xD.exports;function cq(t){let e;const n=new Set,i=(u,f)=>{const d=typeof u=="function"?u(e):u;if(d!==e){const p=e;e=f?d:Object.assign({},e,d),n.forEach(m=>m(e,p))}},r=()=>e,s=(u,f=r,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=f(e);function m(){const g=f(e);if(!d(p,g)){const y=p;u(p=g,y)}}return n.add(m),()=>n.delete(m)},l={setState:i,getState:r,subscribe:(u,f,d)=>f||d?s(u,f,d):(n.add(u),()=>n.delete(u)),destroy:()=>n.clear()};return e=t(i,r,l),l}const fq=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Wk=fq?H.useEffect:H.useLayoutEffect;function dq(t){const e=typeof t=="function"?cq(t):t,n=(i=e.getState,r=Object.is)=>{const[,s]=H.useReducer(w=>w+1,0),o=e.getState(),a=H.useRef(o),l=H.useRef(i),u=H.useRef(r),f=H.useRef(!1),d=H.useRef();d.current===void 0&&(d.current=i(o));let p,m=!1;(a.current!==o||l.current!==i||u.current!==r||f.current)&&(p=i(o),m=!r(d.current,p)),Wk(()=>{m&&(d.current=p),a.current=o,l.current=i,u.current=r,f.current=!1});const g=H.useRef(o);Wk(()=>{const w=()=>{try{const _=e.getState(),b=l.current(_);u.current(d.current,b)||(a.current=_,d.current=b,s())}catch{f.current=!0,s()}},v=e.subscribe(w);return e.getState()!==g.current&&w(),v},[]);const y=m?p:d.current;return H.useDebugValue(y),y};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[n,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},n}var vD={exports:{}},Xv={exports:{}},qv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gk;function hq(){return Gk||(Gk=1,function(t){function e(D,F){var A=D.length;D.push(F);e:for(;0<A;){var X=A-1>>>1,Y=D[X];if(0<r(Y,F))D[X]=F,D[A]=Y,A=X;else break e}}function n(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var F=D[0],A=D.pop();if(A!==F){D[0]=A;e:for(var X=0,Y=D.length,z=Y>>>1;X<z;){var xe=2*(X+1)-1,Ce=D[xe],ie=xe+1,Ne=D[ie];if(0>r(Ce,A))ie<Y&&0>r(Ne,Ce)?(D[X]=Ne,D[ie]=A,X=ie):(D[X]=Ce,D[xe]=A,X=xe);else if(ie<Y&&0>r(Ne,A))D[X]=Ne,D[ie]=A,X=ie;else break e}}return F}function r(D,F){var A=D.sortIndex-F.sortIndex;return A!==0?A:D.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],f=1,d=null,p=3,m=!1,g=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(D){for(var F=n(u);F!==null;){if(F.callback===null)i(u);else if(F.startTime<=D)i(u),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(u)}}function M(D){if(y=!1,b(D),!g)if(n(l)!==null)g=!0,J(k);else{var F=n(u);F!==null&&re(M,F.startTime-D)}}function k(D,F){g=!1,y&&(y=!1,v(C),C=-1),m=!0;var A=p;try{for(b(F),d=n(l);d!==null&&(!(d.expirationTime>F)||D&&!O());){var X=d.callback;if(typeof X=="function"){d.callback=null,p=d.priorityLevel;var Y=X(d.expirationTime<=F);F=t.unstable_now(),typeof Y=="function"?d.callback=Y:d===n(l)&&i(l),b(F)}else i(l);d=n(l)}if(d!==null)var z=!0;else{var xe=n(u);xe!==null&&re(M,xe.startTime-F),z=!1}return z}finally{d=null,p=A,m=!1}}var E=!1,I=null,C=-1,L=5,R=-1;function O(){return!(t.unstable_now()-R<L)}function q(){if(I!==null){var D=t.unstable_now();R=D;var F=!0;try{F=I(!0,D)}finally{F?j():(E=!1,I=null)}}else E=!1}var j;if(typeof _=="function")j=function(){_(q)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,W=G.port2;G.port1.onmessage=q,j=function(){W.postMessage(null)}}else j=function(){w(q,0)};function J(D){I=D,E||(E=!0,j())}function re(D,F){C=w(function(){D(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,J(k))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(p){case 1:case 2:case 3:var F=3;break;default:F=p}var A=p;p=F;try{return D()}finally{p=A}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,F){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var A=p;p=D;try{return F()}finally{p=A}},t.unstable_scheduleCallback=function(D,F,A){var X=t.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?X+A:X):A=X,D){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=A+Y,D={id:f++,callback:F,priorityLevel:D,startTime:A,expirationTime:Y,sortIndex:-1},A>X?(D.sortIndex=A,e(u,D),n(l)===null&&D===n(u)&&(y?(v(C),C=-1):y=!0,re(M,A-X))):(D.sortIndex=Y,e(l,D),g||m||(g=!0,J(k))),D},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(D){var F=p;return function(){var A=p;p=F;try{return D.apply(this,arguments)}finally{p=A}}}}(qv)),qv}var $k;function pq(){return $k||($k=1,Xv.exports=hq()),Xv.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mq=function(e){var n={},i=H,r=pq(),s=Object.assign;function o(c){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+c,x=1;x<arguments.length;x++)h+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),g=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),M=Symbol.for("react.offscreen"),k=Symbol.iterator;function E(c){return c===null||typeof c!="object"?null:(c=k&&c[k]||c["@@iterator"],typeof c=="function"?c:null)}function I(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case f:return"Fragment";case u:return"Portal";case p:return"Profiler";case d:return"StrictMode";case w:return"Suspense";case v:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case g:return(c.displayName||"Context")+".Consumer";case m:return(c._context.displayName||"Context")+".Provider";case y:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case _:return h=c.displayName||null,h!==null?h:I(c.type)||"Memo";case b:h=c._payload,c=c._init;try{return I(c(h))}catch{}}return null}function C(c){var h=c.type;switch(c.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=h.render,c=c.displayName||c.name||"",h.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return I(h);case 8:return h===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function L(c){var h=c,x=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,h.flags&4098&&(x=h.return),c=h.return;while(c)}return h.tag===3?x:null}function R(c){if(L(c)!==c)throw Error(o(188))}function O(c){var h=c.alternate;if(!h){if(h=L(c),h===null)throw Error(o(188));return h!==c?null:c}for(var x=c,S=h;;){var T=x.return;if(T===null)break;var P=T.alternate;if(P===null){if(S=T.return,S!==null){x=S;continue}break}if(T.child===P.child){for(P=T.child;P;){if(P===x)return R(T),c;if(P===S)return R(T),h;P=P.sibling}throw Error(o(188))}if(x.return!==S.return)x=T,S=P;else{for(var V=!1,K=T.child;K;){if(K===x){V=!0,x=T,S=P;break}if(K===S){V=!0,S=T,x=P;break}K=K.sibling}if(!V){for(K=P.child;K;){if(K===x){V=!0,x=P,S=T;break}if(K===S){V=!0,S=P,x=T;break}K=K.sibling}if(!V)throw Error(o(189))}}if(x.alternate!==S)throw Error(o(190))}if(x.tag!==3)throw Error(o(188));return x.stateNode.current===x?c:h}function q(c){return c=O(c),c!==null?j(c):null}function j(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var h=j(c);if(h!==null)return h;c=c.sibling}return null}function G(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){if(c.tag!==4){var h=G(c);if(h!==null)return h}c=c.sibling}return null}var W=Array.isArray,J=e.getPublicInstance,re=e.getRootHostContext,D=e.getChildHostContext,F=e.prepareForCommit,A=e.resetAfterCommit,X=e.createInstance,Y=e.appendInitialChild,z=e.finalizeInitialChildren,xe=e.prepareUpdate,Ce=e.shouldSetTextContent,ie=e.createTextInstance,Ne=e.scheduleTimeout,We=e.cancelTimeout,Ge=e.noTimeout,be=e.isPrimaryRenderer,$e=e.supportsMutation,pe=e.supportsPersistence,de=e.supportsHydration,Ae=e.getInstanceFromNode,qe=e.preparePortalMount,Ie=e.getCurrentEventPriority,ot=e.detachDeletedInstance,it=e.supportsMicrotasks,Qe=e.scheduleMicrotask,kt=e.supportsTestSelectors,It=e.findFiberRoot,$=e.getBoundingRect,N=e.getTextContent,fe=e.isHiddenSubtree,_e=e.matchAccessibilityRole,Z=e.setFocusIfFocusable,le=e.setupIntersectionObserver,Te=e.appendChild,se=e.appendChildToContainer,Pe=e.commitTextUpdate,Le=e.commitMount,Ye=e.commitUpdate,Fe=e.insertBefore,st=e.insertInContainerBefore,vt=e.removeChild,_t=e.removeChildFromContainer,Q=e.resetTextContent,De=e.hideInstance,me=e.hideTextInstance,Ve=e.unhideInstance,Be=e.unhideTextInstance,Ct=e.clearContainer,kn=e.cloneInstance,rn=e.createContainerChildSet,Gr=e.appendChildToContainerChildSet,sn=e.finalizeContainerChildren,pr=e.replaceContainerChildren,yi=e.cloneHiddenInstance,Ph=e.cloneHiddenTextInstance,Xl=e.canHydrateInstance,Lh=e.canHydrateTextInstance,vy=e.canHydrateSuspenseInstance,Rh=e.isSuspenseInstancePending,jc=e.isSuspenseInstanceFallback,U=e.registerSuspenseInstanceRetry,ae=e.getNextHydratableSibling,ge=e.getFirstHydratableChild,oe=e.getFirstHydratableChildWithinContainer,ye=e.getFirstHydratableChildWithinSuspenseInstance,et=e.hydrateInstance,at=e.hydrateTextInstance,pt=e.hydrateSuspenseInstance,lt=e.getNextHydratableInstanceAfterSuspenseInstance,Dt=e.commitHydratedContainer,Tt=e.commitHydratedSuspenseInstance,Et=e.clearSuspenseBoundary,on=e.clearSuspenseBoundaryFromContainer,Ls=e.shouldDeleteUnhydratedTailInstances,xo=e.didNotMatchHydratedContainerTextInstance,vo=e.didNotMatchHydratedTextInstance,Ri;function Mt(c){if(Ri===void 0)try{throw Error()}catch(x){var h=x.stack.trim().match(/\n( *(at )?)/);Ri=h&&h[1]||""}return`
`+Ri+c}var ds=!1;function an(c,h){if(!c||ds)return"";ds=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(Ee){var S=Ee}Reflect.construct(c,[],h)}else{try{h.call()}catch(Ee){S=Ee}c.call(h.prototype)}else{try{throw Error()}catch(Ee){S=Ee}c()}}catch(Ee){if(Ee&&S&&typeof Ee.stack=="string"){for(var T=Ee.stack.split(`
`),P=S.stack.split(`
`),V=T.length-1,K=P.length-1;1<=V&&0<=K&&T[V]!==P[K];)K--;for(;1<=V&&0<=K;V--,K--)if(T[V]!==P[K]){if(V!==1||K!==1)do if(V--,K--,0>K||T[V]!==P[K]){var he=`
`+T[V].replace(" at new "," at ");return c.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",c.displayName)),he}while(1<=V&&0<=K);break}}}finally{ds=!1,Error.prepareStackTrace=x}return(c=c?c.displayName||c.name:"")?Mt(c):""}var Ii=Object.prototype.hasOwnProperty,mr=[],gr=-1;function yr(c){return{current:c}}function ft(c){0>gr||(c.current=mr[gr],mr[gr]=null,gr--)}function At(c,h){gr++,mr[gr]=c.current,c.current=h}var xr={},Bt=yr(xr),Vn=yr(!1),Rs=xr;function Is(c,h){var x=c.type.contextTypes;if(!x)return xr;var S=c.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===h)return S.__reactInternalMemoizedMaskedChildContext;var T={},P;for(P in x)T[P]=h[P];return S&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=h,c.__reactInternalMemoizedMaskedChildContext=T),T}function Di(c){return c=c.childContextTypes,c!=null}function Ih(){ft(Vn),ft(Bt)}function fM(c,h,x){if(Bt.current!==xr)throw Error(o(168));At(Bt,h),At(Vn,x)}function dM(c,h,x){var S=c.stateNode;if(h=h.childContextTypes,typeof S.getChildContext!="function")return x;S=S.getChildContext();for(var T in S)if(!(T in h))throw Error(o(108,C(c)||"Unknown",T));return s({},x,S)}function Dh(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||xr,Rs=Bt.current,At(Bt,c),At(Vn,Vn.current),!0}function hM(c,h,x){var S=c.stateNode;if(!S)throw Error(o(169));x?(c=dM(c,h,Rs),S.__reactInternalMemoizedMergedChildContext=c,ft(Vn),ft(Bt),At(Bt,c)):ft(Vn),At(Vn,x)}var $r=Math.clz32?Math.clz32:mz,hz=Math.log,pz=Math.LN2;function mz(c){return c>>>=0,c===0?32:31-(hz(c)/pz|0)|0}var zh=64,Fh=4194304;function Xc(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Nh(c,h){var x=c.pendingLanes;if(x===0)return 0;var S=0,T=c.suspendedLanes,P=c.pingedLanes,V=x&268435455;if(V!==0){var K=V&~T;K!==0?S=Xc(K):(P&=V,P!==0&&(S=Xc(P)))}else V=x&~T,V!==0?S=Xc(V):P!==0&&(S=Xc(P));if(S===0)return 0;if(h!==0&&h!==S&&!(h&T)&&(T=S&-S,P=h&-h,T>=P||T===16&&(P&4194240)!==0))return h;if(S&4&&(S|=x&16),h=c.entangledLanes,h!==0)for(c=c.entanglements,h&=S;0<h;)x=31-$r(h),T=1<<x,S|=c[x],h&=~T;return S}function gz(c,h){switch(c){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yz(c,h){for(var x=c.suspendedLanes,S=c.pingedLanes,T=c.expirationTimes,P=c.pendingLanes;0<P;){var V=31-$r(P),K=1<<V,he=T[V];he===-1?(!(K&x)||K&S)&&(T[V]=gz(K,h)):he<=h&&(c.expiredLanes|=K),P&=~K}}function wy(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function _y(c){for(var h=[],x=0;31>x;x++)h.push(c);return h}function qc(c,h,x){c.pendingLanes|=h,h!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,h=31-$r(h),c[h]=x}function xz(c,h){var x=c.pendingLanes&~h;c.pendingLanes=h,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=h,c.mutableReadLanes&=h,c.entangledLanes&=h,h=c.entanglements;var S=c.eventTimes;for(c=c.expirationTimes;0<x;){var T=31-$r(x),P=1<<T;h[T]=0,S[T]=-1,c[T]=-1,x&=~P}}function Sy(c,h){var x=c.entangledLanes|=h;for(c=c.entanglements;x;){var S=31-$r(x),T=1<<S;T&h|c[S]&h&&(c[S]|=h),x&=~T}}var zt=0;function pM(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var by=r.unstable_scheduleCallback,mM=r.unstable_cancelCallback,vz=r.unstable_shouldYield,wz=r.unstable_requestPaint,Hn=r.unstable_now,My=r.unstable_ImmediatePriority,_z=r.unstable_UserBlockingPriority,Ty=r.unstable_NormalPriority,Sz=r.unstable_IdlePriority,Oh=null,hs=null;function bz(c){if(hs&&typeof hs.onCommitFiberRoot=="function")try{hs.onCommitFiberRoot(Oh,c,void 0,(c.current.flags&128)===128)}catch{}}function Mz(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var ps=typeof Object.is=="function"?Object.is:Mz,Ds=null,Bh=!1,Ey=!1;function gM(c){Ds===null?Ds=[c]:Ds.push(c)}function Tz(c){Bh=!0,gM(c)}function ms(){if(!Ey&&Ds!==null){Ey=!0;var c=0,h=zt;try{var x=Ds;for(zt=1;c<x.length;c++){var S=x[c];do S=S(!0);while(S!==null)}Ds=null,Bh=!1}catch(T){throw Ds!==null&&(Ds=Ds.slice(c+1)),by(My,ms),T}finally{zt=h,Ey=!1}}return null}var Ez=a.ReactCurrentBatchConfig;function Uh(c,h){if(ps(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var x=Object.keys(c),S=Object.keys(h);if(x.length!==S.length)return!1;for(S=0;S<x.length;S++){var T=x[S];if(!Ii.call(h,T)||!ps(c[T],h[T]))return!1}return!0}function kz(c){switch(c.tag){case 5:return Mt(c.type);case 16:return Mt("Lazy");case 13:return Mt("Suspense");case 19:return Mt("SuspenseList");case 0:case 2:case 15:return c=an(c.type,!1),c;case 11:return c=an(c.type.render,!1),c;case 1:return c=an(c.type,!0),c;default:return""}}function jr(c,h){if(c&&c.defaultProps){h=s({},h),c=c.defaultProps;for(var x in c)h[x]===void 0&&(h[x]=c[x]);return h}return h}var Vh=yr(null),Hh=null,ql=null,ky=null;function Cy(){ky=ql=Hh=null}function yM(c,h,x){be?(At(Vh,h._currentValue),h._currentValue=x):(At(Vh,h._currentValue2),h._currentValue2=x)}function Ay(c){var h=Vh.current;ft(Vh),be?c._currentValue=h:c._currentValue2=h}function Py(c,h,x){for(;c!==null;){var S=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,S!==null&&(S.childLanes|=h)):S!==null&&(S.childLanes&h)!==h&&(S.childLanes|=h),c===x)break;c=c.return}}function Yl(c,h){Hh=c,ky=ql=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&h&&(Ki=!0),c.firstContext=null)}function vr(c){var h=be?c._currentValue:c._currentValue2;if(ky!==c)if(c={context:c,memoizedValue:h,next:null},ql===null){if(Hh===null)throw Error(o(308));ql=c,Hh.dependencies={lanes:0,firstContext:c}}else ql=ql.next=c;return h}var gs=null,wo=!1;function Ly(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xM(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function zs(c,h){return{eventTime:c,lane:h,tag:0,payload:null,callback:null,next:null}}function _o(c,h){var x=c.updateQueue;x!==null&&(x=x.shared,Cn!==null&&c.mode&1&&!(xt&2)?(c=x.interleaved,c===null?(h.next=h,gs===null?gs=[x]:gs.push(x)):(h.next=c.next,c.next=h),x.interleaved=h):(c=x.pending,c===null?h.next=h:(h.next=c.next,c.next=h),x.pending=h))}function Wh(c,h,x){if(h=h.updateQueue,h!==null&&(h=h.shared,(x&4194240)!==0)){var S=h.lanes;S&=c.pendingLanes,x|=S,h.lanes=x,Sy(c,x)}}function vM(c,h){var x=c.updateQueue,S=c.alternate;if(S!==null&&(S=S.updateQueue,x===S)){var T=null,P=null;if(x=x.firstBaseUpdate,x!==null){do{var V={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};P===null?T=P=V:P=P.next=V,x=x.next}while(x!==null);P===null?T=P=h:P=P.next=h}else T=P=h;x={baseState:S.baseState,firstBaseUpdate:T,lastBaseUpdate:P,shared:S.shared,effects:S.effects},c.updateQueue=x;return}c=x.lastBaseUpdate,c===null?x.firstBaseUpdate=h:c.next=h,x.lastBaseUpdate=h}function Gh(c,h,x,S){var T=c.updateQueue;wo=!1;var P=T.firstBaseUpdate,V=T.lastBaseUpdate,K=T.shared.pending;if(K!==null){T.shared.pending=null;var he=K,Ee=he.next;he.next=null,V===null?P=Ee:V.next=Ee,V=he;var Xe=c.alternate;Xe!==null&&(Xe=Xe.updateQueue,K=Xe.lastBaseUpdate,K!==V&&(K===null?Xe.firstBaseUpdate=Ee:K.next=Ee,Xe.lastBaseUpdate=he))}if(P!==null){var ut=T.baseState;V=0,Xe=Ee=he=null,K=P;do{var tt=K.lane,Gt=K.eventTime;if((S&tt)===tt){Xe!==null&&(Xe=Xe.next={eventTime:Gt,lane:0,tag:K.tag,payload:K.payload,callback:K.callback,next:null});e:{var Ke=c,oi=K;switch(tt=h,Gt=x,oi.tag){case 1:if(Ke=oi.payload,typeof Ke=="function"){ut=Ke.call(Gt,ut,tt);break e}ut=Ke;break e;case 3:Ke.flags=Ke.flags&-65537|128;case 0:if(Ke=oi.payload,tt=typeof Ke=="function"?Ke.call(Gt,ut,tt):Ke,tt==null)break e;ut=s({},ut,tt);break e;case 2:wo=!0}}K.callback!==null&&K.lane!==0&&(c.flags|=64,tt=T.effects,tt===null?T.effects=[K]:tt.push(K))}else Gt={eventTime:Gt,lane:tt,tag:K.tag,payload:K.payload,callback:K.callback,next:null},Xe===null?(Ee=Xe=Gt,he=ut):Xe=Xe.next=Gt,V|=tt;if(K=K.next,K===null){if(K=T.shared.pending,K===null)break;tt=K,K=tt.next,tt.next=null,T.lastBaseUpdate=tt,T.shared.pending=null}}while(1);if(Xe===null&&(he=ut),T.baseState=he,T.firstBaseUpdate=Ee,T.lastBaseUpdate=Xe,h=T.shared.interleaved,h!==null){T=h;do V|=T.lane,T=T.next;while(T!==h)}else P===null&&(T.shared.lanes=0);ru|=V,c.lanes=V,c.memoizedState=ut}}function wM(c,h,x){if(c=h.effects,h.effects=null,c!==null)for(h=0;h<c.length;h++){var S=c[h],T=S.callback;if(T!==null){if(S.callback=null,S=x,typeof T!="function")throw Error(o(191,T));T.call(S)}}}var _M=new i.Component().refs;function Ry(c,h,x,S){h=c.memoizedState,x=x(S,h),x=x==null?h:s({},h,x),c.memoizedState=x,c.lanes===0&&(c.updateQueue.baseState=x)}var $h={isMounted:function(c){return(c=c._reactInternals)?L(c)===c:!1},enqueueSetState:function(c,h,x){c=c._reactInternals;var S=vi(),T=Mo(c),P=zs(S,T);P.payload=h,x!=null&&(P.callback=x),_o(c,P),h=Mr(c,T,S),h!==null&&Wh(h,c,T)},enqueueReplaceState:function(c,h,x){c=c._reactInternals;var S=vi(),T=Mo(c),P=zs(S,T);P.tag=1,P.payload=h,x!=null&&(P.callback=x),_o(c,P),h=Mr(c,T,S),h!==null&&Wh(h,c,T)},enqueueForceUpdate:function(c,h){c=c._reactInternals;var x=vi(),S=Mo(c),T=zs(x,S);T.tag=2,h!=null&&(T.callback=h),_o(c,T),h=Mr(c,S,x),h!==null&&Wh(h,c,S)}};function SM(c,h,x,S,T,P,V){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(S,P,V):h.prototype&&h.prototype.isPureReactComponent?!Uh(x,S)||!Uh(T,P):!0}function bM(c,h,x){var S=!1,T=xr,P=h.contextType;return typeof P=="object"&&P!==null?P=vr(P):(T=Di(h)?Rs:Bt.current,S=h.contextTypes,P=(S=S!=null)?Is(c,T):xr),h=new h(x,P),c.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=$h,c.stateNode=h,h._reactInternals=c,S&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=T,c.__reactInternalMemoizedMaskedChildContext=P),h}function MM(c,h,x,S){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(x,S),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(x,S),h.state!==c&&$h.enqueueReplaceState(h,h.state,null)}function Iy(c,h,x,S){var T=c.stateNode;T.props=x,T.state=c.memoizedState,T.refs=_M,Ly(c);var P=h.contextType;typeof P=="object"&&P!==null?T.context=vr(P):(P=Di(h)?Rs:Bt.current,T.context=Is(c,P)),T.state=c.memoizedState,P=h.getDerivedStateFromProps,typeof P=="function"&&(Ry(c,h,P,x),T.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(h=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),h!==T.state&&$h.enqueueReplaceState(T,T.state,null),Gh(c,x,T,S),T.state=c.memoizedState),typeof T.componentDidMount=="function"&&(c.flags|=4194308)}var Zl=[],Jl=0,jh=null,Xh=0,wr=[],_r=0,ka=null,Fs=1,Ns="";function Ca(c,h){Zl[Jl++]=Xh,Zl[Jl++]=jh,jh=c,Xh=h}function TM(c,h,x){wr[_r++]=Fs,wr[_r++]=Ns,wr[_r++]=ka,ka=c;var S=Fs;c=Ns;var T=32-$r(S)-1;S&=~(1<<T),x+=1;var P=32-$r(h)+T;if(30<P){var V=T-T%5;P=(S&(1<<V)-1).toString(32),S>>=V,T-=V,Fs=1<<32-$r(h)+T|x<<T|S,Ns=P+c}else Fs=1<<P|x<<T|S,Ns=c}function Dy(c){c.return!==null&&(Ca(c,1),TM(c,1,0))}function zy(c){for(;c===jh;)jh=Zl[--Jl],Zl[Jl]=null,Xh=Zl[--Jl],Zl[Jl]=null;for(;c===ka;)ka=wr[--_r],wr[_r]=null,Ns=wr[--_r],wr[_r]=null,Fs=wr[--_r],wr[_r]=null}var Zi=null,Ji=null,ln=!1,Yc=!1,Xr=null;function EM(c,h){var x=Tr(5,null,null,0);x.elementType="DELETED",x.stateNode=h,x.return=c,h=c.deletions,h===null?(c.deletions=[x],c.flags|=16):h.push(x)}function kM(c,h){switch(c.tag){case 5:return h=Xl(h,c.type,c.pendingProps),h!==null?(c.stateNode=h,Zi=c,Ji=ge(h),!0):!1;case 6:return h=Lh(h,c.pendingProps),h!==null?(c.stateNode=h,Zi=c,Ji=null,!0):!1;case 13:if(h=vy(h),h!==null){var x=ka!==null?{id:Fs,overflow:Ns}:null;return c.memoizedState={dehydrated:h,treeContext:x,retryLane:1073741824},x=Tr(18,null,null,0),x.stateNode=h,x.return=c,c.child=x,Zi=c,Ji=null,!0}return!1;default:return!1}}function Fy(c){return(c.mode&1)!==0&&(c.flags&128)===0}function Ny(c){if(ln){var h=Ji;if(h){var x=h;if(!kM(c,h)){if(Fy(c))throw Error(o(418));h=ae(x);var S=Zi;h&&kM(c,h)?EM(S,x):(c.flags=c.flags&-4097|2,ln=!1,Zi=c)}}else{if(Fy(c))throw Error(o(418));c.flags=c.flags&-4097|2,ln=!1,Zi=c}}}function CM(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;Zi=c}function Zc(c){if(!de||c!==Zi)return!1;if(!ln)return CM(c),ln=!0,!1;if(c.tag!==3&&(c.tag!==5||Ls(c.type)&&!Ce(c.type,c.memoizedProps))){var h=Ji;if(h){if(Fy(c)){for(c=Ji;c;)c=ae(c);throw Error(o(418))}for(;h;)EM(c,h),h=ae(h)}}if(CM(c),c.tag===13){if(!de)throw Error(o(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));Ji=lt(c)}else Ji=Zi?ae(c.stateNode):null;return!0}function Kl(){de&&(Ji=Zi=null,Yc=ln=!1)}function Oy(c){Xr===null?Xr=[c]:Xr.push(c)}function Jc(c,h,x){if(c=x.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(o(309));var S=x.stateNode}if(!S)throw Error(o(147,c));var T=S,P=""+c;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===P?h.ref:(h=function(V){var K=T.refs;K===_M&&(K=T.refs={}),V===null?delete K[P]:K[P]=V},h._stringRef=P,h)}if(typeof c!="string")throw Error(o(284));if(!x._owner)throw Error(o(290,c))}return c}function qh(c,h){throw c=Object.prototype.toString.call(h),Error(o(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c))}function AM(c){var h=c._init;return h(c._payload)}function PM(c){function h(ue,te){if(c){var ce=ue.deletions;ce===null?(ue.deletions=[te],ue.flags|=16):ce.push(te)}}function x(ue,te){if(!c)return null;for(;te!==null;)h(ue,te),te=te.sibling;return null}function S(ue,te){for(ue=new Map;te!==null;)te.key!==null?ue.set(te.key,te):ue.set(te.index,te),te=te.sibling;return ue}function T(ue,te){return ue=Eo(ue,te),ue.index=0,ue.sibling=null,ue}function P(ue,te,ce){return ue.index=ce,c?(ce=ue.alternate,ce!==null?(ce=ce.index,ce<te?(ue.flags|=2,te):ce):(ue.flags|=2,te)):(ue.flags|=1048576,te)}function V(ue){return c&&ue.alternate===null&&(ue.flags|=2),ue}function K(ue,te,ce,Oe){return te===null||te.tag!==6?(te=_x(ce,ue.mode,Oe),te.return=ue,te):(te=T(te,ce),te.return=ue,te)}function he(ue,te,ce,Oe){var Je=ce.type;return Je===f?Xe(ue,te,ce.props.children,Oe,ce.key):te!==null&&(te.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===b&&AM(Je)===te.type)?(Oe=T(te,ce.props),Oe.ref=Jc(ue,te,ce),Oe.return=ue,Oe):(Oe=Tp(ce.type,ce.key,ce.props,null,ue.mode,Oe),Oe.ref=Jc(ue,te,ce),Oe.return=ue,Oe)}function Ee(ue,te,ce,Oe){return te===null||te.tag!==4||te.stateNode.containerInfo!==ce.containerInfo||te.stateNode.implementation!==ce.implementation?(te=Sx(ce,ue.mode,Oe),te.return=ue,te):(te=T(te,ce.children||[]),te.return=ue,te)}function Xe(ue,te,ce,Oe,Je){return te===null||te.tag!==7?(te=za(ce,ue.mode,Oe,Je),te.return=ue,te):(te=T(te,ce),te.return=ue,te)}function ut(ue,te,ce){if(typeof te=="string"&&te!==""||typeof te=="number")return te=_x(""+te,ue.mode,ce),te.return=ue,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case l:return ce=Tp(te.type,te.key,te.props,null,ue.mode,ce),ce.ref=Jc(ue,null,te),ce.return=ue,ce;case u:return te=Sx(te,ue.mode,ce),te.return=ue,te;case b:var Oe=te._init;return ut(ue,Oe(te._payload),ce)}if(W(te)||E(te))return te=za(te,ue.mode,ce,null),te.return=ue,te;qh(ue,te)}return null}function tt(ue,te,ce,Oe){var Je=te!==null?te.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number")return Je!==null?null:K(ue,te,""+ce,Oe);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case l:return ce.key===Je?he(ue,te,ce,Oe):null;case u:return ce.key===Je?Ee(ue,te,ce,Oe):null;case b:return Je=ce._init,tt(ue,te,Je(ce._payload),Oe)}if(W(ce)||E(ce))return Je!==null?null:Xe(ue,te,ce,Oe,null);qh(ue,ce)}return null}function Gt(ue,te,ce,Oe,Je){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number")return ue=ue.get(ce)||null,K(te,ue,""+Oe,Je);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case l:return ue=ue.get(Oe.key===null?ce:Oe.key)||null,he(te,ue,Oe,Je);case u:return ue=ue.get(Oe.key===null?ce:Oe.key)||null,Ee(te,ue,Oe,Je);case b:var mt=Oe._init;return Gt(ue,te,ce,mt(Oe._payload),Je)}if(W(Oe)||E(Oe))return ue=ue.get(ce)||null,Xe(te,ue,Oe,Je,null);qh(te,Oe)}return null}function Ke(ue,te,ce,Oe){for(var Je=null,mt=null,ct=te,Ft=te=0,Gn=null;ct!==null&&Ft<ce.length;Ft++){ct.index>Ft?(Gn=ct,ct=null):Gn=ct.sibling;var Nt=tt(ue,ct,ce[Ft],Oe);if(Nt===null){ct===null&&(ct=Gn);break}c&&ct&&Nt.alternate===null&&h(ue,ct),te=P(Nt,te,Ft),mt===null?Je=Nt:mt.sibling=Nt,mt=Nt,ct=Gn}if(Ft===ce.length)return x(ue,ct),ln&&Ca(ue,Ft),Je;if(ct===null){for(;Ft<ce.length;Ft++)ct=ut(ue,ce[Ft],Oe),ct!==null&&(te=P(ct,te,Ft),mt===null?Je=ct:mt.sibling=ct,mt=ct);return ln&&Ca(ue,Ft),Je}for(ct=S(ue,ct);Ft<ce.length;Ft++)Gn=Gt(ct,ue,Ft,ce[Ft],Oe),Gn!==null&&(c&&Gn.alternate!==null&&ct.delete(Gn.key===null?Ft:Gn.key),te=P(Gn,te,Ft),mt===null?Je=Gn:mt.sibling=Gn,mt=Gn);return c&&ct.forEach(function(ko){return h(ue,ko)}),ln&&Ca(ue,Ft),Je}function oi(ue,te,ce,Oe){var Je=E(ce);if(typeof Je!="function")throw Error(o(150));if(ce=Je.call(ce),ce==null)throw Error(o(151));for(var mt=Je=null,ct=te,Ft=te=0,Gn=null,Nt=ce.next();ct!==null&&!Nt.done;Ft++,Nt=ce.next()){ct.index>Ft?(Gn=ct,ct=null):Gn=ct.sibling;var ko=tt(ue,ct,Nt.value,Oe);if(ko===null){ct===null&&(ct=Gn);break}c&&ct&&ko.alternate===null&&h(ue,ct),te=P(ko,te,Ft),mt===null?Je=ko:mt.sibling=ko,mt=ko,ct=Gn}if(Nt.done)return x(ue,ct),ln&&Ca(ue,Ft),Je;if(ct===null){for(;!Nt.done;Ft++,Nt=ce.next())Nt=ut(ue,Nt.value,Oe),Nt!==null&&(te=P(Nt,te,Ft),mt===null?Je=Nt:mt.sibling=Nt,mt=Nt);return ln&&Ca(ue,Ft),Je}for(ct=S(ue,ct);!Nt.done;Ft++,Nt=ce.next())Nt=Gt(ct,ue,Ft,Nt.value,Oe),Nt!==null&&(c&&Nt.alternate!==null&&ct.delete(Nt.key===null?Ft:Nt.key),te=P(Nt,te,Ft),mt===null?Je=Nt:mt.sibling=Nt,mt=Nt);return c&&ct.forEach(function(iF){return h(ue,iF)}),ln&&Ca(ue,Ft),Je}function Er(ue,te,ce,Oe){if(typeof ce=="object"&&ce!==null&&ce.type===f&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case l:e:{for(var Je=ce.key,mt=te;mt!==null;){if(mt.key===Je){if(Je=ce.type,Je===f){if(mt.tag===7){x(ue,mt.sibling),te=T(mt,ce.props.children),te.return=ue,ue=te;break e}}else if(mt.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===b&&AM(Je)===mt.type){x(ue,mt.sibling),te=T(mt,ce.props),te.ref=Jc(ue,mt,ce),te.return=ue,ue=te;break e}x(ue,mt);break}else h(ue,mt);mt=mt.sibling}ce.type===f?(te=za(ce.props.children,ue.mode,Oe,ce.key),te.return=ue,ue=te):(Oe=Tp(ce.type,ce.key,ce.props,null,ue.mode,Oe),Oe.ref=Jc(ue,te,ce),Oe.return=ue,ue=Oe)}return V(ue);case u:e:{for(mt=ce.key;te!==null;){if(te.key===mt)if(te.tag===4&&te.stateNode.containerInfo===ce.containerInfo&&te.stateNode.implementation===ce.implementation){x(ue,te.sibling),te=T(te,ce.children||[]),te.return=ue,ue=te;break e}else{x(ue,te);break}else h(ue,te);te=te.sibling}te=Sx(ce,ue.mode,Oe),te.return=ue,ue=te}return V(ue);case b:return mt=ce._init,Er(ue,te,mt(ce._payload),Oe)}if(W(ce))return Ke(ue,te,ce,Oe);if(E(ce))return oi(ue,te,ce,Oe);qh(ue,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"?(ce=""+ce,te!==null&&te.tag===6?(x(ue,te.sibling),te=T(te,ce),te.return=ue,ue=te):(x(ue,te),te=_x(ce,ue.mode,Oe),te.return=ue,ue=te),V(ue)):x(ue,te)}return Er}var Ql=PM(!0),LM=PM(!1),Kc={},Sr=yr(Kc),Qc=yr(Kc),eu=yr(Kc);function ys(c){if(c===Kc)throw Error(o(174));return c}function By(c,h){At(eu,h),At(Qc,c),At(Sr,Kc),c=re(h),ft(Sr),At(Sr,c)}function tu(){ft(Sr),ft(Qc),ft(eu)}function RM(c){var h=ys(eu.current),x=ys(Sr.current);h=D(x,c.type,h),x!==h&&(At(Qc,c),At(Sr,h))}function Uy(c){Qc.current===c&&(ft(Sr),ft(Qc))}var cn=yr(0);function Yh(c){for(var h=c;h!==null;){if(h.tag===13){var x=h.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||Rh(x)||jc(x)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if(h.flags&128)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Vy=[];function Hy(){for(var c=0;c<Vy.length;c++){var h=Vy[c];be?h._workInProgressVersionPrimary=null:h._workInProgressVersionSecondary=null}Vy.length=0}var Zh=a.ReactCurrentDispatcher,br=a.ReactCurrentBatchConfig,nu=0,gn=null,ii=null,Wn=null,Jh=!1,ef=!1,tf=0,Cz=0;function ri(){throw Error(o(321))}function Wy(c,h){if(h===null)return!1;for(var x=0;x<h.length&&x<c.length;x++)if(!ps(c[x],h[x]))return!1;return!0}function Gy(c,h,x,S,T,P){if(nu=P,gn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Zh.current=c===null||c.memoizedState===null?Rz:Iz,c=x(S,T),ef){P=0;do{if(ef=!1,tf=0,25<=P)throw Error(o(301));P+=1,Wn=ii=null,h.updateQueue=null,Zh.current=Dz,c=x(S,T)}while(ef)}if(Zh.current=np,h=ii!==null&&ii.next!==null,nu=0,Wn=ii=gn=null,Jh=!1,h)throw Error(o(300));return c}function $y(){var c=tf!==0;return tf=0,c}function Os(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wn===null?gn.memoizedState=Wn=c:Wn=Wn.next=c,Wn}function xs(){if(ii===null){var c=gn.alternate;c=c!==null?c.memoizedState:null}else c=ii.next;var h=Wn===null?gn.memoizedState:Wn.next;if(h!==null)Wn=h,ii=c;else{if(c===null)throw Error(o(310));ii=c,c={memoizedState:ii.memoizedState,baseState:ii.baseState,baseQueue:ii.baseQueue,queue:ii.queue,next:null},Wn===null?gn.memoizedState=Wn=c:Wn=Wn.next=c}return Wn}function Aa(c,h){return typeof h=="function"?h(c):h}function Kh(c){var h=xs(),x=h.queue;if(x===null)throw Error(o(311));x.lastRenderedReducer=c;var S=ii,T=S.baseQueue,P=x.pending;if(P!==null){if(T!==null){var V=T.next;T.next=P.next,P.next=V}S.baseQueue=T=P,x.pending=null}if(T!==null){P=T.next,S=S.baseState;var K=V=null,he=null,Ee=P;do{var Xe=Ee.lane;if((nu&Xe)===Xe)he!==null&&(he=he.next={lane:0,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null}),S=Ee.hasEagerState?Ee.eagerState:c(S,Ee.action);else{var ut={lane:Xe,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null};he===null?(K=he=ut,V=S):he=he.next=ut,gn.lanes|=Xe,ru|=Xe}Ee=Ee.next}while(Ee!==null&&Ee!==P);he===null?V=S:he.next=K,ps(S,h.memoizedState)||(Ki=!0),h.memoizedState=S,h.baseState=V,h.baseQueue=he,x.lastRenderedState=S}if(c=x.interleaved,c!==null){T=c;do P=T.lane,gn.lanes|=P,ru|=P,T=T.next;while(T!==c)}else T===null&&(x.lanes=0);return[h.memoizedState,x.dispatch]}function Qh(c){var h=xs(),x=h.queue;if(x===null)throw Error(o(311));x.lastRenderedReducer=c;var S=x.dispatch,T=x.pending,P=h.memoizedState;if(T!==null){x.pending=null;var V=T=T.next;do P=c(P,V.action),V=V.next;while(V!==T);ps(P,h.memoizedState)||(Ki=!0),h.memoizedState=P,h.baseQueue===null&&(h.baseState=P),x.lastRenderedState=P}return[P,S]}function IM(){}function DM(c,h){var x=gn,S=xs(),T=h(),P=!ps(S.memoizedState,T);if(P&&(S.memoizedState=T,Ki=!0),S=S.queue,rf(NM.bind(null,x,S,c),[c]),S.getSnapshot!==h||P||Wn!==null&&Wn.memoizedState.tag&1){if(x.flags|=2048,nf(9,FM.bind(null,x,S,T,h),void 0,null),Cn===null)throw Error(o(349));nu&30||zM(x,h,T)}return T}function zM(c,h,x){c.flags|=16384,c={getSnapshot:h,value:x},h=gn.updateQueue,h===null?(h={lastEffect:null,stores:null},gn.updateQueue=h,h.stores=[c]):(x=h.stores,x===null?h.stores=[c]:x.push(c))}function FM(c,h,x,S){h.value=x,h.getSnapshot=S,OM(h)&&Mr(c,1,-1)}function NM(c,h,x){return x(function(){OM(h)&&Mr(c,1,-1)})}function OM(c){var h=c.getSnapshot;c=c.value;try{var x=h();return!ps(c,x)}catch{return!0}}function jy(c){var h=Os();return typeof c=="function"&&(c=c()),h.memoizedState=h.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:c},h.queue=c,c=c.dispatch=Lz.bind(null,gn,c),[h.memoizedState,c]}function nf(c,h,x,S){return c={tag:c,create:h,destroy:x,deps:S,next:null},h=gn.updateQueue,h===null?(h={lastEffect:null,stores:null},gn.updateQueue=h,h.lastEffect=c.next=c):(x=h.lastEffect,x===null?h.lastEffect=c.next=c:(S=x.next,x.next=c,c.next=S,h.lastEffect=c)),c}function BM(){return xs().memoizedState}function ep(c,h,x,S){var T=Os();gn.flags|=c,T.memoizedState=nf(1|h,x,void 0,S===void 0?null:S)}function tp(c,h,x,S){var T=xs();S=S===void 0?null:S;var P=void 0;if(ii!==null){var V=ii.memoizedState;if(P=V.destroy,S!==null&&Wy(S,V.deps)){T.memoizedState=nf(h,x,P,S);return}}gn.flags|=c,T.memoizedState=nf(1|h,x,P,S)}function Xy(c,h){return ep(8390656,8,c,h)}function rf(c,h){return tp(2048,8,c,h)}function UM(c,h){return tp(4,2,c,h)}function VM(c,h){return tp(4,4,c,h)}function HM(c,h){if(typeof h=="function")return c=c(),h(c),function(){h(null)};if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function WM(c,h,x){return x=x!=null?x.concat([c]):null,tp(4,4,HM.bind(null,h,c),x)}function qy(){}function GM(c,h){var x=xs();h=h===void 0?null:h;var S=x.memoizedState;return S!==null&&h!==null&&Wy(h,S[1])?S[0]:(x.memoizedState=[c,h],c)}function $M(c,h){var x=xs();h=h===void 0?null:h;var S=x.memoizedState;return S!==null&&h!==null&&Wy(h,S[1])?S[0]:(c=c(),x.memoizedState=[c,h],c)}function Az(c,h){var x=zt;zt=x!==0&&4>x?x:4,c(!0);var S=br.transition;br.transition={};try{c(!1),h()}finally{zt=x,br.transition=S}}function jM(){return xs().memoizedState}function Pz(c,h,x){var S=Mo(c);x={lane:S,action:x,hasEagerState:!1,eagerState:null,next:null},XM(c)?qM(h,x):(YM(c,h,x),x=vi(),c=Mr(c,S,x),c!==null&&ZM(c,h,S))}function Lz(c,h,x){var S=Mo(c),T={lane:S,action:x,hasEagerState:!1,eagerState:null,next:null};if(XM(c))qM(h,T);else{YM(c,h,T);var P=c.alternate;if(c.lanes===0&&(P===null||P.lanes===0)&&(P=h.lastRenderedReducer,P!==null))try{var V=h.lastRenderedState,K=P(V,x);if(T.hasEagerState=!0,T.eagerState=K,ps(K,V))return}catch{}finally{}x=vi(),c=Mr(c,S,x),c!==null&&ZM(c,h,S)}}function XM(c){var h=c.alternate;return c===gn||h!==null&&h===gn}function qM(c,h){ef=Jh=!0;var x=c.pending;x===null?h.next=h:(h.next=x.next,x.next=h),c.pending=h}function YM(c,h,x){Cn!==null&&c.mode&1&&!(xt&2)?(c=h.interleaved,c===null?(x.next=x,gs===null?gs=[h]:gs.push(h)):(x.next=c.next,c.next=x),h.interleaved=x):(c=h.pending,c===null?x.next=x:(x.next=c.next,c.next=x),h.pending=x)}function ZM(c,h,x){if(x&4194240){var S=h.lanes;S&=c.pendingLanes,x|=S,h.lanes=x,Sy(c,x)}}var np={readContext:vr,useCallback:ri,useContext:ri,useEffect:ri,useImperativeHandle:ri,useInsertionEffect:ri,useLayoutEffect:ri,useMemo:ri,useReducer:ri,useRef:ri,useState:ri,useDebugValue:ri,useDeferredValue:ri,useTransition:ri,useMutableSource:ri,useSyncExternalStore:ri,useId:ri,unstable_isNewReconciler:!1},Rz={readContext:vr,useCallback:function(c,h){return Os().memoizedState=[c,h===void 0?null:h],c},useContext:vr,useEffect:Xy,useImperativeHandle:function(c,h,x){return x=x!=null?x.concat([c]):null,ep(4194308,4,HM.bind(null,h,c),x)},useLayoutEffect:function(c,h){return ep(4194308,4,c,h)},useInsertionEffect:function(c,h){return ep(4,2,c,h)},useMemo:function(c,h){var x=Os();return h=h===void 0?null:h,c=c(),x.memoizedState=[c,h],c},useReducer:function(c,h,x){var S=Os();return h=x!==void 0?x(h):h,S.memoizedState=S.baseState=h,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:h},S.queue=c,c=c.dispatch=Pz.bind(null,gn,c),[S.memoizedState,c]},useRef:function(c){var h=Os();return c={current:c},h.memoizedState=c},useState:jy,useDebugValue:qy,useDeferredValue:function(c){var h=jy(c),x=h[0],S=h[1];return Xy(function(){var T=br.transition;br.transition={};try{S(c)}finally{br.transition=T}},[c]),x},useTransition:function(){var c=jy(!1),h=c[0];return c=Az.bind(null,c[1]),Os().memoizedState=c,[h,c]},useMutableSource:function(){},useSyncExternalStore:function(c,h,x){var S=gn,T=Os();if(ln){if(x===void 0)throw Error(o(407));x=x()}else{if(x=h(),Cn===null)throw Error(o(349));nu&30||zM(S,h,x)}T.memoizedState=x;var P={value:x,getSnapshot:h};return T.queue=P,Xy(NM.bind(null,S,P,c),[c]),S.flags|=2048,nf(9,FM.bind(null,S,P,x,h),void 0,null),x},useId:function(){var c=Os(),h=Cn.identifierPrefix;if(ln){var x=Ns,S=Fs;x=(S&~(1<<32-$r(S)-1)).toString(32)+x,h=":"+h+"R"+x,x=tf++,0<x&&(h+="H"+x.toString(32)),h+=":"}else x=Cz++,h=":"+h+"r"+x.toString(32)+":";return c.memoizedState=h},unstable_isNewReconciler:!1},Iz={readContext:vr,useCallback:GM,useContext:vr,useEffect:rf,useImperativeHandle:WM,useInsertionEffect:UM,useLayoutEffect:VM,useMemo:$M,useReducer:Kh,useRef:BM,useState:function(){return Kh(Aa)},useDebugValue:qy,useDeferredValue:function(c){var h=Kh(Aa),x=h[0],S=h[1];return rf(function(){var T=br.transition;br.transition={};try{S(c)}finally{br.transition=T}},[c]),x},useTransition:function(){var c=Kh(Aa)[0],h=xs().memoizedState;return[c,h]},useMutableSource:IM,useSyncExternalStore:DM,useId:jM,unstable_isNewReconciler:!1},Dz={readContext:vr,useCallback:GM,useContext:vr,useEffect:rf,useImperativeHandle:WM,useInsertionEffect:UM,useLayoutEffect:VM,useMemo:$M,useReducer:Qh,useRef:BM,useState:function(){return Qh(Aa)},useDebugValue:qy,useDeferredValue:function(c){var h=Qh(Aa),x=h[0],S=h[1];return rf(function(){var T=br.transition;br.transition={};try{S(c)}finally{br.transition=T}},[c]),x},useTransition:function(){var c=Qh(Aa)[0],h=xs().memoizedState;return[c,h]},useMutableSource:IM,useSyncExternalStore:DM,useId:jM,unstable_isNewReconciler:!1};function Yy(c,h){try{var x="",S=h;do x+=kz(S),S=S.return;while(S);var T=x}catch(P){T=`
Error generating stack: `+P.message+`
`+P.stack}return{value:c,source:h,stack:T}}function Zy(c,h){try{console.error(h.value)}catch(x){setTimeout(function(){throw x})}}var zz=typeof WeakMap=="function"?WeakMap:Map;function JM(c,h,x){x=zs(-1,x),x.tag=3,x.payload={element:null};var S=h.value;return x.callback=function(){xp||(xp=!0,px=S),Zy(c,h)},x}function KM(c,h,x){x=zs(-1,x),x.tag=3;var S=c.type.getDerivedStateFromError;if(typeof S=="function"){var T=h.value;x.payload=function(){return S(T)},x.callback=function(){Zy(c,h)}}var P=c.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(x.callback=function(){Zy(c,h),typeof S!="function"&&(So===null?So=new Set([this]):So.add(this));var V=h.stack;this.componentDidCatch(h.value,{componentStack:V!==null?V:""})}),x}function QM(c,h,x){var S=c.pingCache;if(S===null){S=c.pingCache=new zz;var T=new Set;S.set(h,T)}else T=S.get(h),T===void 0&&(T=new Set,S.set(h,T));T.has(x)||(T.add(x),c=Yz.bind(null,c,h,x),h.then(c,c))}function e2(c){do{var h;if((h=c.tag===13)&&(h=c.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return c;c=c.return}while(c!==null);return null}function t2(c,h,x,S,T){return c.mode&1?(c.flags|=65536,c.lanes=T,c):(c===h?c.flags|=65536:(c.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(h=zs(-1,1),h.tag=2,_o(x,h))),x.lanes|=1),c)}function vs(c){c.flags|=4}function n2(c,h){if(c!==null&&c.child===h.child)return!0;if(h.flags&16)return!1;for(c=h.child;c!==null;){if(c.flags&12854||c.subtreeFlags&12854)return!1;c=c.sibling}return!0}var sf,of,ip,rp;if($e)sf=function(c,h){for(var x=h.child;x!==null;){if(x.tag===5||x.tag===6)Y(c,x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},of=function(){},ip=function(c,h,x,S,T){if(c=c.memoizedProps,c!==S){var P=h.stateNode,V=ys(Sr.current);x=xe(P,x,c,S,T,V),(h.updateQueue=x)&&vs(h)}},rp=function(c,h,x,S){x!==S&&vs(h)};else if(pe){sf=function(c,h,x,S){for(var T=h.child;T!==null;){if(T.tag===5){var P=T.stateNode;x&&S&&(P=yi(P,T.type,T.memoizedProps,T)),Y(c,P)}else if(T.tag===6)P=T.stateNode,x&&S&&(P=Ph(P,T.memoizedProps,T)),Y(c,P);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)P=T.child,P!==null&&(P.return=T),sf(c,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===h)break;for(;T.sibling===null;){if(T.return===null||T.return===h)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};var i2=function(c,h,x,S){for(var T=h.child;T!==null;){if(T.tag===5){var P=T.stateNode;x&&S&&(P=yi(P,T.type,T.memoizedProps,T)),Gr(c,P)}else if(T.tag===6)P=T.stateNode,x&&S&&(P=Ph(P,T.memoizedProps,T)),Gr(c,P);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)P=T.child,P!==null&&(P.return=T),i2(c,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===h)break;for(;T.sibling===null;){if(T.return===null||T.return===h)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};of=function(c,h){var x=h.stateNode;if(!n2(c,h)){c=x.containerInfo;var S=rn(c);i2(S,h,!1,!1),x.pendingChildren=S,vs(h),sn(c,S)}},ip=function(c,h,x,S,T){var P=c.stateNode,V=c.memoizedProps;if((c=n2(c,h))&&V===S)h.stateNode=P;else{var K=h.stateNode,he=ys(Sr.current),Ee=null;V!==S&&(Ee=xe(K,x,V,S,T,he)),c&&Ee===null?h.stateNode=P:(P=kn(P,Ee,x,V,S,h,c,K),z(P,x,S,T,he)&&vs(h),h.stateNode=P,c?vs(h):sf(P,h,!1,!1))}},rp=function(c,h,x,S){x!==S?(c=ys(eu.current),x=ys(Sr.current),h.stateNode=ie(S,c,x,h),vs(h)):h.stateNode=c.stateNode}}else of=function(){},ip=function(){},rp=function(){};function af(c,h){if(!ln)switch(c.tailMode){case"hidden":h=c.tail;for(var x=null;h!==null;)h.alternate!==null&&(x=h),h=h.sibling;x===null?c.tail=null:x.sibling=null;break;case"collapsed":x=c.tail;for(var S=null;x!==null;)x.alternate!==null&&(S=x),x=x.sibling;S===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:S.sibling=null}}function si(c){var h=c.alternate!==null&&c.alternate.child===c.child,x=0,S=0;if(h)for(var T=c.child;T!==null;)x|=T.lanes|T.childLanes,S|=T.subtreeFlags&14680064,S|=T.flags&14680064,T.return=c,T=T.sibling;else for(T=c.child;T!==null;)x|=T.lanes|T.childLanes,S|=T.subtreeFlags,S|=T.flags,T.return=c,T=T.sibling;return c.subtreeFlags|=S,c.childLanes=x,h}function Fz(c,h,x){var S=h.pendingProps;switch(zy(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return si(h),null;case 1:return Di(h.type)&&Ih(),si(h),null;case 3:return S=h.stateNode,tu(),ft(Vn),ft(Bt),Hy(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(c===null||c.child===null)&&(Zc(h)?vs(h):c===null||c.memoizedState.isDehydrated&&!(h.flags&256)||(h.flags|=1024,Xr!==null&&(yx(Xr),Xr=null))),of(c,h),si(h),null;case 5:Uy(h),x=ys(eu.current);var T=h.type;if(c!==null&&h.stateNode!=null)ip(c,h,T,S,x),c.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!S){if(h.stateNode===null)throw Error(o(166));return si(h),null}if(c=ys(Sr.current),Zc(h)){if(!de)throw Error(o(175));c=et(h.stateNode,h.type,h.memoizedProps,x,c,h,!Yc),h.updateQueue=c,c!==null&&vs(h)}else{var P=X(T,S,x,c,h);sf(P,h,!1,!1),h.stateNode=P,z(P,T,S,x,c)&&vs(h)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return si(h),null;case 6:if(c&&h.stateNode!=null)rp(c,h,c.memoizedProps,S);else{if(typeof S!="string"&&h.stateNode===null)throw Error(o(166));if(c=ys(eu.current),x=ys(Sr.current),Zc(h)){if(!de)throw Error(o(176));if(c=h.stateNode,S=h.memoizedProps,(x=at(c,S,h,!Yc))&&(T=Zi,T!==null))switch(P=(T.mode&1)!==0,T.tag){case 3:xo(T.stateNode.containerInfo,c,S,P);break;case 5:vo(T.type,T.memoizedProps,T.stateNode,c,S,P)}x&&vs(h)}else h.stateNode=ie(S,c,x,h)}return si(h),null;case 13:if(ft(cn),S=h.memoizedState,ln&&Ji!==null&&h.mode&1&&!(h.flags&128)){for(c=Ji;c;)c=ae(c);return Kl(),h.flags|=98560,h}if(S!==null&&S.dehydrated!==null){if(S=Zc(h),c===null){if(!S)throw Error(o(318));if(!de)throw Error(o(344));if(c=h.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));pt(c,h)}else Kl(),!(h.flags&128)&&(h.memoizedState=null),h.flags|=4;return si(h),null}return Xr!==null&&(yx(Xr),Xr=null),h.flags&128?(h.lanes=x,h):(S=S!==null,x=!1,c===null?Zc(h):x=c.memoizedState!==null,S&&!x&&(h.child.flags|=8192,h.mode&1&&(c===null||cn.current&1?Nn===0&&(Nn=3):vx())),h.updateQueue!==null&&(h.flags|=4),si(h),null);case 4:return tu(),of(c,h),c===null&&qe(h.stateNode.containerInfo),si(h),null;case 10:return Ay(h.type._context),si(h),null;case 17:return Di(h.type)&&Ih(),si(h),null;case 19:if(ft(cn),T=h.memoizedState,T===null)return si(h),null;if(S=(h.flags&128)!==0,P=T.rendering,P===null)if(S)af(T,!1);else{if(Nn!==0||c!==null&&c.flags&128)for(c=h.child;c!==null;){if(P=Yh(c),P!==null){for(h.flags|=128,af(T,!1),c=P.updateQueue,c!==null&&(h.updateQueue=c,h.flags|=4),h.subtreeFlags=0,c=x,S=h.child;S!==null;)x=S,T=c,x.flags&=14680066,P=x.alternate,P===null?(x.childLanes=0,x.lanes=T,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=P.childLanes,x.lanes=P.lanes,x.child=P.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=P.memoizedProps,x.memoizedState=P.memoizedState,x.updateQueue=P.updateQueue,x.type=P.type,T=P.dependencies,x.dependencies=T===null?null:{lanes:T.lanes,firstContext:T.firstContext}),S=S.sibling;return At(cn,cn.current&1|2),h.child}c=c.sibling}T.tail!==null&&Hn()>hx&&(h.flags|=128,S=!0,af(T,!1),h.lanes=4194304)}else{if(!S)if(c=Yh(P),c!==null){if(h.flags|=128,S=!0,c=c.updateQueue,c!==null&&(h.updateQueue=c,h.flags|=4),af(T,!0),T.tail===null&&T.tailMode==="hidden"&&!P.alternate&&!ln)return si(h),null}else 2*Hn()-T.renderingStartTime>hx&&x!==1073741824&&(h.flags|=128,S=!0,af(T,!1),h.lanes=4194304);T.isBackwards?(P.sibling=h.child,h.child=P):(c=T.last,c!==null?c.sibling=P:h.child=P,T.last=P)}return T.tail!==null?(h=T.tail,T.rendering=h,T.tail=h.sibling,T.renderingStartTime=Hn(),h.sibling=null,c=cn.current,At(cn,S?c&1|2:c&1),h):(si(h),null);case 22:case 23:return xx(),S=h.memoizedState!==null,c!==null&&c.memoizedState!==null!==S&&(h.flags|=8192),S&&h.mode&1?Qi&1073741824&&(si(h),$e&&h.subtreeFlags&6&&(h.flags|=8192)):si(h),null;case 24:return null;case 25:return null}throw Error(o(156,h.tag))}var Nz=a.ReactCurrentOwner,Ki=!1;function xi(c,h,x,S){h.child=c===null?LM(h,null,x,S):Ql(h,c.child,x,S)}function r2(c,h,x,S,T){x=x.render;var P=h.ref;return Yl(h,T),S=Gy(c,h,x,S,P,T),x=$y(),c!==null&&!Ki?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~T,Bs(c,h,T)):(ln&&x&&Dy(h),h.flags|=1,xi(c,h,S,T),h.child)}function s2(c,h,x,S,T){if(c===null){var P=x.type;return typeof P=="function"&&!wx(P)&&P.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(h.tag=15,h.type=P,o2(c,h,P,S,T)):(c=Tp(x.type,null,S,h,h.mode,T),c.ref=h.ref,c.return=h,h.child=c)}if(P=c.child,!(c.lanes&T)){var V=P.memoizedProps;if(x=x.compare,x=x!==null?x:Uh,x(V,S)&&c.ref===h.ref)return Bs(c,h,T)}return h.flags|=1,c=Eo(P,S),c.ref=h.ref,c.return=h,h.child=c}function o2(c,h,x,S,T){if(c!==null&&Uh(c.memoizedProps,S)&&c.ref===h.ref)if(Ki=!1,(c.lanes&T)!==0)c.flags&131072&&(Ki=!0);else return h.lanes=c.lanes,Bs(c,h,T);return Jy(c,h,x,S,T)}function a2(c,h,x){var S=h.pendingProps,T=S.children,P=c!==null?c.memoizedState:null;if(S.mode==="hidden")if(!(h.mode&1))h.memoizedState={baseLanes:0,cachePool:null},At(iu,Qi),Qi|=x;else if(x&1073741824)h.memoizedState={baseLanes:0,cachePool:null},S=P!==null?P.baseLanes:x,At(iu,Qi),Qi|=S;else return c=P!==null?P.baseLanes|x:x,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:c,cachePool:null},h.updateQueue=null,At(iu,Qi),Qi|=c,null;else P!==null?(S=P.baseLanes|x,h.memoizedState=null):S=x,At(iu,Qi),Qi|=S;return xi(c,h,T,x),h.child}function l2(c,h){var x=h.ref;(c===null&&x!==null||c!==null&&c.ref!==x)&&(h.flags|=512,h.flags|=2097152)}function Jy(c,h,x,S,T){var P=Di(x)?Rs:Bt.current;return P=Is(h,P),Yl(h,T),x=Gy(c,h,x,S,P,T),S=$y(),c!==null&&!Ki?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~T,Bs(c,h,T)):(ln&&S&&Dy(h),h.flags|=1,xi(c,h,x,T),h.child)}function u2(c,h,x,S,T){if(Di(x)){var P=!0;Dh(h)}else P=!1;if(Yl(h,T),h.stateNode===null)c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2),bM(h,x,S),Iy(h,x,S,T),S=!0;else if(c===null){var V=h.stateNode,K=h.memoizedProps;V.props=K;var he=V.context,Ee=x.contextType;typeof Ee=="object"&&Ee!==null?Ee=vr(Ee):(Ee=Di(x)?Rs:Bt.current,Ee=Is(h,Ee));var Xe=x.getDerivedStateFromProps,ut=typeof Xe=="function"||typeof V.getSnapshotBeforeUpdate=="function";ut||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(K!==S||he!==Ee)&&MM(h,V,S,Ee),wo=!1;var tt=h.memoizedState;V.state=tt,Gh(h,S,V,T),he=h.memoizedState,K!==S||tt!==he||Vn.current||wo?(typeof Xe=="function"&&(Ry(h,x,Xe,S),he=h.memoizedState),(K=wo||SM(h,x,K,S,tt,he,Ee))?(ut||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(h.flags|=4194308)):(typeof V.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=S,h.memoizedState=he),V.props=S,V.state=he,V.context=Ee,S=K):(typeof V.componentDidMount=="function"&&(h.flags|=4194308),S=!1)}else{V=h.stateNode,xM(c,h),K=h.memoizedProps,Ee=h.type===h.elementType?K:jr(h.type,K),V.props=Ee,ut=h.pendingProps,tt=V.context,he=x.contextType,typeof he=="object"&&he!==null?he=vr(he):(he=Di(x)?Rs:Bt.current,he=Is(h,he));var Gt=x.getDerivedStateFromProps;(Xe=typeof Gt=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(K!==ut||tt!==he)&&MM(h,V,S,he),wo=!1,tt=h.memoizedState,V.state=tt,Gh(h,S,V,T);var Ke=h.memoizedState;K!==ut||tt!==Ke||Vn.current||wo?(typeof Gt=="function"&&(Ry(h,x,Gt,S),Ke=h.memoizedState),(Ee=wo||SM(h,x,Ee,S,tt,Ke,he)||!1)?(Xe||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(S,Ke,he),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(S,Ke,he)),typeof V.componentDidUpdate=="function"&&(h.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof V.componentDidUpdate!="function"||K===c.memoizedProps&&tt===c.memoizedState||(h.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||K===c.memoizedProps&&tt===c.memoizedState||(h.flags|=1024),h.memoizedProps=S,h.memoizedState=Ke),V.props=S,V.state=Ke,V.context=he,S=Ee):(typeof V.componentDidUpdate!="function"||K===c.memoizedProps&&tt===c.memoizedState||(h.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||K===c.memoizedProps&&tt===c.memoizedState||(h.flags|=1024),S=!1)}return Ky(c,h,x,S,P,T)}function Ky(c,h,x,S,T,P){l2(c,h);var V=(h.flags&128)!==0;if(!S&&!V)return T&&hM(h,x,!1),Bs(c,h,P);S=h.stateNode,Nz.current=h;var K=V&&typeof x.getDerivedStateFromError!="function"?null:S.render();return h.flags|=1,c!==null&&V?(h.child=Ql(h,c.child,null,P),h.child=Ql(h,null,K,P)):xi(c,h,K,P),h.memoizedState=S.state,T&&hM(h,x,!0),h.child}function c2(c){var h=c.stateNode;h.pendingContext?fM(c,h.pendingContext,h.pendingContext!==h.context):h.context&&fM(c,h.context,!1),By(c,h.containerInfo)}function f2(c,h,x,S,T){return Kl(),Oy(T),h.flags|=256,xi(c,h,x,S),h.child}var sp={dehydrated:null,treeContext:null,retryLane:0};function op(c){return{baseLanes:c,cachePool:null}}function d2(c,h,x){var S=h.pendingProps,T=cn.current,P=!1,V=(h.flags&128)!==0,K;if((K=V)||(K=c!==null&&c.memoizedState===null?!1:(T&2)!==0),K?(P=!0,h.flags&=-129):(c===null||c.memoizedState!==null)&&(T|=1),At(cn,T&1),c===null)return Ny(h),c=h.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(h.mode&1?jc(c)?h.lanes=8:h.lanes=1073741824:h.lanes=1,null):(T=S.children,c=S.fallback,P?(S=h.mode,P=h.child,T={mode:"hidden",children:T},!(S&1)&&P!==null?(P.childLanes=0,P.pendingProps=T):P=Ep(T,S,0,null),c=za(c,S,x,null),P.return=h,c.return=h,P.sibling=c,h.child=P,h.child.memoizedState=op(x),h.memoizedState=sp,c):Qy(h,T));if(T=c.memoizedState,T!==null){if(K=T.dehydrated,K!==null){if(V)return h.flags&256?(h.flags&=-257,ap(c,h,x,Error(o(422)))):h.memoizedState!==null?(h.child=c.child,h.flags|=128,null):(P=S.fallback,T=h.mode,S=Ep({mode:"visible",children:S.children},T,0,null),P=za(P,T,x,null),P.flags|=2,S.return=h,P.return=h,S.sibling=P,h.child=S,h.mode&1&&Ql(h,c.child,null,x),h.child.memoizedState=op(x),h.memoizedState=sp,P);if(!(h.mode&1))h=ap(c,h,x,null);else if(jc(K))h=ap(c,h,x,Error(o(419)));else if(S=(x&c.childLanes)!==0,Ki||S){if(S=Cn,S!==null){switch(x&-x){case 4:P=2;break;case 16:P=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:P=32;break;case 536870912:P=268435456;break;default:P=0}S=P&(S.suspendedLanes|x)?0:P,S!==0&&S!==T.retryLane&&(T.retryLane=S,Mr(c,S,-1))}vx(),h=ap(c,h,x,Error(o(421)))}else Rh(K)?(h.flags|=128,h.child=c.child,h=Zz.bind(null,c),U(K,h),h=null):(x=T.treeContext,de&&(Ji=ye(K),Zi=h,ln=!0,Xr=null,Yc=!1,x!==null&&(wr[_r++]=Fs,wr[_r++]=Ns,wr[_r++]=ka,Fs=x.id,Ns=x.overflow,ka=h)),h=Qy(h,h.pendingProps.children),h.flags|=4096);return h}return P?(S=p2(c,h,S.children,S.fallback,x),P=h.child,T=c.child.memoizedState,P.memoizedState=T===null?op(x):{baseLanes:T.baseLanes|x,cachePool:null},P.childLanes=c.childLanes&~x,h.memoizedState=sp,S):(x=h2(c,h,S.children,x),h.memoizedState=null,x)}return P?(S=p2(c,h,S.children,S.fallback,x),P=h.child,T=c.child.memoizedState,P.memoizedState=T===null?op(x):{baseLanes:T.baseLanes|x,cachePool:null},P.childLanes=c.childLanes&~x,h.memoizedState=sp,S):(x=h2(c,h,S.children,x),h.memoizedState=null,x)}function Qy(c,h){return h=Ep({mode:"visible",children:h},c.mode,0,null),h.return=c,c.child=h}function h2(c,h,x,S){var T=c.child;return c=T.sibling,x=Eo(T,{mode:"visible",children:x}),!(h.mode&1)&&(x.lanes=S),x.return=h,x.sibling=null,c!==null&&(S=h.deletions,S===null?(h.deletions=[c],h.flags|=16):S.push(c)),h.child=x}function p2(c,h,x,S,T){var P=h.mode;c=c.child;var V=c.sibling,K={mode:"hidden",children:x};return!(P&1)&&h.child!==c?(x=h.child,x.childLanes=0,x.pendingProps=K,h.deletions=null):(x=Eo(c,K),x.subtreeFlags=c.subtreeFlags&14680064),V!==null?S=Eo(V,S):(S=za(S,P,T,null),S.flags|=2),S.return=h,x.return=h,x.sibling=S,h.child=x,S}function ap(c,h,x,S){return S!==null&&Oy(S),Ql(h,c.child,null,x),c=Qy(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function m2(c,h,x){c.lanes|=h;var S=c.alternate;S!==null&&(S.lanes|=h),Py(c.return,h,x)}function ex(c,h,x,S,T){var P=c.memoizedState;P===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:S,tail:x,tailMode:T}:(P.isBackwards=h,P.rendering=null,P.renderingStartTime=0,P.last=S,P.tail=x,P.tailMode=T)}function g2(c,h,x){var S=h.pendingProps,T=S.revealOrder,P=S.tail;if(xi(c,h,S.children,x),S=cn.current,S&2)S=S&1|2,h.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&m2(c,x,h);else if(c.tag===19)m2(c,x,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}S&=1}if(At(cn,S),!(h.mode&1))h.memoizedState=null;else switch(T){case"forwards":for(x=h.child,T=null;x!==null;)c=x.alternate,c!==null&&Yh(c)===null&&(T=x),x=x.sibling;x=T,x===null?(T=h.child,h.child=null):(T=x.sibling,x.sibling=null),ex(h,!1,T,x,P);break;case"backwards":for(x=null,T=h.child,h.child=null;T!==null;){if(c=T.alternate,c!==null&&Yh(c)===null){h.child=T;break}c=T.sibling,T.sibling=x,x=T,T=c}ex(h,!0,x,null,P);break;case"together":ex(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Bs(c,h,x){if(c!==null&&(h.dependencies=c.dependencies),ru|=h.lanes,!(x&h.childLanes))return null;if(c!==null&&h.child!==c.child)throw Error(o(153));if(h.child!==null){for(c=h.child,x=Eo(c,c.pendingProps),h.child=x,x.return=h;c.sibling!==null;)c=c.sibling,x=x.sibling=Eo(c,c.pendingProps),x.return=h;x.sibling=null}return h.child}function Oz(c,h,x){switch(h.tag){case 3:c2(h),Kl();break;case 5:RM(h);break;case 1:Di(h.type)&&Dh(h);break;case 4:By(h,h.stateNode.containerInfo);break;case 10:yM(h,h.type._context,h.memoizedProps.value);break;case 13:var S=h.memoizedState;if(S!==null)return S.dehydrated!==null?(At(cn,cn.current&1),h.flags|=128,null):x&h.child.childLanes?d2(c,h,x):(At(cn,cn.current&1),c=Bs(c,h,x),c!==null?c.sibling:null);At(cn,cn.current&1);break;case 19:if(S=(x&h.childLanes)!==0,c.flags&128){if(S)return g2(c,h,x);h.flags|=128}var T=h.memoizedState;if(T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),At(cn,cn.current),S)break;return null;case 22:case 23:return h.lanes=0,a2(c,h,x)}return Bs(c,h,x)}function Bz(c,h){switch(zy(h),h.tag){case 1:return Di(h.type)&&Ih(),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return tu(),ft(Vn),ft(Bt),Hy(),c=h.flags,c&65536&&!(c&128)?(h.flags=c&-65537|128,h):null;case 5:return Uy(h),null;case 13:if(ft(cn),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(o(340));Kl()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return ft(cn),null;case 4:return tu(),null;case 10:return Ay(h.type._context),null;case 22:case 23:return xx(),null;case 24:return null;default:return null}}var lp=!1,Pa=!1,Uz=typeof WeakSet=="function"?WeakSet:Set,ze=null;function up(c,h){var x=c.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(S){Ni(c,h,S)}else x.current=null}function tx(c,h,x){try{x()}catch(S){Ni(c,h,S)}}var y2=!1;function Vz(c,h){for(F(c.containerInfo),ze=h;ze!==null;)if(c=ze,h=c.child,(c.subtreeFlags&1028)!==0&&h!==null)h.return=c,ze=h;else for(;ze!==null;){c=ze;try{var x=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var S=x.memoizedProps,T=x.memoizedState,P=c.stateNode,V=P.getSnapshotBeforeUpdate(c.elementType===c.type?S:jr(c.type,S),T);P.__reactInternalSnapshotBeforeUpdate=V}break;case 3:$e&&Ct(c.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(K){Ni(c,c.return,K)}if(h=c.sibling,h!==null){h.return=c.return,ze=h;break}ze=c.return}return x=y2,y2=!1,x}function La(c,h,x){var S=h.updateQueue;if(S=S!==null?S.lastEffect:null,S!==null){var T=S=S.next;do{if((T.tag&c)===c){var P=T.destroy;T.destroy=void 0,P!==void 0&&tx(h,x,P)}T=T.next}while(T!==S)}}function lf(c,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var x=h=h.next;do{if((x.tag&c)===c){var S=x.create;x.destroy=S()}x=x.next}while(x!==h)}}function nx(c){var h=c.ref;if(h!==null){var x=c.stateNode;switch(c.tag){case 5:c=J(x);break;default:c=x}typeof h=="function"?h(c):h.current=c}}function x2(c,h,x){if(hs&&typeof hs.onCommitFiberUnmount=="function")try{hs.onCommitFiberUnmount(Oh,h)}catch{}switch(h.tag){case 0:case 11:case 14:case 15:if(c=h.updateQueue,c!==null&&(c=c.lastEffect,c!==null)){var S=c=c.next;do{var T=S,P=T.destroy;T=T.tag,P!==void 0&&(T&2||T&4)&&tx(h,x,P),S=S.next}while(S!==c)}break;case 1:if(up(h,x),c=h.stateNode,typeof c.componentWillUnmount=="function")try{c.props=h.memoizedProps,c.state=h.memoizedState,c.componentWillUnmount()}catch(V){Ni(h,x,V)}break;case 5:up(h,x);break;case 4:$e?M2(c,h,x):pe&&pe&&(h=h.stateNode.containerInfo,x=rn(h),pr(h,x))}}function v2(c,h,x){for(var S=h;;)if(x2(c,S,x),S.child===null||$e&&S.tag===4){if(S===h)break;for(;S.sibling===null;){if(S.return===null||S.return===h)return;S=S.return}S.sibling.return=S.return,S=S.sibling}else S.child.return=S,S=S.child}function w2(c){var h=c.alternate;h!==null&&(c.alternate=null,w2(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&ot(h)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function _2(c){return c.tag===5||c.tag===3||c.tag===4}function S2(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||_2(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function b2(c){if($e){e:{for(var h=c.return;h!==null;){if(_2(h))break e;h=h.return}throw Error(o(160))}var x=h;switch(x.tag){case 5:h=x.stateNode,x.flags&32&&(Q(h),x.flags&=-33),x=S2(c),rx(c,x,h);break;case 3:case 4:h=x.stateNode.containerInfo,x=S2(c),ix(c,x,h);break;default:throw Error(o(161))}}}function ix(c,h,x){var S=c.tag;if(S===5||S===6)c=c.stateNode,h?st(x,c,h):se(x,c);else if(S!==4&&(c=c.child,c!==null))for(ix(c,h,x),c=c.sibling;c!==null;)ix(c,h,x),c=c.sibling}function rx(c,h,x){var S=c.tag;if(S===5||S===6)c=c.stateNode,h?Fe(x,c,h):Te(x,c);else if(S!==4&&(c=c.child,c!==null))for(rx(c,h,x),c=c.sibling;c!==null;)rx(c,h,x),c=c.sibling}function M2(c,h,x){for(var S=h,T=!1,P,V;;){if(!T){T=S.return;e:for(;;){if(T===null)throw Error(o(160));switch(P=T.stateNode,T.tag){case 5:V=!1;break e;case 3:P=P.containerInfo,V=!0;break e;case 4:P=P.containerInfo,V=!0;break e}T=T.return}T=!0}if(S.tag===5||S.tag===6)v2(c,S,x),V?_t(P,S.stateNode):vt(P,S.stateNode);else if(S.tag===18)V?on(P,S.stateNode):Et(P,S.stateNode);else if(S.tag===4){if(S.child!==null){P=S.stateNode.containerInfo,V=!0,S.child.return=S,S=S.child;continue}}else if(x2(c,S,x),S.child!==null){S.child.return=S,S=S.child;continue}if(S===h)break;for(;S.sibling===null;){if(S.return===null||S.return===h)return;S=S.return,S.tag===4&&(T=!1)}S.sibling.return=S.return,S=S.sibling}}function sx(c,h){if($e){switch(h.tag){case 0:case 11:case 14:case 15:La(3,h,h.return),lf(3,h),La(5,h,h.return);return;case 1:return;case 5:var x=h.stateNode;if(x!=null){var S=h.memoizedProps;c=c!==null?c.memoizedProps:S;var T=h.type,P=h.updateQueue;h.updateQueue=null,P!==null&&Ye(x,P,T,c,S,h)}return;case 6:if(h.stateNode===null)throw Error(o(162));x=h.memoizedProps,Pe(h.stateNode,c!==null?c.memoizedProps:x,x);return;case 3:de&&c!==null&&c.memoizedState.isDehydrated&&Dt(h.stateNode.containerInfo);return;case 12:return;case 13:cp(h);return;case 19:cp(h);return;case 17:return}throw Error(o(163))}switch(h.tag){case 0:case 11:case 14:case 15:La(3,h,h.return),lf(3,h),La(5,h,h.return);return;case 12:return;case 13:cp(h);return;case 19:cp(h);return;case 3:de&&c!==null&&c.memoizedState.isDehydrated&&Dt(h.stateNode.containerInfo);break;case 22:case 23:return}e:if(pe){switch(h.tag){case 1:case 5:case 6:break e;case 3:case 4:h=h.stateNode,pr(h.containerInfo,h.pendingChildren);break e}throw Error(o(163))}}function cp(c){var h=c.updateQueue;if(h!==null){c.updateQueue=null;var x=c.stateNode;x===null&&(x=c.stateNode=new Uz),h.forEach(function(S){var T=Jz.bind(null,c,S);x.has(S)||(x.add(S),S.then(T,T))})}}function Hz(c,h){for(ze=h;ze!==null;){h=ze;var x=h.deletions;if(x!==null)for(var S=0;S<x.length;S++){var T=x[S];try{var P=c;$e?M2(P,T,h):v2(P,T,h);var V=T.alternate;V!==null&&(V.return=null),T.return=null}catch(Je){Ni(T,h,Je)}}if(x=h.child,h.subtreeFlags&12854&&x!==null)x.return=h,ze=x;else for(;ze!==null;){h=ze;try{var K=h.flags;if(K&32&&$e&&Q(h.stateNode),K&512){var he=h.alternate;if(he!==null){var Ee=he.ref;Ee!==null&&(typeof Ee=="function"?Ee(null):Ee.current=null)}}if(K&8192)switch(h.tag){case 13:if(h.memoizedState!==null){var Xe=h.alternate;(Xe===null||Xe.memoizedState===null)&&(dx=Hn())}break;case 22:var ut=h.memoizedState!==null,tt=h.alternate,Gt=tt!==null&&tt.memoizedState!==null;if(x=h,$e){e:if(S=x,T=ut,P=null,$e)for(var Ke=S;;){if(Ke.tag===5){if(P===null){P=Ke;var oi=Ke.stateNode;T?De(oi):Ve(Ke.stateNode,Ke.memoizedProps)}}else if(Ke.tag===6){if(P===null){var Er=Ke.stateNode;T?me(Er):Be(Er,Ke.memoizedProps)}}else if((Ke.tag!==22&&Ke.tag!==23||Ke.memoizedState===null||Ke===S)&&Ke.child!==null){Ke.child.return=Ke,Ke=Ke.child;continue}if(Ke===S)break;for(;Ke.sibling===null;){if(Ke.return===null||Ke.return===S)break e;P===Ke&&(P=null),Ke=Ke.return}P===Ke&&(P=null),Ke.sibling.return=Ke.return,Ke=Ke.sibling}}if(ut&&!Gt&&x.mode&1){ze=x;for(var ue=x.child;ue!==null;){for(x=ze=ue;ze!==null;){S=ze;var te=S.child;switch(S.tag){case 0:case 11:case 14:case 15:La(4,S,S.return);break;case 1:up(S,S.return);var ce=S.stateNode;if(typeof ce.componentWillUnmount=="function"){var Oe=S.return;try{ce.props=S.memoizedProps,ce.state=S.memoizedState,ce.componentWillUnmount()}catch(Je){Ni(S,Oe,Je)}}break;case 5:up(S,S.return);break;case 22:if(S.memoizedState!==null){k2(x);continue}}te!==null?(te.return=S,ze=te):k2(x)}ue=ue.sibling}}}switch(K&4102){case 2:b2(h),h.flags&=-3;break;case 6:b2(h),h.flags&=-3,sx(h.alternate,h);break;case 4096:h.flags&=-4097;break;case 4100:h.flags&=-4097,sx(h.alternate,h);break;case 4:sx(h.alternate,h)}}catch(Je){Ni(h,h.return,Je)}if(x=h.sibling,x!==null){x.return=h.return,ze=x;break}ze=h.return}}}function Wz(c,h,x){ze=c,T2(c)}function T2(c,h,x){for(var S=(c.mode&1)!==0;ze!==null;){var T=ze,P=T.child;if(T.tag===22&&S){var V=T.memoizedState!==null||lp;if(!V){var K=T.alternate,he=K!==null&&K.memoizedState!==null||Pa;K=lp;var Ee=Pa;if(lp=V,(Pa=he)&&!Ee)for(ze=T;ze!==null;)V=ze,he=V.child,V.tag===22&&V.memoizedState!==null?C2(T):he!==null?(he.return=V,ze=he):C2(T);for(;P!==null;)ze=P,T2(P),P=P.sibling;ze=T,lp=K,Pa=Ee}E2(c)}else T.subtreeFlags&8772&&P!==null?(P.return=T,ze=P):E2(c)}}function E2(c){for(;ze!==null;){var h=ze;if(h.flags&8772){var x=h.alternate;try{if(h.flags&8772)switch(h.tag){case 0:case 11:case 15:Pa||lf(5,h);break;case 1:var S=h.stateNode;if(h.flags&4&&!Pa)if(x===null)S.componentDidMount();else{var T=h.elementType===h.type?x.memoizedProps:jr(h.type,x.memoizedProps);S.componentDidUpdate(T,x.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var P=h.updateQueue;P!==null&&wM(h,P,S);break;case 3:var V=h.updateQueue;if(V!==null){if(x=null,h.child!==null)switch(h.child.tag){case 5:x=J(h.child.stateNode);break;case 1:x=h.child.stateNode}wM(h,V,x)}break;case 5:var K=h.stateNode;x===null&&h.flags&4&&Le(K,h.type,h.memoizedProps,h);break;case 6:break;case 4:break;case 12:break;case 13:if(de&&h.memoizedState===null){var he=h.alternate;if(he!==null){var Ee=he.memoizedState;if(Ee!==null){var Xe=Ee.dehydrated;Xe!==null&&Tt(Xe)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Pa||h.flags&512&&nx(h)}catch(ut){Ni(h,h.return,ut)}}if(h===c){ze=null;break}if(x=h.sibling,x!==null){x.return=h.return,ze=x;break}ze=h.return}}function k2(c){for(;ze!==null;){var h=ze;if(h===c){ze=null;break}var x=h.sibling;if(x!==null){x.return=h.return,ze=x;break}ze=h.return}}function C2(c){for(;ze!==null;){var h=ze;try{switch(h.tag){case 0:case 11:case 15:var x=h.return;try{lf(4,h)}catch(he){Ni(h,x,he)}break;case 1:var S=h.stateNode;if(typeof S.componentDidMount=="function"){var T=h.return;try{S.componentDidMount()}catch(he){Ni(h,T,he)}}var P=h.return;try{nx(h)}catch(he){Ni(h,P,he)}break;case 5:var V=h.return;try{nx(h)}catch(he){Ni(h,V,he)}}}catch(he){Ni(h,h.return,he)}if(h===c){ze=null;break}var K=h.sibling;if(K!==null){K.return=h.return,ze=K;break}ze=h.return}}var fp=0,dp=1,hp=2,pp=3,mp=4;if(typeof Symbol=="function"&&Symbol.for){var uf=Symbol.for;fp=uf("selector.component"),dp=uf("selector.has_pseudo_class"),hp=uf("selector.role"),pp=uf("selector.test_id"),mp=uf("selector.text")}function ox(c){var h=Ae(c);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(o(364));return h}if(c=It(c),c===null)throw Error(o(362));return c.stateNode.current}function ax(c,h){switch(h.$$typeof){case fp:if(c.type===h.value)return!0;break;case dp:e:{h=h.value,c=[c,0];for(var x=0;x<c.length;){var S=c[x++],T=c[x++],P=h[T];if(S.tag!==5||!fe(S)){for(;P!=null&&ax(S,P);)T++,P=h[T];if(T===h.length){h=!0;break e}else for(S=S.child;S!==null;)c.push(S,T),S=S.sibling}}h=!1}return h;case hp:if(c.tag===5&&_e(c.stateNode,h.value))return!0;break;case mp:if((c.tag===5||c.tag===6)&&(c=N(c),c!==null&&0<=c.indexOf(h.value)))return!0;break;case pp:if(c.tag===5&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function lx(c){switch(c.$$typeof){case fp:return"<"+(I(c.value)||"Unknown")+">";case dp:return":has("+(lx(c)||"")+")";case hp:return'[role="'+c.value+'"]';case mp:return'"'+c.value+'"';case pp:return'[data-testname="'+c.value+'"]';default:throw Error(o(365))}}function A2(c,h){var x=[];c=[c,0];for(var S=0;S<c.length;){var T=c[S++],P=c[S++],V=h[P];if(T.tag!==5||!fe(T)){for(;V!=null&&ax(T,V);)P++,V=h[P];if(P===h.length)x.push(T);else for(T=T.child;T!==null;)c.push(T,P),T=T.sibling}}return x}function ux(c,h){if(!kt)throw Error(o(363));c=ox(c),c=A2(c,h),h=[],c=Array.from(c);for(var x=0;x<c.length;){var S=c[x++];if(S.tag===5)fe(S)||h.push(S.stateNode);else for(S=S.child;S!==null;)c.push(S),S=S.sibling}return h}var Gz=Math.ceil,gp=a.ReactCurrentDispatcher,cx=a.ReactCurrentOwner,wn=a.ReactCurrentBatchConfig,xt=0,Cn=null,An=null,Kn=0,Qi=0,iu=yr(0),Nn=0,cf=null,ru=0,yp=0,fx=0,ff=null,zi=null,dx=0,hx=1/0;function su(){hx=Hn()+500}var xp=!1,px=null,So=null,vp=!1,bo=null,wp=0,df=0,mx=null,_p=-1,Sp=0;function vi(){return xt&6?Hn():_p!==-1?_p:_p=Hn()}function Mo(c){return c.mode&1?xt&2&&Kn!==0?Kn&-Kn:Ez.transition!==null?(Sp===0&&(c=zh,zh<<=1,!(zh&4194240)&&(zh=64),Sp=c),Sp):(c=zt,c!==0?c:Ie()):1}function Mr(c,h,x){if(50<df)throw df=0,mx=null,Error(o(185));var S=bp(c,h);return S===null?null:(qc(S,h,x),(!(xt&2)||S!==Cn)&&(S===Cn&&(!(xt&2)&&(yp|=h),Nn===4&&To(S,Kn)),Fi(S,x),h===1&&xt===0&&!(c.mode&1)&&(su(),Bh&&ms())),S)}function bp(c,h){c.lanes|=h;var x=c.alternate;for(x!==null&&(x.lanes|=h),x=c,c=c.return;c!==null;)c.childLanes|=h,x=c.alternate,x!==null&&(x.childLanes|=h),x=c,c=c.return;return x.tag===3?x.stateNode:null}function Fi(c,h){var x=c.callbackNode;yz(c,h);var S=Nh(c,c===Cn?Kn:0);if(S===0)x!==null&&mM(x),c.callbackNode=null,c.callbackPriority=0;else if(h=S&-S,c.callbackPriority!==h){if(x!=null&&mM(x),h===1)c.tag===0?Tz(L2.bind(null,c)):gM(L2.bind(null,c)),it?Qe(function(){xt===0&&ms()}):by(My,ms),x=null;else{switch(pM(S)){case 1:x=My;break;case 4:x=_z;break;case 16:x=Ty;break;case 536870912:x=Sz;break;default:x=Ty}x=U2(x,P2.bind(null,c))}c.callbackPriority=h,c.callbackNode=x}}function P2(c,h){if(_p=-1,Sp=0,xt&6)throw Error(o(327));var x=c.callbackNode;if(Da()&&c.callbackNode!==x)return null;var S=Nh(c,c===Cn?Kn:0);if(S===0)return null;if(S&30||S&c.expiredLanes||h)h=Mp(c,S);else{h=S;var T=xt;xt|=2;var P=D2();(Cn!==c||Kn!==h)&&(su(),Ra(c,h));do try{Xz();break}catch(K){I2(c,K)}while(1);Cy(),gp.current=P,xt=T,An!==null?h=0:(Cn=null,Kn=0,h=Nn)}if(h!==0){if(h===2&&(T=wy(c),T!==0&&(S=T,h=gx(c,T))),h===1)throw x=cf,Ra(c,0),To(c,S),Fi(c,Hn()),x;if(h===6)To(c,S);else{if(T=c.current.alternate,!(S&30)&&!$z(T)&&(h=Mp(c,S),h===2&&(P=wy(c),P!==0&&(S=P,h=gx(c,P))),h===1))throw x=cf,Ra(c,0),To(c,S),Fi(c,Hn()),x;switch(c.finishedWork=T,c.finishedLanes=S,h){case 0:case 1:throw Error(o(345));case 2:Ia(c,zi);break;case 3:if(To(c,S),(S&130023424)===S&&(h=dx+500-Hn(),10<h)){if(Nh(c,0)!==0)break;if(T=c.suspendedLanes,(T&S)!==S){vi(),c.pingedLanes|=c.suspendedLanes&T;break}c.timeoutHandle=Ne(Ia.bind(null,c,zi),h);break}Ia(c,zi);break;case 4:if(To(c,S),(S&4194240)===S)break;for(h=c.eventTimes,T=-1;0<S;){var V=31-$r(S);P=1<<V,V=h[V],V>T&&(T=V),S&=~P}if(S=T,S=Hn()-S,S=(120>S?120:480>S?480:1080>S?1080:1920>S?1920:3e3>S?3e3:4320>S?4320:1960*Gz(S/1960))-S,10<S){c.timeoutHandle=Ne(Ia.bind(null,c,zi),S);break}Ia(c,zi);break;case 5:Ia(c,zi);break;default:throw Error(o(329))}}}return Fi(c,Hn()),c.callbackNode===x?P2.bind(null,c):null}function gx(c,h){var x=ff;return c.current.memoizedState.isDehydrated&&(Ra(c,h).flags|=256),c=Mp(c,h),c!==2&&(h=zi,zi=x,h!==null&&yx(h)),c}function yx(c){zi===null?zi=c:zi.push.apply(zi,c)}function $z(c){for(var h=c;;){if(h.flags&16384){var x=h.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var S=0;S<x.length;S++){var T=x[S],P=T.getSnapshot;T=T.value;try{if(!ps(P(),T))return!1}catch{return!1}}}if(x=h.child,h.subtreeFlags&16384&&x!==null)x.return=h,h=x;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function To(c,h){for(h&=~fx,h&=~yp,c.suspendedLanes|=h,c.pingedLanes&=~h,c=c.expirationTimes;0<h;){var x=31-$r(h),S=1<<x;c[x]=-1,h&=~S}}function L2(c){if(xt&6)throw Error(o(327));Da();var h=Nh(c,0);if(!(h&1))return Fi(c,Hn()),null;var x=Mp(c,h);if(c.tag!==0&&x===2){var S=wy(c);S!==0&&(h=S,x=gx(c,S))}if(x===1)throw x=cf,Ra(c,0),To(c,h),Fi(c,Hn()),x;if(x===6)throw Error(o(345));return c.finishedWork=c.current.alternate,c.finishedLanes=h,Ia(c,zi),Fi(c,Hn()),null}function R2(c){bo!==null&&bo.tag===0&&!(xt&6)&&Da();var h=xt;xt|=1;var x=wn.transition,S=zt;try{if(wn.transition=null,zt=1,c)return c()}finally{zt=S,wn.transition=x,xt=h,!(xt&6)&&ms()}}function xx(){Qi=iu.current,ft(iu)}function Ra(c,h){c.finishedWork=null,c.finishedLanes=0;var x=c.timeoutHandle;if(x!==Ge&&(c.timeoutHandle=Ge,We(x)),An!==null)for(x=An.return;x!==null;){var S=x;switch(zy(S),S.tag){case 1:S=S.type.childContextTypes,S!=null&&Ih();break;case 3:tu(),ft(Vn),ft(Bt),Hy();break;case 5:Uy(S);break;case 4:tu();break;case 13:ft(cn);break;case 19:ft(cn);break;case 10:Ay(S.type._context);break;case 22:case 23:xx()}x=x.return}if(Cn=c,An=c=Eo(c.current,null),Kn=Qi=h,Nn=0,cf=null,fx=yp=ru=0,zi=ff=null,gs!==null){for(h=0;h<gs.length;h++)if(x=gs[h],S=x.interleaved,S!==null){x.interleaved=null;var T=S.next,P=x.pending;if(P!==null){var V=P.next;P.next=T,S.next=V}x.pending=S}gs=null}return c}function I2(c,h){do{var x=An;try{if(Cy(),Zh.current=np,Jh){for(var S=gn.memoizedState;S!==null;){var T=S.queue;T!==null&&(T.pending=null),S=S.next}Jh=!1}if(nu=0,Wn=ii=gn=null,ef=!1,tf=0,cx.current=null,x===null||x.return===null){Nn=1,cf=h,An=null;break}e:{var P=c,V=x.return,K=x,he=h;if(h=Kn,K.flags|=32768,he!==null&&typeof he=="object"&&typeof he.then=="function"){var Ee=he,Xe=K,ut=Xe.tag;if(!(Xe.mode&1)&&(ut===0||ut===11||ut===15)){var tt=Xe.alternate;tt?(Xe.updateQueue=tt.updateQueue,Xe.memoizedState=tt.memoizedState,Xe.lanes=tt.lanes):(Xe.updateQueue=null,Xe.memoizedState=null)}var Gt=e2(V);if(Gt!==null){Gt.flags&=-257,t2(Gt,V,K,P,h),Gt.mode&1&&QM(P,Ee,h),h=Gt,he=Ee;var Ke=h.updateQueue;if(Ke===null){var oi=new Set;oi.add(he),h.updateQueue=oi}else Ke.add(he);break e}else{if(!(h&1)){QM(P,Ee,h),vx();break e}he=Error(o(426))}}else if(ln&&K.mode&1){var Er=e2(V);if(Er!==null){!(Er.flags&65536)&&(Er.flags|=256),t2(Er,V,K,P,h),Oy(he);break e}}P=he,Nn!==4&&(Nn=2),ff===null?ff=[P]:ff.push(P),he=Yy(he,K),K=V;do{switch(K.tag){case 3:K.flags|=65536,h&=-h,K.lanes|=h;var ue=JM(K,he,h);vM(K,ue);break e;case 1:P=he;var te=K.type,ce=K.stateNode;if(!(K.flags&128)&&(typeof te.getDerivedStateFromError=="function"||ce!==null&&typeof ce.componentDidCatch=="function"&&(So===null||!So.has(ce)))){K.flags|=65536,h&=-h,K.lanes|=h;var Oe=KM(K,P,h);vM(K,Oe);break e}}K=K.return}while(K!==null)}F2(x)}catch(Je){h=Je,An===x&&x!==null&&(An=x=x.return);continue}break}while(1)}function D2(){var c=gp.current;return gp.current=np,c===null?np:c}function vx(){(Nn===0||Nn===3||Nn===2)&&(Nn=4),Cn===null||!(ru&268435455)&&!(yp&268435455)||To(Cn,Kn)}function Mp(c,h){var x=xt;xt|=2;var S=D2();Cn===c&&Kn===h||Ra(c,h);do try{jz();break}catch(T){I2(c,T)}while(1);if(Cy(),xt=x,gp.current=S,An!==null)throw Error(o(261));return Cn=null,Kn=0,Nn}function jz(){for(;An!==null;)z2(An)}function Xz(){for(;An!==null&&!vz();)z2(An)}function z2(c){var h=B2(c.alternate,c,Qi);c.memoizedProps=c.pendingProps,h===null?F2(c):An=h,cx.current=null}function F2(c){var h=c;do{var x=h.alternate;if(c=h.return,h.flags&32768){if(x=Bz(x,h),x!==null){x.flags&=32767,An=x;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Nn=6,An=null;return}}else if(x=Fz(x,h,Qi),x!==null){An=x;return}if(h=h.sibling,h!==null){An=h;return}An=h=c}while(h!==null);Nn===0&&(Nn=5)}function Ia(c,h){var x=zt,S=wn.transition;try{wn.transition=null,zt=1,qz(c,h,x)}finally{wn.transition=S,zt=x}return null}function qz(c,h,x){do Da();while(bo!==null);if(xt&6)throw Error(o(327));var S=c.finishedWork,T=c.finishedLanes;if(S===null)return null;if(c.finishedWork=null,c.finishedLanes=0,S===c.current)throw Error(o(177));c.callbackNode=null,c.callbackPriority=0;var P=S.lanes|S.childLanes;if(xz(c,P),c===Cn&&(An=Cn=null,Kn=0),!(S.subtreeFlags&2064)&&!(S.flags&2064)||vp||(vp=!0,U2(Ty,function(){return Da(),null})),P=(S.flags&15990)!==0,S.subtreeFlags&15990||P){P=wn.transition,wn.transition=null;var V=zt;zt=1;var K=xt;xt|=4,cx.current=null,Vz(c,S),Hz(c,S),A(c.containerInfo),c.current=S,Wz(S),wz(),xt=K,zt=V,wn.transition=P}else c.current=S;if(vp&&(vp=!1,bo=c,wp=T),P=c.pendingLanes,P===0&&(So=null),bz(S.stateNode),Fi(c,Hn()),h!==null)for(x=c.onRecoverableError,S=0;S<h.length;S++)x(h[S]);if(xp)throw xp=!1,c=px,px=null,c;return wp&1&&c.tag!==0&&Da(),P=c.pendingLanes,P&1?c===mx?df++:(df=0,mx=c):df=0,ms(),null}function Da(){if(bo!==null){var c=pM(wp),h=wn.transition,x=zt;try{if(wn.transition=null,zt=16>c?16:c,bo===null)var S=!1;else{if(c=bo,bo=null,wp=0,xt&6)throw Error(o(331));var T=xt;for(xt|=4,ze=c.current;ze!==null;){var P=ze,V=P.child;if(ze.flags&16){var K=P.deletions;if(K!==null){for(var he=0;he<K.length;he++){var Ee=K[he];for(ze=Ee;ze!==null;){var Xe=ze;switch(Xe.tag){case 0:case 11:case 15:La(8,Xe,P)}var ut=Xe.child;if(ut!==null)ut.return=Xe,ze=ut;else for(;ze!==null;){Xe=ze;var tt=Xe.sibling,Gt=Xe.return;if(w2(Xe),Xe===Ee){ze=null;break}if(tt!==null){tt.return=Gt,ze=tt;break}ze=Gt}}}var Ke=P.alternate;if(Ke!==null){var oi=Ke.child;if(oi!==null){Ke.child=null;do{var Er=oi.sibling;oi.sibling=null,oi=Er}while(oi!==null)}}ze=P}}if(P.subtreeFlags&2064&&V!==null)V.return=P,ze=V;else e:for(;ze!==null;){if(P=ze,P.flags&2048)switch(P.tag){case 0:case 11:case 15:La(9,P,P.return)}var ue=P.sibling;if(ue!==null){ue.return=P.return,ze=ue;break e}ze=P.return}}var te=c.current;for(ze=te;ze!==null;){V=ze;var ce=V.child;if(V.subtreeFlags&2064&&ce!==null)ce.return=V,ze=ce;else e:for(V=te;ze!==null;){if(K=ze,K.flags&2048)try{switch(K.tag){case 0:case 11:case 15:lf(9,K)}}catch(Je){Ni(K,K.return,Je)}if(K===V){ze=null;break e}var Oe=K.sibling;if(Oe!==null){Oe.return=K.return,ze=Oe;break e}ze=K.return}}if(xt=T,ms(),hs&&typeof hs.onPostCommitFiberRoot=="function")try{hs.onPostCommitFiberRoot(Oh,c)}catch{}S=!0}return S}finally{zt=x,wn.transition=h}}return!1}function N2(c,h,x){h=Yy(x,h),h=JM(c,h,1),_o(c,h),h=vi(),c=bp(c,1),c!==null&&(qc(c,1,h),Fi(c,h))}function Ni(c,h,x){if(c.tag===3)N2(c,c,x);else for(;h!==null;){if(h.tag===3){N2(h,c,x);break}else if(h.tag===1){var S=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(So===null||!So.has(S))){c=Yy(x,c),c=KM(h,c,1),_o(h,c),c=vi(),h=bp(h,1),h!==null&&(qc(h,1,c),Fi(h,c));break}}h=h.return}}function Yz(c,h,x){var S=c.pingCache;S!==null&&S.delete(h),h=vi(),c.pingedLanes|=c.suspendedLanes&x,Cn===c&&(Kn&x)===x&&(Nn===4||Nn===3&&(Kn&130023424)===Kn&&500>Hn()-dx?Ra(c,0):fx|=x),Fi(c,h)}function O2(c,h){h===0&&(c.mode&1?(h=Fh,Fh<<=1,!(Fh&130023424)&&(Fh=4194304)):h=1);var x=vi();c=bp(c,h),c!==null&&(qc(c,h,x),Fi(c,x))}function Zz(c){var h=c.memoizedState,x=0;h!==null&&(x=h.retryLane),O2(c,x)}function Jz(c,h){var x=0;switch(c.tag){case 13:var S=c.stateNode,T=c.memoizedState;T!==null&&(x=T.retryLane);break;case 19:S=c.stateNode;break;default:throw Error(o(314))}S!==null&&S.delete(h),O2(c,x)}var B2;B2=function(c,h,x){if(c!==null)if(c.memoizedProps!==h.pendingProps||Vn.current)Ki=!0;else{if(!(c.lanes&x)&&!(h.flags&128))return Ki=!1,Oz(c,h,x);Ki=!!(c.flags&131072)}else Ki=!1,ln&&h.flags&1048576&&TM(h,Xh,h.index);switch(h.lanes=0,h.tag){case 2:var S=h.type;c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2),c=h.pendingProps;var T=Is(h,Bt.current);Yl(h,x),T=Gy(null,h,S,c,T,x);var P=$y();return h.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,Di(S)?(P=!0,Dh(h)):P=!1,h.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,Ly(h),T.updater=$h,h.stateNode=T,T._reactInternals=h,Iy(h,S,c,x),h=Ky(null,h,S,!0,P,x)):(h.tag=0,ln&&P&&Dy(h),xi(null,h,T,x),h=h.child),h;case 16:S=h.elementType;e:{switch(c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2),c=h.pendingProps,T=S._init,S=T(S._payload),h.type=S,T=h.tag=Qz(S),c=jr(S,c),T){case 0:h=Jy(null,h,S,c,x);break e;case 1:h=u2(null,h,S,c,x);break e;case 11:h=r2(null,h,S,c,x);break e;case 14:h=s2(null,h,S,jr(S.type,c),x);break e}throw Error(o(306,S,""))}return h;case 0:return S=h.type,T=h.pendingProps,T=h.elementType===S?T:jr(S,T),Jy(c,h,S,T,x);case 1:return S=h.type,T=h.pendingProps,T=h.elementType===S?T:jr(S,T),u2(c,h,S,T,x);case 3:e:{if(c2(h),c===null)throw Error(o(387));S=h.pendingProps,P=h.memoizedState,T=P.element,xM(c,h),Gh(h,S,null,x);var V=h.memoizedState;if(S=V.element,de&&P.isDehydrated)if(P={element:S,isDehydrated:!1,cache:V.cache,transitions:V.transitions},h.updateQueue.baseState=P,h.memoizedState=P,h.flags&256){T=Error(o(423)),h=f2(c,h,S,x,T);break e}else if(S!==T){T=Error(o(424)),h=f2(c,h,S,x,T);break e}else for(de&&(Ji=oe(h.stateNode.containerInfo),Zi=h,ln=!0,Xr=null,Yc=!1),x=LM(h,null,S,x),h.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(Kl(),S===T){h=Bs(c,h,x);break e}xi(c,h,S,x)}h=h.child}return h;case 5:return RM(h),c===null&&Ny(h),S=h.type,T=h.pendingProps,P=c!==null?c.memoizedProps:null,V=T.children,Ce(S,T)?V=null:P!==null&&Ce(S,P)&&(h.flags|=32),l2(c,h),xi(c,h,V,x),h.child;case 6:return c===null&&Ny(h),null;case 13:return d2(c,h,x);case 4:return By(h,h.stateNode.containerInfo),S=h.pendingProps,c===null?h.child=Ql(h,null,S,x):xi(c,h,S,x),h.child;case 11:return S=h.type,T=h.pendingProps,T=h.elementType===S?T:jr(S,T),r2(c,h,S,T,x);case 7:return xi(c,h,h.pendingProps,x),h.child;case 8:return xi(c,h,h.pendingProps.children,x),h.child;case 12:return xi(c,h,h.pendingProps.children,x),h.child;case 10:e:{if(S=h.type._context,T=h.pendingProps,P=h.memoizedProps,V=T.value,yM(h,S,V),P!==null)if(ps(P.value,V)){if(P.children===T.children&&!Vn.current){h=Bs(c,h,x);break e}}else for(P=h.child,P!==null&&(P.return=h);P!==null;){var K=P.dependencies;if(K!==null){V=P.child;for(var he=K.firstContext;he!==null;){if(he.context===S){if(P.tag===1){he=zs(-1,x&-x),he.tag=2;var Ee=P.updateQueue;if(Ee!==null){Ee=Ee.shared;var Xe=Ee.pending;Xe===null?he.next=he:(he.next=Xe.next,Xe.next=he),Ee.pending=he}}P.lanes|=x,he=P.alternate,he!==null&&(he.lanes|=x),Py(P.return,x,h),K.lanes|=x;break}he=he.next}}else if(P.tag===10)V=P.type===h.type?null:P.child;else if(P.tag===18){if(V=P.return,V===null)throw Error(o(341));V.lanes|=x,K=V.alternate,K!==null&&(K.lanes|=x),Py(V,x,h),V=P.sibling}else V=P.child;if(V!==null)V.return=P;else for(V=P;V!==null;){if(V===h){V=null;break}if(P=V.sibling,P!==null){P.return=V.return,V=P;break}V=V.return}P=V}xi(c,h,T.children,x),h=h.child}return h;case 9:return T=h.type,S=h.pendingProps.children,Yl(h,x),T=vr(T),S=S(T),h.flags|=1,xi(c,h,S,x),h.child;case 14:return S=h.type,T=jr(S,h.pendingProps),T=jr(S.type,T),s2(c,h,S,T,x);case 15:return o2(c,h,h.type,h.pendingProps,x);case 17:return S=h.type,T=h.pendingProps,T=h.elementType===S?T:jr(S,T),c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2),h.tag=1,Di(S)?(c=!0,Dh(h)):c=!1,Yl(h,x),bM(h,S,T),Iy(h,S,T,x),Ky(null,h,S,!0,c,x);case 19:return g2(c,h,x);case 22:return a2(c,h,x)}throw Error(o(156,h.tag))};function U2(c,h){return by(c,h)}function Kz(c,h,x,S){this.tag=c,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tr(c,h,x,S){return new Kz(c,h,x,S)}function wx(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Qz(c){if(typeof c=="function")return wx(c)?1:0;if(c!=null){if(c=c.$$typeof,c===y)return 11;if(c===_)return 14}return 2}function Eo(c,h){var x=c.alternate;return x===null?(x=Tr(c.tag,h,c.key,c.mode),x.elementType=c.elementType,x.type=c.type,x.stateNode=c.stateNode,x.alternate=c,c.alternate=x):(x.pendingProps=h,x.type=c.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=c.flags&14680064,x.childLanes=c.childLanes,x.lanes=c.lanes,x.child=c.child,x.memoizedProps=c.memoizedProps,x.memoizedState=c.memoizedState,x.updateQueue=c.updateQueue,h=c.dependencies,x.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},x.sibling=c.sibling,x.index=c.index,x.ref=c.ref,x}function Tp(c,h,x,S,T,P){var V=2;if(S=c,typeof c=="function")wx(c)&&(V=1);else if(typeof c=="string")V=5;else e:switch(c){case f:return za(x.children,T,P,h);case d:V=8,T|=8;break;case p:return c=Tr(12,x,h,T|2),c.elementType=p,c.lanes=P,c;case w:return c=Tr(13,x,h,T),c.elementType=w,c.lanes=P,c;case v:return c=Tr(19,x,h,T),c.elementType=v,c.lanes=P,c;case M:return Ep(x,T,P,h);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case m:V=10;break e;case g:V=9;break e;case y:V=11;break e;case _:V=14;break e;case b:V=16,S=null;break e}throw Error(o(130,c==null?c:typeof c,""))}return h=Tr(V,x,h,T),h.elementType=c,h.type=S,h.lanes=P,h}function za(c,h,x,S){return c=Tr(7,c,S,h),c.lanes=x,c}function Ep(c,h,x,S){return c=Tr(22,c,S,h),c.elementType=M,c.lanes=x,c.stateNode={},c}function _x(c,h,x){return c=Tr(6,c,null,h),c.lanes=x,c}function Sx(c,h,x){return h=Tr(4,c.children!==null?c.children:[],c.key,h),h.lanes=x,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}function eF(c,h,x,S,T){this.tag=h,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ge,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_y(0),this.expirationTimes=_y(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_y(0),this.identifierPrefix=S,this.onRecoverableError=T,de&&(this.mutableSourceEagerHydrationData=null)}function V2(c,h,x,S,T,P,V,K,he){return c=new eF(c,h,x,K,he),h===1?(h=1,P===!0&&(h|=8)):h=0,P=Tr(3,null,null,h),c.current=P,P.stateNode=c,P.memoizedState={element:S,isDehydrated:x,cache:null,transitions:null},Ly(P),c}function H2(c){if(!c)return xr;c=c._reactInternals;e:{if(L(c)!==c||c.tag!==1)throw Error(o(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(Di(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(o(171))}if(c.tag===1){var x=c.type;if(Di(x))return dM(c,x,h)}return h}function W2(c){var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(o(188)):(c=Object.keys(c).join(","),Error(o(268,c)));return c=q(h),c===null?null:c.stateNode}function G2(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var x=c.retryLane;c.retryLane=x!==0&&x<h?x:h}}function bx(c,h){G2(c,h),(c=c.alternate)&&G2(c,h)}function tF(c){return c=q(c),c===null?null:c.stateNode}function nF(){return null}return n.attemptContinuousHydration=function(c){if(c.tag===13){var h=vi();Mr(c,134217728,h),bx(c,134217728)}},n.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var h=vi(),x=Mo(c);Mr(c,x,h),bx(c,x)}},n.attemptSynchronousHydration=function(c){switch(c.tag){case 3:var h=c.stateNode;if(h.current.memoizedState.isDehydrated){var x=Xc(h.pendingLanes);x!==0&&(Sy(h,x|1),Fi(h,Hn()),!(xt&6)&&(su(),ms()))}break;case 13:var S=vi();R2(function(){return Mr(c,1,S)}),bx(c,1)}},n.batchedUpdates=function(c,h){var x=xt;xt|=1;try{return c(h)}finally{xt=x,xt===0&&(su(),Bh&&ms())}},n.createComponentSelector=function(c){return{$$typeof:fp,value:c}},n.createContainer=function(c,h,x,S,T,P,V){return V2(c,h,!1,null,x,S,T,P,V)},n.createHasPseudoClassSelector=function(c){return{$$typeof:dp,value:c}},n.createHydrationContainer=function(c,h,x,S,T,P,V,K,he){return c=V2(x,S,!0,c,T,P,V,K,he),c.context=H2(null),x=c.current,S=vi(),T=Mo(x),P=zs(S,T),P.callback=h??null,_o(x,P),c.current.lanes=T,qc(c,T,S),Fi(c,S),c},n.createPortal=function(c,h,x){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:S==null?null:""+S,children:c,containerInfo:h,implementation:x}},n.createRoleSelector=function(c){return{$$typeof:hp,value:c}},n.createTestNameSelector=function(c){return{$$typeof:pp,value:c}},n.createTextSelector=function(c){return{$$typeof:mp,value:c}},n.deferredUpdates=function(c){var h=zt,x=wn.transition;try{return wn.transition=null,zt=16,c()}finally{zt=h,wn.transition=x}},n.discreteUpdates=function(c,h,x,S,T){var P=zt,V=wn.transition;try{return wn.transition=null,zt=1,c(h,x,S,T)}finally{zt=P,wn.transition=V,xt===0&&su()}},n.findAllNodes=ux,n.findBoundingRects=function(c,h){if(!kt)throw Error(o(363));h=ux(c,h),c=[];for(var x=0;x<h.length;x++)c.push($(h[x]));for(h=c.length-1;0<h;h--){x=c[h];for(var S=x.x,T=S+x.width,P=x.y,V=P+x.height,K=h-1;0<=K;K--)if(h!==K){var he=c[K],Ee=he.x,Xe=Ee+he.width,ut=he.y,tt=ut+he.height;if(S>=Ee&&P>=ut&&T<=Xe&&V<=tt){c.splice(h,1);break}else if(S!==Ee||x.width!==he.width||tt<P||ut>V){if(!(P!==ut||x.height!==he.height||Xe<S||Ee>T)){Ee>S&&(he.width+=Ee-S,he.x=S),Xe<T&&(he.width=T-Ee),c.splice(h,1);break}}else{ut>P&&(he.height+=ut-P,he.y=P),tt<V&&(he.height=V-ut),c.splice(h,1);break}}}return c},n.findHostInstance=W2,n.findHostInstanceWithNoPortals=function(c){return c=O(c),c=c!==null?G(c):null,c===null?null:c.stateNode},n.findHostInstanceWithWarning=function(c){return W2(c)},n.flushControlled=function(c){var h=xt;xt|=1;var x=wn.transition,S=zt;try{wn.transition=null,zt=1,c()}finally{zt=S,wn.transition=x,xt=h,xt===0&&(su(),ms())}},n.flushPassiveEffects=Da,n.flushSync=R2,n.focusWithin=function(c,h){if(!kt)throw Error(o(363));for(c=ox(c),h=A2(c,h),h=Array.from(h),c=0;c<h.length;){var x=h[c++];if(!fe(x)){if(x.tag===5&&Z(x.stateNode))return!0;for(x=x.child;x!==null;)h.push(x),x=x.sibling}}return!1},n.getCurrentUpdatePriority=function(){return zt},n.getFindAllNodesFailureDescription=function(c,h){if(!kt)throw Error(o(363));var x=0,S=[];c=[ox(c),0];for(var T=0;T<c.length;){var P=c[T++],V=c[T++],K=h[V];if((P.tag!==5||!fe(P))&&(ax(P,K)&&(S.push(lx(K)),V++,V>x&&(x=V)),V<h.length))for(P=P.child;P!==null;)c.push(P,V),P=P.sibling}if(x<h.length){for(c=[];x<h.length;x++)c.push(lx(h[x]));return`findAllNodes was able to match part of the selector:
  `+(S.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},n.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return J(c.child.stateNode);default:return c.child.stateNode}},n.injectIntoDevTools=function(c){if(c={bundleType:c.bundleType,version:c.version,rendererPackageName:c.rendererPackageName,rendererConfig:c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:tF,findFiberByHostInstance:c.findFiberByHostInstance||nF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)c=!0;else{try{Oh=h.inject(c),hs=h}catch{}c=!!h.checkDCE}}return c},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(c,h,x,S){if(!kt)throw Error(o(363));c=ux(c,h);var T=le(c,x,S).disconnect;return{disconnect:function(){T()}}},n.registerMutableSourceForHydration=function(c,h){var x=h._getVersion;x=x(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,x]:c.mutableSourceEagerHydrationData.push(h,x)},n.runWithPriority=function(c,h){var x=zt;try{return zt=c,h()}finally{zt=x}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(c,h,x,S){var T=h.current,P=vi(),V=Mo(T);return x=H2(x),h.context===null?h.context=x:h.pendingContext=x,h=zs(P,V),h.payload={element:c},S=S===void 0?null:S,S!==null&&(h.callback=S),_o(T,h),c=Mr(T,V,P),c!==null&&Wh(c,T,V),V},n};vD.exports=mq;var gq=vD.exports;const yq=Zd(gq);var wD={exports:{}},_D={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,F){var A=D.length;D.push(F);e:for(;0<A;){var X=A-1>>>1,Y=D[X];if(0<r(Y,F))D[X]=F,D[A]=Y,A=X;else break e}}function n(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var F=D[0],A=D.pop();if(A!==F){D[0]=A;e:for(var X=0,Y=D.length,z=Y>>>1;X<z;){var xe=2*(X+1)-1,Ce=D[xe],ie=xe+1,Ne=D[ie];if(0>r(Ce,A))ie<Y&&0>r(Ne,Ce)?(D[X]=Ne,D[ie]=A,X=ie):(D[X]=Ce,D[xe]=A,X=xe);else if(ie<Y&&0>r(Ne,A))D[X]=Ne,D[ie]=A,X=ie;else break e}}return F}function r(D,F){var A=D.sortIndex-F.sortIndex;return A!==0?A:D.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],f=1,d=null,p=3,m=!1,g=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(D){for(var F=n(u);F!==null;){if(F.callback===null)i(u);else if(F.startTime<=D)i(u),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(u)}}function M(D){if(y=!1,b(D),!g)if(n(l)!==null)g=!0,J(k);else{var F=n(u);F!==null&&re(M,F.startTime-D)}}function k(D,F){g=!1,y&&(y=!1,v(C),C=-1),m=!0;var A=p;try{for(b(F),d=n(l);d!==null&&(!(d.expirationTime>F)||D&&!O());){var X=d.callback;if(typeof X=="function"){d.callback=null,p=d.priorityLevel;var Y=X(d.expirationTime<=F);F=t.unstable_now(),typeof Y=="function"?d.callback=Y:d===n(l)&&i(l),b(F)}else i(l);d=n(l)}if(d!==null)var z=!0;else{var xe=n(u);xe!==null&&re(M,xe.startTime-F),z=!1}return z}finally{d=null,p=A,m=!1}}var E=!1,I=null,C=-1,L=5,R=-1;function O(){return!(t.unstable_now()-R<L)}function q(){if(I!==null){var D=t.unstable_now();R=D;var F=!0;try{F=I(!0,D)}finally{F?j():(E=!1,I=null)}}else E=!1}var j;if(typeof _=="function")j=function(){_(q)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,W=G.port2;G.port1.onmessage=q,j=function(){W.postMessage(null)}}else j=function(){w(q,0)};function J(D){I=D,E||(E=!0,j())}function re(D,F){C=w(function(){D(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,J(k))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(p){case 1:case 2:case 3:var F=3;break;default:F=p}var A=p;p=F;try{return D()}finally{p=A}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,F){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var A=p;p=D;try{return F()}finally{p=A}},t.unstable_scheduleCallback=function(D,F,A){var X=t.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?X+A:X):A=X,D){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=A+Y,D={id:f++,callback:F,priorityLevel:D,startTime:A,expirationTime:Y,sortIndex:-1},A>X?(D.sortIndex=A,e(u,D),n(l)===null&&D===n(u)&&(y?(v(C),C=-1):y=!0,re(M,A-X))):(D.sortIndex=Y,e(l,D),g||m||(g=!0,J(k))),D},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(D){var F=p;return function(){var A=p;p=F;try{return D.apply(this,arguments)}finally{p=A}}}})(_D);wD.exports=_D;var jk=wD.exports,Xk,qk;const SD=t=>t&&t.isOrthographicCamera,xq=t=>t&&t.hasOwnProperty("current"),Th=typeof window<"u"&&((Xk=window.document)!=null&&Xk.createElement||((qk=window.navigator)==null?void 0:qk.product)==="ReactNative")?H.useLayoutEffect:H.useEffect;function bD(t){const e=H.useRef(t);return Th(()=>void(e.current=t),[t]),e}function MD(t,e,n){if(n(t)===!0)return t;let i=e?t.return:t.child;for(;i;){const r=MD(i,e,n);if(r)return r;i=i.sibling}}const Yv=[];function vq(t){return t&&MD(t,!0,e=>{var n;const i=(n=e.type)==null?void 0:n._context;!i||Yv.includes(i)||(Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}}),Yv.push(i))}),Yv.reduce((e,n)=>{var i;const r=(i=H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher.current)==null?void 0:i.readContext(n);return s=>H.createElement(e,null,H.createElement(n.Provider,{...s,value:r}))},e=>H.createElement(H.Fragment,e))}class wq extends H.Component{componentDidMount(){this.props.setFiber(this._reactInternals)}render(){return this.props.children}}function _q({set:t}){return Th(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class TD extends H.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}TD.getDerivedStateFromError=()=>({error:!0});const ED="__default",Sq=t=>t&&!!t.memoized&&!!t.changes;function kD(t){const e=typeof window<"u"?window.devicePixelRatio:1;return Array.isArray(t)?Math.min(Math.max(t[0],e),t[1]):t}const Lf=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()},Sn={obj:t=>t===Object(t)&&!Sn.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:i="reference",strict:r=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(Sn.str(t)||Sn.num(t))return t===e;const s=Sn.obj(t);if(s&&i==="reference")return t===e;const o=Sn.arr(t);if(o&&n==="reference")return t===e;if((o||s)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;for(a in r?e:t)if(t[a]!==e[a])return!1;if(Sn.und(a)){if(o&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function bq(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function Cu(t,e){const n=t;return(e!=null&&e.primitive||!n.__r3f)&&(n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),t}function y_(t,e){let n=t;if(e.includes("-")){const i=e.split("-"),r=i.pop();return n=i.reduce((s,o)=>s[o],t),{target:n,key:r}}else return{target:n,key:e}}const Yk=/-\d+$/;function Zv(t,e,n){if(Sn.str(n)){if(Yk.test(n)){const s=n.replace(Yk,""),{target:o,key:a}=y_(t,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=y_(t,n);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=n(t,e)}function Zk(t,e,n){var i,r;if(Sn.str(n)){const{target:s,key:o}=y_(t,n),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(t,e);(r=e.__r3f)==null||delete r.previousAttach}function CD(t,{children:e,key:n,ref:i,...r},{children:s,key:o,ref:a,...l}={},u=!1){var f;const d=(f=t==null?void 0:t.__r3f)!=null?f:{},p=Object.entries(r),m=[];if(u){const y=Object.keys(l);for(let w=0;w<y.length;w++)r.hasOwnProperty(y[w])||p.unshift([y[w],ED+"remove"])}p.forEach(([y,w])=>{var v;if((v=t.__r3f)!=null&&v.primitive&&y==="object"||Sn.equ(w,l[y]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(y))return m.push([y,w,!0,[]]);let _=[];y.includes("-")&&(_=y.split("-")),m.push([y,w,!1,_])});const g={...r};return d.memoizedProps&&d.memoizedProps.args&&(g.args=d.memoizedProps.args),d.memoizedProps&&d.memoizedProps.attach&&(g.attach=d.memoizedProps.attach),{memoized:g,changes:m}}function Jv(t,e){var n,i;const r=(n=t.__r3f)!=null?n:{},s=r.root,o=(i=s==null||s.getState==null?void 0:s.getState())!=null?i:{},{memoized:a,changes:l}=Sq(e)?e:CD(t,e),u=r.eventCount;if(t.__r3f&&(t.__r3f.memoizedProps=a),l.forEach(([f,d,p,m])=>{let g=t,y=g[f];if(m.length&&(y=m.reduce((_,b)=>_[b],t),!(y&&y.set))){const[_,...b]=m.reverse();g=b.reverse().reduce((M,k)=>M[k],t),f=_}if(d===ED+"remove")if(y&&y.constructor){var w;d=new y.constructor(...(w=a.args)!=null?w:[])}else if(g.constructor){var v;const _=new g.constructor(...(v=g.__r3f.memoizedProps.args)!=null?v:[]);d=_[y],_.dispose&&_.dispose()}else d=0;if(p)d?r.handlers[f]=d:delete r.handlers[f],r.eventCount=Object.keys(r.handlers).length;else if(y&&y.set&&(y.copy||y instanceof vl)){if(Array.isArray(d))y.fromArray?y.fromArray(d):y.set(...d);else if(y.copy&&d&&d.constructor&&y.constructor.name===d.constructor.name)y.copy(d);else if(d!==void 0){const _=y instanceof Ue;!_&&y.setScalar?y.setScalar(d):y instanceof vl&&d instanceof vl?y.mask=d.mask:y.set(d),!("ColorManagement"in f0)&&!o.linear&&_&&y.convertSRGBToLinear()}}else g[f]=d,!o.linear&&g[f]instanceof Fn&&(g[f].encoding=tn);Au(t)}),r.parent&&o.internal&&t.raycast&&u!==r.eventCount){const f=o.internal.interaction.indexOf(t);f>-1&&o.internal.interaction.splice(f,1),r.eventCount&&o.internal.interaction.push(t)}return l.length&&t.parent&&x_(t),t}function Au(t){var e,n;const i=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();i&&i.internal.frames===0&&i.invalidate()}function x_(t){t.onUpdate==null||t.onUpdate(t)}function Mq(t,e){t.manual||(SD(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function Tq(t,e,n){const i=n.pop(),r=n.reduce((s,o)=>s[o],t);return r[i]=e}function Kv(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function Eq(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return tc.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return tc.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return tc.ContinuousEventPriority;default:return tc.DefaultEventPriority}}function AD(t,e,n,i){const r=n.get(e);r&&(n.delete(e),n.size===0&&(t.delete(i),r.target.releasePointerCapture(i)))}function kq(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(i=>i!==e),n.initialHits=n.initialHits.filter(i=>i!==e),n.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&n.hovered.delete(r)}),n.capturedMap.forEach((i,r)=>{AD(n.capturedMap,e,i,r)})}function Cq(t){function e(l){const{internal:u}=t.getState(),f=l.offsetX-u.initialClick[0],d=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(f*f+d*d))}function n(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(f=>{var d;return(d=u.__r3f)==null?void 0:d.handlers["onPointer"+f]}))}function i(l,u){const f=t.getState(),d=new Set,p=[],m=u?u(f.internal.interaction):f.internal.interaction;m.forEach(w=>{const v=Lf(w);v&&(v.raycaster.camera=void 0)}),f.previousRoot||f.events.compute==null||f.events.compute(l,f);let g=m.flatMap(w=>{const v=Lf(w);if(!v||!v.events.enabled||v.raycaster.camera===null)return[];if(v.raycaster.camera===void 0){var _;v.events.compute==null||v.events.compute(l,v,(_=v.previousRoot)==null?void 0:_.getState()),v.raycaster.camera===void 0&&(v.raycaster.camera=null)}return v.raycaster.camera?v.raycaster.intersectObject(w,!0):[]}).sort((w,v)=>{const _=Lf(w.object),b=Lf(v.object);return!_||!b?0:b.events.priority-_.events.priority||w.distance-v.distance}).filter(w=>{const v=Kv(w);return d.has(v)?!1:(d.add(v),!0)});f.events.filter&&(g=f.events.filter(g,f));for(const w of g){let v=w.object;for(;v;){var y;(y=v.__r3f)!=null&&y.eventCount&&p.push({...w,eventObject:v}),v=v.parent}}if("pointerId"in l&&f.internal.capturedMap.has(l.pointerId))for(let w of f.internal.capturedMap.get(l.pointerId).values())p.push(w.intersection);return p}function r(l,u,f,d){if(l.length){const p={stopped:!1};for(const m of l){const g=Lf(m.object);if(g){const{raycaster:y,pointer:w,camera:v,internal:_}=g,b=new B(w.x,w.y,0).unproject(v),M=L=>{var R,O;return(R=(O=_.capturedMap.get(L))==null?void 0:O.has(m.eventObject))!=null?R:!1},k=L=>{const R={intersection:m,target:u.target};_.capturedMap.has(L)?_.capturedMap.get(L).set(m.eventObject,R):_.capturedMap.set(L,new Map([[m.eventObject,R]])),u.target.setPointerCapture(L)},E=L=>{const R=_.capturedMap.get(L);R&&AD(_.capturedMap,m.eventObject,R,L)};let I={};for(let L in u){let R=u[L];typeof R!="function"&&(I[L]=R)}let C={...m,...I,pointer:w,intersections:l,stopped:p.stopped,delta:f,unprojectedPoint:b,ray:y.ray,camera:v,stopPropagation:()=>{const L="pointerId"in u&&_.capturedMap.get(u.pointerId);if((!L||L.has(m.eventObject))&&(C.stopped=p.stopped=!0,_.hovered.size&&Array.from(_.hovered.values()).find(R=>R.eventObject===m.eventObject))){const R=l.slice(0,l.indexOf(m));s([...R,m])}},target:{hasPointerCapture:M,setPointerCapture:k,releasePointerCapture:E},currentTarget:{hasPointerCapture:M,setPointerCapture:k,releasePointerCapture:E},nativeEvent:u};if(d(C),p.stopped===!0)break}}}return l}function s(l){const{internal:u}=t.getState();Array.from(u.hovered.values()).forEach(f=>{if(!l.length||!l.find(d=>d.object===f.object&&d.index===f.index&&d.instanceId===f.instanceId)){const p=f.eventObject.__r3f,m=p==null?void 0:p.handlers;if(u.hovered.delete(Kv(f)),p!=null&&p.eventCount){const g={...f,intersections:l};m.onPointerOut==null||m.onPointerOut(g),m.onPointerLeave==null||m.onPointerLeave(g)}}})}const o=l=>{switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:f}=t.getState();"pointerId"in u&&!f.capturedMap.has(u.pointerId)&&(f.capturedMap.delete(u.pointerId),s([]))}}return u=>{const{onPointerMissed:f,internal:d}=t.getState();d.lastEvent.current=u;const p=l==="onPointerMove",m=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",y=i(u,p?n:void 0),w=m?e(u):0;l==="onPointerDown"&&(d.initialClick=[u.offsetX,u.offsetY],d.initialHits=y.map(v=>v.eventObject)),m&&!y.length&&w<=2&&(a(u,d.interaction),f&&f(u)),p&&s(y),r(y,u,w,v=>{const _=v.eventObject,b=_.__r3f,M=b==null?void 0:b.handlers;if(b!=null&&b.eventCount)if(p){if(M.onPointerOver||M.onPointerEnter||M.onPointerOut||M.onPointerLeave){const k=Kv(v),E=d.hovered.get(k);E?E.stopped&&v.stopPropagation():(d.hovered.set(k,v),M.onPointerOver==null||M.onPointerOver(v),M.onPointerEnter==null||M.onPointerEnter(v))}M.onPointerMove==null||M.onPointerMove(v)}else{const k=M[l];k?(!m||d.initialHits.includes(_))&&(a(u,d.interaction.filter(E=>!d.initialHits.includes(E))),k(v)):m&&d.initialHits.includes(_)&&a(u,d.interaction.filter(E=>!d.initialHits.includes(E)))}})}};function a(l,u){u.forEach(f=>{var d;return(d=f.__r3f)==null||d.handlers.onPointerMissed==null?void 0:d.handlers.onPointerMissed(l)})}return{handlePointer:o}}let v_={},Aq=t=>void(v_={...v_,...t});function Pq(t,e){function n(f,{args:d=[],attach:p,...m},g){let y=`${f[0].toUpperCase()}${f.slice(1)}`,w;if(f==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const v=m.object;w=Cu(v,{type:f,root:g,attach:p,primitive:!0})}else{const v=v_[y];if(!v)throw new Error(`R3F: ${y} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");w=Cu(new v(...d),{type:f,root:g,attach:p,memoizedProps:{args:d}})}return w.__r3f.attach===void 0&&(w instanceof yt?w.__r3f.attach="geometry":w instanceof ni&&(w.__r3f.attach="material")),y!=="inject"&&Jv(w,m),w}function i(f,d){let p=!1;if(d){var m,g;(m=d.__r3f)!=null&&m.attach?Zv(f,d,d.__r3f.attach):d.isObject3D&&f.isObject3D&&(f.add(d),p=!0),p||(g=f.__r3f)==null||g.objects.push(d),d.__r3f||Cu(d,{}),d.__r3f.parent=f,x_(d),Au(d)}}function r(f,d,p){let m=!1;if(d){var g,y;if((g=d.__r3f)!=null&&g.attach)Zv(f,d,d.__r3f.attach);else if(d.isObject3D&&f.isObject3D){d.parent=f,d.dispatchEvent({type:"added"});const w=f.children.filter(_=>_!==d),v=w.indexOf(p);f.children=[...w.slice(0,v),d,...w.slice(v)],m=!0}m||(y=f.__r3f)==null||y.objects.push(d),d.__r3f||Cu(d,{}),d.__r3f.parent=f,x_(d),Au(d)}}function s(f,d,p=!1){f&&[...f].forEach(m=>o(d,m,p))}function o(f,d,p){if(d){var m,g,y;if(d.__r3f&&(d.__r3f.parent=null),(m=f.__r3f)!=null&&m.objects&&(f.__r3f.objects=f.__r3f.objects.filter(M=>M!==d)),(g=d.__r3f)!=null&&g.attach)Zk(f,d,d.__r3f.attach);else if(d.isObject3D&&f.isObject3D){var w;f.remove(d),(w=d.__r3f)!=null&&w.root&&kq(d.__r3f.root,d)}const _=(y=d.__r3f)==null?void 0:y.primitive,b=p===void 0?d.dispose!==null&&!_:p;if(!_){var v;s((v=d.__r3f)==null?void 0:v.objects,d,b),s(d.children,d,b)}d.__r3f&&(delete d.__r3f.root,delete d.__r3f.objects,delete d.__r3f.handlers,delete d.__r3f.memoizedProps,_||delete d.__r3f),b&&d.dispose&&d.type!=="Scene"&&jk.unstable_scheduleCallback(jk.unstable_IdlePriority,()=>{try{d.dispose()}catch{}}),Au(f)}}function a(f,d,p,m){var g;const y=(g=f.__r3f)==null?void 0:g.parent;if(!y)return;const w=n(d,p,f.__r3f.root);if(f.children){for(const v of f.children)v.__r3f&&i(w,v);f.children=f.children.filter(v=>!v.__r3f)}f.__r3f.objects.forEach(v=>i(w,v)),f.__r3f.objects=[],o(y,f),i(y,w),w.raycast&&w.__r3f.eventCount&&w.__r3f.root.getState().internal.interaction.push(w),[m,m.alternate].forEach(v=>{v!==null&&(v.stateNode=w,v.ref&&(typeof v.ref=="function"?v.ref(w):v.ref.current=w))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:yq({createInstance:n,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(f,d)=>{if(!d)return;const p=f.getState().scene;p.__r3f&&(p.__r3f.root=f,i(p,d))},removeChildFromContainer:(f,d)=>{d&&o(f.getState().scene,d)},insertInContainerBefore:(f,d,p)=>{if(!d||!p)return;const m=f.getState().scene;m.__r3f&&r(m,d,p)},getRootHostContext:()=>null,getChildHostContext:f=>f,finalizeInitialChildren(f){var d;return!!((d=f==null?void 0:f.__r3f)!=null?d:{}).handlers},prepareUpdate(f,d,p,m){if(f.__r3f.primitive&&m.object&&m.object!==f)return[!0];{const{args:g=[],children:y,...w}=m,{args:v=[],children:_,...b}=p;if(!Array.isArray(g))throw new Error("R3F: the args prop must be an array!");if(g.some((k,E)=>k!==v[E]))return[!0];const M=CD(f,w,b,!0);return M.changes.length?[!1,M]:null}},commitUpdate(f,[d,p],m,g,y,w){d?a(f,m,y,w):Jv(f,p)},commitMount(f,d,p,m){var g;const y=(g=f.__r3f)!=null?g:{};f.raycast&&y.handlers&&y.eventCount&&f.__r3f.root.getState().internal.interaction.push(f)},getPublicInstance:f=>f,prepareForCommit:()=>null,preparePortalMount:f=>Cu(f.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(f){var d;const{attach:p,parent:m}=(d=f.__r3f)!=null?d:{};p&&m&&Zk(m,f,p),f.isObject3D&&(f.visible=!1),Au(f)},unhideInstance(f,d){var p;const{attach:m,parent:g}=(p=f.__r3f)!=null?p:{};m&&g&&Zv(g,f,m),(f.isObject3D&&d.visible==null||d.visible)&&(f.visible=!0),Au(f)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():tc.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Sn.fun(performance.now)?performance.now:Sn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Sn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Sn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Jv}}const PD=t=>!!(t!=null&&t.render),LD=H.createContext(null),Lq=(t,e)=>{const n=dq((a,l)=>{const u=new B,f=new B,d=new B;function p(v=l().camera,_=f,b=l().size){const{width:M,height:k,top:E,left:I}=b,C=M/k;_ instanceof B?d.copy(_):d.set(..._);const L=v.getWorldPosition(u).distanceTo(d);if(SD(v))return{width:M/v.zoom,height:k/v.zoom,top:E,left:I,factor:1,distance:L,aspect:C};{const R=v.fov*Math.PI/180,O=2*Math.tan(R/2)*L,q=O*(M/k);return{width:q,height:O,top:E,left:I,factor:M/q,distance:L,aspect:C}}}let m;const g=v=>a(_=>({performance:{..._.performance,current:v}})),y=new ve;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,invalidate:(v=1)=>t(l(),v),advance:(v,_)=>e(v,_,l()),legacy:!1,linear:!1,flat:!1,scene:Cu(new iy),controls:null,clock:new Nb,pointer:y,mouse:y,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const v=l();m&&clearTimeout(m),v.performance.current!==v.performance.min&&g(v.performance.min),m=setTimeout(()=>g(l().performance.max),v.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:v=>a(_=>({..._,events:{..._.events,...v}})),setSize:(v,_,b,M,k)=>{const E=l().camera,I={width:v,height:_,top:M||0,left:k||0,updateStyle:b};a(C=>({size:I,viewport:{...C.viewport,...p(E,f,I)}}))},setDpr:v=>a(_=>{const b=kD(v);return{viewport:{..._.viewport,dpr:b,initialDpr:_.viewport.initialDpr||b}}}),setFrameloop:(v="always")=>{const _=l().clock;_.stop(),_.elapsedTime=0,v!=="never"&&(_.start(),_.elapsedTime=0),a(()=>({frameloop:v}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:H.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(v,_,b)=>{const M=l().internal;return M.priority=M.priority+(_>0?1:0),M.subscribers.push({ref:v,priority:_,store:b}),M.subscribers=M.subscribers.sort((k,E)=>k.priority-E.priority),()=>{const k=l().internal;k!=null&&k.subscribers&&(k.priority=k.priority-(_>0?1:0),k.subscribers=k.subscribers.filter(E=>E.ref!==v))}}}}}),i=n.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return n.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:f,set:d}=n.getState();(l!==r||u.dpr!==s)&&(r=l,s=u.dpr,Mq(a,l),f.setPixelRatio(u.dpr),f.setSize(l.width,l.height,l.updateStyle)),a!==o&&(o=a,d(p=>({viewport:{...p.viewport,...p.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};let Nm,Rq=new Set,Iq=new Set,Dq=new Set;function Qv(t,e){t.size&&t.forEach(({callback:n})=>n(e))}function Rf(t,e){switch(t){case"before":return Qv(Rq,e);case"after":return Qv(Iq,e);case"tail":return Qv(Dq,e)}}let e1,t1;function n1(t,e,n){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(i=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),e1=e.internal.subscribers,Nm=0;Nm<e1.length;Nm++)t1=e1[Nm],t1.ref.current(t1.store.getState(),i,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function zq(t){let e=!1,n,i,r;function s(l){if(i=requestAnimationFrame(s),e=!0,n=0,Rf("before",l),t.forEach(u=>{var f;r=u.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((f=r.gl.xr)!=null&&f.isPresenting)&&(n+=n1(l,r))}),Rf("after",l),n===0)return Rf("tail",l),e=!1,cancelAnimationFrame(i)}function o(l,u=1){var f;if(!l)return t.forEach(d=>o(d.store.getState()),u);(f=l.gl.xr)!=null&&f.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+u),e||(e=!0,requestAnimationFrame(s)))}function a(l,u=!0,f,d){u&&Rf("before",l),f?n1(l,f,d):t.forEach(p=>n1(l,p.store.getState())),u&&Rf("after",l)}return{loop:s,invalidate:o,advance:a}}function RD(){const t=H.useContext(LD);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function Fq(t=n=>n,e){return RD()(t,e)}function Nq(t,e=0){const n=RD(),i=n.getState().internal.subscribe,r=bD(t);return Th(()=>i(r,e,n),[e,i,n]),null}const Ac=new Map,{invalidate:Jk,advance:Kk}=zq(Ac),{reconciler:d0,applyProps:Om}=Pq(Ac,Eq),Eu={objects:"shallow",strict:!1},Oq=(t,e)=>{const n=typeof t=="function"?t(e):t;return PD(n)?n:new xb({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function Bq(t){return t instanceof HTMLCanvasElement}function Uq(t,e){if(e)return e;if(Bq(t)&&t.parentElement){const{width:n,height:i,top:r,left:s}=t.parentElement.getBoundingClientRect();return{width:n,height:i,top:r,left:s}}return{width:0,height:0,top:0,left:0}}function Vq(t){const e=Ac.get(t),n=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||Lq(Jk,Kk),o=n||d0.createContainer(s,tc.ConcurrentRoot,null,!1,null,"",r,null);e||Ac.set(t,{fiber:o,store:s});let a,l=!1;return{configure(u={}){let{gl:f,size:d,events:p,onCreated:m,shadows:g=!1,linear:y=!1,flat:w=!1,legacy:v=!1,orthographic:_=!1,frameloop:b="always",dpr:M=[1,2],performance:k,raycaster:E,camera:I,onPointerMissed:C}=u,L=s.getState(),R=L.gl;L.gl||L.set({gl:R=Oq(f,t)});let O=L.raycaster;O||L.set({raycaster:O=new gD});const{params:q,...j}=E||{};if(Sn.equ(j,O,Eu)||Om(O,{...j}),Sn.equ(q,O.params,Eu)||Om(O,{params:{...O.params,...q}}),!L.camera){const re=I instanceof uh,D=re?I:_?new fh(0,0,0,0,.1,1e3):new Yn(75,0,.1,1e3);re||(D.position.z=5,I&&Om(D,I),I!=null&&I.rotation||D.lookAt(0,0,0)),L.set({camera:D})}if(!L.xr){const re=(A,X)=>{const Y=s.getState();Y.frameloop!=="never"&&Kk(A,!0,Y,X)},D=()=>{const A=s.getState();A.gl.xr.enabled=A.gl.xr.isPresenting,A.gl.xr.setAnimationLoop(A.gl.xr.isPresenting?re:null),A.gl.xr.isPresenting||Jk(A)},F={connect(){const A=s.getState().gl;A.xr.addEventListener("sessionstart",D),A.xr.addEventListener("sessionend",D)},disconnect(){const A=s.getState().gl;A.xr.removeEventListener("sessionstart",D),A.xr.removeEventListener("sessionend",D)}};R.xr&&F.connect(),L.set({xr:F})}if(R.shadowMap){const re=Sn.boo(g);if(re&&R.shadowMap.enabled!==g||!Sn.equ(g,R.shadowMap,Eu)){const D=R.shadowMap.enabled;R.shadowMap.enabled=!!g,re?R.shadowMap.type=sb:Object.assign(R.shadowMap,g),D!==R.shadowMap.enabled&&(R.shadowMap.needsUpdate=!0)}}"ColorManagement"in f0&&Tq(f0,v,["ColorManagement","legacyMode"]);const G=y?fo:tn,W=w?os:Y0;R.outputEncoding!==G&&(R.outputEncoding=G),R.toneMapping!==W&&(R.toneMapping=W),L.legacy!==v&&L.set(()=>({legacy:v})),L.linear!==y&&L.set(()=>({linear:y})),L.flat!==w&&L.set(()=>({flat:w})),f&&!Sn.fun(f)&&!PD(f)&&!Sn.equ(f,R,Eu)&&Om(R,f),p&&!L.events.handlers&&L.set({events:p(s)}),M&&L.viewport.dpr!==kD(M)&&L.setDpr(M);const J=Uq(t,d);return Sn.equ(J,L.size,Eu)||L.setSize(J.width,J.height,J.updateStyle,J.top,J.left),L.frameloop!==b&&L.setFrameloop(b),L.onPointerMissed||L.set({onPointerMissed:C}),k&&!Sn.equ(k,L.performance,Eu)&&L.set(re=>({performance:{...re.performance,...k}})),a=m,l=!0,this},render(u){return l||this.configure(),d0.updateContainer(H.createElement(Hq,{store:s,children:u,onCreated:a,rootElement:t}),o,null,()=>{}),s},unmount(){ID(t)}}}function Hq({store:t,children:e,onCreated:n,rootElement:i}){return Th(()=>{const r=t.getState();r.set(s=>({internal:{...s.internal,active:!0}})),n&&n(r),t.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),H.createElement(LD.Provider,{value:t},e)}function ID(t,e){const n=Ac.get(t),i=n==null?void 0:n.fiber;if(i){const r=n==null?void 0:n.store.getState();r&&(r.internal.active=!1),d0.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),bq(r),Ac.delete(t),e&&e(t)}catch{}},500)})}}d0.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:H.version});function w_(){return w_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},w_.apply(null,arguments)}function Qk(t,e){let n;return(...i)=>{window.clearTimeout(n),n=window.setTimeout(()=>t(...i),e)}}function Wq({debounce:t,scroll:e,polyfill:n,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=H.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=H.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=t?typeof t=="number"?t:t.scroll:null,u=t?typeof t=="number"?t:t.resize:null,f=H.useRef(!1);H.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[d,p,m]=H.useMemo(()=>{const v=()=>{if(!a.current.element)return;const{left:_,top:b,width:M,height:k,bottom:E,right:I,x:C,y:L}=a.current.element.getBoundingClientRect(),R={left:_,top:b,width:M,height:k,bottom:E,right:I,x:C,y:L};a.current.element instanceof HTMLElement&&i&&(R.height=a.current.element.offsetHeight,R.width=a.current.element.offsetWidth),Object.freeze(R),f.current&&!Xq(a.current.lastBounds,R)&&o(a.current.lastBounds=R)};return[v,u?Qk(v,u):v,l?Qk(v,l):v]},[o,i,l,u]);function g(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(v=>v.removeEventListener("scroll",m,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function y(){a.current.element&&(a.current.resizeObserver=new r(m),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(v=>v.addEventListener("scroll",m,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{m()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const w=v=>{!v||v===a.current.element||(g(),a.current.element=v,a.current.scrollContainers=DD(v),y())};return $q(m,!!e),Gq(p),H.useEffect(()=>{g(),y()},[e,m,p]),H.useEffect(()=>g,[]),[w,s,d]}function Gq(t){H.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function $q(t,e){H.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function DD(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:i,overflowY:r}=window.getComputedStyle(t);return[n,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...DD(t.parentElement)]}const jq=["x","y","top","bottom","left","right","width","height"],Xq=(t,e)=>jq.every(n=>t[n]===e[n]),i1={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function qq(t){const{handlePointer:e}=Cq(t);return{priority:1,enabled:!0,compute(n,i,r){i.pointer.set(n.offsetX/i.size.width*2-1,-(n.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(i1).reduce((n,i)=>({...n,[i]:e(i)}),{}),connect:n=>{var i;const{set:r,events:s}=t.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:n}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,u]=i1[o];n.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:n,events:i}=t.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=i1[s];i.connected.removeEventListener(a,o)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}const Yq=H.forwardRef(function({children:e,fallback:n,resize:i,style:r,gl:s,events:o=qq,eventSource:a,eventPrefix:l,shadows:u,linear:f,flat:d,legacy:p,orthographic:m,frameloop:g,dpr:y,performance:w,raycaster:v,camera:_,onPointerMissed:b,onCreated:M,...k},E){H.useMemo(()=>Aq(f0),[]);const[I,C]=H.useState(null),L=vq(I),[R,O]=Wq({scroll:!0,debounce:{scroll:50,resize:0},...i}),q=H.useRef(null),j=H.useRef(null),[G,W]=H.useState(null);H.useImperativeHandle(E,()=>q.current);const J=bD(b),[re,D]=H.useState(!1),[F,A]=H.useState(!1);if(re)throw re;if(F)throw F;const X=H.useRef(null);O.width>0&&O.height>0&&G&&(X.current||(X.current=Vq(G)),X.current.configure({gl:s,events:o,shadows:u,linear:f,flat:d,legacy:p,orthographic:m,frameloop:g,dpr:y,performance:w,raycaster:v,camera:_,size:O,onPointerMissed:(...z)=>J.current==null?void 0:J.current(...z),onCreated:z=>{z.events.connect==null||z.events.connect(a?xq(a)?a.current:a:j.current),l&&z.setEvents({compute:(xe,Ce)=>{const ie=xe[l+"X"],Ne=xe[l+"Y"];Ce.pointer.set(ie/Ce.size.width*2-1,-(Ne/Ce.size.height)*2+1),Ce.raycaster.setFromCamera(Ce.pointer,Ce.camera)}}),M==null||M(z)}}),X.current.render(H.createElement(L,null,H.createElement(TD,{set:A},H.createElement(H.Suspense,{fallback:H.createElement(_q,{set:D})},e))))),Th(()=>{W(q.current)},[]),H.useEffect(()=>{if(G)return()=>ID(G)},[G]);const Y=a?"none":"auto";return H.createElement(wq,{setFiber:C},H.createElement("div",w_({ref:j,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Y,...r}},k),H.createElement("div",{ref:R,style:{width:"100%",height:"100%"}},H.createElement("canvas",{ref:q,style:{display:"block"}},n))))}),Zq=Date.now(),zD=En.memo(()=>{const{scene:t,gl:e}=Fq();return H.useMemo(()=>{const n=new c0(e);console.log("Using procedural environment for now");const i=n.fromScene(Jq());return t.environment=i.texture,()=>{n.dispose()}},[t,e]),null}),Jq=()=>{const t=new iy,e=new Hl(100,32,32),n=new us({side:ji,uniforms:{topColor:{value:new Ue(8900331)},bottomColor:{value:new Ue(16770229)},offset:{value:30},exponent:{value:.6}},vertexShader:`
      varying vec3 vWorldPosition;
      void main() {
        vec4 worldPosition = modelMatrix * vec4(position, 1.0);
        vWorldPosition = worldPosition.xyz;
        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
      }
    `,fragmentShader:`
      uniform vec3 topColor;
      uniform vec3 bottomColor;
      uniform float offset;
      uniform float exponent;
      varying vec3 vWorldPosition;
      void main() {
        float h = normalize(vWorldPosition + offset).y;
        gl_FragColor = vec4(mix(bottomColor, topColor, max(pow(max(h, 0.0), exponent), 0.0)), 1.0);
      }
    `}),i=new Zn(e,n);t.add(i);const r=new zb(16777215,5);return r.position.set(50,100,50),t.add(r),t};zD.displayName="HDRIEnvironmentMap";const fy=t=>{const e=document.createElement("canvas");e.width=2048,e.height=2048;const n=e.getContext("2d");if(t==="brushed-metal"){const r=n.createLinearGradient(0,0,2048,2048);r.addColorStop(0,"#B8B8B8"),r.addColorStop(.5,"#DDDDDD"),r.addColorStop(1,"#A0A0A0"),n.fillStyle=r,n.fillRect(0,0,2048,2048);for(let s=0;s<1200;s++){const o=s/1200*2048+(Math.random()-.5)*8;n.beginPath(),n.strokeStyle=`rgba(${Math.random()*60}, ${Math.random()*60}, ${Math.random()*60}, ${.1+Math.random()*.4})`,n.lineWidth=.3+Math.random()*2,n.moveTo(0,o),n.lineTo(2048,o+(Math.random()-.5)*12),n.stroke()}for(let s=0;s<400;s++){n.beginPath(),n.strokeStyle=`rgba(${20+Math.random()*40}, ${20+Math.random()*40}, ${20+Math.random()*40}, ${.3+Math.random()*.5})`,n.lineWidth=.2+Math.random()*.8;const o=Math.random()*2048;n.moveTo(Math.random()*200,o),n.lineTo(1848+Math.random()*200,o+(Math.random()-.5)*20),n.stroke()}}else if(t==="chrome"){n.fillStyle="#F0F0F0",n.fillRect(0,0,2048,2048);for(let r=0;r<50;r++){const s=Math.random()*2048,o=Math.random()*2048;n.beginPath(),n.arc(s,o,30+Math.random()*50,0,Math.PI*2),n.fillStyle=`rgba(${Math.random()*30}, ${Math.random()*30}, ${Math.random()*30}, 0.08)`,n.fill()}for(let r=0;r<800;r++){n.beginPath(),n.strokeStyle=`rgba(${Math.random()*40}, ${Math.random()*40}, ${Math.random()*40}, ${.05+Math.random()*.15})`,n.lineWidth=.1+Math.random()*.5;const s=Math.random()*Math.PI*2,o=10+Math.random()*40,a=Math.random()*2048,l=Math.random()*2048;n.moveTo(a,l),n.lineTo(a+Math.cos(s)*o,l+Math.sin(s)*o),n.stroke()}}else if(t==="anodized"){const r=n.createRadialGradient(1024,1024,0,1024,1024,1024);r.addColorStop(0,"#C8C8C8"),r.addColorStop(.7,"#B0B0B0"),r.addColorStop(1,"#909090"),n.fillStyle=r,n.fillRect(0,0,2048,2048);for(let s=0;s<2e3;s++){const o=Math.random()*2048,a=Math.random()*2048,l=1+Math.random()*4;n.beginPath(),n.arc(o,a,l,0,Math.PI*2),n.fillStyle=`rgba(${40+Math.random()*80}, ${40+Math.random()*80}, ${40+Math.random()*80}, ${.2+Math.random()*.4})`,n.fill()}for(let s=0;s<600;s++){n.beginPath(),n.strokeStyle=`rgba(${Math.random()*50}, ${Math.random()*50}, ${Math.random()*50}, ${.1+Math.random()*.3})`,n.lineWidth=.5+Math.random()*1.5;const o=Math.random()*2048;n.moveTo(0,o),n.lineTo(2048,o+(Math.random()-.5)*30),n.stroke()}}else if(t==="glass"){n.fillStyle="#F8F8F8",n.fillRect(0,0,2048,2048);for(let r=0;r<150;r++){const s=Math.random()*2048,o=Math.random()*2048,a=8+Math.random()*25;n.beginPath(),n.arc(s,o,a,0,Math.PI*2),n.fillStyle=`rgba(${200+Math.random()*55}, ${200+Math.random()*55}, ${200+Math.random()*55}, 0.15)`,n.fill(),n.beginPath(),n.arc(s,o,a*.7,0,Math.PI*2),n.strokeStyle=`rgba(${180+Math.random()*40}, ${180+Math.random()*40}, ${180+Math.random()*40}, 0.25)`,n.lineWidth=.5,n.stroke()}for(let r=0;r<200;r++){n.beginPath(),n.strokeStyle=`rgba(${220+Math.random()*35}, ${220+Math.random()*35}, ${220+Math.random()*35}, ${.08+Math.random()*.12})`,n.lineWidth=2+Math.random()*6;const s=Math.random()*2048,o=s+(Math.random()-.5)*200;n.moveTo(Math.random()*400,s),n.lineTo(1648+Math.random()*400,o),n.stroke()}}const i=new z4(e);return i.wrapS=Al,i.wrapT=Al,i.repeat.set(4,4),i.colorSpace=Rr,i},Kq=fy("chrome"),Qq=fy("glass"),eY=fy("brushed-metal"),tY=fy("anodized"),FD=En.memo(()=>{const t=H.useRef(null),[e,n]=H.useState(0),[i,r]=H.useState(!1),s=H.useRef(Date.now()),o=H.useRef({x:.05+Math.random()*.06,y:.2+Math.random()*.5,z:0+Math.random()*0});H.useEffect(()=>{const p=setInterval(()=>{r(!0),s.current=Date.now(),setTimeout(()=>{n(m=>m+1),r(!1),o.current={x:.1+Math.random()*.3,y:.15+Math.random()*.4,z:.08+Math.random()*.2}},2e3)},8e3);return()=>clearInterval(p)},[]);const a=H.useRef(()=>{const p=[["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7"],["#2C3E50","#E74C3C","#ECF0F1","#3498DB","#9B59B6"],["#FFD93D","#6BCF7F","#4D96FF","#9013FE","#FF6EC7"],["#FF9F43","#10AC84","#5F27CD","#00D2D3","#FF3838"],["#FF0080","#00FFFF","#FF8000","#8000FF","#00FF40"],["#FF3030","#30FF30","#3030FF","#FFFF30","#FF30FF"]],m=p[Math.floor(Math.random()*p.length)],g=m[Math.floor(Math.random()*m.length)],y=[Kq,Qq,eY,tY],w=y[Math.floor(Math.random()*y.length)],v=[{roughness:.1+Math.random()*.4,metalness:.7+Math.random()*.3,envMapIntensity:.8+Math.random()*.6,clearcoat:.3+Math.random()*.6,clearcoatRoughness:.05+Math.random()*.2,transmission:.4,opacity:1},{roughness:.2+Math.random()*.3,metalness:.1+Math.random()*.4,envMapIntensity:.9+Math.random()*.5,clearcoat:.6+Math.random()*.4,clearcoatRoughness:.1+Math.random()*.15,transmission:.2+Math.random()*.4,thickness:.5+Math.random()*1,ior:1.4+Math.random()*.4,opacity:.9+Math.random()*.2},{roughness:.05+Math.random()*.2,metalness:0+Math.random()*.2,envMapIntensity:1+Math.random()*.5,clearcoat:.8+Math.random()*.2,clearcoatRoughness:.05+Math.random()*.1,transmission:.4+Math.random()*.5,thickness:.3+Math.random()*.7,ior:1.5+Math.random()*.3,opacity:.9+Math.random()*.1}],_=v[Math.floor(Math.random()*v.length)];return{color:g,normalMap:w,normalScale:1+Math.random()*1.5,..._}}),[l,u]=H.useState(()=>a.current()),[f,d]=H.useState(()=>a.current());return H.useEffect(()=>{u(f),d(a.current())},[e]),Nq(()=>{const p=Date.now(),m=(p-Zq)/1e3;let g=0;if(i){const y=(p-s.current)/1e3,w=Math.min(y/2,1);g=w<.5?2*w*w:1-Math.pow(-2*w+2,2)/2}if(t.current){t.current.rotation.x+=o.current.x*.16,t.current.rotation.y+=o.current.y*.016,t.current.rotation.z+=o.current.z*.016;const y=1+Math.sin(m*.3)*.04;t.current.scale.setScalar(y);const w=t.current.material;if(w)if(i){const v=(I,C,L)=>I+(C-I)*L,_=new Ue(l.color),b=new Ue(f.color);w.color.lerpColors(_,b,g),w.roughness=v(l.roughness,f.roughness,g),w.metalness=v(l.metalness,f.metalness,g),w.clearcoat=v(l.clearcoat,f.clearcoat,g),w.clearcoatRoughness=v(l.clearcoatRoughness,f.clearcoatRoughness,g),w.envMapIntensity=v(l.envMapIntensity,f.envMapIntensity,g);const M=l.normalScale,k=f.normalScale,E=v(M,k,g);w.normalScale.set(E,E),w.transmission=v(l.transmission||0,f.transmission||0,g),w.thickness=v(l.thickness||0,f.thickness||0,g),w.ior=v(l.ior||1.5,f.ior||1.5,g),w.opacity=v(l.opacity||1,f.opacity||1,g),w.transparent=w.transmission>0||w.opacity<1}else{w.color.setHex(parseInt(l.color.replace("#",""),16)),w.roughness=l.roughness,w.metalness=l.metalness,w.clearcoat=l.clearcoat,w.clearcoatRoughness=l.clearcoatRoughness;const v=Math.sin(m*.25)*.12;w.envMapIntensity=l.envMapIntensity+v,w.normalScale.set(l.normalScale,l.normalScale),w.normalMap=l.normalMap,w.transmission=l.transmission||0,w.thickness=l.thickness||.5,w.ior=l.ior||1.5,w.opacity=l.opacity||1,w.transparent=w.transmission>0||w.opacity<1}}}),ee.jsxs("mesh",{ref:t,castShadow:!0,receiveShadow:!0,children:[ee.jsx("torusGeometry",{args:[.5,.22,128,256]}),ee.jsx("meshPhysicalMaterial",{reflectivity:1})]})});FD.displayName="AnimatedShape";const ND=En.memo(({size:t=24,className:e})=>ee.jsx("div",{className:e,style:{width:t,height:t,cursor:"pointer"},children:ee.jsxs(Yq,{camera:{position:[0,0,2.5],fov:45},style:{width:"100%",height:"100%"},dpr:window.devicePixelRatio,gl:{antialias:!0,alpha:!0,toneMapping:Y0,toneMappingExposure:1.2,outputColorSpace:Rr},shadows:!0,children:[ee.jsx(zD,{}),ee.jsx("ambientLight",{intensity:.3,color:"#f0f0f0"}),ee.jsx("directionalLight",{position:[4,6,4],intensity:.8,color:"#ffffff",castShadow:!0,"shadow-mapSize-width":512,"shadow-mapSize-height":512,"shadow-camera-near":.1,"shadow-camera-far":10,"shadow-camera-left":-2,"shadow-camera-right":2,"shadow-camera-top":2,"shadow-camera-bottom":-2,"shadow-bias":-1e-4}),ee.jsx("directionalLight",{position:[-3,2,-2],intensity:.3,color:"#e8f4fd"}),ee.jsx("group",{rotation:[0,Math.PI/2,0],children:ee.jsx(FD,{})})]})}));ND.displayName="TemporalLogo3D";const OD=B0`
  0%, 100% { opacity: 0.5; }
  50% { opacity: 1; }
`,Kr={instant:0,fast:150,normal:250,slow:350,slower:500},Pu={gentle:{stiffness:300,damping:25},bouncy:{stiffness:500,damping:30},snappy:{stiffness:700,damping:35}},Lu={easeOut:[0,0,.2,1],easeIn:[.4,0,1,1],easeInOut:[.4,0,.2,1],spring:[.25,.46,.45,.94]},nY={messageEntrance:{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",...Pu.bouncy}},windowOpen:{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:Kr.normal/1e3,ease:Lu.easeOut}},fadeIn:{initial:{opacity:0},animate:{opacity:1},transition:{duration:Kr.fast/1e3}},menuItemEntrance:{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:Kr.fast/1e3,ease:Lu.easeOut}},slideUp:{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{type:"spring",...Pu.gentle}},statusMessage:{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:Kr.fast/1e3}},scaleIn:{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:Kr.fast/1e3,ease:Lu.easeOut}},staggered:{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:Kr.normal/1e3,ease:Lu.easeOut}},dropdownEntrance:{initial:{opacity:0,y:-2,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-2,scale:.95},transition:{duration:Kr.fast/1e3,ease:Lu.easeOut}},dropdownItem:{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{type:"spring",...Pu.bouncy,duration:Kr.fast/1e3}},submenuSlide:{initial:{opacity:0,x:-2},animate:{opacity:1,x:0},exit:{opacity:0,x:-2},transition:{type:"spring",...Pu.gentle,duration:Kr.fast/1e3}},itemHover:{whileHover:{scale:1,transition:{type:"spring",...Pu.snappy}},whileTap:{scale:1,transition:{duration:Kr.instant/1e3}}}},jn={duration:Kr,spring:Pu,easing:Lu,presets:nY},ne={white:"#ffffff",black:"#000000",gray:{50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717",950:"#0a0a0a"},blue:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a",950:"#172554"},red:{50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d",950:"#450a0a"},green:{50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d",950:"#052e16"},yellow:{50:"#fefce8",100:"#fef9c3",200:"#fef08a",300:"#fde047",400:"#facc15",500:"#eab308",600:"#ca8a04",700:"#a16207",800:"#854d0e",900:"#713f12",950:"#422006"}},iY={background:{primary:ne.white,secondary:ne.gray[50],tertiary:ne.gray[100],accent:ne.blue[50],elevated:ne.white,disabled:ne.gray[100]},text:{primary:ne.gray[900],secondary:ne.gray[600],tertiary:ne.gray[400],inverse:ne.white,accent:ne.blue[600],disabled:ne.gray[400]},border:{default:ne.gray[200],muted:ne.gray[100],emphasis:ne.gray[300],accent:ne.blue[200]},interactive:{button:{primary:{background:ne.blue[600],backgroundHover:ne.blue[700],backgroundActive:ne.blue[800],backgroundDisabled:ne.gray[200],text:ne.white,textDisabled:ne.gray[400],border:ne.blue[600],borderHover:ne.blue[700]},secondary:{background:ne.gray[100],backgroundHover:ne.gray[200],backgroundActive:ne.gray[300],backgroundDisabled:ne.gray[50],text:ne.gray[900],textDisabled:ne.gray[400],border:ne.gray[300],borderHover:ne.gray[400]},ghost:{background:"transparent",backgroundHover:ne.gray[100],backgroundActive:ne.gray[200],backgroundDisabled:"transparent",text:ne.gray[700],textDisabled:ne.gray[400],border:"transparent",borderHover:"transparent"},danger:{background:ne.red[600],backgroundHover:ne.red[700],backgroundActive:ne.red[800],backgroundDisabled:ne.gray[200],text:ne.white,textDisabled:ne.gray[400],border:ne.red[600],borderHover:ne.red[700]}},trafficLight:{close:{background:"rgba(0, 0, 0, 0.12)",backgroundHover:"#ff5f57",backgroundActive:"#ff4136"},minimize:{background:"rgba(0, 0, 0, 0.12)",backgroundHover:"#ffbd2e",backgroundActive:"#ffaa00"},maximize:{background:"rgba(0, 0, 0, 0.12)",backgroundHover:"#28ca42",backgroundActive:"#20a532"}},header:{background:"transparent",backgroundHover:"rgba(255, 255, 255, 0.1)",backgroundActive:"rgba(255, 255, 255, 0.15)",backgroundOpen:"rgba(255, 255, 255, 0.15)",text:ne.white,textMuted:ne.gray[300]},link:{default:ne.blue[600],hover:ne.blue[700],visited:ne.blue[800]},focus:{ring:ne.blue[500],background:ne.blue[50]}},status:{error:{background:ne.red[50],backgroundMuted:ne.red[50],text:ne.red[700],border:ne.red[300],borderEmphasis:ne.red[400],accent:ne.red[500]},warning:{background:ne.yellow[50],backgroundMuted:ne.yellow[50],text:ne.yellow[800],border:ne.yellow[300],borderEmphasis:ne.yellow[400],accent:ne.yellow[500]},success:{background:ne.green[50],backgroundMuted:ne.green[50],text:ne.green[700],border:ne.green[300],borderEmphasis:ne.green[400],accent:ne.green[500]},info:{background:ne.blue[50],backgroundMuted:ne.blue[50],text:ne.blue[700],border:ne.blue[300],borderEmphasis:ne.blue[400],accent:ne.blue[500]}},chat:{bubble:{user:{background:"linear-gradient(135deg, #007AFF 0%, #0051D5 100%)",text:ne.white},assistant:{background:"rgba(0, 0, 0, 0.06)",text:ne.gray[800],border:"rgba(0, 0, 0, 0.08)"},system:{background:"rgba(107, 114, 128, 0.1)",text:ne.gray[600]}},markdown:{strong:ne.gray[900],emphasis:ne.gray[700],heading:ne.gray[900],link:ne.blue[700],linkHover:ne.blue[800],code:ne.red[600],codeBackground:"rgba(0, 0, 0, 0.08)",codeBlockBackground:"rgba(0, 0, 0, 0.05)",codeBlockBorder:"rgba(0, 0, 0, 0.1)",blockquoteBorder:"rgba(0, 0, 0, 0.2)",tableBorder:"rgba(0, 0, 0, 0.1)",tableCellBorder:"rgba(0, 0, 0, 0.08)",tableHeaderBackground:"rgba(0, 0, 0, 0.1)",tableHeaderText:ne.gray[900],tableRowOdd:"rgba(255, 255, 255, 0.45)",tableRowEven:"rgba(0, 0, 0, 0.02)"},header:{userText:"rgba(190, 202, 255, 0.9)",assistantText:ne.gray[500]},status:{text:ne.gray[500],indicator:ne.blue[500]},reply:{userBackground:"rgba(255, 255, 255, 0.25)",userBorder:"rgba(255, 255, 255, 0.7)",userSender:"rgba(255, 255, 255, 0.95)",userText:"rgba(255, 255, 255, 0.85)",assistantBackground:"rgba(0, 0, 0, 0.05)",assistantBorder:"rgba(59, 130, 246, 0.6)",assistantSender:"rgba(59, 130, 246, 0.9)",assistantText:"rgba(0, 0, 0, 0.7)"},messageActions:{assistantBackground:"rgba(0, 0, 0, 0.1)",assistantBackgroundHover:"rgba(0, 0, 0, 0.15)",assistantText:ne.gray[700],userBackground:"rgba(255, 255, 255, 0.2)",userBackgroundHover:"rgba(255, 255, 255, 0.3)",userText:"rgba(255, 255, 255, 0.9)"},code:{background:"rgba(0, 0, 0, 0.08)",text:"#d63384",block:{background:"rgba(0, 0, 0, 0.05)",border:"rgba(0, 0, 0, 0.1)"}}}},rY={background:{primary:ne.gray[900],secondary:ne.gray[800],tertiary:ne.gray[700],accent:ne.blue[950],elevated:ne.gray[800],disabled:ne.gray[800]},text:{primary:ne.gray[100],secondary:ne.gray[400],tertiary:ne.gray[500],inverse:ne.gray[900],accent:ne.blue[400],disabled:ne.gray[600]},border:{default:ne.gray[700],muted:ne.gray[800],emphasis:ne.gray[600],accent:ne.blue[800]},interactive:{button:{primary:{background:ne.blue[600],backgroundHover:ne.blue[500],backgroundActive:ne.blue[700],backgroundDisabled:ne.gray[700],text:ne.white,textDisabled:ne.gray[500],border:ne.blue[600],borderHover:ne.blue[500]},secondary:{background:ne.gray[700],backgroundHover:ne.gray[600],backgroundActive:ne.gray[500],backgroundDisabled:ne.gray[800],text:ne.gray[100],textDisabled:ne.gray[600],border:ne.gray[600],borderHover:ne.gray[500]},ghost:{background:"transparent",backgroundHover:ne.gray[800],backgroundActive:ne.gray[700],backgroundDisabled:"transparent",text:ne.gray[300],textDisabled:ne.gray[600],border:"transparent",borderHover:"transparent"},danger:{background:ne.red[600],backgroundHover:ne.red[500],backgroundActive:ne.red[700],backgroundDisabled:ne.gray[700],text:ne.white,textDisabled:ne.gray[500],border:ne.red[600],borderHover:ne.red[500]}},trafficLight:{close:{background:"rgba(255, 255, 255, 0.15)",backgroundHover:"#ff5f57",backgroundActive:"#ff4136"},minimize:{background:"rgba(255, 255, 255, 0.15)",backgroundHover:"#ffbd2e",backgroundActive:"#ffaa00"},maximize:{background:"rgba(255, 255, 255, 0.15)",backgroundHover:"#28ca42",backgroundActive:"#20a532"}},header:{background:"transparent",backgroundHover:"rgba(255, 255, 255, 0.1)",backgroundActive:"rgba(255, 255, 255, 0.15)",backgroundOpen:"rgba(255, 255, 255, 0.15)",text:ne.white,textMuted:ne.gray[400]},link:{default:ne.blue[400],hover:ne.blue[300],visited:ne.blue[500]},focus:{ring:ne.blue[500],background:ne.blue[950]}},status:{error:{background:ne.red[950],backgroundMuted:ne.red[900],text:ne.red[400],border:ne.red[800],borderEmphasis:ne.red[700],accent:ne.red[500]},warning:{background:ne.yellow[950],text:ne.yellow[400],border:ne.yellow[800],accent:ne.yellow[500]},success:{background:ne.green[950],text:ne.green[400],border:ne.green[800],accent:ne.green[500]},info:{background:ne.blue[950],text:ne.blue[400],border:ne.blue[800],accent:ne.blue[500]}},chat:{bubble:{user:{background:"linear-gradient(135deg, #007AFF 0%, #0051D5 100%)",text:ne.white},assistant:{background:"rgba(255, 255, 255, 0.08)",text:ne.gray[200],border:"rgba(255, 255, 255, 0.1)"},system:{background:"rgba(107, 114, 128, 0.1)",text:ne.gray[400]}},markdown:{strong:ne.white,emphasis:ne.gray[300],heading:ne.white,link:ne.blue[300],linkHover:ne.blue[200],code:ne.red[400],codeBackground:"rgba(255, 255, 255, 0.15)",codeBlockBackground:"rgba(255, 255, 255, 0.1)",codeBlockBorder:"rgba(255, 255, 255, 0.2)",blockquoteBorder:"rgba(255, 255, 255, 0.3)",tableBorder:"rgba(255, 255, 255, 0.2)",tableCellBorder:"rgba(255, 255, 255, 0.1)",tableHeaderBackground:"rgba(255, 255, 255, 0.1)",tableHeaderText:ne.white,tableRowOdd:"rgba(0, 0, 0, 0.2)",tableRowEven:"rgba(255, 255, 255, 0.03)"},header:{userText:"rgba(190, 202, 255, 0.9)",assistantText:ne.gray[400]},status:{text:ne.gray[400],indicator:ne.blue[400]},reply:{userBackground:"rgba(0, 0, 0, 0.15)",userBorder:"rgba(255, 255, 255, 0.4)",userSender:"rgba(255, 255, 255, 0.9)",userText:"rgba(255, 255, 255, 0.75)",assistantBackground:"rgba(255, 255, 255, 0.08)",assistantBorder:"rgba(147, 197, 253, 0.6)",assistantSender:"rgba(147, 197, 253, 0.9)",assistantText:"rgba(255, 255, 255, 0.8)"},messageActions:{assistantBackground:"rgba(255, 255, 255, 0.15)",assistantBackgroundHover:"rgba(255, 255, 255, 0.2)",assistantText:ne.gray[300],userBackground:"rgba(255, 255, 255, 0.2)",userBackgroundHover:"rgba(255, 255, 255, 0.3)",userText:"rgba(255, 255, 255, 0.9)"},code:{background:"rgba(255, 255, 255, 0.15)",text:"#ff6b6b",block:{background:"rgba(255, 255, 255, 0.1)",border:"rgba(255, 255, 255, 0.2)"}}}},eC={light:{background:"rgba(255, 255, 255, 0.95)",border:"rgba(255, 255, 255, 0.2)",headerBackground:"transparent",headerBorder:"transparent",titleColor:ne.gray[800],shadow:"0 20px 60px rgba(0, 0, 0, 0.2)"},dark:{background:"rgba(26, 26, 26, 0.98)",border:"rgba(60, 60, 60, 0.3)",headerBackground:"transparent",headerBorder:"rgba(60, 60, 60, 0.3)",titleColor:ne.gray[200],shadow:"0 20px 60px rgba(0, 0, 0, 0.2)"}},we={0:"0",1:"0.25rem",2:"0.5rem",3:"0.75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",11:"2.75rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},sY={component:{buttonPadding:{sm:`${we[2]} ${we[3]}`,md:`${we[3]} ${we[4]}`,lg:`${we[4]} ${we[6]}`},buttonMinHeight:{sm:we[8],md:we[10],lg:we[12]},inputPadding:`${we[3]} ${we[4]}`,cardPadding:we[6],modalPadding:we[8]},layout:{sectionGap:we[16],containerPadding:we[6],pageMargin:we[8]},window:{headerHeight:we[8],borderRadius:we[3],controlButtonSize:we[3],controlButtonGap:we[2],resizeHandleWidth:we[3],resizeCornerSize:we[4],headerPadding:we[3],titleSpacing:we[8]},header:{height:we[8],padding:we[1],buttonPadding:`0px ${we[2]}`,buttonGap:we[1],logoGap:we[1]},chat:{messageBubbleGap:we[4],messagePadding:`${we[2]} ${we[3]}`,messageContainerPadding:we[5],messageListGap:we[4],inputPadding:we[4],attachmentGap:we[2]},status:{messagePadding:`${we[2]} ${we[4]}`,notificationGap:we[2],badgePadding:`${we[1]} ${we[2]}`},interactive:{dropdownPadding:we[1],dropdownItemPadding:`${we[1]} ${we[2]}`,menuItemGap:we[2],iconGap:we[2]}},oY={stack:{xs:we[1],sm:we[2],md:we[4],lg:we[6],xl:we[8]},inline:{xs:we[1],sm:we[2],md:we[3],lg:we[4],xl:we[6]},inset:{xs:we[2],sm:we[3],md:we[4],lg:we[6],xl:we[8]}},__={sans:["Inter","-apple-system","BlinkMacSystemFont","system-ui","Segoe UI","Roboto","Helvetica Neue","Arial","sans-serif"],mono:["SF Mono","Monaco","Cascadia Code","Roboto Mono","Consolas","Liberation Mono","Menlo","Courier New","monospace"]},Qt={xs:"0.75rem",sm:"0.875rem",base:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"},Vt={thin:100,extralight:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},en={none:"1",tight:"1.25",snug:"1.375",normal:"1.5",relaxed:"1.625",loose:"2"},Ka={tighter:"-0.05em",tight:"-0.025em",normal:"0em",wide:"0.025em",wider:"0.05em",widest:"0.1em"},aY={heading:{h1:{fontSize:Qt["4xl"],fontWeight:Vt.bold,lineHeight:en.tight,letterSpacing:Ka.tight},h2:{fontSize:Qt["3xl"],fontWeight:Vt.bold,lineHeight:en.tight,letterSpacing:Ka.tight},h3:{fontSize:Qt["2xl"],fontWeight:Vt.semibold,lineHeight:en.snug,letterSpacing:Ka.tight},h4:{fontSize:Qt.xl,fontWeight:Vt.semibold,lineHeight:en.snug,letterSpacing:Ka.normal},h5:{fontSize:Qt.lg,fontWeight:Vt.medium,lineHeight:en.normal,letterSpacing:Ka.normal},h6:{fontSize:Qt.base,fontWeight:Vt.medium,lineHeight:en.normal,letterSpacing:Ka.normal}},body:{large:{fontSize:Qt.lg,fontWeight:Vt.normal,lineHeight:en.relaxed},base:{fontSize:Qt.base,fontWeight:Vt.normal,lineHeight:en.normal},small:{fontSize:Qt.sm,fontWeight:Vt.normal,lineHeight:en.normal}},label:{large:{fontSize:Qt.base,fontWeight:Vt.medium,lineHeight:en.normal},base:{fontSize:Qt.sm,fontWeight:Vt.medium,lineHeight:en.normal},small:{fontSize:Qt.xs,fontWeight:Vt.medium,lineHeight:en.normal}},caption:{base:{fontSize:Qt.xs,fontWeight:Vt.normal,lineHeight:en.normal},small:{fontSize:"0.625rem",fontWeight:Vt.normal,lineHeight:en.normal}},code:{inline:{fontSize:"0.9em",fontFamily:__.mono,fontWeight:Vt.normal},block:{fontSize:"0.85em",fontFamily:__.mono,fontWeight:Vt.normal,lineHeight:en.relaxed}},chat:{message:{fontSize:Qt.sm,lineHeight:en.normal,fontWeight:Vt.normal},messageHeader:{fontSize:Qt.xs,fontWeight:Vt.semibold},messageTime:{fontSize:"0.625rem",fontWeight:Vt.normal},statusIndicator:{fontSize:Qt.xs,fontWeight:Vt.normal}},button:{lg:{fontSize:Qt.base,fontWeight:Vt.medium,lineHeight:en.none},base:{fontSize:Qt.sm,fontWeight:Vt.medium,lineHeight:en.none},sm:{fontSize:Qt.xs,fontWeight:Vt.medium,lineHeight:en.none}},input:{fontSize:Qt.base,fontWeight:Vt.normal,lineHeight:en.normal,sm:{fontSize:Qt.sm,fontWeight:Vt.normal,lineHeight:en.normal},lg:{fontSize:Qt.lg,fontWeight:Vt.normal,lineHeight:en.normal}},placeholder:{fontSize:Qt.base,fontWeight:Vt.normal,lineHeight:en.normal},window:{title:{fontSize:Qt.sm,fontWeight:Vt.medium,lineHeight:en.none}}},He={none:"0",xs:"0.125rem",sm:"0.25rem",base:"0.375rem",md:"0.5rem",lg:"0.75rem",xl:"1rem","2xl":"1.25rem","3xl":"1.5rem",full:"9999px"},lY={button:{small:He.sm,base:He.base,large:He.md,pill:He.full},input:{base:He.base,large:He.md},card:{small:He.md,base:He.lg,large:He.xl},modal:{base:He.lg,large:He.xl},window:{base:He.lg,header:`${He.lg} ${He.lg} 0 0`,content:`0 0 ${He.lg} ${He.lg}`},chat:{bubble:{base:"20px",user:"20px 20px 6px 20px",assistant:"20px 20px 20px 6px",tail:"6px"},attachment:He.md,input:He.lg,code:He.sm,codeBlock:He.md,table:He.md},dropdown:{base:He.md,item:He.sm},menu:{base:He.md,item:He.sm},badge:{base:He.base,pill:He.full},notification:{base:He.md,large:He.lg},code:{inline:He.sm,block:He.md},image:{base:He.md,large:He.lg,avatar:He.full},table:{base:He.md,cell:He.none}},uY={top:{sm:`${He.sm} ${He.sm} 0 0`,base:`${He.base} ${He.base} 0 0`,md:`${He.md} ${He.md} 0 0`,lg:`${He.lg} ${He.lg} 0 0`},bottom:{sm:`0 0 ${He.sm} ${He.sm}`,base:`0 0 ${He.base} ${He.base}`,md:`0 0 ${He.md} ${He.md}`,lg:`0 0 ${He.lg} ${He.lg}`},left:{sm:`${He.sm} 0 0 ${He.sm}`,base:`${He.base} 0 0 ${He.base}`,md:`${He.md} 0 0 ${He.md}`,lg:`${He.lg} 0 0 ${He.lg}`},right:{sm:`0 ${He.sm} ${He.sm} 0`,base:`0 ${He.base} ${He.base} 0`,md:`0 ${He.md} ${He.md} 0`,lg:`0 ${He.lg} ${He.lg} 0`}},Bi={none:"none",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",inner:"inset 0 2px 4px 0 rgba(0, 0, 0, 0.06)"},nc={light:"0 20px 60px rgba(0, 0, 0, 0.2)",dark:"0 20px 60px rgba(0, 0, 0, 0.4)",floating:"0 8px 32px rgba(0, 0, 0, 0.12)",modal:"0 25px 50px rgba(0, 0, 0, 0.15)"},jo={ring:"0 0 0 2px",ringLarge:"0 0 0 3px",ringSubtle:"0 0 0 1px"},ic={hover:"0 4px 12px rgba(0, 0, 0, 0.15)",active:"0 2px 4px rgba(0, 0, 0, 0.1)",pressed:"inset 0 2px 0 rgba(0, 0, 0, 0.1)"},BD={window:{floating:nc.floating,modal:nc.modal,light:nc.light,dark:nc.dark},dropdown:{base:Bi.lg,floating:"0 8px 32px rgba(0, 0, 0, 0.12)"},card:{flat:Bi.none,raised:Bi.sm,floating:Bi.md,elevated:Bi.lg},button:{rest:Bi.none,hover:ic.hover,active:ic.active,pressed:ic.pressed},focus:{ring:jo.ring,ringLarge:jo.ringLarge,ringSubtle:jo.ringSubtle},chat:{message:Bi.sm,messageHover:ic.hover,attachment:Bi.base},tooltip:Bi.md,popover:Bi.lg,modal:Bi["2xl"],input:{rest:Bi.none,focus:jo.ring,error:jo.ring}},cY={levels:Bi,window:nc,focus:jo,interactive:ic,semantic:BD},fY=(t,e="ring")=>`${jo[e]} ${t}`,dY=(...t)=>t.filter(e=>e&&e!=="none").join(", "),Vb=new Map,S_=t=>{Vb.set(t.name,t)},hY=()=>({builtin:["light","dark","system"],custom:Array.from(Vb.keys())}),UD=H.createContext(void 0),pY=()=>{const t=H.useContext(UD);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},VD=(t,e)=>{const n={...t};for(const i in e)e[i]&&typeof e[i]=="object"&&!Array.isArray(e[i])?n[i]=VD(t[i]||{},e[i]):n[i]=e[i];return n},mY=()=>{const[t,e]=H.useState(()=>typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");return H.useEffect(()=>{if(typeof window>"u")return;const n=window.matchMedia("(prefers-color-scheme: dark)"),i=r=>{e(r.matches?"dark":"light")};return n.addEventListener("change",i),()=>n.removeEventListener("change",i)},[]),t},gY=(t,e)=>{if(t==="light"||t==="dark")return{mode:t,themeName:t,baseTheme:t};if(t==="system")return{mode:e,themeName:"system",baseTheme:e};const n=Vb.get(t);return n?{mode:"custom",themeName:n.name,baseTheme:n.baseTheme,customTheme:n}:(console.warn(`Unknown theme "${t}", falling back to light theme`),{mode:"light",themeName:"light",baseTheme:"light"})},yY=({children:t,defaultMode:e="system"})=>{const[n,i]=H.useState(e),r=mY(),s=gY(n,r),o={motion:jn,pulseAnimation:OD,colors:ne,palette:s.baseTheme==="dark"?rY:iY,windowColors:s.baseTheme==="dark"?eC.dark:eC.light,spacing:we,semanticSpacing:sY,spacingPatterns:oY,fontFamily:__,fontSize:Qt,fontWeight:Vt,lineHeight:en,letterSpacing:Ka,semanticTypography:aY,radii:He,semanticRadii:lY,radiiPatterns:uY,shadows:cY,shadowLevels:Bi,windowShadows:nc,focusShadows:jo,interactiveShadows:ic,semanticShadows:BD,createFocusRing:fY,combineShadows:dY},a=s.customTheme?VD(o,s.customTheme.overrides):o,l={mode:s.mode,themeName:s.themeName,...a},u={themeMode:n,actualMode:s.mode,setThemeMode:i,theme:l,registerTheme:S_,getAvailableThemes:hY};return ee.jsx(UD.Provider,{value:u,children:ee.jsx(PB,{theme:l,children:t})})},xY={name:"pink-light",displayName:"Pink Sharp (Light)",baseTheme:"light",overrides:{palette:{background:{primary:"#fdf2f8",secondary:"#fce7f3",tertiary:"#fbcfe8",accent:"#f9a8d4",elevated:"#fdf2f8"},text:{primary:"#831843",secondary:"#be185d",tertiary:"#ec4899",inverse:"#fdf2f8",accent:"#be185d"},border:{default:"#f9a8d4",muted:"#fce7f3",emphasis:"#ec4899",accent:"#be185d"},interactive:{button:{primary:{background:"#be185d",backgroundHover:"#9d174d",backgroundActive:"#831843",text:"#fdf2f8",border:"#be185d"},secondary:{background:"#fce7f3",backgroundHover:"#fbcfe8",backgroundActive:"#f9a8d4",text:"#831843",border:"#f9a8d4"},ghost:{background:"transparent",backgroundHover:"#fce7f3",backgroundActive:"#fbcfe8",text:"#be185d",border:"transparent"}},link:{default:"#be185d",hover:"#9d174d",visited:"#831843"},focus:{ring:"#ec4899",background:"#fdf2f8"}},status:{error:{background:"#fef2f2",text:"#991b1b",border:"#fca5a5",accent:"#ef4444"},warning:{background:"#fdf2f8",text:"#831843",border:"#f9a8d4",accent:"#ec4899"},success:{background:"#fdf2f8",text:"#831843",border:"#f9a8d4",accent:"#be185d"},info:{background:"#fdf2f8",text:"#be185d",border:"#f9a8d4",accent:"#ec4899"}},chat:{bubble:{user:{background:"linear-gradient(135deg, #be185d 0%, #9d174d 100%)",text:"#fdf2f8"},assistant:{background:"rgba(190, 24, 93, 0.08)",text:"#831843",border:"rgba(190, 24, 93, 0.15)"},system:{background:"rgba(236, 72, 153, 0.1)",text:"#be185d"}},code:{background:"rgba(190, 24, 93, 0.1)",text:"#be185d",block:{background:"rgba(190, 24, 93, 0.05)",border:"rgba(190, 24, 93, 0.15)"}}}},windowColors:{background:"rgba(253, 242, 248, 0.95)",border:"rgba(190, 24, 93, 0.3)",headerBackground:"rgba(253, 242, 248, 0.9)",headerBorder:"rgba(190, 24, 93, 0.2)",titleColor:"#831843",shadow:"0 20px 60px rgba(190, 24, 93, 0.3)"},shadowLevels:{sm:"0 1px 2px 0 rgba(190, 24, 93, 0.08)",base:"0 1px 3px 0 rgba(190, 24, 93, 0.12), 0 1px 2px 0 rgba(190, 24, 93, 0.08)",md:"0 4px 6px -1px rgba(190, 24, 93, 0.12), 0 2px 4px -1px rgba(190, 24, 93, 0.08)",lg:"0 10px 15px -3px rgba(190, 24, 93, 0.15), 0 4px 6px -2px rgba(190, 24, 93, 0.08)",xl:"0 20px 25px -5px rgba(190, 24, 93, 0.18), 0 10px 10px -5px rgba(190, 24, 93, 0.06)","2xl":"0 25px 50px -12px rgba(190, 24, 93, 0.25)",inner:"inset 0 2px 4px 0 rgba(190, 24, 93, 0.08)"},windowShadows:{light:"0 20px 60px rgba(190, 24, 93, 0.25)",dark:"0 20px 60px rgba(190, 24, 93, 0.4)",floating:"0 8px 32px rgba(190, 24, 93, 0.15)",modal:"0 25px 50px rgba(190, 24, 93, 0.2)"},focusShadows:{ring:"0 0 0 2px rgba(236, 72, 153, 0.5)",ringLarge:"0 0 0 3px rgba(236, 72, 153, 0.5)",ringSubtle:"0 0 0 1px rgba(236, 72, 153, 0.3)"},interactiveShadows:{hover:"0 4px 12px rgba(190, 24, 93, 0.18)",active:"0 2px 4px rgba(190, 24, 93, 0.12)",pressed:"inset 0 2px 0 rgba(190, 24, 93, 0.15)"},semanticShadows:{window:{floating:"0 8px 32px rgba(190, 24, 93, 0.15)",modal:"0 25px 50px rgba(190, 24, 93, 0.2)"},dropdown:{base:"0 4px 6px -1px rgba(190, 24, 93, 0.12), 0 2px 4px -1px rgba(190, 24, 93, 0.08)",floating:"0 10px 15px -3px rgba(190, 24, 93, 0.15), 0 4px 6px -2px rgba(190, 24, 93, 0.08)"},card:{raised:"0 1px 3px 0 rgba(190, 24, 93, 0.12), 0 1px 2px 0 rgba(190, 24, 93, 0.08)",floating:"0 4px 6px -1px rgba(190, 24, 93, 0.12), 0 2px 4px -1px rgba(190, 24, 93, 0.08)"},button:{hover:"0 4px 12px rgba(190, 24, 93, 0.18)",active:"0 2px 4px rgba(190, 24, 93, 0.12)"},focus:{ring:"0 0 0 2px rgba(236, 72, 153, 0.5)",ringSubtle:"0 0 0 1px rgba(236, 72, 153, 0.3)"},chat:{message:"0 1px 2px 0 rgba(190, 24, 93, 0.08)"}},semanticSpacing:{component:{buttonPadding:{sm:`${we[1]} ${we[2]}`,md:`${we[2]} ${we[3]}`,lg:`${we[3]} ${we[4]}`},inputPadding:`${we[2]} ${we[3]}`,cardPadding:we[4],modalPadding:we[5]},layout:{containerPadding:we[4],pageMargin:we[5],sectionGap:we[8]},window:{headerPadding:we[2],titleSpacing:we[3]},header:{height:we[8],padding:`${we[1]} ${we[3]}`,buttonPadding:we[1],buttonGap:we[1],logoGap:we[2]}},semanticRadii:{button:{small:"1px",base:"1px",large:"1px",pill:"1px"},input:{base:"1px",large:"1px"},card:{small:"1px",base:"1px",large:"1px"},modal:{base:"1px",large:"1px"},window:{base:"1px",header:"1px 1px 0 0",content:"0 0 1px 1px"},chat:{bubble:{base:"1px",user:"1px 1px 1px 1px",assistant:"1px 1px 1px 1px"},attachment:"1px",input:"1px"},dropdown:{base:"1px",item:"1px"},menu:{base:"1px",item:"1px"},badge:{base:"1px",pill:"1px"},notification:{base:"1px",large:"1px"},code:{inline:"1px",block:"1px"},image:{base:"1px",large:"1px",avatar:"1px"},table:{base:"1px",cell:"0"}},radiiPatterns:{top:{sm:"1px 1px 0 0",base:"1px 1px 0 0",md:"1px 1px 0 0",lg:"1px 1px 0 0"},bottom:{sm:"0 0 1px 1px",base:"0 0 1px 1px",md:"0 0 1px 1px",lg:"0 0 1px 1px"},left:{sm:"1px 0 0 1px",base:"1px 0 0 1px",md:"1px 0 0 1px",lg:"1px 0 0 1px"},right:{sm:"0 1px 1px 0",base:"0 1px 1px 0",md:"0 1px 1px 0",lg:"0 1px 1px 0"}}}},vY={name:"pink-dark",displayName:"Pink Sharp (Dark)",baseTheme:"dark",overrides:{palette:{background:{primary:"#1a0d13",secondary:"#2d1320",tertiary:"#3d1a2d",accent:"#4d223a",elevated:"#1a0d13"},text:{primary:"#fdf2f8",secondary:"#f3e8ff",tertiary:"#e879f9",inverse:"#1a0d13",accent:"#f3e8ff"},border:{default:"#4d223a",muted:"#2d1320",emphasis:"#e879f9",accent:"#f3e8ff"},interactive:{button:{primary:{background:"#be185d",backgroundHover:"#d946ef",backgroundActive:"#f3e8ff",text:"#fdf2f8",border:"#be185d"},secondary:{background:"#2d1320",backgroundHover:"#3d1a2d",backgroundActive:"#4d223a",text:"#fdf2f8",border:"#4d223a"},ghost:{background:"transparent",backgroundHover:"#2d1320",backgroundActive:"#3d1a2d",text:"#f3e8ff",border:"transparent"}},link:{default:"#f3e8ff",hover:"#e879f9",visited:"#d946ef"},focus:{ring:"#e879f9",background:"#1a0d13"}},status:{error:{background:"#2d1b1b",text:"#fca5a5",border:"#991b1b",accent:"#ef4444"},warning:{background:"#1a0d13",text:"#fdf2f8",border:"#4d223a",accent:"#e879f9"},success:{background:"#1a0d13",text:"#fdf2f8",border:"#4d223a",accent:"#f3e8ff"},info:{background:"#1a0d13",text:"#f3e8ff",border:"#4d223a",accent:"#e879f9"}},chat:{bubble:{user:{background:"linear-gradient(135deg, #be185d 0%, #d946ef 100%)",text:"#fdf2f8"},assistant:{background:"rgba(190, 24, 93, 0.15)",text:"#fdf2f8",border:"rgba(190, 24, 93, 0.25)"},system:{background:"rgba(232, 121, 249, 0.15)",text:"#f3e8ff"}},code:{background:"rgba(190, 24, 93, 0.15)",text:"#f3e8ff",block:{background:"rgba(190, 24, 93, 0.08)",border:"rgba(190, 24, 93, 0.25)"}}}},windowColors:{background:"rgba(26, 13, 19, 0.95)",border:"rgba(190, 24, 93, 0.4)",headerBackground:"rgba(26, 13, 19, 0.9)",headerBorder:"rgba(190, 24, 93, 0.3)",titleColor:"#fdf2f8",shadow:"0 20px 60px rgba(190, 24, 93, 0.4)"},shadowLevels:{sm:"0 1px 2px 0 rgba(190, 24, 93, 0.15)",base:"0 1px 3px 0 rgba(190, 24, 93, 0.2), 0 1px 2px 0 rgba(190, 24, 93, 0.15)",md:"0 4px 6px -1px rgba(190, 24, 93, 0.2), 0 2px 4px -1px rgba(190, 24, 93, 0.15)",lg:"0 10px 15px -3px rgba(190, 24, 93, 0.25), 0 4px 6px -2px rgba(190, 24, 93, 0.15)",xl:"0 20px 25px -5px rgba(190, 24, 93, 0.3), 0 10px 10px -5px rgba(190, 24, 93, 0.1)","2xl":"0 25px 50px -12px rgba(190, 24, 93, 0.4)",inner:"inset 0 2px 4px 0 rgba(190, 24, 93, 0.15)"},windowShadows:{light:"0 20px 60px rgba(190, 24, 93, 0.4)",dark:"0 20px 60px rgba(190, 24, 93, 0.6)",floating:"0 8px 32px rgba(190, 24, 93, 0.25)",modal:"0 25px 50px rgba(190, 24, 93, 0.35)"},focusShadows:{ring:"0 0 0 2px rgba(232, 121, 249, 0.6)",ringLarge:"0 0 0 3px rgba(232, 121, 249, 0.6)",ringSubtle:"0 0 0 1px rgba(232, 121, 249, 0.4)"},interactiveShadows:{hover:"0 4px 12px rgba(190, 24, 93, 0.25)",active:"0 2px 4px rgba(190, 24, 93, 0.2)",pressed:"inset 0 2px 0 rgba(190, 24, 93, 0.25)"},semanticShadows:{window:{floating:"0 8px 32px rgba(190, 24, 93, 0.25)",modal:"0 25px 50px rgba(190, 24, 93, 0.35)"},dropdown:{base:"0 4px 6px -1px rgba(190, 24, 93, 0.2), 0 2px 4px -1px rgba(190, 24, 93, 0.15)",floating:"0 10px 15px -3px rgba(190, 24, 93, 0.25), 0 4px 6px -2px rgba(190, 24, 93, 0.15)"},card:{raised:"0 1px 3px 0 rgba(190, 24, 93, 0.2), 0 1px 2px 0 rgba(190, 24, 93, 0.15)",floating:"0 4px 6px -1px rgba(190, 24, 93, 0.2), 0 2px 4px -1px rgba(190, 24, 93, 0.15)"},button:{hover:"0 4px 12px rgba(190, 24, 93, 0.25)",active:"0 2px 4px rgba(190, 24, 93, 0.2)"},focus:{ring:"0 0 0 2px rgba(232, 121, 249, 0.6)",ringSubtle:"0 0 0 1px rgba(232, 121, 249, 0.4)"},chat:{message:"0 1px 2px 0 rgba(190, 24, 93, 0.15)"}},semanticSpacing:{component:{buttonPadding:{sm:`${we[1]} ${we[2]}`,md:`${we[2]} ${we[3]}`,lg:`${we[3]} ${we[4]}`},inputPadding:`${we[2]} ${we[3]}`,cardPadding:we[4],modalPadding:we[5]},layout:{containerPadding:we[4],pageMargin:we[5],sectionGap:we[8]},window:{headerPadding:we[2],titleSpacing:we[3]},header:{height:we[8],padding:`${we[1]} ${we[3]}`,buttonPadding:we[1],buttonGap:we[1],logoGap:we[2]}},semanticRadii:{button:{small:"1px",base:"1px",large:"1px",pill:"1px"},input:{base:"1px",large:"1px"},card:{small:"1px",base:"1px",large:"1px"},modal:{base:"1px",large:"1px"},window:{base:"1px",header:"1px 1px 0 0",content:"0 0 1px 1px"},chat:{bubble:{base:"1px",user:"1px 1px 1px 1px",assistant:"1px 1px 1px 1px"},attachment:"1px",input:"1px"},dropdown:{base:"1px",item:"1px"},menu:{base:"1px",item:"1px"},badge:{base:"1px",pill:"1px"},notification:{base:"1px",large:"1px"},code:{inline:"1px",block:"1px"},image:{base:"1px",large:"1px",avatar:"1px"},table:{base:"1px",cell:"0"}},radiiPatterns:{top:{sm:"1px 1px 0 0",base:"1px 1px 0 0",md:"1px 1px 0 0",lg:"1px 1px 0 0"},bottom:{sm:"0 0 1px 1px",base:"0 0 1px 1px",md:"0 0 1px 1px",lg:"0 0 1px 1px"},left:{sm:"1px 0 0 1px",base:"1px 0 0 1px",md:"1px 0 0 1px",lg:"1px 0 0 1px"},right:{sm:"0 1px 1px 0",base:"0 1px 1px 0",md:"0 1px 1px 0",lg:"0 1px 1px 0"}}}},Hf=(t,e)=>{const{palette:n}=t;switch(e){case"primary":return{background:n.interactive.button.primary.background,backgroundHover:n.interactive.button.primary.backgroundHover,backgroundActive:n.interactive.button.primary.backgroundActive,backgroundDisabled:n.interactive.button.primary.backgroundDisabled,text:n.interactive.button.primary.text,textDisabled:n.interactive.button.primary.textDisabled,border:n.interactive.button.primary.border,borderHover:n.interactive.button.primary.borderHover};case"secondary":return{background:n.interactive.button.secondary.background,backgroundHover:n.interactive.button.secondary.backgroundHover,backgroundActive:n.interactive.button.secondary.backgroundActive,backgroundDisabled:n.interactive.button.secondary.backgroundDisabled,text:n.interactive.button.secondary.text,textDisabled:n.interactive.button.secondary.textDisabled,border:n.interactive.button.secondary.border,borderHover:n.interactive.button.secondary.borderHover};case"ghost":return{background:"transparent",backgroundHover:n.interactive.button.ghost.backgroundHover,backgroundActive:n.interactive.button.ghost.backgroundActive,backgroundDisabled:"transparent",text:n.interactive.button.ghost.text,textDisabled:n.interactive.button.ghost.textDisabled,border:"transparent",borderHover:"transparent"};case"danger":return{background:n.interactive.button.danger.background,backgroundHover:n.interactive.button.danger.backgroundHover,backgroundActive:n.interactive.button.danger.backgroundActive,backgroundDisabled:n.interactive.button.danger.backgroundDisabled,text:n.interactive.button.danger.text,textDisabled:n.interactive.button.danger.textDisabled,border:n.interactive.button.danger.border,borderHover:n.interactive.button.danger.borderHover};default:return Hf(t,"primary")}},wY=(t,e)=>{var s,o,a;const{semanticSpacing:n,semanticTypography:i,radii:r}=t;switch(e){case"sm":return{padding:n.component.buttonPadding.sm,fontSize:i.button.sm.fontSize,fontWeight:i.button.sm.fontWeight,lineHeight:i.button.sm.lineHeight,borderRadius:r.sm,minHeight:((s=n.component.buttonMinHeight)==null?void 0:s.sm)||t.spacing[8]};case"lg":return{padding:n.component.buttonPadding.lg,fontSize:i.button.lg.fontSize,fontWeight:i.button.lg.fontWeight,lineHeight:i.button.lg.lineHeight,borderRadius:r.md,minHeight:((o=n.component.buttonMinHeight)==null?void 0:o.lg)||t.spacing[12]};case"md":default:return{padding:n.component.buttonPadding.md,fontSize:i.button.base.fontSize,fontWeight:i.button.base.fontWeight,lineHeight:i.button.base.lineHeight,borderRadius:r.md,minHeight:((a=n.component.buttonMinHeight)==null?void 0:a.md)||t.spacing[10]}}},HD=ke.button`
  /* Reset and base styles */
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: ${({theme:t})=>t.spacing[2]};
  border: none;
  cursor: pointer;
  font-family: ${({theme:t})=>t.fontFamily.sans.join(", ")};
  text-decoration: none;
  outline: none;
  transition: all ${({theme:t})=>t.motion.duration.fast}ms ${({theme:t})=>t.motion.easing.easeOut.join(", ")};
  user-select: none;
  white-space: nowrap;
  
  /* Size-based styles */
  ${({theme:t,$size:e})=>{const n=wY(t,e);return`
      padding: ${n.padding};
      font-size: ${n.fontSize};
      font-weight: ${n.fontWeight};
      line-height: ${n.lineHeight};
      border-radius: ${n.borderRadius};
      min-height: ${n.minHeight};
    `}}
  
  /* Variant-based styles */
  ${({theme:t,$variant:e})=>{const n=Hf(t,e);return`
      background-color: ${n.background};
      color: ${n.text};
      border: 1px solid ${n.border};
    `}}
  
  /* Full width */
  ${({$fullWidth:t})=>t&&`
    width: 100%;
  `}
  
  /* Loading state */
  ${({$loading:t})=>t&&`
    pointer-events: none;
  `}
  
  /* Hover state */
  &:hover:not(:disabled) {
    ${({theme:t,$variant:e})=>{const n=Hf(t,e);return`
        background-color: ${n.backgroundHover};
        border-color: ${n.borderHover};
        transform: translateY(-1px);
      `}}
  }
  
  /* Active state */
  &:active:not(:disabled) {
    ${({theme:t,$variant:e})=>`
        background-color: ${Hf(t,e).backgroundActive};
        transform: translateY(0);
      `}
  }
  
  /* Focus state */
  &:focus-visible {
    box-shadow: ${({theme:t})=>t.createFocusRing(t.palette.interactive.focus.ring)};
    outline: none; /* Remove browser default outline */
  }
  
  /* Remove any default focus outline */
  &:focus {
    outline: none;
  }
  
  /* Disabled state */
  &:disabled {
    ${({theme:t,$variant:e})=>{const n=Hf(t,e);return`
        background-color: ${n.backgroundDisabled};
        color: ${n.textDisabled};
        cursor: not-allowed;
        transform: none;
      `}}
  }
`,_Y=Ei(HD),tC=ke.div`
  width: 1em;
  height: 1em;
  border: 2px solid transparent;
  border-top: 2px solid currentColor;
  border-radius: 50%;
  animation: ${({theme:t})=>t.pulseAnimation} 1s linear infinite;
`,Pc=H.forwardRef(({variant:t="primary",size:e="md",children:n,loading:i=!1,icon:r,iconPosition:s="left",fullWidth:o=!1,asMotion:a=!1,disabled:l,...u},f)=>{if(a){const d={whileHover:{scale:1.02},whileTap:{scale:.98},transition:{type:"spring",stiffness:400,damping:25}};return ee.jsxs(_Y,{ref:f,$variant:t,$size:e,$fullWidth:o,$loading:i,disabled:l||i,...d,...u,children:[i&&ee.jsx(tC,{}),!i&&r&&s==="left"&&r,!i&&n,!i&&r&&s==="right"&&r]})}return ee.jsxs(HD,{ref:f,$variant:t,$size:e,$fullWidth:o,$loading:i,disabled:l||i,...u,children:[i&&ee.jsx(tC,{}),!i&&r&&s==="left"&&r,!i&&n,!i&&r&&s==="right"&&r]})});Pc.displayName="Button";const SY=(t,e,n)=>{const{palette:i}=t;if(n)return{background:i.status.error.backgroundMuted,border:i.status.error.border,borderFocus:i.status.error.borderEmphasis,text:i.text.primary,placeholder:i.text.tertiary};switch(e){case"filled":return{background:i.background.secondary,border:i.border.muted,borderFocus:i.interactive.focus.ring,text:i.text.primary,placeholder:i.text.tertiary};case"ghost":return{background:"transparent",border:"transparent",borderFocus:i.interactive.focus.ring,text:i.text.primary,placeholder:i.text.tertiary};case"default":default:return{background:i.background.primary,border:i.border.default,borderFocus:i.interactive.focus.ring,text:i.text.primary,placeholder:i.text.tertiary}}},bY=(t,e)=>{var s,o,a,l;const{semanticSpacing:n,semanticTypography:i,radii:r}=t;switch(e){case"sm":return{padding:`${t.spacing[2]} ${t.spacing[3]}`,fontSize:((s=i.input.sm)==null?void 0:s.fontSize)||t.fontSize.sm,lineHeight:((o=i.input.sm)==null?void 0:o.lineHeight)||t.lineHeight.normal,borderRadius:r.sm,minHeight:t.spacing[8]};case"lg":return{padding:`${t.spacing[4]} ${t.spacing[4]}`,fontSize:((a=i.input.lg)==null?void 0:a.fontSize)||t.fontSize.lg,lineHeight:((l=i.input.lg)==null?void 0:l.lineHeight)||t.lineHeight.normal,borderRadius:r.md,minHeight:t.spacing[12]};case"md":default:return{padding:n.component.inputPadding,fontSize:i.input.fontSize,lineHeight:i.input.lineHeight,borderRadius:r.md,minHeight:t.spacing[10]}}},MY=ke.input`
  /* Reset and base styles */
  border: none;
  outline: none;
  font-family: ${({theme:t})=>t.fontFamily.sans.join(", ")};
  transition: all ${({theme:t})=>t.motion.duration.fast}ms ${({theme:t})=>t.motion.easing.easeOut.join(", ")};
  
  /* Size-based styles */
  ${({theme:t,$size:e})=>{const n=bY(t,e);return`
      padding: ${n.padding};
      font-size: ${n.fontSize};
      line-height: ${n.lineHeight};
      border-radius: ${n.borderRadius};
      min-height: ${n.minHeight};
    `}}
  
  /* Variant-based styles */
  ${({theme:t,$variant:e,$error:n})=>{const i=SY(t,e,n);return`
      background-color: ${i.background};
      color: ${i.text};
      border: 1px solid ${i.border};
      
      &::placeholder {
        color: ${i.placeholder};
      }
      
      &:focus {
        border-color: ${i.borderFocus};
        box-shadow: 0 0 0 2px ${i.borderFocus}20;
      }
    `}}
  
  /* Full width */
  ${({$fullWidth:t})=>t&&`
    width: 100%;
  `}
  
  /* Disabled state */
  &:disabled {
    background-color: ${({theme:t})=>t.palette.background.disabled};
    color: ${({theme:t})=>t.palette.text.disabled};
    cursor: not-allowed;
    opacity: 0.6;
  }
`,TY=ke.label`
  display: block;
  font-weight: ${({theme:t})=>t.fontWeight.medium};
  color: ${({theme:t})=>t.palette.text.secondary};
  margin-bottom: ${({theme:t})=>t.spacing[1]};
  
  ${({theme:t,$size:e})=>{switch(e){case"sm":return`font-size: ${t.fontSize.xs};`;case"lg":return`font-size: ${t.fontSize.base};`;case"md":default:return`font-size: ${t.fontSize.sm};`}}}
`,EY=ke.div`
  margin-top: ${({theme:t})=>t.spacing[1]};
  
  ${({theme:t,$size:e})=>{switch(e){case"sm":return`font-size: ${t.fontSize.xs};`;case"lg":return`font-size: ${t.fontSize.sm};`;case"md":default:return`font-size: ${t.fontSize.xs};`}}}
  
  color: ${({theme:t,$error:e})=>e?t.palette.status.error.text:t.palette.text.tertiary};
`,kY=ke.div`
  ${({$fullWidth:t})=>t&&`
    width: 100%;
  `}
`,CY=H.forwardRef(({variant:t="default",size:e="md",error:n=!1,helperText:i,label:r,fullWidth:s=!1,...o},a)=>ee.jsxs(kY,{$fullWidth:s,children:[r&&ee.jsx(TY,{$size:e,htmlFor:o.id,children:r}),ee.jsx(MY,{ref:a,$variant:t,$size:e,$error:n,$fullWidth:s,...o}),i&&ee.jsx(EY,{$error:n,$size:e,children:i})]}));CY.displayName="Input";const AY=(t,e)=>t.palette.interactive.trafficLight[e],WD=ke.button`
  /* Fixed size for traffic light buttons */
  width: ${({theme:t})=>t.semanticSpacing.window.controlButtonSize};
  height: ${({theme:t})=>t.semanticSpacing.window.controlButtonSize};
  border-radius: 50%;
  border: none;
  cursor: pointer;
  flex-shrink: 0;
  position: relative;
  outline: none;
  
  /* Colors based on variant */
  ${({theme:t,$variant:e})=>{const n=AY(t,e);return`
      background: ${n.background};
      
      &:hover:not(:disabled) {
        background: ${n.backgroundHover};
      }
      
      &:active:not(:disabled) {
        background: ${n.backgroundActive};
      }
    `}}
  
  /* Color transitions using motion tokens */
  transition: background-color ${({theme:t})=>t.motion.duration.slower}ms cubic-bezier(${({theme:t})=>t.motion.easing.easeOut[0]}, ${({theme:t})=>t.motion.easing.easeOut[1]}, ${({theme:t})=>t.motion.easing.easeOut[2]}, ${({theme:t})=>t.motion.easing.easeOut[3]});
  
  &:hover:not(:disabled) {
    transition: background-color ${({theme:t})=>t.motion.duration.normal}ms cubic-bezier(${({theme:t})=>t.motion.easing.easeIn[0]}, ${({theme:t})=>t.motion.easing.easeIn[1]}, ${({theme:t})=>t.motion.easing.easeIn[2]}, ${({theme:t})=>t.motion.easing.easeIn[3]});
  }
  
  /* Icon styling */
  ${({$showIcon:t,$variant:e})=>t&&`
    &::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      
      ${e==="close"?`
        width: 4px;
        height: 4px;
        background: rgba(0, 0, 0, 0.6);
        border-radius: 50%;
      `:e==="minimize"?`
        width: 6px;
        height: 1px;
        background: rgba(0, 0, 0, 0.6);
      `:`
        width: 6px;
        height: 6px;
        border: 1px solid rgba(0, 0, 0, 0.6);
        background: transparent;
      `}
    }
  `}
  
  /* Disabled state */
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  
  /* Focus state */
  &:focus-visible {
    box-shadow: ${({theme:t})=>t.createFocusRing(t.palette.interactive.focus.ring)};
  }
`,PY=Ei(WD),b_=H.forwardRef(({variant:t,showIcon:e=!1,asMotion:n=!1,...i},r)=>{if(n){const s={transition:{duration:.25,ease:[.4,0,1,1]}};return ee.jsx(PY,{ref:r,type:"button",$variant:t,$showIcon:e,...s,...i})}return ee.jsx(WD,{ref:r,type:"button",$variant:t,$showIcon:e,...i})});b_.displayName="TrafficLightButton";const nC=t=>t.palette.interactive.header,GD=ke.button`
  /* Reset and base styles */
  border: none;
  cursor: pointer;
  outline: none;
  display: flex;
  align-items: center;
  gap: ${({theme:t})=>t.semanticSpacing.header.logoGap};
  padding: ${({theme:t})=>t.semanticSpacing.header.buttonPadding};
  font-family: ${({theme:t})=>t.fontFamily.sans.join(", ")};
  font-size: ${({theme:t})=>t.fontSize.sm};
  font-weight: ${({theme:t})=>t.fontWeight.medium};
  border-radius: ${({theme:t})=>t.radii.sm};
  user-select: none;
  
  /* Use GPU acceleration for smooth performance */
  transform: translate3d(0, 0, 0);
  
  /* Colors and states */
  ${({theme:t,$isOpen:e})=>{const n=nC(t);return`
      background: ${e?n.backgroundOpen:n.background};
      color: ${n.text};
      
      &:hover:not(:disabled) {
        background: ${e?n.backgroundOpen:n.backgroundHover};
      }
      
      &:active:not(:disabled) {
        background: ${n.backgroundActive};
      }
    `}}
  
  /* Smooth transitions using design tokens */
  transition: all ${({theme:t})=>t.motion.duration.fast}ms ${({theme:t})=>t.motion.easing.easeOut.join(", ")};
  
  /* Disabled state */
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    color: ${({theme:t})=>nC(t).textMuted};
  }
  
  /* Focus state */
  &:focus-visible {
    box-shadow: ${({theme:t})=>t.createFocusRing(t.palette.interactive.focus.ring)};
  }
`,LY=Ei(GD),Hb=H.forwardRef(({children:t,isOpen:e=!1,icon:n,iconPosition:i="left",asMotion:r=!1,...s},o)=>{const a=ee.jsxs(ee.Fragment,{children:[n&&i==="left"&&n,t,n&&i==="right"&&n]});if(r){const l={whileHover:{scale:1.02},whileTap:{scale:.98},transition:{type:"spring",stiffness:400,damping:25}};return ee.jsx(LY,{ref:o,$isOpen:e,...l,...s,children:a})}return ee.jsx(GD,{ref:o,$isOpen:e,...s,children:a})});Hb.displayName="HeaderButton";const RY=ke.div`
  display: flex;
  gap: ${({theme:t})=>t.semanticSpacing.window.controlButtonGap};
  align-items: center;
`,$D=({onClose:t,onMaximize:e,showIcons:n=!1,asMotion:i=!1,className:r})=>ee.jsxs(RY,{className:r,children:[ee.jsx(b_,{variant:"close",showIcon:n,asMotion:i,onClick:s=>{s.stopPropagation(),t==null||t()},"aria-label":"Close window"}),ee.jsx(b_,{variant:"maximize",showIcon:!1,asMotion:i,onClick:s=>{s.stopPropagation(),e==null||e()},"aria-label":"Maximize window"})]});$D.displayName="WindowControls";const IY=ke.div`
  height: ${({theme:t})=>t.semanticSpacing.window.headerHeight};
  background: ${({theme:t})=>t.windowColors.headerBackground};
  border-bottom: 1px solid ${({theme:t})=>t.windowColors.headerBorder};
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 ${({theme:t})=>t.semanticSpacing.window.headerPadding};
  cursor: grab;
  user-select: none;
  backdrop-filter: blur(20px);

  &:active {
    cursor: grabbing;
  }
`,DY=ke.div`
  font-size: ${({theme:t})=>{var e,n;return((n=(e=t.semanticTypography.window)==null?void 0:e.title)==null?void 0:n.fontSize)||t.fontSize.sm}};
  font-weight: ${({theme:t})=>{var e,n;return((n=(e=t.semanticTypography.window)==null?void 0:e.title)==null?void 0:n.fontWeight)||t.fontWeight.medium}};
  color: ${({theme:t})=>t.windowColors.titleColor};
  text-align: center;
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
`,zY=ke.div`
  width: ${({theme:t})=>t.semanticSpacing.window.titleSpacing};
  flex-shrink: 0;
`,jD=({title:t,onClose:e,onMaximize:n,onMouseDown:i,showIcons:r=!1,asMotion:s=!1,children:o,className:a})=>ee.jsxs(IY,{onMouseDown:i,className:a,children:[ee.jsx($D,{onClose:e,onMaximize:n,showIcons:r,asMotion:s}),ee.jsx(DY,{children:t}),o?ee.jsx("div",{style:{display:"flex",alignItems:"center"},children:o}):ee.jsx(zY,{})]});jD.displayName="WindowHeader";const iC=t=>{let e;const n=new Set,i=(f,d)=>{const p=typeof f=="function"?f(e):f;if(!Object.is(p,e)){const m=e;e=d??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(g=>g(e,m))}},r=()=>e,l={setState:i,getState:r,getInitialState:()=>u,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{n.clear()}},u=e=t(i,r,l);return l},FY=t=>t?iC(t):iC;var XD={exports:{}},qD={},YD={exports:{}},ZD={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lc=H;function NY(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var OY=typeof Object.is=="function"?Object.is:NY,BY=Lc.useState,UY=Lc.useEffect,VY=Lc.useLayoutEffect,HY=Lc.useDebugValue;function WY(t,e){var n=e(),i=BY({inst:{value:n,getSnapshot:e}}),r=i[0].inst,s=i[1];return VY(function(){r.value=n,r.getSnapshot=e,r1(r)&&s({inst:r})},[t,n,e]),UY(function(){return r1(r)&&s({inst:r}),t(function(){r1(r)&&s({inst:r})})},[t]),HY(n),n}function r1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!OY(t,n)}catch{return!0}}function GY(t,e){return e()}var $Y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?GY:WY;ZD.useSyncExternalStore=Lc.useSyncExternalStore!==void 0?Lc.useSyncExternalStore:$Y;YD.exports=ZD;var jY=YD.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dy=H,XY=jY;function qY(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var YY=typeof Object.is=="function"?Object.is:qY,ZY=XY.useSyncExternalStore,JY=dy.useRef,KY=dy.useEffect,QY=dy.useMemo,eZ=dy.useDebugValue;qD.useSyncExternalStoreWithSelector=function(t,e,n,i,r){var s=JY(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=QY(function(){function l(m){if(!u){if(u=!0,f=m,m=i(m),r!==void 0&&o.hasValue){var g=o.value;if(r(g,m))return d=g}return d=m}if(g=d,YY(f,m))return g;var y=i(m);return r!==void 0&&r(g,y)?(f=m,g):(f=m,d=y)}var u=!1,f,d,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,i,r]);var a=ZY(t,s[0],s[1]);return KY(function(){o.hasValue=!0,o.value=a},[a]),eZ(a),a};XD.exports=qD;var tZ=XD.exports;const nZ=Zd(tZ),{useDebugValue:iZ}=En,{useSyncExternalStoreWithSelector:rZ}=nZ;const sZ=t=>t;function oZ(t,e=sZ,n){const i=rZ(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return iZ(i),i}const rC=t=>{const e=typeof t=="function"?FY(t):t,n=(i,r)=>oZ(e,i,r);return Object.assign(n,e),n},JD=t=>t?rC(t):rC,la=36,aZ={width:600,height:400},lZ=50,Eh=JD((t,e)=>({windows:[],nextZIndex:1e3,openWindow:(n,i,r,s)=>{var g,y,w,v;const o=`${n}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,a=e().windows.filter(_=>!_.isMinimized);let u={...(s==null?void 0:s.defaultSize)||aZ};s!=null&&s.minSize&&(u.width=Math.max(u.width,s.minSize.width),u.height=Math.max(u.height,s.minSize.height)),s!=null&&s.maxSize&&(u.width=Math.min(u.width,s.maxSize.width),u.height=Math.min(u.height,s.maxSize.height));const f=a.length*lZ,d={x:100+f,y:Math.max(la+20,100+f),...u},p=s?{minWidth:(g=s.minSize)==null?void 0:g.width,minHeight:(y=s.minSize)==null?void 0:y.height,maxWidth:(w=s.maxSize)==null?void 0:w.width,maxHeight:(v=s.maxSize)==null?void 0:v.height}:void 0,m={id:o,appType:n,title:i,position:d,isMinimized:!1,isMaximized:!1,zIndex:e().nextZIndex,data:r,constraints:p};return t(_=>({windows:[..._.windows,m],nextZIndex:_.nextZIndex+1})),o},closeWindow:n=>{t(i=>({windows:i.windows.filter(r=>r.id!==n)}))},focusWindow:n=>{t(i=>i.windows.find(s=>s.id===n)?{windows:i.windows.map(s=>s.id===n?{...s,zIndex:i.nextZIndex,isMinimized:!1}:s),nextZIndex:i.nextZIndex+1}:i)},updateWindowPosition:(n,i)=>{t(r=>({windows:r.windows.map(s=>s.id===n?{...s,position:{...s.position,...i}}:s)}))},toggleMinimize:n=>{t(i=>({windows:i.windows.map(r=>r.id===n?{...r,isMinimized:!r.isMinimized}:r)}))},toggleMaximize:n=>{t(i=>({windows:i.windows.map(r=>r.id===n?{...r,isMaximized:!r.isMaximized,previousPosition:r.isMaximized?r.previousPosition:r.position,position:r.isMaximized?r.previousPosition||r.position:{x:0,y:0,width:globalThis.innerWidth,height:globalThis.innerHeight-la}}:r)}))},updateWindowData:(n,i)=>{t(r=>({windows:r.windows.map(s=>s.id===n?{...s,data:{...s.data,...i}}:s)}))},broadcastMessage:(n,i)=>{},getWindow:n=>e().windows.find(i=>i.id===n),getWindowsByType:n=>e().windows.filter(i=>i.appType===n)})),uZ={HEADER_HEIGHT:32,BORDER_RADIUS:12,CONTROL_BUTTON_SIZE:12,CONTROL_BUTTON_GAP:8,RESIZE_HANDLE:{EDGE_WIDTH:12,CORNER_SIZE:16},ANIMATIONS:{DURATION:"250ms",EASING:"cubic-bezier(0.25, 0.46, 0.45, 0.94)"}},cZ={background:"rgba(255, 255, 255, 0.95)",border:"1px solid rgba(255, 255, 255, 0.2)",headerBackground:"transparent",headerBorder:"1px solid transparent",titleColor:"#333",shadow:"0 20px 60px rgba(0, 0, 0, 0.2)"},fZ={background:"rgba(26, 26, 26, 0.98)",border:"1px solid rgba(60, 60, 60, 0.3)",headerBackground:"transparent",headerBorder:"1px solid rgba(60, 60, 60, 0.3)",titleColor:"#e0e0e0",shadow:"0 20px 60px rgba(0, 0, 0, 0.2)"},dZ=(t,e,n,i,r,s)=>o=>a=>{if(n)return;a.preventDefault(),a.stopPropagation();const l=_=>{switch(_){case"n":case"s":return"ns-resize";case"e":case"w":return"ew-resize";case"ne":case"sw":return"nesw-resize";case"nw":case"se":return"nwse-resize";default:return"default"}},u=document.body.style.cursor;document.body.style.cursor=l(o);const f=a.clientX,d=a.clientY,p=e.width,m=e.height,g=e.x,y=e.y,w=_=>{const b=_.clientX-f,M=_.clientY-d;let k=p,E=m,I=g,C=y;const L=(s==null?void 0:s.minWidth)||300,R=(s==null?void 0:s.minHeight)||200,O=(s==null?void 0:s.maxWidth)||Number.MAX_SAFE_INTEGER,q=(s==null?void 0:s.maxHeight)||Number.MAX_SAFE_INTEGER;o.includes("e")?k=Math.min(O,Math.max(L,p+b)):o.includes("w")&&(k=Math.min(O,Math.max(L,p-b)),I=g+b,k===L?I=g+p-L:k===O&&(I=g+p-O)),o.includes("s")?E=Math.min(q,Math.max(R,m+M)):o.includes("n")&&(E=Math.min(q,Math.max(R,m-M)),C=Math.max(la,y+M),E===R||C===la?C=Math.max(la,y+m-R):E===q&&(C=y+m-q)),i(t,{x:I,y:C,width:k,height:E})},v=()=>{document.body.style.cursor=u,document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",v),r==null||r()};document.addEventListener("mousemove",w),document.addEventListener("mouseup",v)},hZ=t=>{const{EDGE_WIDTH:e,CORNER_SIZE:n}=uZ.RESIZE_HANDLE,i=e/2,r=n/2;switch(t){case"n":return`top: -${i}px; left: 8px; right: 8px; height: ${e}px; cursor: ns-resize;`;case"s":return`bottom: -${i}px; left: 8px; right: 8px; height: ${e}px; cursor: ns-resize;`;case"e":return`right: -${i}px; top: 8px; bottom: 8px; width: ${e}px; cursor: ew-resize;`;case"w":return`left: -${i}px; top: 8px; bottom: 8px; width: ${e}px; cursor: ew-resize;`;case"ne":return`top: -${r}px; right: -${r}px; width: ${n}px; height: ${n}px; cursor: nesw-resize;`;case"nw":return`top: -${r}px; left: -${r}px; width: ${n}px; height: ${n}px; cursor: nwse-resize;`;case"se":return`bottom: -${r}px; right: -${r}px; width: ${n}px; height: ${n}px; cursor: nwse-resize;`;case"sw":return`bottom: -${r}px; left: -${r}px; width: ${n}px; height: ${n}px; cursor: nesw-resize;`;default:return""}},pZ=["n","s","e","w","ne","nw","se","sw"],KD=ke(Ei.div)`
  position: absolute;
  background: ${t=>t.theme.windowColors.background};
  border-radius: ${t=>t.$isMaximized?"0px":t.theme.semanticRadii.window.base};
  box-shadow: ${t=>t.theme.semanticShadows.window.floating};
  backdrop-filter: blur(20px);
  border: 1px solid ${t=>t.theme.windowColors.border};
  overflow: hidden;
  z-index: ${t=>t.$windowZIndex};
  transition: ${t=>t.$isInteracting?"none":"all 250ms cubic-bezier(0.25, 0.46, 0.45, 0.94)"};

  &:hover {
    box-shadow: ${t=>t.theme.semanticShadows.window.floating};
  }
`,mZ=ke.div`
  position: absolute;
  ${t=>hZ(t.direction)}
  opacity: 0;
  transition: opacity 0.2s ease;
  z-index: 10;

  ${KD}:hover & {
    opacity: 1;
  }
`,gZ=ke.div`
  height: calc(100% - 32px);
  overflow: hidden;
`,yZ=({window:t,children:e,isActive:n})=>{const{updateWindowPosition:i,closeWindow:r,focusWindow:s,toggleMaximize:o}=Eh(),a=H.useRef(null),[l,u]=H.useState(!1),[f,d]=H.useState({x:0,y:0}),[p,m]=H.useState(!1),g=dZ(t.id,t.position,t.isMaximized,(v,_)=>{m(!0),i(v,_)},()=>m(!1),t.constraints),y=()=>{s(t.id),o(t.id)},w=v=>{n||s(t.id),!t.isMaximized&&(d({x:v.clientX-t.position.x,y:v.clientY-t.position.y}),u(!0),m(!0))};return H.useEffect(()=>{const v=b=>{if(l&&a.current){const M=b.clientX-f.x,k=b.clientY-f.y,E=Math.max(-t.position.width+100,Math.min(globalThis.innerWidth-100,M)),I=Math.max(0,Math.min(globalThis.innerHeight-la-100,k));i(t.id,{x:E,y:I})}},_=()=>{u(!1),m(!1)};return l&&(document.addEventListener("mousemove",v),document.addEventListener("mouseup",_)),()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",_)}},[l,f,t.id,i]),ee.jsxs(KD,{ref:a,$isActive:n,$isInteracting:p,$isMaximized:t.isMaximized,$windowZIndex:t.zIndex,style:{left:t.position.x,top:t.position.y,width:t.position.width,height:t.position.height},initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",stiffness:300,damping:25},children:[ee.jsx(jD,{title:t.title,onClose:()=>r(t.id),onMaximize:y,onMouseDown:w,showIcons:!0,asMotion:!0}),ee.jsx(gZ,{children:e}),!t.isMaximized&&pZ.map(v=>ee.jsx(mZ,{direction:v,onMouseDown:g(v)},v))]})};function xZ(t){return dr({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"m112 244 144-144 144 144M256 120v292"},child:[]}]})(t)}function QD(t){return dr({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M398 81.84A227.4 227.4 0 0 0 255.82 32C194.9 32 138 55.47 95.46 98.09 54.35 139.33 31.82 193.78 32 251.37a215.66 215.66 0 0 0 35.65 118.76l.19.27c.28.41.57.82.86 1.22s.65.92.73 1.05l.22.4c1.13 2 2 4.44 1.23 6.9l-18.42 66.66a29.13 29.13 0 0 0-1.2 7.63A25.69 25.69 0 0 0 76.83 480a29.44 29.44 0 0 0 10.45-2.29l67.49-24.36.85-.33a14.75 14.75 0 0 1 5.8-1.15 15.12 15.12 0 0 1 5.37 1c1.62.63 16.33 6.26 31.85 10.6 12.9 3.6 39.74 9 60.77 9 59.65 0 115.35-23.1 156.83-65.06C457.36 365.77 480 310.42 480 251.49a213.5 213.5 0 0 0-4.78-45c-10.34-48.62-37.76-92.9-77.22-124.65zM87.48 380zM160 288a32 32 0 1 1 32-32 32 32 0 0 1-32 32zm96 0a32 32 0 1 1 32-32 32 32 0 0 1-32 32zm96 0a32 32 0 1 1 32-32 32 32 0 0 1-32 32z"},child:[]}]})(t)}function vZ(t){return dr({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M428 224H288a48 48 0 0 1-48-48V36a4 4 0 0 0-4-4h-92a64 64 0 0 0-64 64v320a64 64 0 0 0 64 64h224a64 64 0 0 0 64-64V228a4 4 0 0 0-4-4zm-92 160H176a16 16 0 0 1 0-32h160a16 16 0 0 1 0 32zm0-80H176a16 16 0 0 1 0-32h160a16 16 0 0 1 0 32z"},child:[]},{tag:"path",attr:{d:"M419.22 188.59 275.41 44.78a2 2 0 0 0-3.41 1.41V176a16 16 0 0 0 16 16h129.81a2 2 0 0 0 1.41-3.41z"},child:[]}]})(t)}function Wb(t){return dr({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M336 256c-20.56 0-40.44-9.18-56-25.84-15.13-16.25-24.37-37.92-26-61-1.74-24.62 5.77-47.26 21.14-63.76S312 80 336 80c23.83 0 45.38 9.06 60.7 25.52 15.47 16.62 23 39.22 21.26 63.63-1.67 23.11-10.9 44.77-26 61C376.44 246.82 356.57 256 336 256zm66-88zm65.83 264H204.18a27.71 27.71 0 0 1-22-10.67 30.22 30.22 0 0 1-5.26-25.79c8.42-33.81 29.28-61.85 60.32-81.08C264.79 297.4 299.86 288 336 288c36.85 0 71 9 98.71 26.05 31.11 19.13 52 47.33 60.38 81.55a30.27 30.27 0 0 1-5.32 25.78A27.68 27.68 0 0 1 467.83 432zM147 260c-35.19 0-66.13-32.72-69-72.93-1.42-20.6 5-39.65 18-53.62 12.86-13.83 31-21.45 51-21.45s38 7.66 50.93 21.57c13.1 14.08 19.5 33.09 18 53.52-2.87 40.2-33.8 72.91-68.93 72.91zm65.66 31.45c-17.59-8.6-40.42-12.9-65.65-12.9-29.46 0-58.07 7.68-80.57 21.62-25.51 15.83-42.67 38.88-49.6 66.71a27.39 27.39 0 0 0 4.79 23.36A25.32 25.32 0 0 0 41.72 400h111a8 8 0 0 0 7.87-6.57c.11-.63.25-1.26.41-1.88 8.48-34.06 28.35-62.84 57.71-83.82a8 8 0 0 0-.63-13.39c-1.57-.92-3.37-1.89-5.42-2.89z"},child:[]}]})(t)}function sC(t){return dr({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M449.07 399.08 278.64 82.58c-12.08-22.44-44.26-22.44-56.35 0L51.87 399.08A32 32 0 0 0 80 446.25h340.89a32 32 0 0 0 28.18-47.17zm-198.6-1.83a20 20 0 1 1 20-20 20 20 0 0 1-20 20zm21.72-201.15-5.74 122a16 16 0 0 1-32 0l-5.74-121.95a21.73 21.73 0 0 1 21.5-22.69h.21a21.74 21.74 0 0 1 21.73 22.7z"},child:[]}]})(t)}class gg{static getAllNotes(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(!e)return{};const n=JSON.parse(e);return Object.keys(n).forEach(i=>{n[i].lastModified=new Date(n[i].lastModified)}),n}catch{return{}}}static getNote(e){return this.getAllNotes()[e]||null}static saveNote(e,n,i){const r=this.getAllNotes();r[e]={title:i||this.generateTitle(n),content:n,lastModified:new Date},localStorage.setItem(this.STORAGE_KEY,JSON.stringify(r))}static deleteNote(e){const n=this.getAllNotes();delete n[e],localStorage.setItem(this.STORAGE_KEY,JSON.stringify(n))}static generateTitle(e){if(!e.trim())return"Untitled Note";const n=e.split(`
`)[0].trim();return n.length>30?n.substring(0,30)+"...":n||"Untitled Note"}static getNotesList(){const e=this.getAllNotes();return Object.keys(e).map(n=>({id:n,title:e[n].title,lastModified:e[n].lastModified})).sort((n,i)=>i.lastModified.getTime()-n.lastModified.getTime())}}$2(gg,"STORAGE_KEY","dark-notes-storage");const wZ=B0`
  0% {
    background-position: -600px 0;
  }
  100% {
    background-position: 600px 0;
  }
`,_Z=ke.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  background: transparent;
  color: ${t=>t.theme.palette.text.primary};
`,SZ=ke.div`
  flex: 1;
  position: relative;
`,bZ=ke.div`
  position: absolute;
  top: 20px;
  left: 20px;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
  font-size: 14px;
  line-height: 1.6;
  font-style: italic;
  pointer-events: none;
  user-select: none;
  opacity: ${t=>t.$show?.6:0};
  transition: opacity 0.2s ease;
  z-index: 1;
  
  /* Wave gradient effect - Safari compatible */
  background: linear-gradient(
    90deg,
    rgba(128, 128, 128, 0.5) 0%,
    rgba(128, 128, 128, 0.5) 20%,
    rgba(200, 200, 200, 0.9) 30%,
    rgba(128, 128, 128, 0.5) 50%,
    rgba(128, 128, 128, 0.5) 100%
  );
  background-size: 600px 100%;
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  color: transparent;
  animation: ${t=>t.$show?wZ:"none"} 3s ease-in-out infinite;
  
  /* Safari fallback */
  @supports not (-webkit-background-clip: text) {
    color: rgba(128, 128, 128, 0.6);
    background: none;
    -webkit-text-fill-color: initial;
  }
`,MZ=ke.textarea`
  width: 100%;
  height: 100%;
  border: none;
  outline: none;
  padding: 20px;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
  font-size: 14px;
  line-height: 1.6;
  resize: none;
  background: transparent;
  color: ${t=>t.theme.palette.text.primary};
  position: relative;
  z-index: 2;
  
  /* Remove all focus/selection background changes for consistency */
  &:focus {
    outline: none;
    background: transparent;
  }
  
  /* Override browser selection colors to maintain dark theme */
  &::selection {
    background: ${t=>t.theme.palette.interactive.focus.background};
    color: ${t=>t.theme.palette.text.primary};
  }
  
  &::-moz-selection {
    background: ${t=>t.theme.palette.interactive.focus.background};
    color: ${t=>t.theme.palette.text.primary};
  }
`,TZ=ke.div`
  padding: 8px 20px;
  font-size: 12px;
  color: ${t=>t.theme.palette.text.secondary};
  background: transparent;
  border-top: 0.5px solid rgba(128, 128, 128, 0.2);
  display: flex;
  justify-content: space-between;
  align-items: center;
`,oC=ke.span`
  display: flex;
  align-items: center;
  gap: 4px;
`,EZ=({windowId:t})=>{var _;const{getWindow:e,updateWindowData:n}=Eh(),i=e(t),[r,s]=H.useState(""),[o,a]=H.useState(0),[l,u]=H.useState(0),[f,d]=H.useState(null),[p,m]=H.useState("");H.useEffect(()=>{var M;const b=(M=i==null?void 0:i.data)==null?void 0:M.noteId;if(b){m(b);const k=gg.getNote(b);k&&(s(k.content),d(k.lastModified))}else{const k=`note-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;m(k),n(t,{noteId:k})}},[t,(_=i==null?void 0:i.data)==null?void 0:_.noteId,n]);const g=H.useCallback(()=>{p&&r!==void 0&&(gg.saveNote(p,r),n(t,{content:r,noteId:p}),d(new Date))},[t,r,p,n]);H.useEffect(()=>{if(!p)return;const b=setTimeout(()=>{const M=gg.getNote(p),k=(M==null?void 0:M.content)||"";r!==k&&g()},2e3);return()=>clearTimeout(b)},[r,g,p]),H.useEffect(()=>{const b=r.trim()?r.trim().split(/\s+/).length:0;a(b),u(r.length)},[r]);const y=b=>{s(b.target.value)},w=b=>{(b.metaKey||b.ctrlKey)&&b.key==="s"&&(b.preventDefault(),g())},v=b=>{if(!b)return"Not saved";const k=new Date().getTime()-b.getTime(),E=Math.floor(k/1e3);return E<60?"Saved just now":E<3600?`Saved ${Math.floor(E/60)}m ago`:`Saved at ${b.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`};return ee.jsxs(_Z,{children:[ee.jsxs(SZ,{children:[ee.jsx(bZ,{$show:r.length===0,children:"Start typing in the dark..."}),ee.jsx(MZ,{value:r,onChange:y,onKeyDown:w,autoFocus:!0})]}),ee.jsxs(TZ,{children:[ee.jsxs(oC,{children:[ee.jsxs("span",{children:[o," words"]}),ee.jsx("span",{children:""}),ee.jsxs("span",{children:[l," characters"]})]}),ee.jsx(oC,{children:v(f)})]})]})},e5=JD(t=>({chatBackgroundImage:null,setChatBackgroundImage:e=>{console.log(" Setting chat background:",e?"image set":"image cleared"),t({chatBackgroundImage:e})}})),t5=({url:t,onMessage:e,reconnectDelay:n=3e3,heartbeatInterval:i=3e4})=>{const[r,s]=H.useState("disconnected"),o=H.useRef(null),a=H.useRef("disconnected"),l=H.useRef(null),u=H.useCallback(()=>{l.current&&clearInterval(l.current),l.current=setInterval(()=>{o.current&&o.current.readyState===WebSocket.OPEN&&(console.log(" Sending heartbeat ping"),o.current.send(JSON.stringify({type:"ping"})))},i)},[i]),f=H.useCallback(()=>{l.current&&(console.log(" Stopping heartbeat"),clearInterval(l.current),l.current=null)},[]),d=H.useCallback(()=>{try{if(o.current&&o.current.readyState!==WebSocket.CLOSED){console.log("WebSocket already exists, skipping connection");return}console.log(" Creating new WebSocket connection..."),s("connecting"),a.current="connecting";const g=new WebSocket(t);g.onopen=()=>{console.log(" WebSocket connected"),s("connected"),a.current="connected",o.current=g,u()},g.onmessage=y=>{try{const w=JSON.parse(y.data);if(w.type==="pong"){console.log(" Received heartbeat pong");return}e==null||e(w)}catch(w){console.error("Error parsing WebSocket message:",w)}},g.onclose=()=>{console.log(" WebSocket disconnected"),f(),s("disconnected"),a.current="disconnected",o.current=null,a.current==="disconnected"&&setTimeout(()=>{a.current==="disconnected"&&(console.log(" Attempting to reconnect..."),d())},n)},g.onerror=y=>{console.error(" WebSocket error:",y),f(),s("error"),a.current="error",o.current&&(o.current.close(),o.current=null)}}catch(g){console.error(" Error connecting to WebSocket:",g),s("error"),a.current="error"}},[t,e,n,u,f]),p=H.useCallback(g=>{var y;if(o.current&&o.current.readyState===WebSocket.OPEN){const w=typeof g=="string"?g:JSON.stringify(g);return console.log(" Sending WebSocket message:",w),o.current.send(w),!0}else return console.error(" WebSocket not connected, state:",(y=o.current)==null?void 0:y.readyState),d(),!1},[d]),m=H.useCallback(()=>{console.log(" Disconnecting WebSocket"),f(),a.current="error",o.current&&(o.current.close(),o.current=null),s("disconnected")},[f]);return H.useEffect(()=>(d(),()=>{m()}),[]),{connectionStatus:r,sendMessage:p,disconnect:m,reconnect:d,isConnected:r==="connected"}},kZ=(t={})=>{const{onMessagesChange:e}=t,[n,i]=H.useState([]),[r,s]=H.useState(!1),o=H.useRef(""),a=H.useRef(""),l=H.useCallback((m,g)=>{const y={id:`human-${Date.now()}`,type:"human",content:m.trim(),timestamp:new Date,...g&&g.length>0&&{attachments:g}};return i(w=>{const v=[...w,y];return setTimeout(()=>e==null?void 0:e(v),0),v}),y},[e]),u=H.useCallback(m=>{var g;switch(m.type){case"typing_start":s(!0),o.current="",a.current=m.message_id||"";break;case"image_generated":if(console.log(" PROCESSING IMAGE_GENERATED EVENT"),console.log(" Has image_data:",!!m.image_data),console.log(" Has mime_type:",!!m.mime_type),console.log(" Image data length:",(g=m.image_data)==null?void 0:g.length),m.image_data&&m.mime_type){console.log(" Creating image message!");const y={id:`assistant-${Date.now()}`,type:"assistant",content:"Here's the image I generated for you:",timestamp:new Date,attachments:[{name:"generated-image.png",type:m.mime_type,size:0,url:`data:${m.mime_type};base64,${m.image_data}`}]};console.log(" Image message:",y),i(w=>{const v=[...w,y];return console.log(" Added image message, total messages:",v.length),setTimeout(()=>e==null?void 0:e(v),0),v})}else console.warn(" Missing image_data or mime_type!");break;case"typing_end":s(!1);break;case"content_chunk":o.current+=m.content||"",i(y=>{const w=y[y.length-1];return w&&w.type==="ai"&&w.isStreaming?y.map((v,_)=>_===y.length-1?{...v,content:o.current}:v):[...y,{id:`ai-${m.message_id}`,type:"ai",content:o.current,timestamp:new Date,isStreaming:!0}]});break;case"message_complete":i(y=>{const w=y.map((v,_)=>_===y.length-1&&v.type==="ai"&&v.isStreaming?{...v,content:m.full_content||v.content,isStreaming:!1}:v);return setTimeout(()=>e==null?void 0:e(w),0),w}),o.current="",a.current="";break;case"error":console.error("Chat error:",m.error),s(!1),i(y=>{const w=[...y,{id:`error-${Date.now()}`,type:"ai",content:`Sorry, I encountered an error: ${m.error}`,timestamp:new Date,isStreaming:!1}];return setTimeout(()=>e==null?void 0:e(w),0),w});break}},[e]),f=H.useCallback(m=>{s(!1),i(g=>{const y=[...g,{id:`error-${Date.now()}`,type:"ai",content:`Sorry, I encountered an error: ${m}`,timestamp:new Date,isStreaming:!1}];return setTimeout(()=>e==null?void 0:e(y),0),y})},[e]),d=H.useCallback(()=>{i([]),s(!1),o.current="",a.current=""},[]),p=H.useCallback(m=>{i(m)},[]);return{messages:n,isAiTyping:r,addUserMessage:l,handleChatResponse:u,addErrorMessage:f,clearMessages:d,updateMessages:p}},CZ=()=>{const[t,e]=H.useState([]),n=H.useCallback(a=>{e(l=>[...l,...a])},[]),i=H.useCallback(a=>{e(l=>l.filter((u,f)=>f!==a))},[]),r=H.useCallback(()=>{t.forEach(a=>{const l=URL.createObjectURL(a);URL.revokeObjectURL(l)}),e([])},[t]),s=H.useCallback(()=>t.map(a=>({name:a.name,type:a.type,size:a.size,url:URL.createObjectURL(a)})),[t]),o=H.useCallback(a=>{const l=Array.from(a.target.files||[]);l.length>0&&(n(l),a.target.value="")},[n]);return{selectedFiles:t,addFiles:n,removeFile:i,clearFiles:r,getAttachments:s,handleFileSelect:o,hasFiles:t.length>0}},AZ=t=>{if(t===0)return"0 Bytes";const e=1024,n=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,i)).toFixed(1))+" "+n[i]},yg=(t="msg")=>`${t}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,n5=t=>t.startsWith("image/"),PZ=t=>{t.scrollTop=t.scrollHeight},LZ=(t,e=120)=>{t.style.height="auto";const n=t.scrollHeight;t.style.height=Math.min(n,e)+"px",n>e?t.classList.add("has-scroll"):t.classList.remove("has-scroll")},RZ=t=>new Promise((e,n)=>{const i=new FileReader;i.onload=()=>{const s=i.result.split(",")[1];e({name:t.name,mime_type:t.type,data:s,size:t.size})},i.onerror=()=>{n(new Error(`Failed to convert ${t.name} to base64`))},i.readAsDataURL(t)}),IZ=async t=>{try{const e=t.map(n=>RZ(n));return await Promise.all(e)}catch(e){throw console.error("Error converting files to attachments:",e),e}},DZ=({websocketUrl:t,onMessagesUpdate:e})=>{const[n,i]=H.useState(!1),{messages:r,isAiTyping:s,addUserMessage:o,handleChatResponse:a,addErrorMessage:l,clearMessages:u,updateMessages:f}=kZ({onMessagesChange:e}),{selectedFiles:d,removeFile:p,clearFiles:m,getAttachments:g,handleFileSelect:y,hasFiles:w}=CZ(),v=H.useCallback(I=>{var C;if(console.log(" Received WebSocket message:",I),console.log(" Message type:",I.type),I.type==="chat_response"){const L=I.data;console.log(" Chat response type:",L.type),console.log(" Full response data:",JSON.stringify(L,null,2)),L.type==="image_generating"?console.log(" Image generation started!"):L.type==="image_generated"&&(console.log(" Image generated! Has image_data:",!!L.image_data),console.log(" Image data length:",(C=L.image_data)==null?void 0:C.length),console.log(" MIME type:",L.mime_type)),a(L),(L.type==="message_complete"||L.type==="error")&&i(!0)}else I.type==="chat_error"&&(console.error("Chat error:",I.error),l(I.error),i(!0))},[a,l]),{connectionStatus:_,sendMessage:b,isConnected:M}=t5({url:t,onMessage:v}),k=H.useCallback((I,C,L=[])=>{const R={type:"chat_message",content:I,message_id:C,attachments:L};return console.log(" Sending chat message:",R),b(R)},[b]),E=H.useCallback(async I=>{try{if(!I.trim()&&!w)return!1;const C=g();o(I,C);let L=[];if(w)try{L=await IZ(d),console.log(` Converted ${L.length} attachments for backend`)}catch(q){return console.error("Error converting files to attachments:",q),l("Failed to process file attachments"),!1}m(),i(!0);const R=yg();return k(I,R,L)}catch(C){return console.error("Error in handleSendMessage:",C),l("Failed to send message"),!1}},[w,d,g,o,m,k,l]);return{messages:r,isAiTyping:s,clearMessages:u,updateMessages:f,selectedFiles:d,handleFileSelect:y,removeFile:p,hasFiles:w,connectionStatus:_,isConnected:M,handleSendMessage:E,shouldFocusInput:n,setShouldFocusInput:i}},zZ=({websocketUrl:t,onMessagesUpdate:e,onRoomStatusChange:n})=>{const[i,r]=H.useState([]),[s,o]=H.useState([]),[a,l]=H.useState(0),[u,f]=H.useState(null),d=H.useRef(null),p=H.useRef(null),[m,g]=H.useState(!1),y=H.useCallback(L=>{var R;if(console.log(" Received Group Chat message:",L),L.type==="group_chat_response"){const O=L.data;switch(console.log(" Group chat response type:",O.type),O.type){case"room_joined":if(console.log(" Successfully joined room"),console.log(" Room joined response data:",O),n==null||n("joined"),O.users)if(o(O.users),l(O.users.length),console.log(" Trying to match joiningNickname:",d.current,"with users:",O.users),console.log(" joiningNicknameRef status:",d.current?"HAS VALUE":"NULL/UNDEFINED"),d.current){console.log(" Looking for exact match:",d.current);const q=O.users.find(j=>j.nickname===d.current);if(console.log(" Exact match result:",q),q)f({id:q.id,nickname:q.nickname}),p.current=q.nickname,console.log(" Set current user (exact match):",q),console.log(" currentUser should now be:",{id:q.id,nickname:q.nickname}),d.current=null;else{console.log(" Trying similar match with prefix:",d.current);const j=O.users.find(G=>G.nickname.startsWith(d.current));console.log(" Similar match result:",j),j?(f({id:j.id,nickname:j.nickname}),p.current=j.nickname,console.log(" Set current user (similar match):",j),console.log(" currentUser should now be:",{id:j.id,nickname:j.nickname}),d.current=null):console.log(" No matching user found! joiningNickname:",d.current,"available users:",(R=O.users)==null?void 0:R.map(G=>G.nickname))}}else console.log(" joiningNickname is null/undefined - cannot match user!"),console.log(" This means joiningNicknameRef.current was not set during joinRoom call");break;case"room_full":console.log(" Room is full"),n==null||n("full");break;case"user_joined":if(O.sender&&O.userId){const q={id:yg(),type:"system",content:`${O.sender} joined the chat`,timestamp:new Date};r(j=>{const G=[...j,q];return setTimeout(()=>e==null?void 0:e(G),0),G}),O.users&&(o(O.users),l(O.users.length))}break;case"user_left":if(O.sender){const q={id:yg(),type:"system",content:`${O.sender} left the chat`,timestamp:new Date};r(j=>{const G=[...j,q];return setTimeout(()=>e==null?void 0:e(G),0),G}),O.users&&(o(O.users),l(O.users.length))}break;case"message":if(O.message&&O.sender){u&&O.userId===u.id&&O.sender!==u.nickname&&(console.log(` Updating current user nickname from "${u.nickname}" to "${O.sender}" (auto-join detected)`),f(j=>j?{...j,nickname:O.sender||j.nickname}:null));const q={id:yg(),type:"user",content:O.message,sender:O.sender,userId:O.userId,timestamp:new Date,...O.replyTo&&{replyTo:{id:O.replyTo.id,type:O.replyTo.type,content:O.replyTo.content,sender:O.replyTo.sender,timestamp:new Date}}};r(j=>{const G=[...j,q];return setTimeout(()=>e==null?void 0:e(G),0),G})}break;case"user_list":O.users&&(o(O.users),l(O.users.length));break;case"error":console.error("Group chat error:",O.error),n==null||n("idle");break}}else L.type==="group_chat_error"&&(console.error("Group chat error:",L.error),n==null||n("idle"))},[e,n]),{connectionStatus:w,sendMessage:v,isConnected:_}=t5({url:t,onMessage:y,heartbeatInterval:3e4}),b=H.useCallback(async L=>{const R=L.trim(),O={type:"join_room",nickname:R,room_id:"general"};if(console.log(" Sending join room request:",O),d.current=R,v(O))return console.log(" Join room request sent, waiting for server response..."),!0;throw d.current=null,new Error("Failed to send join room request")},[v]),M=H.useCallback(()=>{p.current&&(console.log(" WebSocket reconnected, rejoining room with nickname:",p.current),setTimeout(()=>{p.current&&b(p.current)},1e3))},[b]);H.useEffect(()=>{w==="connected"&&p.current&&!u&&(console.log(" Connection restored, attempting to rejoin room"),M())},[w,u,M]);const k=H.useCallback(()=>{if(!u)return;const L={type:"leave_room",room_id:"general"};console.log(" Sending leave room request:",L),v(L),f(null)},[v,u]),E=H.useCallback(async(L,R)=>{if(!L.trim())return console.log(" Cannot send empty message"),!1;if(!u)return console.log(" Cannot send message - user not joined. Current user:",u),!1;const O={type:"send_message",message:L.trim(),room_id:"general",...R&&{replyTo:{id:R.id,content:R.content,sender:R.type==="user"&&"sender"in R?R.sender:R.type!=="human"?"Andrei":"You",type:R.type}}};console.log(" Sending group message:",O,"Current user:",u);const q=v(O);return q?g(!0):console.log(" Failed to send message via WebSocket"),q},[v,u]),I=H.useCallback(()=>{r([])},[]),C=H.useCallback(L=>{r(L)},[]);return{messages:i,clearMessages:I,updateMessages:C,users:s,userCount:a,currentUser:u,connectionStatus:w,isConnected:_,joinRoom:b,leaveRoom:k,sendGroupMessage:E,shouldFocusInput:m,setShouldFocusInput:g}},i5=()=>{const[t,e]=H.useState(()=>typeof window<"u"?window.matchMedia("(prefers-color-scheme: dark)").matches:!1);return H.useEffect(()=>{if(typeof window>"u")return;const n=window.matchMedia("(prefers-color-scheme: dark)"),i=r=>{e(r.matches)};return e(n.matches),n.addEventListener("change",i),()=>n.removeEventListener("change",i)},[]),t};function FZ(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const NZ=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,OZ=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,BZ={};function aC(t,e){return((e||BZ).jsx?OZ:NZ).test(t)}const UZ=/[ \t\n\f\r]/g;function VZ(t){return typeof t=="object"?t.type==="text"?lC(t.value):!1:lC(t)}function lC(t){return t.replace(UZ,"")===""}class kh{constructor(e,n,i){this.normal=n,this.property=e,i&&(this.space=i)}}kh.prototype.normal={};kh.prototype.property={};kh.prototype.space=void 0;function r5(t,e){const n={},i={};for(const r of t)Object.assign(n,r.property),Object.assign(i,r.normal);return new kh(n,i,e)}function M_(t){return t.toLowerCase()}class Yi{constructor(e,n){this.attribute=n,this.property=e}}Yi.prototype.attribute="";Yi.prototype.booleanish=!1;Yi.prototype.boolean=!1;Yi.prototype.commaOrSpaceSeparated=!1;Yi.prototype.commaSeparated=!1;Yi.prototype.defined=!1;Yi.prototype.mustUseProperty=!1;Yi.prototype.number=!1;Yi.prototype.overloadedBoolean=!1;Yi.prototype.property="";Yi.prototype.spaceSeparated=!1;Yi.prototype.space=void 0;let HZ=0;const dt=jl(),Rn=jl(),T_=jl(),Me=jl(),qt=jl(),fc=jl(),nr=jl();function jl(){return 2**++HZ}const E_=Object.freeze(Object.defineProperty({__proto__:null,boolean:dt,booleanish:Rn,commaOrSpaceSeparated:nr,commaSeparated:fc,number:Me,overloadedBoolean:T_,spaceSeparated:qt},Symbol.toStringTag,{value:"Module"})),s1=Object.keys(E_);class Gb extends Yi{constructor(e,n,i,r){let s=-1;if(super(e,n),uC(this,"space",r),typeof i=="number")for(;++s<s1.length;){const o=s1[s];uC(this,s1[s],(i&E_[o])===E_[o])}}}Gb.prototype.defined=!0;function uC(t,e,n){n&&(t[e]=n)}function Gc(t){const e={},n={};for(const[i,r]of Object.entries(t.properties)){const s=new Gb(i,t.transform(t.attributes||{},i),r,t.space);t.mustUseProperty&&t.mustUseProperty.includes(i)&&(s.mustUseProperty=!0),e[i]=s,n[M_(i)]=i,n[M_(s.attribute)]=i}return new kh(e,n,t.space)}const s5=Gc({properties:{ariaActiveDescendant:null,ariaAtomic:Rn,ariaAutoComplete:null,ariaBusy:Rn,ariaChecked:Rn,ariaColCount:Me,ariaColIndex:Me,ariaColSpan:Me,ariaControls:qt,ariaCurrent:null,ariaDescribedBy:qt,ariaDetails:null,ariaDisabled:Rn,ariaDropEffect:qt,ariaErrorMessage:null,ariaExpanded:Rn,ariaFlowTo:qt,ariaGrabbed:Rn,ariaHasPopup:null,ariaHidden:Rn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:qt,ariaLevel:Me,ariaLive:null,ariaModal:Rn,ariaMultiLine:Rn,ariaMultiSelectable:Rn,ariaOrientation:null,ariaOwns:qt,ariaPlaceholder:null,ariaPosInSet:Me,ariaPressed:Rn,ariaReadOnly:Rn,ariaRelevant:null,ariaRequired:Rn,ariaRoleDescription:qt,ariaRowCount:Me,ariaRowIndex:Me,ariaRowSpan:Me,ariaSelected:Rn,ariaSetSize:Me,ariaSort:null,ariaValueMax:Me,ariaValueMin:Me,ariaValueNow:Me,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function o5(t,e){return e in t?t[e]:e}function a5(t,e){return o5(t,e.toLowerCase())}const WZ=Gc({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:fc,acceptCharset:qt,accessKey:qt,action:null,allow:null,allowFullScreen:dt,allowPaymentRequest:dt,allowUserMedia:dt,alt:null,as:null,async:dt,autoCapitalize:null,autoComplete:qt,autoFocus:dt,autoPlay:dt,blocking:qt,capture:null,charSet:null,checked:dt,cite:null,className:qt,cols:Me,colSpan:null,content:null,contentEditable:Rn,controls:dt,controlsList:qt,coords:Me|fc,crossOrigin:null,data:null,dateTime:null,decoding:null,default:dt,defer:dt,dir:null,dirName:null,disabled:dt,download:T_,draggable:Rn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:dt,formTarget:null,headers:qt,height:Me,hidden:T_,high:Me,href:null,hrefLang:null,htmlFor:qt,httpEquiv:qt,id:null,imageSizes:null,imageSrcSet:null,inert:dt,inputMode:null,integrity:null,is:null,isMap:dt,itemId:null,itemProp:qt,itemRef:qt,itemScope:dt,itemType:qt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:dt,low:Me,manifest:null,max:null,maxLength:Me,media:null,method:null,min:null,minLength:Me,multiple:dt,muted:dt,name:null,nonce:null,noModule:dt,noValidate:dt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:dt,optimum:Me,pattern:null,ping:qt,placeholder:null,playsInline:dt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:dt,referrerPolicy:null,rel:qt,required:dt,reversed:dt,rows:Me,rowSpan:Me,sandbox:qt,scope:null,scoped:dt,seamless:dt,selected:dt,shadowRootClonable:dt,shadowRootDelegatesFocus:dt,shadowRootMode:null,shape:null,size:Me,sizes:null,slot:null,span:Me,spellCheck:Rn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Me,step:null,style:null,tabIndex:Me,target:null,title:null,translate:null,type:null,typeMustMatch:dt,useMap:null,value:Rn,width:Me,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:qt,axis:null,background:null,bgColor:null,border:Me,borderColor:null,bottomMargin:Me,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:dt,declare:dt,event:null,face:null,frame:null,frameBorder:null,hSpace:Me,leftMargin:Me,link:null,longDesc:null,lowSrc:null,marginHeight:Me,marginWidth:Me,noResize:dt,noHref:dt,noShade:dt,noWrap:dt,object:null,profile:null,prompt:null,rev:null,rightMargin:Me,rules:null,scheme:null,scrolling:Rn,standby:null,summary:null,text:null,topMargin:Me,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Me,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:dt,disableRemotePlayback:dt,prefix:null,property:null,results:Me,security:null,unselectable:null},space:"html",transform:a5}),GZ=Gc({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:nr,accentHeight:Me,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Me,amplitude:Me,arabicForm:null,ascent:Me,attributeName:null,attributeType:null,azimuth:Me,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Me,by:null,calcMode:null,capHeight:Me,className:qt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Me,diffuseConstant:Me,direction:null,display:null,dur:null,divisor:Me,dominantBaseline:null,download:dt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Me,enableBackground:null,end:null,event:null,exponent:Me,externalResourcesRequired:null,fill:null,fillOpacity:Me,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:fc,g2:fc,glyphName:fc,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Me,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Me,horizOriginX:Me,horizOriginY:Me,id:null,ideographic:Me,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Me,k:Me,k1:Me,k2:Me,k3:Me,k4:Me,kernelMatrix:nr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Me,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Me,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Me,overlineThickness:Me,paintOrder:null,panose1:null,path:null,pathLength:Me,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:qt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Me,pointsAtY:Me,pointsAtZ:Me,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:nr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:nr,rev:nr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:nr,requiredFeatures:nr,requiredFonts:nr,requiredFormats:nr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Me,specularExponent:Me,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Me,strikethroughThickness:Me,string:null,stroke:null,strokeDashArray:nr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Me,strokeOpacity:Me,strokeWidth:null,style:null,surfaceScale:Me,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:nr,tabIndex:Me,tableValues:null,target:null,targetX:Me,targetY:Me,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:nr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Me,underlineThickness:Me,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Me,values:null,vAlphabetic:Me,vMathematical:Me,vectorEffect:null,vHanging:Me,vIdeographic:Me,version:null,vertAdvY:Me,vertOriginX:Me,vertOriginY:Me,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Me,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:o5}),l5=Gc({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),u5=Gc({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:a5}),c5=Gc({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),$Z={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},jZ=/[A-Z]/g,cC=/-[a-z]/g,XZ=/^data[-\w.:]+$/i;function qZ(t,e){const n=M_(e);let i=e,r=Yi;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&XZ.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(cC,ZZ);i="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!cC.test(s)){let o=s.replace(jZ,YZ);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}r=Gb}return new r(i,e)}function YZ(t){return"-"+t.toLowerCase()}function ZZ(t){return t.charAt(1).toUpperCase()}const JZ=r5([s5,WZ,l5,u5,c5],"html"),$b=r5([s5,GZ,l5,u5,c5],"svg");function KZ(t){return t.join(" ").trim()}var jb={},fC=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,QZ=/\n/g,eJ=/^\s*/,tJ=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,nJ=/^:\s*/,iJ=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,rJ=/^[;\s]*/,sJ=/^\s+|\s+$/g,oJ=`
`,dC="/",hC="*",tl="",aJ="comment",lJ="declaration",uJ=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,i=1;function r(g){var y=g.match(QZ);y&&(n+=y.length);var w=g.lastIndexOf(oJ);i=~w?g.length-w:i+g.length}function s(){var g={line:n,column:i};return function(y){return y.position=new o(g),u(),y}}function o(g){this.start=g,this.end={line:n,column:i},this.source=e.source}o.prototype.content=t;function a(g){var y=new Error(e.source+":"+n+":"+i+": "+g);if(y.reason=g,y.filename=e.source,y.line=n,y.column=i,y.source=t,!e.silent)throw y}function l(g){var y=g.exec(t);if(y){var w=y[0];return r(w),t=t.slice(w.length),y}}function u(){l(eJ)}function f(g){var y;for(g=g||[];y=d();)y!==!1&&g.push(y);return g}function d(){var g=s();if(!(dC!=t.charAt(0)||hC!=t.charAt(1))){for(var y=2;tl!=t.charAt(y)&&(hC!=t.charAt(y)||dC!=t.charAt(y+1));)++y;if(y+=2,tl===t.charAt(y-1))return a("End of comment missing");var w=t.slice(2,y-2);return i+=2,r(w),t=t.slice(y),i+=2,g({type:aJ,comment:w})}}function p(){var g=s(),y=l(tJ);if(y){if(d(),!l(nJ))return a("property missing ':'");var w=l(iJ),v=g({type:lJ,property:pC(y[0].replace(fC,tl)),value:w?pC(w[0].replace(fC,tl)):tl});return l(rJ),v}}function m(){var g=[];f(g);for(var y;y=p();)y!==!1&&(g.push(y),f(g));return g}return u(),m()};function pC(t){return t?t.replace(sJ,tl):tl}var cJ=wg&&wg.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jb,"__esModule",{value:!0});jb.default=dJ;var fJ=cJ(uJ);function dJ(t,e){var n=null;if(!t||typeof t!="string")return n;var i=(0,fJ.default)(t),r=typeof e=="function";return i.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;r?e(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var hy={};Object.defineProperty(hy,"__esModule",{value:!0});hy.camelCase=void 0;var hJ=/^--[a-zA-Z0-9_-]+$/,pJ=/-([a-z])/g,mJ=/^[^-]+$/,gJ=/^-(webkit|moz|ms|o|khtml)-/,yJ=/^-(ms)-/,xJ=function(t){return!t||mJ.test(t)||hJ.test(t)},vJ=function(t,e){return e.toUpperCase()},mC=function(t,e){return"".concat(e,"-")},wJ=function(t,e){return e===void 0&&(e={}),xJ(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(yJ,mC):t=t.replace(gJ,mC),t.replace(pJ,vJ))};hy.camelCase=wJ;var _J=wg&&wg.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},SJ=_J(jb),bJ=hy;function k_(t,e){var n={};return!t||typeof t!="string"||(0,SJ.default)(t,function(i,r){i&&r&&(n[(0,bJ.camelCase)(i,e)]=r)}),n}k_.default=k_;var MJ=k_;const TJ=Zd(MJ),f5=d5("end"),Xb=d5("start");function d5(t){return e;function e(n){const i=n&&n.position&&n.position[t]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function EJ(t){const e=Xb(t),n=f5(t);if(e&&n)return{start:e,end:n}}function od(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?gC(t.position):"start"in t||"end"in t?gC(t):"line"in t||"column"in t?C_(t):""}function C_(t){return yC(t&&t.line)+":"+yC(t&&t.column)}function gC(t){return C_(t&&t.start)+"-"+C_(t&&t.end)}function yC(t){return t&&typeof t=="number"?t:1}class gi extends Error{constructor(e,n,i){super(),typeof n=="string"&&(i=n,n=void 0);let r="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?r=e:!s.cause&&e&&(o=!0,r=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof i=="string"){const l=i.indexOf(":");l===-1?s.ruleId=i:(s.source=i.slice(0,l),s.ruleId=i.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=a?a.line:void 0,this.name=od(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}gi.prototype.file="";gi.prototype.name="";gi.prototype.reason="";gi.prototype.message="";gi.prototype.stack="";gi.prototype.column=void 0;gi.prototype.line=void 0;gi.prototype.ancestors=void 0;gi.prototype.cause=void 0;gi.prototype.fatal=void 0;gi.prototype.place=void 0;gi.prototype.ruleId=void 0;gi.prototype.source=void 0;const qb={}.hasOwnProperty,kJ=new Map,CJ=/[A-Z]/g,AJ=new Set(["table","tbody","thead","tfoot","tr"]),PJ=new Set(["td","th"]),h5="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function LJ(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let i;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=BJ(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=OJ(n,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:i,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?$b:JZ,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=p5(r,t,void 0);return s&&typeof s!="string"?s:r.create(t,r.Fragment,{children:s||void 0},void 0)}function p5(t,e,n){if(e.type==="element")return RJ(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return IJ(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return zJ(t,e,n);if(e.type==="mdxjsEsm")return DJ(t,e);if(e.type==="root")return FJ(t,e,n);if(e.type==="text")return NJ(t,e)}function RJ(t,e,n){const i=t.schema;let r=i;e.tagName.toLowerCase()==="svg"&&i.space==="html"&&(r=$b,t.schema=r),t.ancestors.push(e);const s=g5(t,e.tagName,!1),o=UJ(t,e);let a=Zb(t,e);return AJ.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!VZ(l):!0})),m5(t,o,s,e),Yb(o,a),t.ancestors.pop(),t.schema=i,t.create(e,s,o,n)}function IJ(t,e){if(e.data&&e.data.estree&&t.evaluater){const i=e.data.estree.body[0];return i.type,t.evaluater.evaluateExpression(i.expression)}qd(t,e.position)}function DJ(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);qd(t,e.position)}function zJ(t,e,n){const i=t.schema;let r=i;e.name==="svg"&&i.space==="html"&&(r=$b,t.schema=r),t.ancestors.push(e);const s=e.name===null?t.Fragment:g5(t,e.name,!0),o=VJ(t,e),a=Zb(t,e);return m5(t,o,s,e),Yb(o,a),t.ancestors.pop(),t.schema=i,t.create(e,s,o,n)}function FJ(t,e,n){const i={};return Yb(i,Zb(t,e)),t.create(e,t.Fragment,i,n)}function NJ(t,e){return e.value}function m5(t,e,n,i){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=i)}function Yb(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function OJ(t,e,n){return i;function i(r,s,o,a){const u=Array.isArray(o.children)?n:e;return a?u(s,o,a):u(s,o)}}function BJ(t,e){return n;function n(i,r,s,o){const a=Array.isArray(s.children),l=Xb(i);return e(r,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function UJ(t,e){const n={};let i,r;for(r in e.properties)if(r!=="children"&&qb.call(e.properties,r)){const s=HJ(t,r,e.properties[r]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&PJ.has(e.tagName)?i=a:n[o]=a}}if(i){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return n}function VJ(t,e){const n={};for(const i of e.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&t.evaluater){const s=i.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else qd(t,e.position);else{const r=i.name;let s;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&t.evaluater){const a=i.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else qd(t,e.position);else s=i.value===null?!0:i.value;n[r]=s}return n}function Zb(t,e){const n=[];let i=-1;const r=t.passKeys?new Map:kJ;for(;++i<e.children.length;){const s=e.children[i];let o;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const u=r.get(l)||0;o=l+"-"+u,r.set(l,u+1)}}const a=p5(t,s,o);a!==void 0&&n.push(a)}return n}function HJ(t,e,n){const i=qZ(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?FZ(n):KZ(n)),i.property==="style"){let r=typeof n=="object"?n:WJ(t,String(n));return t.stylePropertyNameCase==="css"&&(r=GJ(r)),["style",r]}return[t.elementAttributeNameCase==="react"&&i.space?$Z[i.property]||i.property:i.attribute,n]}}function WJ(t,e){try{return TJ(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const i=n,r=new gi("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=t.filePath||void 0,r.url=h5+"#cannot-parse-style-attribute",r}}function g5(t,e,n){let i;if(!n)i={type:"Literal",value:e};else if(e.includes(".")){const r=e.split(".");let s=-1,o;for(;++s<r.length;){const a=aC(r[s])?{type:"Identifier",name:r[s]}:{type:"Literal",value:r[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}i=o}else i=aC(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(i.type==="Literal"){const r=i.value;return qb.call(t.components,r)?t.components[r]:r}if(t.evaluater)return t.evaluater.evaluateExpression(i);qd(t)}function qd(t,e){const n=new gi("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=h5+"#cannot-handle-mdx-estrees-without-createevaluater",n}function GJ(t){const e={};let n;for(n in t)qb.call(t,n)&&(e[$J(n)]=t[n]);return e}function $J(t){let e=t.replace(CJ,jJ);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function jJ(t){return"-"+t.toLowerCase()}const o1={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},XJ={};function Jb(t,e){const n=e||XJ,i=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,r=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return y5(t,i,r)}function y5(t,e,n){if(qJ(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return xC(t.children,e,n)}return Array.isArray(t)?xC(t,e,n):""}function xC(t,e,n){const i=[];let r=-1;for(;++r<t.length;)i[r]=y5(t[r],e,n);return i.join("")}function qJ(t){return!!(t&&typeof t=="object")}const vC=document.createElement("i");function Kb(t){const e="&"+t+";";vC.innerHTML=e;const n=vC.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function ar(t,e,n,i){const r=t.length;let s=0,o;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,n=n>0?n:0,i.length<1e4)o=Array.from(i),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<i.length;)o=i.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function zr(t,e){return t.length>0?(ar(t,t.length,0,e),t):e}const wC={}.hasOwnProperty;function x5(t){const e={};let n=-1;for(;++n<t.length;)YJ(e,t[n]);return e}function YJ(t,e){let n;for(n in e){const r=(wC.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){wC.call(r,o)||(r[o]=[]);const a=s[o];ZJ(r[o],Array.isArray(a)?a:a?[a]:[])}}}function ZJ(t,e){let n=-1;const i=[];for(;++n<e.length;)(e[n].add==="after"?t:i).push(e[n]);ar(t,0,0,i)}function v5(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function as(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Mi=Ea(/[A-Za-z]/),pi=Ea(/[\dA-Za-z]/),JJ=Ea(/[#-'*+\--9=?A-Z^-~]/);function h0(t){return t!==null&&(t<32||t===127)}const A_=Ea(/\d/),KJ=Ea(/[\dA-Fa-f]/),QJ=Ea(/[!-/:-@[-`{-~]/);function nt(t){return t!==null&&t<-2}function Xt(t){return t!==null&&(t<0||t===32)}function St(t){return t===-2||t===-1||t===32}const py=Ea(/\p{P}|\p{S}/u),Il=Ea(/\s/);function Ea(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function $c(t){const e=[];let n=-1,i=0,r=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&pi(t.charCodeAt(n+1))&&pi(t.charCodeAt(n+2)))r=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),r=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(i,n),encodeURIComponent(o)),i=n+r+1,o=""),r&&(n+=r,r=0)}return e.join("")+t.slice(i)}function Pt(t,e,n,i){const r=i?i-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return St(l)?(t.enter(n),a(l)):e(l)}function a(l){return St(l)&&s++<r?(t.consume(l),a):(t.exit(n),e(l))}}const eK={tokenize:tK};function tK(t){const e=t.attempt(this.parser.constructs.contentInitial,i,r);let n;return e;function i(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Pt(t,e,"linePrefix")}function r(a){return t.enter("paragraph"),s(a)}function s(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return nt(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const nK={tokenize:iK},_C={tokenize:rK};function iK(t){const e=this,n=[];let i=0,r,s,o;return a;function a(b){if(i<n.length){const M=n[i];return e.containerState=M[1],t.attempt(M[0].continuation,l,u)(b)}return u(b)}function l(b){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&_();const M=e.events.length;let k=M,E;for(;k--;)if(e.events[k][0]==="exit"&&e.events[k][1].type==="chunkFlow"){E=e.events[k][1].end;break}v(i);let I=M;for(;I<e.events.length;)e.events[I][1].end={...E},I++;return ar(e.events,k+1,0,e.events.slice(M)),e.events.length=I,u(b)}return a(b)}function u(b){if(i===n.length){if(!r)return p(b);if(r.currentConstruct&&r.currentConstruct.concrete)return g(b);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(_C,f,d)(b)}function f(b){return r&&_(),v(i),p(b)}function d(b){return e.parser.lazy[e.now().line]=i!==n.length,o=e.now().offset,g(b)}function p(b){return e.containerState={},t.attempt(_C,m,g)(b)}function m(b){return i++,n.push([e.currentConstruct,e.containerState]),p(b)}function g(b){if(b===null){r&&_(),v(0),t.consume(b);return}return r=r||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:s}),y(b)}function y(b){if(b===null){w(t.exit("chunkFlow"),!0),v(0),t.consume(b);return}return nt(b)?(t.consume(b),w(t.exit("chunkFlow")),i=0,e.interrupt=void 0,a):(t.consume(b),y)}function w(b,M){const k=e.sliceStream(b);if(M&&k.push(null),b.previous=s,s&&(s.next=b),s=b,r.defineSkip(b.start),r.write(k),e.parser.lazy[b.start.line]){let E=r.events.length;for(;E--;)if(r.events[E][1].start.offset<o&&(!r.events[E][1].end||r.events[E][1].end.offset>o))return;const I=e.events.length;let C=I,L,R;for(;C--;)if(e.events[C][0]==="exit"&&e.events[C][1].type==="chunkFlow"){if(L){R=e.events[C][1].end;break}L=!0}for(v(i),E=I;E<e.events.length;)e.events[E][1].end={...R},E++;ar(e.events,C+1,0,e.events.slice(I)),e.events.length=E}}function v(b){let M=n.length;for(;M-- >b;){const k=n[M];e.containerState=k[1],k[0].exit.call(e,t)}n.length=b}function _(){r.write([null]),s=void 0,r=void 0,e.containerState._closeFlow=void 0}}function rK(t,e,n){return Pt(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Rc(t){if(t===null||Xt(t)||Il(t))return 1;if(py(t))return 2}function my(t,e,n){const i=[];let r=-1;for(;++r<t.length;){const s=t[r].resolveAll;s&&!i.includes(s)&&(e=s(e,n),i.push(s))}return e}const P_={name:"attention",resolveAll:sK,tokenize:oK};function sK(t,e){let n=-1,i,r,s,o,a,l,u,f;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(i=n;i--;)if(t[i][0]==="exit"&&t[i][1].type==="attentionSequence"&&t[i][1]._open&&e.sliceSerialize(t[i][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[i][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[i][1].end.offset-t[i][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[i][1].end.offset-t[i][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const d={...t[i][1].end},p={...t[n][1].start};SC(d,-l),SC(p,l),o={type:l>1?"strongSequence":"emphasisSequence",start:d,end:{...t[i][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:p},s={type:l>1?"strongText":"emphasisText",start:{...t[i][1].end},end:{...t[n][1].start}},r={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[i][1].end={...o.start},t[n][1].start={...a.end},u=[],t[i][1].end.offset-t[i][1].start.offset&&(u=zr(u,[["enter",t[i][1],e],["exit",t[i][1],e]])),u=zr(u,[["enter",r,e],["enter",o,e],["exit",o,e],["enter",s,e]]),u=zr(u,my(e.parser.constructs.insideSpan.null,t.slice(i+1,n),e)),u=zr(u,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",r,e]]),t[n][1].end.offset-t[n][1].start.offset?(f=2,u=zr(u,[["enter",t[n][1],e],["exit",t[n][1],e]])):f=0,ar(t,i-1,n-i+3,u),n=i+u.length-f-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function oK(t,e){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,r=Rc(i);let s;return o;function o(l){return s=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===s)return t.consume(l),a;const u=t.exit("attentionSequence"),f=Rc(l),d=!f||f===2&&r||n.includes(l),p=!r||r===2&&f||n.includes(i);return u._open=!!(s===42?d:d&&(r||!p)),u._close=!!(s===42?p:p&&(f||!d)),e(l)}}function SC(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const aK={name:"autolink",tokenize:lK};function lK(t,e,n){let i=0;return r;function r(m){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(m),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(m){return Mi(m)?(t.consume(m),o):m===64?n(m):u(m)}function o(m){return m===43||m===45||m===46||pi(m)?(i=1,a(m)):u(m)}function a(m){return m===58?(t.consume(m),i=0,l):(m===43||m===45||m===46||pi(m))&&i++<32?(t.consume(m),a):(i=0,u(m))}function l(m){return m===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(m),t.exit("autolinkMarker"),t.exit("autolink"),e):m===null||m===32||m===60||h0(m)?n(m):(t.consume(m),l)}function u(m){return m===64?(t.consume(m),f):JJ(m)?(t.consume(m),u):n(m)}function f(m){return pi(m)?d(m):n(m)}function d(m){return m===46?(t.consume(m),i=0,f):m===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(m),t.exit("autolinkMarker"),t.exit("autolink"),e):p(m)}function p(m){if((m===45||pi(m))&&i++<63){const g=m===45?p:d;return t.consume(m),g}return n(m)}}const Ch={partial:!0,tokenize:uK};function uK(t,e,n){return i;function i(s){return St(s)?Pt(t,r,"linePrefix")(s):r(s)}function r(s){return s===null||nt(s)?e(s):n(s)}}const w5={continuation:{tokenize:fK},exit:dK,name:"blockQuote",tokenize:cK};function cK(t,e,n){const i=this;return r;function r(o){if(o===62){const a=i.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return St(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function fK(t,e,n){const i=this;return r;function r(o){return St(o)?Pt(t,s,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(w5,e,n)(o)}}function dK(t){t.exit("blockQuote")}const _5={name:"characterEscape",tokenize:hK};function hK(t,e,n){return i;function i(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),r}function r(s){return QJ(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const S5={name:"characterReference",tokenize:pK};function pK(t,e,n){const i=this;let r=0,s,o;return a;function a(d){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),l}function l(d){return d===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(d),t.exit("characterReferenceMarkerNumeric"),u):(t.enter("characterReferenceValue"),s=31,o=pi,f(d))}function u(d){return d===88||d===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(d),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=KJ,f):(t.enter("characterReferenceValue"),s=7,o=A_,f(d))}function f(d){if(d===59&&r){const p=t.exit("characterReferenceValue");return o===pi&&!Kb(i.sliceSerialize(p))?n(d):(t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(d)&&r++<s?(t.consume(d),f):n(d)}}const bC={partial:!0,tokenize:gK},MC={concrete:!0,name:"codeFenced",tokenize:mK};function mK(t,e,n){const i=this,r={partial:!0,tokenize:k};let s=0,o=0,a;return l;function l(E){return u(E)}function u(E){const I=i.events[i.events.length-1];return s=I&&I[1].type==="linePrefix"?I[2].sliceSerialize(I[1],!0).length:0,a=E,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),f(E)}function f(E){return E===a?(o++,t.consume(E),f):o<3?n(E):(t.exit("codeFencedFenceSequence"),St(E)?Pt(t,d,"whitespace")(E):d(E))}function d(E){return E===null||nt(E)?(t.exit("codeFencedFence"),i.interrupt?e(E):t.check(bC,y,M)(E)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),p(E))}function p(E){return E===null||nt(E)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),d(E)):St(E)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Pt(t,m,"whitespace")(E)):E===96&&E===a?n(E):(t.consume(E),p)}function m(E){return E===null||nt(E)?d(E):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),g(E))}function g(E){return E===null||nt(E)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),d(E)):E===96&&E===a?n(E):(t.consume(E),g)}function y(E){return t.attempt(r,M,w)(E)}function w(E){return t.enter("lineEnding"),t.consume(E),t.exit("lineEnding"),v}function v(E){return s>0&&St(E)?Pt(t,_,"linePrefix",s+1)(E):_(E)}function _(E){return E===null||nt(E)?t.check(bC,y,M)(E):(t.enter("codeFlowValue"),b(E))}function b(E){return E===null||nt(E)?(t.exit("codeFlowValue"),_(E)):(t.consume(E),b)}function M(E){return t.exit("codeFenced"),e(E)}function k(E,I,C){let L=0;return R;function R(W){return E.enter("lineEnding"),E.consume(W),E.exit("lineEnding"),O}function O(W){return E.enter("codeFencedFence"),St(W)?Pt(E,q,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(W):q(W)}function q(W){return W===a?(E.enter("codeFencedFenceSequence"),j(W)):C(W)}function j(W){return W===a?(L++,E.consume(W),j):L>=o?(E.exit("codeFencedFenceSequence"),St(W)?Pt(E,G,"whitespace")(W):G(W)):C(W)}function G(W){return W===null||nt(W)?(E.exit("codeFencedFence"),I(W)):C(W)}}}function gK(t,e,n){const i=this;return r;function r(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return i.parser.lazy[i.now().line]?n(o):e(o)}}const a1={name:"codeIndented",tokenize:xK},yK={partial:!0,tokenize:vK};function xK(t,e,n){const i=this;return r;function r(u){return t.enter("codeIndented"),Pt(t,s,"linePrefix",4+1)(u)}function s(u){const f=i.events[i.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?l(u):nt(u)?t.attempt(yK,o,l)(u):(t.enter("codeFlowValue"),a(u))}function a(u){return u===null||nt(u)?(t.exit("codeFlowValue"),o(u)):(t.consume(u),a)}function l(u){return t.exit("codeIndented"),e(u)}}function vK(t,e,n){const i=this;return r;function r(o){return i.parser.lazy[i.now().line]?n(o):nt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),r):Pt(t,s,"linePrefix",4+1)(o)}function s(o){const a=i.events[i.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):nt(o)?r(o):n(o)}}const wK={name:"codeText",previous:SK,resolve:_K,tokenize:bK};function _K(t){let e=t.length-4,n=3,i,r;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(i=n;++i<e;)if(t[i][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(i=n-1,e++;++i<=e;)r===void 0?i!==e&&t[i][1].type!=="lineEnding"&&(r=i):(i===e||t[i][1].type==="lineEnding")&&(t[r][1].type="codeTextData",i!==r+2&&(t[r][1].end=t[i-1][1].end,t.splice(r+2,i-r-2),e-=i-r-2,i=r+2),r=void 0);return t}function SK(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function bK(t,e,n){let i=0,r,s;return o;function o(d){return t.enter("codeText"),t.enter("codeTextSequence"),a(d)}function a(d){return d===96?(t.consume(d),i++,a):(t.exit("codeTextSequence"),l(d))}function l(d){return d===null?n(d):d===32?(t.enter("space"),t.consume(d),t.exit("space"),l):d===96?(s=t.enter("codeTextSequence"),r=0,f(d)):nt(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),l):(t.enter("codeTextData"),u(d))}function u(d){return d===null||d===32||d===96||nt(d)?(t.exit("codeTextData"),l(d)):(t.consume(d),u)}function f(d){return d===96?(t.consume(d),r++,f):r===i?(t.exit("codeTextSequence"),t.exit("codeText"),e(d)):(s.type="codeTextData",u(d))}}class MK{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const i=n??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,n,i){const r=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return i&&If(this.left,i),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),If(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),If(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);If(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);If(this.left,n.reverse())}}}function If(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function b5(t){const e={};let n=-1,i,r,s,o,a,l,u;const f=new MK(t);for(;++n<f.length;){for(;n in e;)n=e[n];if(i=f.get(n),n&&i[1].type==="chunkFlow"&&f.get(n-1)[1].type==="listItemPrefix"&&(l=i[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,TK(f,n)),n=e[n],u=!0);else if(i[1]._container){for(s=n,r=void 0;s--;)if(o=f.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(r&&(f.get(r)[1].type="lineEndingBlank"),o[1].type="lineEnding",r=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;r&&(i[1].end={...f.get(r)[1].start},a=f.slice(r,n),a.unshift(i),f.splice(r,n-r+1,a))}}return ar(t,0,Number.POSITIVE_INFINITY,f.slice(0)),!u}function TK(t,e){const n=t.get(e)[1],i=t.get(e)[2];let r=e-1;const s=[];let o=n._tokenizer;o||(o=i.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],u={};let f,d,p=-1,m=n,g=0,y=0;const w=[y];for(;m;){for(;t.get(++r)[1]!==m;);s.push(r),m._tokenizer||(f=i.sliceStream(m),m.next||f.push(null),d&&o.defineSkip(m.start),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(f),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=m,m=m.next}for(m=n;++p<a.length;)a[p][0]==="exit"&&a[p-1][0]==="enter"&&a[p][1].type===a[p-1][1].type&&a[p][1].start.line!==a[p][1].end.line&&(y=p+1,w.push(y),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(o.events=[],m?(m._tokenizer=void 0,m.previous=void 0):w.pop(),p=w.length;p--;){const v=a.slice(w[p],w[p+1]),_=s.pop();l.push([_,_+v.length-1]),t.splice(_,2,v)}for(l.reverse(),p=-1;++p<l.length;)u[g+l[p][0]]=g+l[p][1],g+=l[p][1]-l[p][0]-1;return u}const EK={resolve:CK,tokenize:AK},kK={partial:!0,tokenize:PK};function CK(t){return b5(t),t}function AK(t,e){let n;return i;function i(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),r(a)}function r(a){return a===null?s(a):nt(a)?t.check(kK,o,s)(a):(t.consume(a),r)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}function PK(t,e,n){const i=this;return r;function r(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Pt(t,s,"linePrefix")}function s(o){if(o===null||nt(o))return n(o);const a=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(i.parser.constructs.flow,n,e)(o)}}function M5(t,e,n,i,r,s,o,a,l){const u=l||Number.POSITIVE_INFINITY;let f=0;return d;function d(v){return v===60?(t.enter(i),t.enter(r),t.enter(s),t.consume(v),t.exit(s),p):v===null||v===32||v===41||h0(v)?n(v):(t.enter(i),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),y(v))}function p(v){return v===62?(t.enter(s),t.consume(v),t.exit(s),t.exit(r),t.exit(i),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),m(v))}function m(v){return v===62?(t.exit("chunkString"),t.exit(a),p(v)):v===null||v===60||nt(v)?n(v):(t.consume(v),v===92?g:m)}function g(v){return v===60||v===62||v===92?(t.consume(v),m):m(v)}function y(v){return!f&&(v===null||v===41||Xt(v))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(i),e(v)):f<u&&v===40?(t.consume(v),f++,y):v===41?(t.consume(v),f--,y):v===null||v===32||v===40||h0(v)?n(v):(t.consume(v),v===92?w:y)}function w(v){return v===40||v===41||v===92?(t.consume(v),y):y(v)}}function T5(t,e,n,i,r,s){const o=this;let a=0,l;return u;function u(m){return t.enter(i),t.enter(r),t.consume(m),t.exit(r),t.enter(s),f}function f(m){return a>999||m===null||m===91||m===93&&!l||m===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(m):m===93?(t.exit(s),t.enter(r),t.consume(m),t.exit(r),t.exit(i),e):nt(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),f):(t.enter("chunkString",{contentType:"string"}),d(m))}function d(m){return m===null||m===91||m===93||nt(m)||a++>999?(t.exit("chunkString"),f(m)):(t.consume(m),l||(l=!St(m)),m===92?p:d)}function p(m){return m===91||m===92||m===93?(t.consume(m),a++,d):d(m)}}function E5(t,e,n,i,r,s){let o;return a;function a(p){return p===34||p===39||p===40?(t.enter(i),t.enter(r),t.consume(p),t.exit(r),o=p===40?41:p,l):n(p)}function l(p){return p===o?(t.enter(r),t.consume(p),t.exit(r),t.exit(i),e):(t.enter(s),u(p))}function u(p){return p===o?(t.exit(s),l(o)):p===null?n(p):nt(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),Pt(t,u,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),f(p))}function f(p){return p===o||p===null||nt(p)?(t.exit("chunkString"),u(p)):(t.consume(p),p===92?d:f)}function d(p){return p===o||p===92?(t.consume(p),f):f(p)}}function ad(t,e){let n;return i;function i(r){return nt(r)?(t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),n=!0,i):St(r)?Pt(t,i,n?"linePrefix":"lineSuffix")(r):e(r)}}const LK={name:"definition",tokenize:IK},RK={partial:!0,tokenize:DK};function IK(t,e,n){const i=this;let r;return s;function s(m){return t.enter("definition"),o(m)}function o(m){return T5.call(i,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(m)}function a(m){return r=as(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),m===58?(t.enter("definitionMarker"),t.consume(m),t.exit("definitionMarker"),l):n(m)}function l(m){return Xt(m)?ad(t,u)(m):u(m)}function u(m){return M5(t,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(m)}function f(m){return t.attempt(RK,d,d)(m)}function d(m){return St(m)?Pt(t,p,"whitespace")(m):p(m)}function p(m){return m===null||nt(m)?(t.exit("definition"),i.parser.defined.push(r),e(m)):n(m)}}function DK(t,e,n){return i;function i(a){return Xt(a)?ad(t,r)(a):n(a)}function r(a){return E5(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return St(a)?Pt(t,o,"whitespace")(a):o(a)}function o(a){return a===null||nt(a)?e(a):n(a)}}const zK={name:"hardBreakEscape",tokenize:FK};function FK(t,e,n){return i;function i(s){return t.enter("hardBreakEscape"),t.consume(s),r}function r(s){return nt(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const NK={name:"headingAtx",resolve:OK,tokenize:BK};function OK(t,e){let n=t.length-2,i=3,r,s;return t[i][1].type==="whitespace"&&(i+=2),n-2>i&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(i===n-1||n-4>i&&t[n-2][1].type==="whitespace")&&(n-=i+1===n?2:4),n>i&&(r={type:"atxHeadingText",start:t[i][1].start,end:t[n][1].end},s={type:"chunkText",start:t[i][1].start,end:t[n][1].end,contentType:"text"},ar(t,i,n-i+1,[["enter",r,e],["enter",s,e],["exit",s,e],["exit",r,e]])),t}function BK(t,e,n){let i=0;return r;function r(f){return t.enter("atxHeading"),s(f)}function s(f){return t.enter("atxHeadingSequence"),o(f)}function o(f){return f===35&&i++<6?(t.consume(f),o):f===null||Xt(f)?(t.exit("atxHeadingSequence"),a(f)):n(f)}function a(f){return f===35?(t.enter("atxHeadingSequence"),l(f)):f===null||nt(f)?(t.exit("atxHeading"),e(f)):St(f)?Pt(t,a,"whitespace")(f):(t.enter("atxHeadingText"),u(f))}function l(f){return f===35?(t.consume(f),l):(t.exit("atxHeadingSequence"),a(f))}function u(f){return f===null||f===35||Xt(f)?(t.exit("atxHeadingText"),a(f)):(t.consume(f),u)}}const UK=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],TC=["pre","script","style","textarea"],VK={concrete:!0,name:"htmlFlow",resolveTo:GK,tokenize:$K},HK={partial:!0,tokenize:XK},WK={partial:!0,tokenize:jK};function GK(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function $K(t,e,n){const i=this;let r,s,o,a,l;return u;function u(z){return f(z)}function f(z){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(z),d}function d(z){return z===33?(t.consume(z),p):z===47?(t.consume(z),s=!0,y):z===63?(t.consume(z),r=3,i.interrupt?e:A):Mi(z)?(t.consume(z),o=String.fromCharCode(z),w):n(z)}function p(z){return z===45?(t.consume(z),r=2,m):z===91?(t.consume(z),r=5,a=0,g):Mi(z)?(t.consume(z),r=4,i.interrupt?e:A):n(z)}function m(z){return z===45?(t.consume(z),i.interrupt?e:A):n(z)}function g(z){const xe="CDATA[";return z===xe.charCodeAt(a++)?(t.consume(z),a===xe.length?i.interrupt?e:q:g):n(z)}function y(z){return Mi(z)?(t.consume(z),o=String.fromCharCode(z),w):n(z)}function w(z){if(z===null||z===47||z===62||Xt(z)){const xe=z===47,Ce=o.toLowerCase();return!xe&&!s&&TC.includes(Ce)?(r=1,i.interrupt?e(z):q(z)):UK.includes(o.toLowerCase())?(r=6,xe?(t.consume(z),v):i.interrupt?e(z):q(z)):(r=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(z):s?_(z):b(z))}return z===45||pi(z)?(t.consume(z),o+=String.fromCharCode(z),w):n(z)}function v(z){return z===62?(t.consume(z),i.interrupt?e:q):n(z)}function _(z){return St(z)?(t.consume(z),_):R(z)}function b(z){return z===47?(t.consume(z),R):z===58||z===95||Mi(z)?(t.consume(z),M):St(z)?(t.consume(z),b):R(z)}function M(z){return z===45||z===46||z===58||z===95||pi(z)?(t.consume(z),M):k(z)}function k(z){return z===61?(t.consume(z),E):St(z)?(t.consume(z),k):b(z)}function E(z){return z===null||z===60||z===61||z===62||z===96?n(z):z===34||z===39?(t.consume(z),l=z,I):St(z)?(t.consume(z),E):C(z)}function I(z){return z===l?(t.consume(z),l=null,L):z===null||nt(z)?n(z):(t.consume(z),I)}function C(z){return z===null||z===34||z===39||z===47||z===60||z===61||z===62||z===96||Xt(z)?k(z):(t.consume(z),C)}function L(z){return z===47||z===62||St(z)?b(z):n(z)}function R(z){return z===62?(t.consume(z),O):n(z)}function O(z){return z===null||nt(z)?q(z):St(z)?(t.consume(z),O):n(z)}function q(z){return z===45&&r===2?(t.consume(z),J):z===60&&r===1?(t.consume(z),re):z===62&&r===4?(t.consume(z),X):z===63&&r===3?(t.consume(z),A):z===93&&r===5?(t.consume(z),F):nt(z)&&(r===6||r===7)?(t.exit("htmlFlowData"),t.check(HK,Y,j)(z)):z===null||nt(z)?(t.exit("htmlFlowData"),j(z)):(t.consume(z),q)}function j(z){return t.check(WK,G,Y)(z)}function G(z){return t.enter("lineEnding"),t.consume(z),t.exit("lineEnding"),W}function W(z){return z===null||nt(z)?j(z):(t.enter("htmlFlowData"),q(z))}function J(z){return z===45?(t.consume(z),A):q(z)}function re(z){return z===47?(t.consume(z),o="",D):q(z)}function D(z){if(z===62){const xe=o.toLowerCase();return TC.includes(xe)?(t.consume(z),X):q(z)}return Mi(z)&&o.length<8?(t.consume(z),o+=String.fromCharCode(z),D):q(z)}function F(z){return z===93?(t.consume(z),A):q(z)}function A(z){return z===62?(t.consume(z),X):z===45&&r===2?(t.consume(z),A):q(z)}function X(z){return z===null||nt(z)?(t.exit("htmlFlowData"),Y(z)):(t.consume(z),X)}function Y(z){return t.exit("htmlFlow"),e(z)}}function jK(t,e,n){const i=this;return r;function r(o){return nt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return i.parser.lazy[i.now().line]?n(o):e(o)}}function XK(t,e,n){return i;function i(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),t.attempt(Ch,e,n)}}const qK={name:"htmlText",tokenize:YK};function YK(t,e,n){const i=this;let r,s,o;return a;function a(A){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(A),l}function l(A){return A===33?(t.consume(A),u):A===47?(t.consume(A),k):A===63?(t.consume(A),b):Mi(A)?(t.consume(A),C):n(A)}function u(A){return A===45?(t.consume(A),f):A===91?(t.consume(A),s=0,g):Mi(A)?(t.consume(A),_):n(A)}function f(A){return A===45?(t.consume(A),m):n(A)}function d(A){return A===null?n(A):A===45?(t.consume(A),p):nt(A)?(o=d,re(A)):(t.consume(A),d)}function p(A){return A===45?(t.consume(A),m):d(A)}function m(A){return A===62?J(A):A===45?p(A):d(A)}function g(A){const X="CDATA[";return A===X.charCodeAt(s++)?(t.consume(A),s===X.length?y:g):n(A)}function y(A){return A===null?n(A):A===93?(t.consume(A),w):nt(A)?(o=y,re(A)):(t.consume(A),y)}function w(A){return A===93?(t.consume(A),v):y(A)}function v(A){return A===62?J(A):A===93?(t.consume(A),v):y(A)}function _(A){return A===null||A===62?J(A):nt(A)?(o=_,re(A)):(t.consume(A),_)}function b(A){return A===null?n(A):A===63?(t.consume(A),M):nt(A)?(o=b,re(A)):(t.consume(A),b)}function M(A){return A===62?J(A):b(A)}function k(A){return Mi(A)?(t.consume(A),E):n(A)}function E(A){return A===45||pi(A)?(t.consume(A),E):I(A)}function I(A){return nt(A)?(o=I,re(A)):St(A)?(t.consume(A),I):J(A)}function C(A){return A===45||pi(A)?(t.consume(A),C):A===47||A===62||Xt(A)?L(A):n(A)}function L(A){return A===47?(t.consume(A),J):A===58||A===95||Mi(A)?(t.consume(A),R):nt(A)?(o=L,re(A)):St(A)?(t.consume(A),L):J(A)}function R(A){return A===45||A===46||A===58||A===95||pi(A)?(t.consume(A),R):O(A)}function O(A){return A===61?(t.consume(A),q):nt(A)?(o=O,re(A)):St(A)?(t.consume(A),O):L(A)}function q(A){return A===null||A===60||A===61||A===62||A===96?n(A):A===34||A===39?(t.consume(A),r=A,j):nt(A)?(o=q,re(A)):St(A)?(t.consume(A),q):(t.consume(A),G)}function j(A){return A===r?(t.consume(A),r=void 0,W):A===null?n(A):nt(A)?(o=j,re(A)):(t.consume(A),j)}function G(A){return A===null||A===34||A===39||A===60||A===61||A===96?n(A):A===47||A===62||Xt(A)?L(A):(t.consume(A),G)}function W(A){return A===47||A===62||Xt(A)?L(A):n(A)}function J(A){return A===62?(t.consume(A),t.exit("htmlTextData"),t.exit("htmlText"),e):n(A)}function re(A){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(A),t.exit("lineEnding"),D}function D(A){return St(A)?Pt(t,F,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(A):F(A)}function F(A){return t.enter("htmlTextData"),o(A)}}const Qb={name:"labelEnd",resolveAll:QK,resolveTo:eQ,tokenize:tQ},ZK={tokenize:nQ},JK={tokenize:iQ},KK={tokenize:rQ};function QK(t){let e=-1;const n=[];for(;++e<t.length;){const i=t[e][1];if(n.push(t[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const r=i.type==="labelImage"?4:2;i.type="data",e+=r}}return t.length!==n.length&&ar(t,0,t.length,n),t}function eQ(t,e){let n=t.length,i=0,r,s,o,a;for(;n--;)if(r=t[n][1],s){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;t[n][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(s=n,r.type!=="labelLink")){i=2;break}}else r.type==="labelEnd"&&(o=n);const l={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},u={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},f={type:"labelText",start:{...t[s+i+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",u,e]],a=zr(a,t.slice(s+1,s+i+3)),a=zr(a,[["enter",f,e]]),a=zr(a,my(e.parser.constructs.insideSpan.null,t.slice(s+i+4,o-3),e)),a=zr(a,[["exit",f,e],t[o-2],t[o-1],["exit",u,e]]),a=zr(a,t.slice(o+1)),a=zr(a,[["exit",l,e]]),ar(t,s,t.length,a),t}function tQ(t,e,n){const i=this;let r=i.events.length,s,o;for(;r--;)if((i.events[r][1].type==="labelImage"||i.events[r][1].type==="labelLink")&&!i.events[r][1]._balanced){s=i.events[r][1];break}return a;function a(p){return s?s._inactive?d(p):(o=i.parser.defined.includes(as(i.sliceSerialize({start:s.end,end:i.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(p),t.exit("labelMarker"),t.exit("labelEnd"),l):n(p)}function l(p){return p===40?t.attempt(ZK,f,o?f:d)(p):p===91?t.attempt(JK,f,o?u:d)(p):o?f(p):d(p)}function u(p){return t.attempt(KK,f,d)(p)}function f(p){return e(p)}function d(p){return s._balanced=!0,n(p)}}function nQ(t,e,n){return i;function i(d){return t.enter("resource"),t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),r}function r(d){return Xt(d)?ad(t,s)(d):s(d)}function s(d){return d===41?f(d):M5(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return Xt(d)?ad(t,l)(d):f(d)}function a(d){return n(d)}function l(d){return d===34||d===39||d===40?E5(t,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):f(d)}function u(d){return Xt(d)?ad(t,f)(d):f(d)}function f(d){return d===41?(t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),t.exit("resource"),e):n(d)}}function iQ(t,e,n){const i=this;return r;function r(a){return T5.call(i,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return i.parser.defined.includes(as(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function rQ(t,e,n){return i;function i(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),r}function r(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const sQ={name:"labelStartImage",resolveAll:Qb.resolveAll,tokenize:oQ};function oQ(t,e,n){const i=this;return r;function r(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(a):e(a)}}const aQ={name:"labelStartLink",resolveAll:Qb.resolveAll,tokenize:lQ};function lQ(t,e,n){const i=this;return r;function r(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(o):e(o)}}const l1={name:"lineEnding",tokenize:uQ};function uQ(t,e){return n;function n(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),Pt(t,e,"linePrefix")}}const xg={name:"thematicBreak",tokenize:cQ};function cQ(t,e,n){let i=0,r;return s;function s(u){return t.enter("thematicBreak"),o(u)}function o(u){return r=u,a(u)}function a(u){return u===r?(t.enter("thematicBreakSequence"),l(u)):i>=3&&(u===null||nt(u))?(t.exit("thematicBreak"),e(u)):n(u)}function l(u){return u===r?(t.consume(u),i++,l):(t.exit("thematicBreakSequence"),St(u)?Pt(t,a,"whitespace")(u):a(u))}}const Oi={continuation:{tokenize:pQ},exit:gQ,name:"list",tokenize:hQ},fQ={partial:!0,tokenize:yQ},dQ={partial:!0,tokenize:mQ};function hQ(t,e,n){const i=this,r=i.events[i.events.length-1];let s=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,o=0;return a;function a(m){const g=i.containerState.type||(m===42||m===43||m===45?"listUnordered":"listOrdered");if(g==="listUnordered"?!i.containerState.marker||m===i.containerState.marker:A_(m)){if(i.containerState.type||(i.containerState.type=g,t.enter(g,{_container:!0})),g==="listUnordered")return t.enter("listItemPrefix"),m===42||m===45?t.check(xg,n,u)(m):u(m);if(!i.interrupt||m===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(m)}return n(m)}function l(m){return A_(m)&&++o<10?(t.consume(m),l):(!i.interrupt||o<2)&&(i.containerState.marker?m===i.containerState.marker:m===41||m===46)?(t.exit("listItemValue"),u(m)):n(m)}function u(m){return t.enter("listItemMarker"),t.consume(m),t.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||m,t.check(Ch,i.interrupt?n:f,t.attempt(fQ,p,d))}function f(m){return i.containerState.initialBlankLine=!0,s++,p(m)}function d(m){return St(m)?(t.enter("listItemPrefixWhitespace"),t.consume(m),t.exit("listItemPrefixWhitespace"),p):n(m)}function p(m){return i.containerState.size=s+i.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(m)}}function pQ(t,e,n){const i=this;return i.containerState._closeFlow=void 0,t.check(Ch,r,s);function r(a){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,Pt(t,e,"listItemIndent",i.containerState.size+1)(a)}function s(a){return i.containerState.furtherBlankLines||!St(a)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,o(a)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,t.attempt(dQ,e,o)(a))}function o(a){return i.containerState._closeFlow=!0,i.interrupt=void 0,Pt(t,t.attempt(Oi,e,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function mQ(t,e,n){const i=this;return Pt(t,r,"listItemIndent",i.containerState.size+1);function r(s){const o=i.events[i.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===i.containerState.size?e(s):n(s)}}function gQ(t){t.exit(this.containerState.type)}function yQ(t,e,n){const i=this;return Pt(t,r,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function r(s){const o=i.events[i.events.length-1];return!St(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const EC={name:"setextUnderline",resolveTo:xQ,tokenize:vQ};function xQ(t,e){let n=t.length,i,r,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){i=n;break}t[n][1].type==="paragraph"&&(r=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[i][1].start},end:{...t[t.length-1][1].end}};return t[r][1].type="setextHeadingText",s?(t.splice(r,0,["enter",o,e]),t.splice(s+1,0,["exit",t[i][1],e]),t[i][1].end={...t[s][1].end}):t[i][1]=o,t.push(["exit",o,e]),t}function vQ(t,e,n){const i=this;let r;return s;function s(u){let f=i.events.length,d;for(;f--;)if(i.events[f][1].type!=="lineEnding"&&i.events[f][1].type!=="linePrefix"&&i.events[f][1].type!=="content"){d=i.events[f][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||d)?(t.enter("setextHeadingLine"),r=u,o(u)):n(u)}function o(u){return t.enter("setextHeadingLineSequence"),a(u)}function a(u){return u===r?(t.consume(u),a):(t.exit("setextHeadingLineSequence"),St(u)?Pt(t,l,"lineSuffix")(u):l(u))}function l(u){return u===null||nt(u)?(t.exit("setextHeadingLine"),e(u)):n(u)}}const wQ={tokenize:_Q};function _Q(t){const e=this,n=t.attempt(Ch,i,t.attempt(this.parser.constructs.flowInitial,r,Pt(t,t.attempt(this.parser.constructs.flow,r,t.attempt(EK,r)),"linePrefix")));return n;function i(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function r(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const SQ={resolveAll:C5()},bQ=k5("string"),MQ=k5("text");function k5(t){return{resolveAll:C5(t==="text"?TQ:void 0),tokenize:e};function e(n){const i=this,r=this.parser.constructs[t],s=n.attempt(r,o,a);return o;function o(f){return u(f)?s(f):a(f)}function a(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),l}function l(f){return u(f)?(n.exit("data"),s(f)):(n.consume(f),l)}function u(f){if(f===null)return!0;const d=r[f];let p=-1;if(d)for(;++p<d.length;){const m=d[p];if(!m.previous||m.previous.call(i,i.previous))return!0}return!1}}}function C5(t){return e;function e(n,i){let r=-1,s;for(;++r<=n.length;)s===void 0?n[r]&&n[r][1].type==="data"&&(s=r,r++):(!n[r]||n[r][1].type!=="data")&&(r!==s+2&&(n[s][1].end=n[r-1][1].end,n.splice(s+2,r-s-2),r=s+2),s=void 0);return t?t(n,i):n}}function TQ(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const i=t[n-1][1],r=e.sliceStream(i);let s=r.length,o=-1,a=0,l;for(;s--;){const u=r[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(u===-2)l=!0,a++;else if(u!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const u={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:i.start._bufferIndex+o,_index:i.start._index+s,line:i.end.line,column:i.end.column-a,offset:i.end.offset-a},end:{...i.end}};i.end={...u.start},i.start.offset===i.end.offset?Object.assign(i,u):(t.splice(n,0,["enter",u,e],["exit",u,e]),n+=2)}n++}return t}const EQ={42:Oi,43:Oi,45:Oi,48:Oi,49:Oi,50:Oi,51:Oi,52:Oi,53:Oi,54:Oi,55:Oi,56:Oi,57:Oi,62:w5},kQ={91:LK},CQ={[-2]:a1,[-1]:a1,32:a1},AQ={35:NK,42:xg,45:[EC,xg],60:VK,61:EC,95:xg,96:MC,126:MC},PQ={38:S5,92:_5},LQ={[-5]:l1,[-4]:l1,[-3]:l1,33:sQ,38:S5,42:P_,60:[aK,qK],91:aQ,92:[zK,_5],93:Qb,95:P_,96:wK},RQ={null:[P_,SQ]},IQ={null:[42,95]},DQ={null:[]},zQ=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:IQ,contentInitial:kQ,disable:DQ,document:EQ,flow:AQ,flowInitial:CQ,insideSpan:RQ,string:PQ,text:LQ},Symbol.toStringTag,{value:"Module"}));function FQ(t,e,n){let i={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const r={},s=[];let o=[],a=[];const l={attempt:I(k),check:I(E),consume:_,enter:b,exit:M,interrupt:I(E,{interrupt:!0})},u={code:null,containerState:{},defineSkip:y,events:[],now:g,parser:t,previous:null,sliceSerialize:p,sliceStream:m,write:d};let f=e.tokenize.call(u,l);return e.resolveAll&&s.push(e),u;function d(O){return o=zr(o,O),w(),o[o.length-1]!==null?[]:(C(e,0),u.events=my(s,u.events,u),u.events)}function p(O,q){return OQ(m(O),q)}function m(O){return NQ(o,O)}function g(){const{_bufferIndex:O,_index:q,line:j,column:G,offset:W}=i;return{_bufferIndex:O,_index:q,line:j,column:G,offset:W}}function y(O){r[O.line]=O.column,R()}function w(){let O;for(;i._index<o.length;){const q=o[i._index];if(typeof q=="string")for(O=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===O&&i._bufferIndex<q.length;)v(q.charCodeAt(i._bufferIndex));else v(q)}}function v(O){f=f(O)}function _(O){nt(O)?(i.line++,i.column=1,i.offset+=O===-3?2:1,R()):O!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===o[i._index].length&&(i._bufferIndex=-1,i._index++)),u.previous=O}function b(O,q){const j=q||{};return j.type=O,j.start=g(),u.events.push(["enter",j,u]),a.push(j),j}function M(O){const q=a.pop();return q.end=g(),u.events.push(["exit",q,u]),q}function k(O,q){C(O,q.from)}function E(O,q){q.restore()}function I(O,q){return j;function j(G,W,J){let re,D,F,A;return Array.isArray(G)?Y(G):"tokenize"in G?Y([G]):X(G);function X(ie){return Ne;function Ne(We){const Ge=We!==null&&ie[We],be=We!==null&&ie.null,$e=[...Array.isArray(Ge)?Ge:Ge?[Ge]:[],...Array.isArray(be)?be:be?[be]:[]];return Y($e)(We)}}function Y(ie){return re=ie,D=0,ie.length===0?J:z(ie[D])}function z(ie){return Ne;function Ne(We){return A=L(),F=ie,ie.partial||(u.currentConstruct=ie),ie.name&&u.parser.constructs.disable.null.includes(ie.name)?Ce():ie.tokenize.call(q?Object.assign(Object.create(u),q):u,l,xe,Ce)(We)}}function xe(ie){return O(F,A),W}function Ce(ie){return A.restore(),++D<re.length?z(re[D]):J}}}function C(O,q){O.resolveAll&&!s.includes(O)&&s.push(O),O.resolve&&ar(u.events,q,u.events.length-q,O.resolve(u.events.slice(q),u)),O.resolveTo&&(u.events=O.resolveTo(u.events,u))}function L(){const O=g(),q=u.previous,j=u.currentConstruct,G=u.events.length,W=Array.from(a);return{from:G,restore:J};function J(){i=O,u.previous=q,u.currentConstruct=j,u.events.length=G,a=W,R()}}function R(){i.line in r&&i.column<2&&(i.column=r[i.line],i.offset+=r[i.line]-1)}}function NQ(t,e){const n=e.start._index,i=e.start._bufferIndex,r=e.end._index,s=e.end._bufferIndex;let o;if(n===r)o=[t[n].slice(i,s)];else{if(o=t.slice(n,r),i>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(i):o.shift()}s>0&&o.push(t[r].slice(0,s))}return o}function OQ(t,e){let n=-1;const i=[];let r;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&r)continue;o=" ";break}default:o=String.fromCharCode(s)}r=s===-2,i.push(o)}return i.join("")}function BQ(t){const i={constructs:x5([zQ,...(t||{}).extensions||[]]),content:r(eK),defined:[],document:r(nK),flow:r(wQ),lazy:{},string:r(bQ),text:r(MQ)};return i;function r(s){return o;function o(a){return FQ(i,s,a)}}}function UQ(t){for(;!b5(t););return t}const kC=/[\0\t\n\r]/g;function VQ(){let t=1,e="",n=!0,i;return r;function r(s,o,a){const l=[];let u,f,d,p,m;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),d=0,e="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(kC.lastIndex=d,u=kC.exec(s),p=u&&u.index!==void 0?u.index:s.length,m=s.charCodeAt(p),!u){e=s.slice(d);break}if(m===10&&d===p&&i)l.push(-3),i=void 0;else switch(i&&(l.push(-5),i=void 0),d<p&&(l.push(s.slice(d,p)),t+=p-d),m){case 0:{l.push(65533),t++;break}case 9:{for(f=Math.ceil(t/4)*4,l.push(-2);t++<f;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:i=!0,t=1}d=p+1}return a&&(i&&l.push(-5),e&&l.push(e),l.push(null)),l}}const HQ=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function WQ(t){return t.replace(HQ,GQ)}function GQ(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const r=n.charCodeAt(1),s=r===120||r===88;return v5(n.slice(s?2:1),s?16:10)}return Kb(n)||t}const A5={}.hasOwnProperty;function $Q(t,e,n){return typeof e!="string"&&(n=e,e=void 0),jQ(n)(UQ(BQ(n).document().write(VQ()(t,e,!0))))}function jQ(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Qe),autolinkProtocol:L,autolinkEmail:L,atxHeading:s(qe),blockQuote:s(be),characterEscape:L,characterReference:L,codeFenced:s($e),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s($e,o),codeText:s(pe,o),codeTextData:L,data:L,codeFlowValue:L,definition:s(de),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Ae),hardBreakEscape:s(Ie),hardBreakTrailing:s(Ie),htmlFlow:s(ot,o),htmlFlowData:L,htmlText:s(ot,o),htmlTextData:L,image:s(it),label:o,link:s(Qe),listItem:s(It),listItemValue:p,listOrdered:s(kt,d),listUnordered:s(kt),paragraph:s($),reference:z,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(qe),strong:s(N),thematicBreak:s(_e)},exit:{atxHeading:l(),atxHeadingSequence:k,autolink:l(),autolinkEmail:Ge,autolinkProtocol:We,blockQuote:l(),characterEscapeValue:R,characterReferenceMarkerHexadecimal:Ce,characterReferenceMarkerNumeric:Ce,characterReferenceValue:ie,characterReference:Ne,codeFenced:l(w),codeFencedFence:y,codeFencedFenceInfo:m,codeFencedFenceMeta:g,codeFlowValue:R,codeIndented:l(v),codeText:l(W),codeTextData:R,data:R,definition:l(),definitionDestinationString:M,definitionLabelString:_,definitionTitleString:b,emphasis:l(),hardBreakEscape:l(q),hardBreakTrailing:l(q),htmlFlow:l(j),htmlFlowData:R,htmlText:l(G),htmlTextData:R,image:l(re),label:F,labelText:D,lineEnding:O,link:l(J),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:xe,resourceDestinationString:A,resourceTitleString:X,resource:Y,setextHeading:l(C),setextHeadingLineSequence:I,setextHeadingText:E,strong:l(),thematicBreak:l()}};P5(e,(t||{}).mdastExtensions||[]);const n={};return i;function i(Z){let le={type:"root",children:[]};const Te={stack:[le],tokenStack:[],config:e,enter:a,exit:u,buffer:o,resume:f,data:n},se=[];let Pe=-1;for(;++Pe<Z.length;)if(Z[Pe][1].type==="listOrdered"||Z[Pe][1].type==="listUnordered")if(Z[Pe][0]==="enter")se.push(Pe);else{const Le=se.pop();Pe=r(Z,Le,Pe)}for(Pe=-1;++Pe<Z.length;){const Le=e[Z[Pe][0]];A5.call(Le,Z[Pe][1].type)&&Le[Z[Pe][1].type].call(Object.assign({sliceSerialize:Z[Pe][2].sliceSerialize},Te),Z[Pe][1])}if(Te.tokenStack.length>0){const Le=Te.tokenStack[Te.tokenStack.length-1];(Le[1]||CC).call(Te,void 0,Le[0])}for(le.position={start:No(Z.length>0?Z[0][1].start:{line:1,column:1,offset:0}),end:No(Z.length>0?Z[Z.length-2][1].end:{line:1,column:1,offset:0})},Pe=-1;++Pe<e.transforms.length;)le=e.transforms[Pe](le)||le;return le}function r(Z,le,Te){let se=le-1,Pe=-1,Le=!1,Ye,Fe,st,vt;for(;++se<=Te;){const _t=Z[se];switch(_t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{_t[0]==="enter"?Pe++:Pe--,vt=void 0;break}case"lineEndingBlank":{_t[0]==="enter"&&(Ye&&!vt&&!Pe&&!st&&(st=se),vt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:vt=void 0}if(!Pe&&_t[0]==="enter"&&_t[1].type==="listItemPrefix"||Pe===-1&&_t[0]==="exit"&&(_t[1].type==="listUnordered"||_t[1].type==="listOrdered")){if(Ye){let Q=se;for(Fe=void 0;Q--;){const De=Z[Q];if(De[1].type==="lineEnding"||De[1].type==="lineEndingBlank"){if(De[0]==="exit")continue;Fe&&(Z[Fe][1].type="lineEndingBlank",Le=!0),De[1].type="lineEnding",Fe=Q}else if(!(De[1].type==="linePrefix"||De[1].type==="blockQuotePrefix"||De[1].type==="blockQuotePrefixWhitespace"||De[1].type==="blockQuoteMarker"||De[1].type==="listItemIndent"))break}st&&(!Fe||st<Fe)&&(Ye._spread=!0),Ye.end=Object.assign({},Fe?Z[Fe][1].start:_t[1].end),Z.splice(Fe||se,0,["exit",Ye,_t[2]]),se++,Te++}if(_t[1].type==="listItemPrefix"){const Q={type:"listItem",_spread:!1,start:Object.assign({},_t[1].start),end:void 0};Ye=Q,Z.splice(se,0,["enter",Q,_t[2]]),se++,Te++,st=void 0,vt=!0}}}return Z[le][1]._spread=Le,Te}function s(Z,le){return Te;function Te(se){a.call(this,Z(se),se),le&&le.call(this,se)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(Z,le,Te){this.stack[this.stack.length-1].children.push(Z),this.stack.push(Z),this.tokenStack.push([le,Te||void 0]),Z.position={start:No(le.start),end:void 0}}function l(Z){return le;function le(Te){Z&&Z.call(this,Te),u.call(this,Te)}}function u(Z,le){const Te=this.stack.pop(),se=this.tokenStack.pop();if(se)se[0].type!==Z.type&&(le?le.call(this,Z,se[0]):(se[1]||CC).call(this,Z,se[0]));else throw new Error("Cannot close `"+Z.type+"` ("+od({start:Z.start,end:Z.end})+"): its not open");Te.position.end=No(Z.end)}function f(){return Jb(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function p(Z){if(this.data.expectingFirstListItemValue){const le=this.stack[this.stack.length-2];le.start=Number.parseInt(this.sliceSerialize(Z),10),this.data.expectingFirstListItemValue=void 0}}function m(){const Z=this.resume(),le=this.stack[this.stack.length-1];le.lang=Z}function g(){const Z=this.resume(),le=this.stack[this.stack.length-1];le.meta=Z}function y(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const Z=this.resume(),le=this.stack[this.stack.length-1];le.value=Z.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const Z=this.resume(),le=this.stack[this.stack.length-1];le.value=Z.replace(/(\r?\n|\r)$/g,"")}function _(Z){const le=this.resume(),Te=this.stack[this.stack.length-1];Te.label=le,Te.identifier=as(this.sliceSerialize(Z)).toLowerCase()}function b(){const Z=this.resume(),le=this.stack[this.stack.length-1];le.title=Z}function M(){const Z=this.resume(),le=this.stack[this.stack.length-1];le.url=Z}function k(Z){const le=this.stack[this.stack.length-1];if(!le.depth){const Te=this.sliceSerialize(Z).length;le.depth=Te}}function E(){this.data.setextHeadingSlurpLineEnding=!0}function I(Z){const le=this.stack[this.stack.length-1];le.depth=this.sliceSerialize(Z).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function L(Z){const Te=this.stack[this.stack.length-1].children;let se=Te[Te.length-1];(!se||se.type!=="text")&&(se=fe(),se.position={start:No(Z.start),end:void 0},Te.push(se)),this.stack.push(se)}function R(Z){const le=this.stack.pop();le.value+=this.sliceSerialize(Z),le.position.end=No(Z.end)}function O(Z){const le=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Te=le.children[le.children.length-1];Te.position.end=No(Z.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(le.type)&&(L.call(this,Z),R.call(this,Z))}function q(){this.data.atHardBreak=!0}function j(){const Z=this.resume(),le=this.stack[this.stack.length-1];le.value=Z}function G(){const Z=this.resume(),le=this.stack[this.stack.length-1];le.value=Z}function W(){const Z=this.resume(),le=this.stack[this.stack.length-1];le.value=Z}function J(){const Z=this.stack[this.stack.length-1];if(this.data.inReference){const le=this.data.referenceType||"shortcut";Z.type+="Reference",Z.referenceType=le,delete Z.url,delete Z.title}else delete Z.identifier,delete Z.label;this.data.referenceType=void 0}function re(){const Z=this.stack[this.stack.length-1];if(this.data.inReference){const le=this.data.referenceType||"shortcut";Z.type+="Reference",Z.referenceType=le,delete Z.url,delete Z.title}else delete Z.identifier,delete Z.label;this.data.referenceType=void 0}function D(Z){const le=this.sliceSerialize(Z),Te=this.stack[this.stack.length-2];Te.label=WQ(le),Te.identifier=as(le).toLowerCase()}function F(){const Z=this.stack[this.stack.length-1],le=this.resume(),Te=this.stack[this.stack.length-1];if(this.data.inReference=!0,Te.type==="link"){const se=Z.children;Te.children=se}else Te.alt=le}function A(){const Z=this.resume(),le=this.stack[this.stack.length-1];le.url=Z}function X(){const Z=this.resume(),le=this.stack[this.stack.length-1];le.title=Z}function Y(){this.data.inReference=void 0}function z(){this.data.referenceType="collapsed"}function xe(Z){const le=this.resume(),Te=this.stack[this.stack.length-1];Te.label=le,Te.identifier=as(this.sliceSerialize(Z)).toLowerCase(),this.data.referenceType="full"}function Ce(Z){this.data.characterReferenceType=Z.type}function ie(Z){const le=this.sliceSerialize(Z),Te=this.data.characterReferenceType;let se;Te?(se=v5(le,Te==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):se=Kb(le);const Pe=this.stack[this.stack.length-1];Pe.value+=se}function Ne(Z){const le=this.stack.pop();le.position.end=No(Z.end)}function We(Z){R.call(this,Z);const le=this.stack[this.stack.length-1];le.url=this.sliceSerialize(Z)}function Ge(Z){R.call(this,Z);const le=this.stack[this.stack.length-1];le.url="mailto:"+this.sliceSerialize(Z)}function be(){return{type:"blockquote",children:[]}}function $e(){return{type:"code",lang:null,meta:null,value:""}}function pe(){return{type:"inlineCode",value:""}}function de(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ae(){return{type:"emphasis",children:[]}}function qe(){return{type:"heading",depth:0,children:[]}}function Ie(){return{type:"break"}}function ot(){return{type:"html",value:""}}function it(){return{type:"image",title:null,url:"",alt:null}}function Qe(){return{type:"link",title:null,url:"",children:[]}}function kt(Z){return{type:"list",ordered:Z.type==="listOrdered",start:null,spread:Z._spread,children:[]}}function It(Z){return{type:"listItem",spread:Z._spread,checked:null,children:[]}}function $(){return{type:"paragraph",children:[]}}function N(){return{type:"strong",children:[]}}function fe(){return{type:"text",value:""}}function _e(){return{type:"thematicBreak"}}}function No(t){return{line:t.line,column:t.column,offset:t.offset}}function P5(t,e){let n=-1;for(;++n<e.length;){const i=e[n];Array.isArray(i)?P5(t,i):XQ(t,i)}}function XQ(t,e){let n;for(n in e)if(A5.call(e,n))switch(n){case"canContainEols":{const i=e[n];i&&t[n].push(...i);break}case"transforms":{const i=e[n];i&&t[n].push(...i);break}case"enter":case"exit":{const i=e[n];i&&Object.assign(t[n],i);break}}}function CC(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+od({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+od({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+od({start:e.start,end:e.end})+") is still open")}function qQ(t){const e=this;e.parser=n;function n(i){return $Q(i,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function YQ(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function ZQ(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function JQ(t,e){const n=e.value?e.value+`
`:"",i={};e.lang&&(i.className=["language-"+e.lang]);let r={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return e.meta&&(r.data={meta:e.meta}),t.patch(e,r),r=t.applyData(e,r),r={type:"element",tagName:"pre",properties:{},children:[r]},t.patch(e,r),r}function KQ(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function QQ(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function eee(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),r=$c(i.toLowerCase()),s=t.footnoteOrder.indexOf(i);let o,a=t.footnoteCounts.get(i);a===void 0?(a=0,t.footnoteOrder.push(i),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(i,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+r,id:n+"fnref-"+r+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,u),t.applyData(e,u)}function tee(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function nee(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function L5(t,e){const n=e.referenceType;let i="]";if(n==="collapsed"?i+="[]":n==="full"&&(i+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+i}];const r=t.all(e),s=r[0];s&&s.type==="text"?s.value="["+s.value:r.unshift({type:"text",value:"["});const o=r[r.length-1];return o&&o.type==="text"?o.value+=i:r.push({type:"text",value:i}),r}function iee(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return L5(t,e);const r={src:$c(i.url||""),alt:e.alt};i.title!==null&&i.title!==void 0&&(r.title=i.title);const s={type:"element",tagName:"img",properties:r,children:[]};return t.patch(e,s),t.applyData(e,s)}function ree(t,e){const n={src:$c(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,i),t.applyData(e,i)}function see(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,i),t.applyData(e,i)}function oee(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return L5(t,e);const r={href:$c(i.url||"")};i.title!==null&&i.title!==void 0&&(r.title=i.title);const s={type:"element",tagName:"a",properties:r,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function aee(t,e){const n={href:$c(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function lee(t,e,n){const i=t.all(e),r=n?uee(n):R5(e),s={},o=[];if(typeof e.checked=="boolean"){const f=i[0];let d;f&&f.type==="element"&&f.tagName==="p"?d=f:(d={type:"element",tagName:"p",properties:{},children:[]},i.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<i.length;){const f=i[a];(r||a!==0||f.type!=="element"||f.tagName!=="p")&&o.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!r?o.push(...f.children):o.push(f)}const l=i[i.length-1];l&&(r||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,u),t.applyData(e,u)}function uee(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let i=-1;for(;!e&&++i<n.length;)e=R5(n[i])}return e}function R5(t){const e=t.spread;return e??t.children.length>1}function cee(t,e){const n={},i=t.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++r<i.length;){const o=i[r];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function fee(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function dee(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function hee(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function pee(t,e){const n=t.all(e),i=n.shift(),r=[];if(i){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([i],!0)};t.patch(e.children[0],o),r.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=Xb(e.children[1]),l=f5(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),r.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function mee(t,e,n){const i=n?n.children:void 0,s=(i?i.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let l=-1;const u=[];for(;++l<a;){const d=e.children[l],p={},m=o?o[l]:void 0;m&&(p.align=m);let g={type:"element",tagName:s,properties:p,children:[]};d&&(g.children=t.all(d),t.patch(d,g),g=t.applyData(d,g)),u.push(g)}const f={type:"element",tagName:"tr",properties:{},children:t.wrap(u,!0)};return t.patch(e,f),t.applyData(e,f)}function gee(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const AC=9,PC=32;function yee(t){const e=String(t),n=/\r?\n|\r/g;let i=n.exec(e),r=0;const s=[];for(;i;)s.push(LC(e.slice(r,i.index),r>0,!0),i[0]),r=i.index+i[0].length,i=n.exec(e);return s.push(LC(e.slice(r),r>0,!1)),s.join("")}function LC(t,e,n){let i=0,r=t.length;if(e){let s=t.codePointAt(i);for(;s===AC||s===PC;)i++,s=t.codePointAt(i)}if(n){let s=t.codePointAt(r-1);for(;s===AC||s===PC;)r--,s=t.codePointAt(r-1)}return r>i?t.slice(i,r):""}function xee(t,e){const n={type:"text",value:yee(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function vee(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const wee={blockquote:YQ,break:ZQ,code:JQ,delete:KQ,emphasis:QQ,footnoteReference:eee,heading:tee,html:nee,imageReference:iee,image:ree,inlineCode:see,linkReference:oee,link:aee,listItem:lee,list:cee,paragraph:fee,root:dee,strong:hee,table:pee,tableCell:gee,tableRow:mee,text:xee,thematicBreak:vee,toml:Bm,yaml:Bm,definition:Bm,footnoteDefinition:Bm};function Bm(){}const I5=-1,gy=0,ld=1,p0=2,eM=3,tM=4,nM=5,iM=6,D5=7,z5=8,RC=typeof self=="object"?self:globalThis,_ee=(t,e)=>{const n=(r,s)=>(t.set(s,r),r),i=r=>{if(t.has(r))return t.get(r);const[s,o]=e[r];switch(s){case gy:case I5:return n(o,r);case ld:{const a=n([],r);for(const l of o)a.push(i(l));return a}case p0:{const a=n({},r);for(const[l,u]of o)a[i(l)]=i(u);return a}case eM:return n(new Date(o),r);case tM:{const{source:a,flags:l}=o;return n(new RegExp(a,l),r)}case nM:{const a=n(new Map,r);for(const[l,u]of o)a.set(i(l),i(u));return a}case iM:{const a=n(new Set,r);for(const l of o)a.add(i(l));return a}case D5:{const{name:a,message:l}=o;return n(new RC[a](l),r)}case z5:return n(BigInt(o),r);case"BigInt":return n(Object(BigInt(o)),r);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new RC[s](o),r)};return i},IC=t=>_ee(new Map,t)(0),ku="",{toString:See}={},{keys:bee}=Object,Df=t=>{const e=typeof t;if(e!=="object"||!t)return[gy,e];const n=See.call(t).slice(8,-1);switch(n){case"Array":return[ld,ku];case"Object":return[p0,ku];case"Date":return[eM,ku];case"RegExp":return[tM,ku];case"Map":return[nM,ku];case"Set":return[iM,ku];case"DataView":return[ld,n]}return n.includes("Array")?[ld,n]:n.includes("Error")?[D5,n]:[p0,n]},Um=([t,e])=>t===gy&&(e==="function"||e==="symbol"),Mee=(t,e,n,i)=>{const r=(o,a)=>{const l=i.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=Df(o);switch(a){case gy:{let f=o;switch(l){case"bigint":a=z5,f=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);f=null;break;case"undefined":return r([I5],o)}return r([a,f],o)}case ld:{if(l){let p=o;return l==="DataView"?p=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(p=new Uint8Array(o)),r([l,[...p]],o)}const f=[],d=r([a,f],o);for(const p of o)f.push(s(p));return d}case p0:{if(l)switch(l){case"BigInt":return r([l,o.toString()],o);case"Boolean":case"Number":case"String":return r([l,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const f=[],d=r([a,f],o);for(const p of bee(o))(t||!Um(Df(o[p])))&&f.push([s(p),s(o[p])]);return d}case eM:return r([a,o.toISOString()],o);case tM:{const{source:f,flags:d}=o;return r([a,{source:f,flags:d}],o)}case nM:{const f=[],d=r([a,f],o);for(const[p,m]of o)(t||!(Um(Df(p))||Um(Df(m))))&&f.push([s(p),s(m)]);return d}case iM:{const f=[],d=r([a,f],o);for(const p of o)(t||!Um(Df(p)))&&f.push(s(p));return d}}const{message:u}=o;return r([a,{name:l,message:u}],o)};return s},DC=(t,{json:e,lossy:n}={})=>{const i=[];return Mee(!(e||n),!!e,new Map,i)(t),i},m0=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?IC(DC(t,e)):structuredClone(t):(t,e)=>IC(DC(t,e));function Tee(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function Eee(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function kee(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||Tee,i=t.options.footnoteBackLabel||Eee,r=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const u=t.footnoteById.get(t.footnoteOrder[l]);if(!u)continue;const f=t.all(u),d=String(u.identifier).toUpperCase(),p=$c(d.toLowerCase());let m=0;const g=[],y=t.footnoteCounts.get(d);for(;y!==void 0&&++m<=y;){g.length>0&&g.push({type:"text",value:" "});let _=typeof n=="string"?n:n(l,m);typeof _=="string"&&(_={type:"text",value:_}),g.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+p+(m>1?"-"+m:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(l,m),className:["data-footnote-backref"]},children:Array.isArray(_)?_:[_]})}const w=f[f.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const _=w.children[w.children.length-1];_&&_.type==="text"?_.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...g)}else f.push(...g);const v={type:"element",tagName:"li",properties:{id:e+"fn-"+p},children:t.wrap(f,!0)};t.patch(u,v),a.push(v)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...m0(o),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const yy=function(t){if(t==null)return Lee;if(typeof t=="function")return xy(t);if(typeof t=="object")return Array.isArray(t)?Cee(t):Aee(t);if(typeof t=="string")return Pee(t);throw new Error("Expected function, string, or object as test")};function Cee(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=yy(t[n]);return xy(i);function i(...r){let s=-1;for(;++s<e.length;)if(e[s].apply(this,r))return!0;return!1}}function Aee(t){const e=t;return xy(n);function n(i){const r=i;let s;for(s in t)if(r[s]!==e[s])return!1;return!0}}function Pee(t){return xy(e);function e(n){return n&&n.type===t}}function xy(t){return e;function e(n,i,r){return!!(Ree(n)&&t.call(this,n,typeof i=="number"?i:void 0,r||void 0))}}function Lee(){return!0}function Ree(t){return t!==null&&typeof t=="object"&&"type"in t}const F5=[],Iee=!0,L_=!1,Dee="skip";function N5(t,e,n,i){let r;typeof e=="function"&&typeof n!="function"?(i=n,n=e):r=e;const s=yy(r),o=i?-1:1;a(t,void 0,[])();function a(l,u,f){const d=l&&typeof l=="object"?l:{};if(typeof d.type=="string"){const m=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(p,"name",{value:"node ("+(l.type+(m?"<"+m+">":""))+")"})}return p;function p(){let m=F5,g,y,w;if((!e||s(l,u,f[f.length-1]||void 0))&&(m=zee(n(l,f)),m[0]===L_))return m;if("children"in l&&l.children){const v=l;if(v.children&&m[0]!==Dee)for(y=(i?v.children.length:-1)+o,w=f.concat(v);y>-1&&y<v.children.length;){const _=v.children[y];if(g=a(_,y,w)(),g[0]===L_)return g;y=typeof g[1]=="number"?g[1]:y+o}}return m}}}function zee(t){return Array.isArray(t)?t:typeof t=="number"?[Iee,t]:t==null?F5:[t]}function rM(t,e,n,i){let r,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,r=n):(s=e,o=n,r=i),N5(t,s,a,r);function a(l,u){const f=u[u.length-1],d=f?f.children.indexOf(l):void 0;return o(l,d,f)}}const R_={}.hasOwnProperty,Fee={};function Nee(t,e){const n=e||Fee,i=new Map,r=new Map,s=new Map,o={...wee,...n.handlers},a={all:u,applyData:Bee,definitionById:i,footnoteById:r,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:Oee,wrap:Vee};return rM(t,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const d=f.type==="definition"?i:r,p=String(f.identifier).toUpperCase();d.has(p)||d.set(p,f)}}),a;function l(f,d){const p=f.type,m=a.handlers[p];if(R_.call(a.handlers,p)&&m)return m(a,f,d);if(a.options.passThrough&&a.options.passThrough.includes(p)){if("children"in f){const{children:y,...w}=f,v=m0(w);return v.children=a.all(f),v}return m0(f)}return(a.options.unknownHandler||Uee)(a,f,d)}function u(f){const d=[];if("children"in f){const p=f.children;let m=-1;for(;++m<p.length;){const g=a.one(p[m],f);if(g){if(m&&p[m-1].type==="break"&&(!Array.isArray(g)&&g.type==="text"&&(g.value=zC(g.value)),!Array.isArray(g)&&g.type==="element")){const y=g.children[0];y&&y.type==="text"&&(y.value=zC(y.value))}Array.isArray(g)?d.push(...g):d.push(g)}}}return d}}function Oee(t,e){t.position&&(e.position=EJ(t))}function Bee(t,e){let n=e;if(t&&t.data){const i=t.data.hName,r=t.data.hChildren,s=t.data.hProperties;if(typeof i=="string")if(n.type==="element")n.tagName=i;else{const o="children"in n?n.children:[n];n={type:"element",tagName:i,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,m0(s)),"children"in n&&n.children&&r!==null&&r!==void 0&&(n.children=r)}return n}function Uee(t,e){const n=e.data||{},i="value"in e&&!(R_.call(n,"hProperties")||R_.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function Vee(t,e){const n=[];let i=-1;for(e&&n.push({type:"text",value:`
`});++i<t.length;)i&&n.push({type:"text",value:`
`}),n.push(t[i]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function zC(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function FC(t,e){const n=Nee(t,e),i=n.one(t,void 0),r=kee(n),s=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return r&&s.children.push({type:"text",value:`
`},r),s}function Hee(t,e){return t&&"run"in t?async function(n,i){const r=FC(n,{file:i,...e});await t.run(r,i)}:function(n,i){return FC(n,{file:i,...t||e})}}function NC(t){if(t)throw t}var vg=Object.prototype.hasOwnProperty,O5=Object.prototype.toString,OC=Object.defineProperty,BC=Object.getOwnPropertyDescriptor,UC=function(e){return typeof Array.isArray=="function"?Array.isArray(e):O5.call(e)==="[object Array]"},VC=function(e){if(!e||O5.call(e)!=="[object Object]")return!1;var n=vg.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&vg.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!i)return!1;var r;for(r in e);return typeof r>"u"||vg.call(e,r)},HC=function(e,n){OC&&n.name==="__proto__"?OC(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},WC=function(e,n){if(n==="__proto__")if(vg.call(e,n)){if(BC)return BC(e,n).value}else return;return e[n]},Wee=function t(){var e,n,i,r,s,o,a=arguments[0],l=1,u=arguments.length,f=!1;for(typeof a=="boolean"&&(f=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<u;++l)if(e=arguments[l],e!=null)for(n in e)i=WC(a,n),r=WC(e,n),a!==r&&(f&&r&&(VC(r)||(s=UC(r)))?(s?(s=!1,o=i&&UC(i)?i:[]):o=i&&VC(i)?i:{},HC(a,{name:n,newValue:t(f,o,r)})):typeof r<"u"&&HC(a,{name:n,newValue:r}));return a};const u1=Zd(Wee);function I_(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function Gee(){const t=[],e={run:n,use:i};return e;function n(...r){let s=-1;const o=r.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...r);function a(l,...u){const f=t[++s];let d=-1;if(l){o(l);return}for(;++d<r.length;)(u[d]===null||u[d]===void 0)&&(u[d]=r[d]);r=u,f?$ee(f,a)(...u):o(null,...u)}}function i(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return t.push(r),e}}function $ee(t,e){let n;return i;function i(...o){const a=t.length>o.length;let l;a&&o.push(r);try{l=t.apply(this,o)}catch(u){const f=u;if(a&&n)throw f;return r(f)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,r):l instanceof Error?r(l):s(l))}function r(o,...a){n||(n=!0,e(o,...a))}function s(o){r(null,o)}}const Ss={basename:jee,dirname:Xee,extname:qee,join:Yee,sep:"/"};function jee(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Ah(t);let n=0,i=-1,r=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;r--;)if(t.codePointAt(r)===47){if(s){n=r+1;break}}else i<0&&(s=!0,i=r+1);return i<0?"":t.slice(n,i)}if(e===t)return"";let o=-1,a=e.length-1;for(;r--;)if(t.codePointAt(r)===47){if(s){n=r+1;break}}else o<0&&(s=!0,o=r+1),a>-1&&(t.codePointAt(r)===e.codePointAt(a--)?a<0&&(i=r):(a=-1,i=o));return n===i?i=o:i<0&&(i=t.length),t.slice(n,i)}function Xee(t){if(Ah(t),t.length===0)return".";let e=-1,n=t.length,i;for(;--n;)if(t.codePointAt(n)===47){if(i){e=n;break}}else i||(i=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function qee(t){Ah(t);let e=t.length,n=-1,i=0,r=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){i=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?r<0?r=e:s!==1&&(s=1):r>-1&&(s=-1)}return r<0||n<0||s===0||s===1&&r===n-1&&r===i+1?"":t.slice(r,n)}function Yee(...t){let e=-1,n;for(;++e<t.length;)Ah(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":Zee(n)}function Zee(t){Ah(t);const e=t.codePointAt(0)===47;let n=Jee(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function Jee(t,e){let n="",i=0,r=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(r===o-1||s===1))if(r!==o-1&&s===2){if(n.length<2||i!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",i=0):(n=n.slice(0,l),i=n.length-1-n.lastIndexOf("/")),r=o,s=0;continue}}else if(n.length>0){n="",i=0,r=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",i=2)}else n.length>0?n+="/"+t.slice(r+1,o):n=t.slice(r+1,o),i=o-r-1;r=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function Ah(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const Kee={cwd:Qee};function Qee(){return"/"}function D_(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function ete(t){if(typeof t=="string")t=new URL(t);else if(!D_(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return tte(t)}function tte(t){if(t.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const i=e.codePointAt(n+2);if(i===70||i===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const c1=["history","path","basename","stem","extname","dirname"];class B5{constructor(e){let n;e?D_(e)?n={path:e}:typeof e=="string"||nte(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":Kee.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<c1.length;){const s=c1[i];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let r;for(r in n)c1.includes(r)||(this[r]=n[r])}get basename(){return typeof this.path=="string"?Ss.basename(this.path):void 0}set basename(e){d1(e,"basename"),f1(e,"basename"),this.path=Ss.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Ss.dirname(this.path):void 0}set dirname(e){GC(this.basename,"dirname"),this.path=Ss.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Ss.extname(this.path):void 0}set extname(e){if(f1(e,"extname"),GC(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ss.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){D_(e)&&(e=ete(e)),d1(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Ss.basename(this.path,this.extname):void 0}set stem(e){d1(e,"stem"),f1(e,"stem"),this.path=Ss.join(this.dirname||"",e+(this.extname||""))}fail(e,n,i){const r=this.message(e,n,i);throw r.fatal=!0,r}info(e,n,i){const r=this.message(e,n,i);return r.fatal=void 0,r}message(e,n,i){const r=new gi(e,n,i);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function f1(t,e){if(t&&t.includes(Ss.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Ss.sep+"`")}function d1(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function GC(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function nte(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const ite=function(t){const i=this.constructor.prototype,r=i[t],s=function(){return r.apply(s,arguments)};return Object.setPrototypeOf(s,i),s},rte={}.hasOwnProperty;class sM extends ite{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Gee()}copy(){const e=new sM;let n=-1;for(;++n<this.attachers.length;){const i=this.attachers[n];e.use(...i)}return e.data(u1(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(m1("data",this.frozen),this.namespace[e]=n,this):rte.call(this.namespace,e)&&this.namespace[e]||void 0:e?(m1("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const r=n.call(e,...i);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Vm(e),i=this.parser||this.Parser;return h1("parse",i),i(String(n),n)}process(e,n){const i=this;return this.freeze(),h1("process",this.parser||this.Parser),p1("process",this.compiler||this.Compiler),n?r(void 0,n):new Promise(r);function r(s,o){const a=Vm(e),l=i.parse(a);i.run(l,a,function(f,d,p){if(f||!d||!p)return u(f);const m=d,g=i.stringify(m,p);ate(g)?p.value=g:p.result=g,u(f,p)});function u(f,d){f||!d?o(f):s?s(d):n(void 0,d)}}}processSync(e){let n=!1,i;return this.freeze(),h1("processSync",this.parser||this.Parser),p1("processSync",this.compiler||this.Compiler),this.process(e,r),jC("processSync","process",n),i;function r(s,o){n=!0,NC(s),i=o}}run(e,n,i){$C(e),this.freeze();const r=this.transformers;return!i&&typeof n=="function"&&(i=n,n=void 0),i?s(void 0,i):new Promise(s);function s(o,a){const l=Vm(n);r.run(e,l,u);function u(f,d,p){const m=d||e;f?a(f):o?o(m):i(void 0,m,p)}}}runSync(e,n){let i=!1,r;return this.run(e,n,s),jC("runSync","run",i),r;function s(o,a){NC(o),r=a,i=!0}}stringify(e,n){this.freeze();const i=Vm(n),r=this.compiler||this.Compiler;return p1("stringify",r),$C(e),r(e,i)}use(e,...n){const i=this.attachers,r=this.namespace;if(m1("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(u){if(typeof u=="function")l(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[f,...d]=u;l(f,d)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(u.plugins),u.settings&&(r.settings=u1(!0,r.settings,u.settings))}function a(u){let f=-1;if(u!=null)if(Array.isArray(u))for(;++f<u.length;){const d=u[f];s(d)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function l(u,f){let d=-1,p=-1;for(;++d<i.length;)if(i[d][0]===u){p=d;break}if(p===-1)i.push([u,...f]);else if(f.length>0){let[m,...g]=f;const y=i[p][1];I_(y)&&I_(m)&&(m=u1(!0,y,m)),i[p]=[u,m,...g]}}}}const ste=new sM().freeze();function h1(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function p1(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function m1(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function $C(t){if(!I_(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function jC(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Vm(t){return ote(t)?t:new B5(t)}function ote(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function ate(t){return typeof t=="string"||lte(t)}function lte(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const ute="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",XC=[],qC={allowDangerousHtml:!0},cte=/^(https?|ircs?|mailto|xmpp)$/i,fte=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function dte(t){const e=hte(t),n=pte(t);return mte(e.runSync(e.parse(n),n),t)}function hte(t){const e=t.rehypePlugins||XC,n=t.remarkPlugins||XC,i=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...qC}:qC;return ste().use(qQ).use(n).use(Hee,i).use(e)}function pte(t){const e=t.children||"",n=new B5;return typeof e=="string"&&(n.value=e),n}function mte(t,e){const n=e.allowedElements,i=e.allowElement,r=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,l=e.urlTransform||gte;for(const f of fte)Object.hasOwn(e,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+ute+f.id,void 0);return rM(t,u),LJ(t,{Fragment:ee.Fragment,components:r,ignoreInvalidStyle:!0,jsx:ee.jsx,jsxs:ee.jsxs,passKeys:!0,passNode:!0});function u(f,d,p){if(f.type==="raw"&&p&&typeof d=="number")return o?p.children.splice(d,1):p.children[d]={type:"text",value:f.value},d;if(f.type==="element"){let m;for(m in o1)if(Object.hasOwn(o1,m)&&Object.hasOwn(f.properties,m)){const g=f.properties[m],y=o1[m];(y===null||y.includes(f.tagName))&&(f.properties[m]=l(String(g||""),m,f))}}if(f.type==="element"){let m=n?!n.includes(f.tagName):s?s.includes(f.tagName):!1;if(!m&&i&&typeof d=="number"&&(m=!i(f,d,p)),m&&p&&typeof d=="number")return a&&f.children?p.children.splice(d,1,...f.children):p.children.splice(d,1),d}}}function gte(t){const e=t.indexOf(":"),n=t.indexOf("?"),i=t.indexOf("#"),r=t.indexOf("/");return e===-1||r!==-1&&e>r||n!==-1&&e>n||i!==-1&&e>i||cte.test(t.slice(0,e))?t:""}function YC(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let i=0,r=n.indexOf(e);for(;r!==-1;)i++,r=n.indexOf(e,r+e.length);return i}function yte(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function xte(t,e,n){const r=yy((n||{}).ignore||[]),s=vte(e);let o=-1;for(;++o<s.length;)N5(t,"text",a);function a(u,f){let d=-1,p;for(;++d<f.length;){const m=f[d],g=p?p.children:void 0;if(r(m,g?g.indexOf(m):void 0,p))return;p=m}if(p)return l(u,f)}function l(u,f){const d=f[f.length-1],p=s[o][0],m=s[o][1];let g=0;const w=d.children.indexOf(u);let v=!1,_=[];p.lastIndex=0;let b=p.exec(u.value);for(;b;){const M=b.index,k={index:b.index,input:b.input,stack:[...f,u]};let E=m(...b,k);if(typeof E=="string"&&(E=E.length>0?{type:"text",value:E}:void 0),E===!1?p.lastIndex=M+1:(g!==M&&_.push({type:"text",value:u.value.slice(g,M)}),Array.isArray(E)?_.push(...E):E&&_.push(E),g=M+b[0].length,v=!0),!p.global)break;b=p.exec(u.value)}return v?(g<u.value.length&&_.push({type:"text",value:u.value.slice(g)}),d.children.splice(w,1,..._)):_=[u],w+_.length}}function vte(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let i=-1;for(;++i<n.length;){const r=n[i];e.push([wte(r[0]),_te(r[1])])}return e}function wte(t){return typeof t=="string"?new RegExp(yte(t),"g"):t}function _te(t){return typeof t=="function"?t:function(){return t}}const g1="phrasing",y1=["autolink","link","image","label"];function Ste(){return{transforms:[Ate],enter:{literalAutolink:Mte,literalAutolinkEmail:x1,literalAutolinkHttp:x1,literalAutolinkWww:x1},exit:{literalAutolink:Cte,literalAutolinkEmail:kte,literalAutolinkHttp:Tte,literalAutolinkWww:Ete}}}function bte(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:g1,notInConstruct:y1},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:g1,notInConstruct:y1},{character:":",before:"[ps]",after:"\\/",inConstruct:g1,notInConstruct:y1}]}}function Mte(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function x1(t){this.config.enter.autolinkProtocol.call(this,t)}function Tte(t){this.config.exit.autolinkProtocol.call(this,t)}function Ete(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function kte(t){this.config.exit.autolinkEmail.call(this,t)}function Cte(t){this.exit(t)}function Ate(t){xte(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Pte],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Lte]],{ignore:["link","linkReference"]})}function Pte(t,e,n,i,r){let s="";if(!U5(r)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!Rte(n)))return!1;const o=Ite(n+i);if(!o[0])return!1;const a={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function Lte(t,e,n,i){return!U5(i,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function Rte(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function Ite(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],i=n.indexOf(")");const r=YC(t,"(");let s=YC(t,")");for(;i!==-1&&r>s;)t+=n.slice(0,i+1),n=n.slice(i+1),i=n.indexOf(")"),s++;return[t,n]}function U5(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Il(n)||py(n))&&(!e||n!==47)}V5.peek=Hte;function Dte(){this.buffer()}function zte(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function Fte(){this.buffer()}function Nte(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function Ote(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=as(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Bte(t){this.exit(t)}function Ute(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=as(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Vte(t){this.exit(t)}function Hte(){return"["}function V5(t,e,n,i){const r=n.createTracker(i);let s=r.move("[^");const o=n.enter("footnoteReference"),a=n.enter("reference");return s+=r.move(n.safe(n.associationId(t),{after:"]",before:s})),a(),o(),s+=r.move("]"),s}function Wte(){return{enter:{gfmFootnoteCallString:Dte,gfmFootnoteCall:zte,gfmFootnoteDefinitionLabelString:Fte,gfmFootnoteDefinition:Nte},exit:{gfmFootnoteCallString:Ote,gfmFootnoteCall:Bte,gfmFootnoteDefinitionLabelString:Ute,gfmFootnoteDefinition:Vte}}}function Gte(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:V5},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(i,r,s,o){const a=s.createTracker(o);let l=a.move("[^");const u=s.enter("footnoteDefinition"),f=s.enter("label");return l+=a.move(s.safe(s.associationId(i),{before:l,after:"]"})),f(),l+=a.move("]:"),i.children&&i.children.length>0&&(a.shift(4),l+=a.move((e?`
`:" ")+s.indentLines(s.containerFlow(i,a.current()),e?H5:$te))),u(),l}}function $te(t,e,n){return e===0?t:H5(t,e,n)}function H5(t,e,n){return(n?"":"    ")+t}const jte=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];W5.peek=Jte;function Xte(){return{canContainEols:["delete"],enter:{strikethrough:Yte},exit:{strikethrough:Zte}}}function qte(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:jte}],handlers:{delete:W5}}}function Yte(t){this.enter({type:"delete",children:[]},t)}function Zte(t){this.exit(t)}function W5(t,e,n,i){const r=n.createTracker(i),s=n.enter("strikethrough");let o=r.move("~~");return o+=n.containerPhrasing(t,{...r.current(),before:o,after:"~"}),o+=r.move("~~"),s(),o}function Jte(){return"~"}function Kte(t){return t.length}function Qte(t,e){const n=e||{},i=(n.align||[]).concat(),r=n.stringLength||Kte,s=[],o=[],a=[],l=[];let u=0,f=-1;for(;++f<t.length;){const y=[],w=[];let v=-1;for(t[f].length>u&&(u=t[f].length);++v<t[f].length;){const _=ene(t[f][v]);if(n.alignDelimiters!==!1){const b=r(_);w[v]=b,(l[v]===void 0||b>l[v])&&(l[v]=b)}y.push(_)}o[f]=y,a[f]=w}let d=-1;if(typeof i=="object"&&"length"in i)for(;++d<u;)s[d]=ZC(i[d]);else{const y=ZC(i);for(;++d<u;)s[d]=y}d=-1;const p=[],m=[];for(;++d<u;){const y=s[d];let w="",v="";y===99?(w=":",v=":"):y===108?w=":":y===114&&(v=":");let _=n.alignDelimiters===!1?1:Math.max(1,l[d]-w.length-v.length);const b=w+"-".repeat(_)+v;n.alignDelimiters!==!1&&(_=w.length+_+v.length,_>l[d]&&(l[d]=_),m[d]=_),p[d]=b}o.splice(1,0,p),a.splice(1,0,m),f=-1;const g=[];for(;++f<o.length;){const y=o[f],w=a[f];d=-1;const v=[];for(;++d<u;){const _=y[d]||"";let b="",M="";if(n.alignDelimiters!==!1){const k=l[d]-(w[d]||0),E=s[d];E===114?b=" ".repeat(k):E===99?k%2?(b=" ".repeat(k/2+.5),M=" ".repeat(k/2-.5)):(b=" ".repeat(k/2),M=b):M=" ".repeat(k)}n.delimiterStart!==!1&&!d&&v.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&_==="")&&(n.delimiterStart!==!1||d)&&v.push(" "),n.alignDelimiters!==!1&&v.push(b),v.push(_),n.alignDelimiters!==!1&&v.push(M),n.padding!==!1&&v.push(" "),(n.delimiterEnd!==!1||d!==u-1)&&v.push("|")}g.push(n.delimiterEnd===!1?v.join("").replace(/ +$/,""):v.join(""))}return g.join(`
`)}function ene(t){return t==null?"":String(t)}function ZC(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function tne(t,e,n,i){const r=n.enter("blockquote"),s=n.createTracker(i);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),nne);return r(),o}function nne(t,e,n){return">"+(n?"":" ")+t}function ine(t,e){return JC(t,e.inConstruct,!0)&&!JC(t,e.notInConstruct,!1)}function JC(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let i=-1;for(;++i<e.length;)if(t.includes(e[i]))return!0;return!1}function KC(t,e,n,i){let r=-1;for(;++r<n.unsafe.length;)if(n.unsafe[r].character===`
`&&ine(n.stack,n.unsafe[r]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function rne(t,e){const n=String(t);let i=n.indexOf(e),r=i,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===r?++s>o&&(o=s):s=1,r=i+e.length,i=n.indexOf(e,r);return o}function sne(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function one(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function ane(t,e,n,i){const r=one(n),s=t.value||"",o=r==="`"?"GraveAccent":"Tilde";if(sne(t,n)){const d=n.enter("codeIndented"),p=n.indentLines(s,lne);return d(),p}const a=n.createTracker(i),l=r.repeat(Math.max(rne(s,r)+1,3)),u=n.enter("codeFenced");let f=a.move(l);if(t.lang){const d=n.enter(`codeFencedLang${o}`);f+=a.move(n.safe(t.lang,{before:f,after:" ",encode:["`"],...a.current()})),d()}if(t.lang&&t.meta){const d=n.enter(`codeFencedMeta${o}`);f+=a.move(" "),f+=a.move(n.safe(t.meta,{before:f,after:`
`,encode:["`"],...a.current()})),d()}return f+=a.move(`
`),s&&(f+=a.move(s+`
`)),f+=a.move(l),u(),f}function lne(t,e,n){return(n?"":"    ")+t}function oM(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function une(t,e,n,i){const r=oM(n),s=r==='"'?"Quote":"Apostrophe",o=n.enter("definition");let a=n.enter("label");const l=n.createTracker(i);let u=l.move("[");return u+=l.move(n.safe(n.associationId(t),{before:u,after:"]",...l.current()})),u+=l.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(t.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(a=n.enter("destinationRaw"),u+=l.move(n.safe(t.url,{before:u,after:t.title?" ":`
`,...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),u+=l.move(" "+r),u+=l.move(n.safe(t.title,{before:u,after:r,...l.current()})),u+=l.move(r),a()),o(),u}function cne(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Yd(t){return"&#x"+t.toString(16).toUpperCase()+";"}function g0(t,e,n){const i=Rc(t),r=Rc(e);return i===void 0?r===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}G5.peek=fne;function G5(t,e,n,i){const r=cne(n),s=n.enter("emphasis"),o=n.createTracker(i),a=o.move(r);let l=o.move(n.containerPhrasing(t,{after:r,before:a,...o.current()}));const u=l.charCodeAt(0),f=g0(i.before.charCodeAt(i.before.length-1),u,r);f.inside&&(l=Yd(u)+l.slice(1));const d=l.charCodeAt(l.length-1),p=g0(i.after.charCodeAt(0),d,r);p.inside&&(l=l.slice(0,-1)+Yd(d));const m=o.move(r);return s(),n.attentionEncodeSurroundingInfo={after:p.outside,before:f.outside},a+l+m}function fne(t,e,n){return n.options.emphasis||"*"}function dne(t,e){let n=!1;return rM(t,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return n=!0,L_}),!!((!t.depth||t.depth<3)&&Jb(t)&&(e.options.setext||n))}function hne(t,e,n,i){const r=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(i);if(dne(t,n)){const f=n.enter("headingSetext"),d=n.enter("phrasing"),p=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return d(),f(),p+`
`+(r===1?"=":"-").repeat(p.length-(Math.max(p.lastIndexOf("\r"),p.lastIndexOf(`
`))+1))}const o="#".repeat(r),a=n.enter("headingAtx"),l=n.enter("phrasing");s.move(o+" ");let u=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(u)&&(u=Yd(u.charCodeAt(0))+u.slice(1)),u=u?o+" "+u:o,n.options.closeAtx&&(u+=" "+o),l(),a(),u}$5.peek=pne;function $5(t){return t.value||""}function pne(){return"<"}j5.peek=mne;function j5(t,e,n,i){const r=oM(n),s=r==='"'?"Quote":"Apostrophe",o=n.enter("image");let a=n.enter("label");const l=n.createTracker(i);let u=l.move("![");return u+=l.move(n.safe(t.alt,{before:u,after:"]",...l.current()})),u+=l.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(t.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(a=n.enter("destinationRaw"),u+=l.move(n.safe(t.url,{before:u,after:t.title?" ":")",...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),u+=l.move(" "+r),u+=l.move(n.safe(t.title,{before:u,after:r,...l.current()})),u+=l.move(r),a()),u+=l.move(")"),o(),u}function mne(){return"!"}X5.peek=gne;function X5(t,e,n,i){const r=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const a=n.createTracker(i);let l=a.move("![");const u=n.safe(t.alt,{before:l,after:"]",...a.current()});l+=a.move(u+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=f,s(),r==="full"||!u||u!==d?l+=a.move(d+"]"):r==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function gne(){return"!"}q5.peek=yne;function q5(t,e,n){let i=t.value||"",r="`",s=-1;for(;new RegExp("(^|[^`])"+r+"([^`]|$)").test(i);)r+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++s<n.unsafe.length;){const o=n.unsafe[s],a=n.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(i);){let u=l.index;i.charCodeAt(u)===10&&i.charCodeAt(u-1)===13&&u--,i=i.slice(0,u)+" "+i.slice(l.index+1)}}return r+i+r}function yne(){return"`"}function Y5(t,e){const n=Jb(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}Z5.peek=xne;function Z5(t,e,n,i){const r=oM(n),s=r==='"'?"Quote":"Apostrophe",o=n.createTracker(i);let a,l;if(Y5(t,n)){const f=n.stack;n.stack=[],a=n.enter("autolink");let d=o.move("<");return d+=o.move(n.containerPhrasing(t,{before:d,after:">",...o.current()})),d+=o.move(">"),a(),n.stack=f,d}a=n.enter("link"),l=n.enter("label");let u=o.move("[");return u+=o.move(n.containerPhrasing(t,{before:u,after:"](",...o.current()})),u+=o.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),u+=o.move("<"),u+=o.move(n.safe(t.url,{before:u,after:">",...o.current()})),u+=o.move(">")):(l=n.enter("destinationRaw"),u+=o.move(n.safe(t.url,{before:u,after:t.title?" ":")",...o.current()}))),l(),t.title&&(l=n.enter(`title${s}`),u+=o.move(" "+r),u+=o.move(n.safe(t.title,{before:u,after:r,...o.current()})),u+=o.move(r),l()),u+=o.move(")"),a(),u}function xne(t,e,n){return Y5(t,n)?"<":"["}J5.peek=vne;function J5(t,e,n,i){const r=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const a=n.createTracker(i);let l=a.move("[");const u=n.containerPhrasing(t,{before:l,after:"]",...a.current()});l+=a.move(u+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=f,s(),r==="full"||!u||u!==d?l+=a.move(d+"]"):r==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function vne(){return"["}function aM(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function wne(t){const e=aM(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function _ne(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function K5(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function Sne(t,e,n,i){const r=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?_ne(n):aM(n);const a=t.ordered?o==="."?")":".":wne(n);let l=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const f=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&f&&(!f.children||!f.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),K5(n)===o&&f){let d=-1;for(;++d<t.children.length;){const p=t.children[d];if(p&&p.type==="listItem"&&p.children&&p.children[0]&&p.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),n.bulletCurrent=o;const u=n.containerFlow(t,i);return n.bulletLastUsed=o,n.bulletCurrent=s,r(),u}function bne(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function Mne(t,e,n,i){const r=bne(n);let s=n.bulletCurrent||aM(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(r==="tab"||r==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=n.createTracker(i);a.move(s+" ".repeat(o-s.length)),a.shift(o);const l=n.enter("listItem"),u=n.indentLines(n.containerFlow(t,a.current()),f);return l(),u;function f(d,p,m){return p?(m?"":" ".repeat(o))+d:(m?s:s+" ".repeat(o-s.length))+d}}function Tne(t,e,n,i){const r=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,i);return s(),r(),o}const Ene=yy(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function kne(t,e,n,i){return(t.children.some(function(o){return Ene(o)})?n.containerPhrasing:n.containerFlow).call(n,t,i)}function Cne(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}Q5.peek=Ane;function Q5(t,e,n,i){const r=Cne(n),s=n.enter("strong"),o=n.createTracker(i),a=o.move(r+r);let l=o.move(n.containerPhrasing(t,{after:r,before:a,...o.current()}));const u=l.charCodeAt(0),f=g0(i.before.charCodeAt(i.before.length-1),u,r);f.inside&&(l=Yd(u)+l.slice(1));const d=l.charCodeAt(l.length-1),p=g0(i.after.charCodeAt(0),d,r);p.inside&&(l=l.slice(0,-1)+Yd(d));const m=o.move(r+r);return s(),n.attentionEncodeSurroundingInfo={after:p.outside,before:f.outside},a+l+m}function Ane(t,e,n){return n.options.strong||"*"}function Pne(t,e,n,i){return n.safe(t.value,i)}function Lne(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function Rne(t,e,n){const i=(K5(n)+(n.options.ruleSpaces?" ":"")).repeat(Lne(n));return n.options.ruleSpaces?i.slice(0,-1):i}const ez={blockquote:tne,break:KC,code:ane,definition:une,emphasis:G5,hardBreak:KC,heading:hne,html:$5,image:j5,imageReference:X5,inlineCode:q5,link:Z5,linkReference:J5,list:Sne,listItem:Mne,paragraph:Tne,root:kne,strong:Q5,text:Pne,thematicBreak:Rne};function Ine(){return{enter:{table:Dne,tableData:QC,tableHeader:QC,tableRow:Fne},exit:{codeText:Nne,table:zne,tableData:v1,tableHeader:v1,tableRow:v1}}}function Dne(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function zne(t){this.exit(t),this.data.inTable=void 0}function Fne(t){this.enter({type:"tableRow",children:[]},t)}function v1(t){this.exit(t)}function QC(t){this.enter({type:"tableCell",children:[]},t)}function Nne(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,One));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function One(t,e){return e==="|"?e:t}function Bne(t){const e=t||{},n=e.tableCellPadding,i=e.tablePipeAlign,r=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:p,table:o,tableCell:l,tableRow:a}};function o(m,g,y,w){return u(f(m,y,w),m.align)}function a(m,g,y,w){const v=d(m,y,w),_=u([v]);return _.slice(0,_.indexOf(`
`))}function l(m,g,y,w){const v=y.enter("tableCell"),_=y.enter("phrasing"),b=y.containerPhrasing(m,{...w,before:s,after:s});return _(),v(),b}function u(m,g){return Qte(m,{align:g,alignDelimiters:i,padding:n,stringLength:r})}function f(m,g,y){const w=m.children;let v=-1;const _=[],b=g.enter("table");for(;++v<w.length;)_[v]=d(w[v],g,y);return b(),_}function d(m,g,y){const w=m.children;let v=-1;const _=[],b=g.enter("tableRow");for(;++v<w.length;)_[v]=l(w[v],m,g,y);return b(),_}function p(m,g,y){let w=ez.inlineCode(m,g,y);return y.stack.includes("tableCell")&&(w=w.replace(/\|/g,"\\$&")),w}}function Une(){return{exit:{taskListCheckValueChecked:eA,taskListCheckValueUnchecked:eA,paragraph:Hne}}}function Vne(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Wne}}}function eA(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function Hne(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const i=n.children[0];if(i&&i.type==="text"){const r=e.children;let s=-1,o;for(;++s<r.length;){const a=r[s];if(a.type==="paragraph"){o=a;break}}o===n&&(i.value=i.value.slice(1),i.value.length===0?n.children.shift():n.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,n.position.start=Object.assign({},i.position.start)))}}this.exit(t)}function Wne(t,e,n,i){const r=t.children[0],s=typeof t.checked=="boolean"&&r&&r.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",a=n.createTracker(i);s&&a.move(o);let l=ez.listItem(t,e,n,{...i,...a.current()});return s&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),l;function u(f){return f+o}}function Gne(){return[Ste(),Wte(),Xte(),Ine(),Une()]}function $ne(t){return{extensions:[bte(),Gte(t),qte(),Bne(t),Vne()]}}const jne={tokenize:Kne,partial:!0},tz={tokenize:Qne,partial:!0},nz={tokenize:eie,partial:!0},iz={tokenize:tie,partial:!0},Xne={tokenize:nie,partial:!0},rz={name:"wwwAutolink",tokenize:Zne,previous:oz},sz={name:"protocolAutolink",tokenize:Jne,previous:az},yo={name:"emailAutolink",tokenize:Yne,previous:lz},Ps={};function qne(){return{text:Ps}}let $a=48;for(;$a<123;)Ps[$a]=yo,$a++,$a===58?$a=65:$a===91&&($a=97);Ps[43]=yo;Ps[45]=yo;Ps[46]=yo;Ps[95]=yo;Ps[72]=[yo,sz];Ps[104]=[yo,sz];Ps[87]=[yo,rz];Ps[119]=[yo,rz];function Yne(t,e,n){const i=this;let r,s;return o;function o(d){return!z_(d)||!lz.call(i,i.previous)||lM(i.events)?n(d):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(d))}function a(d){return z_(d)?(t.consume(d),a):d===64?(t.consume(d),l):n(d)}function l(d){return d===46?t.check(Xne,f,u)(d):d===45||d===95||pi(d)?(s=!0,t.consume(d),l):f(d)}function u(d){return t.consume(d),r=!0,l}function f(d){return s&&r&&Mi(i.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(d)):n(d)}}function Zne(t,e,n){const i=this;return r;function r(o){return o!==87&&o!==119||!oz.call(i,i.previous)||lM(i.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(jne,t.attempt(tz,t.attempt(nz,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function Jne(t,e,n){const i=this;let r="",s=!1;return o;function o(d){return(d===72||d===104)&&az.call(i,i.previous)&&!lM(i.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),r+=String.fromCodePoint(d),t.consume(d),a):n(d)}function a(d){if(Mi(d)&&r.length<5)return r+=String.fromCodePoint(d),t.consume(d),a;if(d===58){const p=r.toLowerCase();if(p==="http"||p==="https")return t.consume(d),l}return n(d)}function l(d){return d===47?(t.consume(d),s?u:(s=!0,l)):n(d)}function u(d){return d===null||h0(d)||Xt(d)||Il(d)||py(d)?n(d):t.attempt(tz,t.attempt(nz,f),n)(d)}function f(d){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(d)}}function Kne(t,e,n){let i=0;return r;function r(o){return(o===87||o===119)&&i<3?(i++,t.consume(o),r):o===46&&i===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function Qne(t,e,n){let i,r,s;return o;function o(u){return u===46||u===95?t.check(iz,l,a)(u):u===null||Xt(u)||Il(u)||u!==45&&py(u)?l(u):(s=!0,t.consume(u),o)}function a(u){return u===95?i=!0:(r=i,i=void 0),t.consume(u),o}function l(u){return r||i||!s?n(u):e(u)}}function eie(t,e){let n=0,i=0;return r;function r(o){return o===40?(n++,t.consume(o),r):o===41&&i<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(iz,e,s)(o):o===null||Xt(o)||Il(o)?e(o):(t.consume(o),r)}function s(o){return o===41&&i++,t.consume(o),r}}function tie(t,e,n){return i;function i(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(t.consume(a),i):a===38?(t.consume(a),s):a===93?(t.consume(a),r):a===60||a===null||Xt(a)||Il(a)?e(a):n(a)}function r(a){return a===null||a===40||a===91||Xt(a)||Il(a)?e(a):i(a)}function s(a){return Mi(a)?o(a):n(a)}function o(a){return a===59?(t.consume(a),i):Mi(a)?(t.consume(a),o):n(a)}}function nie(t,e,n){return i;function i(s){return t.consume(s),r}function r(s){return pi(s)?n(s):e(s)}}function oz(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||Xt(t)}function az(t){return!Mi(t)}function lz(t){return!(t===47||z_(t))}function z_(t){return t===43||t===45||t===46||t===95||pi(t)}function lM(t){let e=t.length,n=!1;for(;e--;){const i=t[e][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){n=!0;break}if(i._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const iie={tokenize:fie,partial:!0};function rie(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:lie,continuation:{tokenize:uie},exit:cie}},text:{91:{name:"gfmFootnoteCall",tokenize:aie},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:sie,resolveTo:oie}}}}function sie(t,e,n){const i=this;let r=i.events.length;const s=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let o;for(;r--;){const l=i.events[r][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!o||!o._balanced)return n(l);const u=as(i.sliceSerialize({start:o.end,end:i.now()}));return u.codePointAt(0)!==94||!s.includes(u.slice(1))?n(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function oie(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},r={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};r.end.column++,r.end.offset++,r.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},r.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[t[n+1],t[n+2],["enter",i,e],t[n+3],t[n+4],["enter",r,e],["exit",r,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",i,e]];return t.splice(n,t.length-n+1,...a),t}function aie(t,e,n){const i=this,r=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s=0,o;return a;function a(d){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),l}function l(d){return d!==94?n(d):(t.enter("gfmFootnoteCallMarker"),t.consume(d),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",u)}function u(d){if(s>999||d===93&&!o||d===null||d===91||Xt(d))return n(d);if(d===93){t.exit("chunkString");const p=t.exit("gfmFootnoteCallString");return r.includes(as(i.sliceSerialize(p)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(d)}return Xt(d)||(o=!0),s++,t.consume(d),d===92?f:u}function f(d){return d===91||d===92||d===93?(t.consume(d),s++,u):u(d)}}function lie(t,e,n){const i=this,r=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s,o=0,a;return l;function l(g){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(g),t.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(g){return g===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(g),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",f):n(g)}function f(g){if(o>999||g===93&&!a||g===null||g===91||Xt(g))return n(g);if(g===93){t.exit("chunkString");const y=t.exit("gfmFootnoteDefinitionLabelString");return s=as(i.sliceSerialize(y)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(g),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),p}return Xt(g)||(a=!0),o++,t.consume(g),g===92?d:f}function d(g){return g===91||g===92||g===93?(t.consume(g),o++,f):f(g)}function p(g){return g===58?(t.enter("definitionMarker"),t.consume(g),t.exit("definitionMarker"),r.includes(s)||r.push(s),Pt(t,m,"gfmFootnoteDefinitionWhitespace")):n(g)}function m(g){return e(g)}}function uie(t,e,n){return t.check(Ch,e,t.attempt(iie,e,n))}function cie(t){t.exit("gfmFootnoteDefinition")}function fie(t,e,n){const i=this;return Pt(t,r,"gfmFootnoteDefinitionIndent",4+1);function r(s){const o=i.events[i.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function die(t){let n=(t||{}).singleTilde;const i={name:"strikethrough",tokenize:s,resolveAll:r};return n==null&&(n=!0),{text:{126:i},insideSpan:{null:[i]},attentionMarkers:{null:[126]}};function r(o,a){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let u=l;for(;u--;)if(o[u][0]==="exit"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[u][1].end.offset-o[u][1].start.offset){o[l][1].type="strikethroughSequence",o[u][1].type="strikethroughSequence";const f={type:"strikethrough",start:Object.assign({},o[u][1].start),end:Object.assign({},o[l][1].end)},d={type:"strikethroughText",start:Object.assign({},o[u][1].end),end:Object.assign({},o[l][1].start)},p=[["enter",f,a],["enter",o[u][1],a],["exit",o[u][1],a],["enter",d,a]],m=a.parser.constructs.insideSpan.null;m&&ar(p,p.length,0,my(m,o.slice(u+1,l),a)),ar(p,p.length,0,[["exit",d,a],["enter",o[l][1],a],["exit",o[l][1],a],["exit",f,a]]),ar(o,u-1,l-u+3,p),l=u+p.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function s(o,a,l){const u=this.previous,f=this.events;let d=0;return p;function p(g){return u===126&&f[f.length-1][1].type!=="characterEscape"?l(g):(o.enter("strikethroughSequenceTemporary"),m(g))}function m(g){const y=Rc(u);if(g===126)return d>1?l(g):(o.consume(g),d++,m);if(d<2&&!n)return l(g);const w=o.exit("strikethroughSequenceTemporary"),v=Rc(g);return w._open=!v||v===2&&!!y,w._close=!y||y===2&&!!v,a(g)}}}class hie{constructor(){this.map=[]}add(e,n,i){pie(this,e,n,i)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const i=[];for(;n>0;)n-=1,i.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];i.push(e.slice()),e.length=0;let r=i.pop();for(;r;){for(const s of r)e.push(s);r=i.pop()}this.map.length=0}}function pie(t,e,n,i){let r=0;if(!(n===0&&i.length===0)){for(;r<t.map.length;){if(t.map[r][0]===e){t.map[r][1]+=n,t.map[r][2].push(...i);return}r+=1}t.map.push([e,n,i])}}function mie(t,e){let n=!1;const i=[];for(;e<t.length;){const r=t[e];if(n){if(r[0]==="enter")r[1].type==="tableContent"&&i.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(r[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=i.length-1;i[s]=i[s]==="left"?"center":"right"}}else if(r[1].type==="tableDelimiterRow")break}else r[0]==="enter"&&r[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return i}function gie(){return{flow:{null:{name:"table",tokenize:yie,resolveAll:xie}}}}function yie(t,e,n){const i=this;let r=0,s=0,o;return a;function a(R){let O=i.events.length-1;for(;O>-1;){const G=i.events[O][1].type;if(G==="lineEnding"||G==="linePrefix")O--;else break}const q=O>-1?i.events[O][1].type:null,j=q==="tableHead"||q==="tableRow"?E:l;return j===E&&i.parser.lazy[i.now().line]?n(R):j(R)}function l(R){return t.enter("tableHead"),t.enter("tableRow"),u(R)}function u(R){return R===124||(o=!0,s+=1),f(R)}function f(R){return R===null?n(R):nt(R)?s>1?(s=0,i.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(R),t.exit("lineEnding"),m):n(R):St(R)?Pt(t,f,"whitespace")(R):(s+=1,o&&(o=!1,r+=1),R===124?(t.enter("tableCellDivider"),t.consume(R),t.exit("tableCellDivider"),o=!0,f):(t.enter("data"),d(R)))}function d(R){return R===null||R===124||Xt(R)?(t.exit("data"),f(R)):(t.consume(R),R===92?p:d)}function p(R){return R===92||R===124?(t.consume(R),d):d(R)}function m(R){return i.interrupt=!1,i.parser.lazy[i.now().line]?n(R):(t.enter("tableDelimiterRow"),o=!1,St(R)?Pt(t,g,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(R):g(R))}function g(R){return R===45||R===58?w(R):R===124?(o=!0,t.enter("tableCellDivider"),t.consume(R),t.exit("tableCellDivider"),y):k(R)}function y(R){return St(R)?Pt(t,w,"whitespace")(R):w(R)}function w(R){return R===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(R),t.exit("tableDelimiterMarker"),v):R===45?(s+=1,v(R)):R===null||nt(R)?M(R):k(R)}function v(R){return R===45?(t.enter("tableDelimiterFiller"),_(R)):k(R)}function _(R){return R===45?(t.consume(R),_):R===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(R),t.exit("tableDelimiterMarker"),b):(t.exit("tableDelimiterFiller"),b(R))}function b(R){return St(R)?Pt(t,M,"whitespace")(R):M(R)}function M(R){return R===124?g(R):R===null||nt(R)?!o||r!==s?k(R):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(R)):k(R)}function k(R){return n(R)}function E(R){return t.enter("tableRow"),I(R)}function I(R){return R===124?(t.enter("tableCellDivider"),t.consume(R),t.exit("tableCellDivider"),I):R===null||nt(R)?(t.exit("tableRow"),e(R)):St(R)?Pt(t,I,"whitespace")(R):(t.enter("data"),C(R))}function C(R){return R===null||R===124||Xt(R)?(t.exit("data"),I(R)):(t.consume(R),R===92?L:C)}function L(R){return R===92||R===124?(t.consume(R),C):C(R)}}function xie(t,e){let n=-1,i=!0,r=0,s=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,u,f,d;const p=new hie;for(;++n<t.length;){const m=t[n],g=m[1];m[0]==="enter"?g.type==="tableHead"?(a=!1,l!==0&&(tA(p,e,l,u,f),f=void 0,l=0),u={type:"table",start:Object.assign({},g.start),end:Object.assign({},g.end)},p.add(n,0,[["enter",u,e]])):g.type==="tableRow"||g.type==="tableDelimiterRow"?(i=!0,d=void 0,s=[0,0,0,0],o=[0,n+1,0,0],a&&(a=!1,f={type:"tableBody",start:Object.assign({},g.start),end:Object.assign({},g.end)},p.add(n,0,[["enter",f,e]])),r=g.type==="tableDelimiterRow"?2:f?3:1):r&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")?(i=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],d=Hm(p,e,s,r,void 0,d),s=[0,0,0,0]),o[2]=n)):g.type==="tableCellDivider"&&(i?i=!1:(s[1]!==0&&(o[0]=o[1],d=Hm(p,e,s,r,void 0,d)),s=o,o=[s[1],n,0,0])):g.type==="tableHead"?(a=!0,l=n):g.type==="tableRow"||g.type==="tableDelimiterRow"?(l=n,s[1]!==0?(o[0]=o[1],d=Hm(p,e,s,r,n,d)):o[1]!==0&&(d=Hm(p,e,o,r,n,d)),r=0):r&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")&&(o[3]=n)}for(l!==0&&tA(p,e,l,u,f),p.consume(e.events),n=-1;++n<e.events.length;){const m=e.events[n];m[0]==="enter"&&m[1].type==="table"&&(m[1]._align=mie(e.events,n))}return t}function Hm(t,e,n,i,r,s){const o=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(s.end=Object.assign({},Ru(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const l=Ru(e.events,n[1]);if(s={type:o,start:Object.assign({},l),end:Object.assign({},l)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const u=Ru(e.events,n[2]),f=Ru(e.events,n[3]),d={type:a,start:Object.assign({},u),end:Object.assign({},f)};if(t.add(n[2],0,[["enter",d,e]]),i!==2){const p=e.events[n[2]],m=e.events[n[3]];if(p[1].end=Object.assign({},m[1].end),p[1].type="chunkText",p[1].contentType="text",n[3]>n[2]+1){const g=n[2]+1,y=n[3]-n[2]-1;t.add(g,y,[])}}t.add(n[3]+1,0,[["exit",d,e]])}return r!==void 0&&(s.end=Object.assign({},Ru(e.events,r)),t.add(r,0,[["exit",s,e]]),s=void 0),s}function tA(t,e,n,i,r){const s=[],o=Ru(e.events,n);r&&(r.end=Object.assign({},o),s.push(["exit",r,e])),i.end=Object.assign({},o),s.push(["exit",i,e]),t.add(n+1,0,s)}function Ru(t,e){const n=t[e],i=n[0]==="enter"?"start":"end";return n[1][i]}const vie={name:"tasklistCheck",tokenize:_ie};function wie(){return{text:{91:vie}}}function _ie(t,e,n){const i=this;return r;function r(l){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?n(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),s)}function s(l){return Xt(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),o):n(l)}function o(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),a):n(l)}function a(l){return nt(l)?e(l):St(l)?t.check({tokenize:Sie},e,n)(l):n(l)}}function Sie(t,e,n){return Pt(t,i,"whitespace");function i(r){return r===null?n(r):e(r)}}function bie(t){return x5([qne(),rie(),die(t),gie(),wie()])}const Mie={};function Tie(t){const e=this,n=t||Mie,i=e.data(),r=i.micromarkExtensions||(i.micromarkExtensions=[]),s=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),o=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);r.push(bie(n)),s.push(Gne()),o.push($ne(n))}const Eie=ke.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  background: ${()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"linear-gradient(to bottom, transparent 0%, rgba(26, 26, 26, 0.98) 100%)":"linear-gradient(to bottom, transparent 0%, rgba(255, 255, 255, 0.95) 100%)"};
  color: ${()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"#e0e0e0":"#333"};
`,nA=ke.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  position: relative;
  
  /* Background image */
  ${t=>t.$backgroundImage&&`
    background-image: url(${t.$backgroundImage});
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
  `}
  
  /* Overlay for readability */
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: ${()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"linear-gradient(to bottom, transparent 0%, rgba(26, 26, 26, 0.85) 100%)":"linear-gradient(to bottom, transparent 0%, rgba(255, 255, 255, 0.85) 100%)"};
    pointer-events: none;
    z-index: 1;
  }
  
  /* Ensure content is above overlay */
  > * {
    position: relative;
    z-index: 2;
  }
  
  color: ${()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"#e0e0e0":"#333"};
`,kie=ke.div`
  flex: 1;
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 16px;
  max-width: 960px;
  margin: 0 auto;
  width: 100%;
  overflow-y: auto;
  min-height: 0;
  
  /* Hide scrollbar completely */
  &::-webkit-scrollbar {
    display: none;
  }
  
  /* For Firefox */
  scrollbar-width: none;
`,Cie=ke.div`
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  color: ${()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"#b0b0b0":"#666"};
  padding: 40px;
`,Aie=ke.h3`
  margin: 0 0 8px 0;
  font-size: 18px;
  font-weight: 600;
  color: ${()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"#e0e0e0":"#333"};
`,Pie=ke.p`
  margin: 0;
  font-size: 14px;
  opacity: 0.7;
  max-width: 300px;
`,uM=ke(Ei.div)`
  max-width: ${t=>t.$isHuman?"70%":"85%"};
  align-self: ${t=>t.$isHuman?"flex-end":"flex-start"};
  padding: ${({theme:t})=>`${t.spacing[2]} ${t.spacing[3]}`}; /* 8px 12px */
  border-radius: ${({theme:t})=>t.semanticRadii.chat.bubble.base};
  font-size: ${({theme:t})=>t.fontSize.sm};
  font-family: ${({theme:t})=>t.fontFamily.sans.join(", ")};
  font-weight: ${({theme:t})=>t.fontWeight.normal};
  line-height: ${({theme:t})=>t.lineHeight.relaxed};
  word-wrap: break-word;
  position: relative;
  
  ${t=>t.$isHuman?`
    background: ${t.theme.palette.chat.bubble.user.background};
    color: ${t.theme.palette.chat.bubble.user.text};
    border-bottom-right-radius: ${t.theme.semanticRadii.chat.bubble.tail};
  `:`
    background: ${t.theme.palette.chat.bubble.assistant.background};
    color: ${t.theme.palette.chat.bubble.assistant.text};
    border-bottom-left-radius: ${t.theme.semanticRadii.chat.bubble.tail};
    border: 1px solid ${t.theme.palette.chat.bubble.assistant.border};
    
    /* Markdown styling for AI messages */
    & strong {
      font-weight: ${t.theme.fontWeight.semibold};
      color: ${t.theme.palette.chat.markdown.strong};
    }
    
    & em {
      font-style: italic;
      opacity: 0.9;
      color: ${t.theme.palette.chat.markdown.emphasis};
    }
    
    & code {
      background: ${t.theme.palette.chat.markdown.codeBackground};
      color: ${t.theme.palette.chat.markdown.code};
      padding: ${t.theme.spacing[0]} ${t.theme.spacing[1]}; /* 2px 4px */
      border-radius: ${t.theme.semanticRadii.chat.code};
      font-family: ${t.theme.fontFamily.mono.join(", ")};
      font-size: 0.9em;
    }
    
    & pre {
      background: ${t.theme.palette.chat.markdown.codeBlockBackground};
      border: 1px solid ${t.theme.palette.chat.markdown.codeBlockBorder};
      border-radius: ${t.theme.semanticRadii.chat.codeBlock};
      padding: ${t.theme.spacing[3]}; /* 12px */
      overflow-x: auto;
      margin: ${t.theme.spacing[2]} 0; /* 8px 0 */
      
      & code {
        background: none;
        color: inherit;
        padding: 0;
        border-radius: 0;
        font-size: 0.85em;
      }
    }
    
    & a {
      color: ${t.theme.palette.chat.markdown.link};
      text-decoration: none;
      
      &:hover {
        text-decoration: underline;
        color: ${t.theme.palette.chat.markdown.linkHover};
      }
    }
    
    & ul, & ol {
      margin: ${t.theme.spacing[2]} 0; /* 8px 0 */
      padding-left: ${t.theme.spacing[5]}; /* 20px */
    }
    
    & li {
      margin: ${t.theme.spacing[1]} 0; /* 4px 0 */
    }
    
    & h1, & h2, & h3, & h4, & h5, & h6 {
      margin: ${t.theme.spacing[3]} 0 ${t.theme.spacing[2]} 0; /* 12px 0 8px 0 */
      font-weight: ${t.theme.fontWeight.semibold};
      color: ${t.theme.palette.chat.markdown.heading};
    }
    
    & h1 { 
      font-size: ${t.theme.fontSize.lg}; 
      font-family: ${t.theme.fontFamily.sans.join(", ")};
    }
    & h2 { 
      font-size: ${t.theme.fontSize.base}; 
      font-family: ${t.theme.fontFamily.sans.join(", ")};
    }
    & h3 { 
      font-size: ${t.theme.fontSize.sm}; 
      font-family: ${t.theme.fontFamily.sans.join(", ")};
    }
    & h4, & h5, & h6 { 
      font-size: ${t.theme.fontSize.sm}; 
      font-family: ${t.theme.fontFamily.sans.join(", ")};
    }
    
    & p {
      margin: ${t.theme.spacing[2]} 0; /* 8px 0 */
      line-height: ${t.theme.lineHeight.relaxed};
      
      &:first-child {
        margin-top: 0;
      }
      
      &:last-child {
        margin-bottom: 0;
      }
    }
    
    & blockquote {
      border-left: 3px solid ${t.theme.palette.chat.markdown.blockquoteBorder};
      padding-left: ${t.theme.spacing[3]}; /* 12px */
      margin: ${t.theme.spacing[2]} 0; /* 8px 0 */
      opacity: 0.8;
    }
    
    /* Table styling */
    & table {
      width: 100%;
      border-collapse: collapse;
      margin: ${t.theme.spacing[3]} 0; /* 12px 0 */
      border-radius: ${t.theme.semanticRadii.chat.table};
      overflow: hidden;
      border: 1px solid ${t.theme.palette.chat.markdown.tableBorder};
    }
    
    & th, & td {
      padding: ${t.theme.spacing[2]} ${t.theme.spacing[3]}; /* 8px 12px */
      border-bottom: 0px solid ${t.theme.palette.chat.markdown.tableCellBorder};
      text-align: left;
      vertical-align: top;
    }
    
    & th {
      background: ${t.theme.palette.chat.markdown.tableHeaderBackground};
      font-weight: ${t.theme.fontWeight.semibold};
      color: ${t.theme.palette.chat.markdown.tableHeaderText};
    }
    
    & tr:nth-child(odd) {
      background: ${t.theme.palette.chat.markdown.tableRowOdd};
    }
    
    & tr:nth-child(even) {
      background: ${t.theme.palette.chat.markdown.tableRowEven};
    }
    
    & tr:last-child td {
      border-bottom: none;
    }
    
    & td:first-child, & th:first-child {
      padding-left: ${t.theme.spacing[4]}; /* 16px */
    }
    
    & td:last-child, & th:last-child {
      padding-right: ${t.theme.spacing[4]}; /* 16px */
    }
  `}
`,Lie=ke.div`
  font-size: ${({theme:t})=>t.fontSize.xs};
  font-weight: ${({theme:t})=>t.fontWeight.semibold};
  margin-bottom: ${({theme:t})=>t.spacing[1]}; /* 4px */
  opacity: 0.9;
  color: ${t=>t.$userColor?t.$userColor:t.$isHuman?t.theme.palette.chat.header.userText:t.theme.palette.chat.header.assistantText};
`;ke.div`
  font-size: ${({theme:t})=>t.fontSize.xs};
  font-weight: ${({theme:t})=>t.fontWeight.normal};
  font-family: ${({theme:t})=>t.fontFamily.sans.join(", ")};
  opacity: 0.6;
  margin-top: ${({theme:t})=>t.spacing[1]}; /* 4px */
  text-align: right;
`;const Rie=ke.div`
  display: flex;
  align-items: center;
  gap: ${({theme:t})=>t.spacing[2]}; /* 8px */
  padding: ${({theme:t})=>`${t.spacing[2]} ${t.spacing[4]}`}; /* 8px 16px */
  font-size: ${({theme:t})=>t.fontSize.xs};
  color: ${({theme:t})=>t.palette.chat.status.text};
  opacity: ${t=>t.$isTyping?1:0};
  transition: opacity 0.3s ease;
  
  &::before {
    content: '';
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: ${({theme:t})=>t.palette.chat.status.indicator};
    animation: ${t=>t.$isTyping?`${OD} 1.5s infinite`:"none"};
  }
`,Iie=ke.div`
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 8px;
`,Die=ke.div`
  display: flex;
  align-items: center;
  gap: 8px;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 8px;
  padding: 8px;
  max-width: 200px;
  font-size: 12px;
  
  ${t=>t.$isImage&&`
    flex-direction: column;
    align-items: stretch;
  `}
`,zie=ke.img`
  width: 120px;
  height: 80px;
  object-fit: cover;
  border-radius: 4px;
  margin-bottom: 4px;
`,Fie=ke.div`
  display: flex;
  flex-direction: column;
  gap: 2px;
  overflow: hidden;
`,Nie=ke.span`
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
`,Oie=ke.span`
  font-size: 10px;
  opacity: 0.7;
`,Bie=ke.div`
  padding: 20px;
  background: ${()=>window.matchMedia("(prefers-color-scheme: dark)").matches?`linear-gradient(
          to bottom,
          transparent 0%,
          rgb(27, 26, 26) 100%
        )`:`linear-gradient(
          to bottom,
          transparent 0%,
          rgb(245, 245, 245) 100%
        )`};
  position: relative;
  margin-top: -80px;
  padding-top: 16px;
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 130px;
    backdrop-filter: blur(12px);
    -webkit-mask: linear-gradient(
      to bottom,
      rgba(255, 255, 255, 1) 0%,
      rgba(255, 255, 255, 0.8) 30%,
      rgba(255, 255, 255, 0.4) 60%,
      rgba(255, 255, 255, 0) 100%
    );
    mask: linear-gradient(
      to bottom,
      rgba(255, 255, 255, 1) 0%,
      rgba(255, 255, 255, 0.85) 30%,
      rgba(255, 255, 255, 0.5) 60%,
      rgba(255, 255, 255, 0) 100%
    );
    pointer-events: none;
    z-index: 0;
  }
  
  > * {
    position: relative;
    z-index: 2;
  }
`,Uie=ke.div`
  position: relative;
  max-width: 600px;
  margin: 0 auto;
  display: flex;
  gap: 8px;
  align-items: center;
  background: rgba(198, 212, 0, 0);
`,Vie=ke.textarea`
  flex: 1;
  min-height: 26px;
  max-height: 120px;
  padding: 12px 12px 14px 38px;
  border: 1px solid ${()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"rgba(102, 102, 102, 0.2)":"rgba(0, 0, 0, 0.15)"};
  border-radius: ${({theme:t})=>t.semanticRadii.chat.input};
  background: ${()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"rgba(24, 23, 23, 0.91)":"rgba(255, 255, 255, 0.9)"};
  color: ${()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"#e0e0e0":"#333333"};
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
  font-size: 14px;
  line-height: 1.4;
  resize: none;
  outline: none;
  text-align: left;
  
  /* Clip scrollbar to rounded shape */
  &.has-scroll {
    clip-path: inset(0 0 0 0 round 24px);
  }
  
  &::placeholder {
    color: ${()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"rgba(224, 224, 224, 0.5)":"rgba(100, 100, 100, 0.6)"};
  }
  
  &:focus {
    border-color: ${()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"rgba(111, 111, 111, 0.3)":"rgba(65, 69, 73, 0.4)"};
    background: ${()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"rgba(19, 19, 19, 0.6)":"rgba(255, 255, 255, 0.95)"};
  }
  
  /* Hide scrollbar by default */
  &::-webkit-scrollbar {
    width: 0px;
    display: none;
  }
  
  /* Show scrollbar when content is expanded */
  &.has-scroll::-webkit-scrollbar {
    width: 8px;
    display: block;
  }
  
  &.has-scroll::-webkit-scrollbar-track {
    background: transparent;
    border-left: 2px solid transparent;
    border-right: 2px solid transparent;
    border-radius: ${({theme:t})=>t.semanticRadii.chat.input};
  }
  
  &.has-scroll::-webkit-scrollbar-thumb {
    background: rgb(0, 0, 255);
    border-radius: ${({theme:t})=>t.semanticRadii.chat.input};
    border-left: 1px solid transparent;
    border-right: 3px solid transparent;
    background-clip: padding-box;
  }
`,Hie=ke.div`
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 8px;
  padding: 0px 12px;
`,Wie=ke.div`
  display: flex;
  align-items: center;
  gap: ${({theme:t})=>t.spacing[2]};
  background: ${({theme:t})=>t.palette.background.secondary};
  border: 1px solid ${({theme:t})=>t.palette.border.muted};
  border-radius: ${({theme:t})=>t.semanticRadii.chat.attachment};
  padding: ${({theme:t})=>`${t.spacing[1]} ${t.spacing[2]} ${t.spacing[1]} ${t.spacing[3]}`};
  font-size: ${({theme:t})=>t.fontSize.xs};
  font-weight: ${({theme:t})=>t.fontWeight.medium};
  color: ${({theme:t})=>t.palette.text.secondary};
  max-width: 200px;
`,Gie=ke.span`
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  flex: 1;
`,$ie=ke.div`
  width: 24px;
  height: 24px;
  border-radius: ${({theme:t})=>t.semanticRadii.chat.attachment};
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  background: ${({theme:t})=>t.palette.background.tertiary};
  flex-shrink: 0;
  color: ${({theme:t})=>t.palette.text.tertiary};
`,jie=ke.img`
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: ${({theme:t})=>t.semanticRadii.chat.attachment};
`,iA={light:["#dc2626","#ea580c","#d97706","#65a30d","#059669","#0891b2","#2563eb","#7c3aed","#c026d3","#e11d48","#7c2d12","#374151"],dark:["#f87171","#fb923c","#fbbf24","#a3e635","#34d399","#22d3ee","#60a5fa","#a78bfa","#f472b6","#fb7185","#d2b48c","#9ca3af"]};function Xie(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);e=(e<<5)-e+i,e=e&e}return Math.abs(e)}function uz(t){const n=window.matchMedia("(prefers-color-scheme: dark)").matches?iA.dark:iA.light,r=Xie(t)%n.length;return n[r]}const qie=ke.div`
  position: relative;
  display: flex;
  flex-direction: column;
  width: 100%;
`,Yie=ke.div`
  position: absolute;
  bottom: 12px;
  right: 12px;
  z-index: 10;
  
  .message-actions {
    opacity: ${t=>t.$isVisible?1:0};
    transform: translateY(${t=>t.$isVisible?0:2}px);
    transition: opacity 0.2s ease, transform 0.2s ease;
  }
`,Zie=ke(uM)`
  position: relative;
`,Jie=ke(uM)`
  max-width: 90%;
  align-self: center;
  background: ${({theme:t})=>t.palette.chat.bubble.system.background};
  color: ${({theme:t})=>t.palette.chat.bubble.system.text};
  font-size: ${({theme:t})=>t.fontSize.xs};
  font-style: italic;
  border-radius: 16px;
  padding: ${({theme:t})=>`${t.spacing[1]} ${t.spacing[3]}`}; /* 6px 12px */
  text-align: center;
  border: none;
`,Kie=({message:t,isGroupChat:e=!1,currentUser:n=null,actions:i=[]})=>{const[r,s]=H.useState(!1),[o,a]=H.useState(!1),l=H.useRef(null),u=I=>"sender"in I||I.type==="system",f=e?u(t)&&t.type==="user"&&t.sender===(n==null?void 0:n.nickname):t.type==="human",d=e&&u(t)&&t.type==="system",m=(()=>e&&u(t)?t.type==="system"||f?null:t.sender||"Unknown User":t.type!=="human"?"Andrei":null)(),y=(()=>{if(e&&u(t)&&t.sender&&!f)return uz(t.sender)})();H.useEffect(()=>{const I=C=>{l.current&&!l.current.contains(C.target)&&(s(!1),a(!1))};if(r)return document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[r]);const w=()=>{s(I=>!I)},v=()=>{s(!1)},_=()=>{a(!0)},b=()=>{r||a(!1)};H.useEffect(()=>{!r&&!o&&a(!1)},[r,o]);const M=I=>{I.onClick(),s(!1),a(!1)},k=!d&&i.length>0,E=d?Jie:k?Zie:uM;return ee.jsx(qie,{children:ee.jsxs(E,{...jn.presets.messageEntrance,$isHuman:f,onMouseEnter:_,onMouseLeave:b,children:[m&&ee.jsx(Lie,{$isHuman:f,$userColor:y,children:m}),"replyTo"in t&&t.replyTo&&ee.jsx(Pre,{replyToMessage:t.replyTo,isHumanMessage:f}),d?t.content||"":!f&&!e?ee.jsx(dte,{remarkPlugins:[Tie],children:t.content||""}):t.content||"",!e&&"attachments"in t&&t.attachments&&t.attachments.length>0&&(t.type==="assistant"&&t.attachments.some(I=>I.name==="generated-image.png"||I.name.startsWith("generated-image"))?ee.jsx(ere,{attachments:t.attachments}):ee.jsx(Qie,{attachments:t.attachments})),k&&ee.jsxs(Yie,{ref:l,$isVisible:o||r,children:[ee.jsx(pre,{onClick:w,className:"message-actions",isOnUserBubble:f}),ee.jsx(Tc,{children:r&&ee.jsx(_re,{actions:i.map(I=>({...I,onClick:()=>M(I)})),onClose:v})})]})]})})},Qie=({attachments:t})=>ee.jsx(Iie,{children:t.map((e,n)=>{const i=n5(e.type);return ee.jsxs(Die,{$isImage:i,children:[i&&e.url&&ee.jsx(zie,{src:e.url,alt:e.name,onError:r=>{r.currentTarget.style.display="none"}}),ee.jsxs(Fie,{children:[ee.jsx(Nie,{children:e.name}),ee.jsx(Oie,{children:AZ(e.size)})]})]},n)})}),ere=({attachments:t})=>ee.jsx("div",{style:{margin:"12px 0",padding:0},children:t.map((e,n)=>e.url?ee.jsx("img",{src:e.url,alt:"AI generated image",style:{borderRadius:"12px",maxWidth:"100%",height:"auto",display:"block",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},onError:i=>{i.currentTarget.style.display="none"}},n):null)}),tre=({selectedFiles:t,onRemoveFile:e})=>t.length===0?null:ee.jsx(Hie,{children:t.map((n,i)=>ee.jsxs(Wie,{children:[ee.jsx($ie,{children:n5(n.type)?ee.jsx(jie,{src:URL.createObjectURL(n),alt:n.name}):ee.jsx(i9,{size:14})}),ee.jsx(Gie,{children:n.name}),ee.jsx(Pc,{variant:"ghost",size:"sm",onClick:()=>e(i),asMotion:!0,style:{width:"24px",height:"24px",borderRadius:"6px",padding:0,minHeight:"auto"},children:ee.jsx(gI,{size:14})})]},`${n.name}-${i}`))}),nre=ke.div`
  position: absolute;
  left: 12px;
  top: 50%;
  transform: translateY(-50%);
  width: 24px;
  height: 24px;
  z-index: 2;
  
  /* Override any transforms from the Button component */
  button {
    width: 100%;
    height: 100%;
    border-radius: ${({theme:t})=>t.semanticRadii.button.small} !important;
    padding: 0 !important;
    min-height: auto !important;
    
    &:hover:not(:disabled),
    &:active:not(:disabled) {
      transform: none !important;
    }
  }
`,ire=ke.div`
  button {
    width: 40px;
    height: 40px;
    border-radius: ${({theme:t})=>t.radii.sm} !important; /* Use 4px radii.sm token directly */
    padding: 0 !important;
    min-height: auto !important;
    border: none !important; /* Remove any border/outline */
    outline: none !important;
  }
`,cz=({inputValue:t,selectedFiles:e,onInputChange:n,onKeyDown:i,onFileSelect:r,onRemoveFile:s,onSendMessage:o,shouldFocusInput:a,setShouldFocusInput:l,placeholder:u="Go ahead...",replyToMessage:f,onCancelReply:d})=>{const p=H.useRef(null),m=H.useRef(null),g=H.useCallback(()=>{p.current&&LZ(p.current)},[]);H.useEffect(()=>{g()},[t,g]),H.useEffect(()=>{a&&p.current&&(p.current.focus(),l(!1))},[a,l]);const y=H.useCallback(()=>{var v;(v=m.current)==null||v.click()},[]),w=t.trim()||e.length>0;return ee.jsxs(Bie,{children:[f&&d&&ee.jsx(Ere,{message:f,onRemove:d}),ee.jsx(tre,{selectedFiles:e,onRemoveFile:s}),ee.jsxs(Uie,{children:[ee.jsx(nre,{children:ee.jsx(Pc,{variant:"ghost",size:"sm",onClick:y,asMotion:!0,children:ee.jsx(pI,{size:14})})}),ee.jsx("input",{ref:m,type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx,.txt",style:{display:"none"},onChange:r}),ee.jsx(Vie,{ref:p,value:t,onChange:n,onKeyDown:i,placeholder:u,rows:1}),ee.jsx(ire,{children:ee.jsx(Pc,{variant:"primary",size:"sm",disabled:!w,onClick:o,asMotion:!0,children:ee.jsx(xZ,{size:16})})})]})]})},fz=B0`
  0%, 100% { opacity: 0.6; }
  50% { opacity: 1; }
`,rre=B0`
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
`;ke.div`
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  margin: 8px 0;
`;ke.div`
  width: 20px;
  height: 20px;
  border: 2px solid rgba(255, 255, 255, 0.2);
  border-top: 2px solid #007AFF;
  border-radius: 50%;
  animation: ${rre} 1s linear infinite;
`;ke.div`
  color: rgba(255, 255, 255, 0.8);
  font-size: 14px;
  font-weight: 500;
  animation: ${fz} 2s ease-in-out infinite;
`;ke.span`
  &::after {
    content: '';
    animation: ${fz} 1.5s ease-in-out infinite;
  }
  
  @keyframes dots {
    0%, 20% { content: ''; }
    40% { content: '.'; }
    60% { content: '..'; }
    80%, 100% { content: '...'; }
  }
  
  &::after {
    animation: dots 2s linear infinite;
  }
`;const sre=ke.div`
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  background: ${t=>t.$isDark?"rgba(99, 102, 241, 0.15)":"rgba(79, 70, 229, 0.1)"};
  color: ${t=>t.$isDark?"#a5b4fc":"#4338ca"};
  border-radius: 16px;
  font-size: 12px;
  font-weight: 500;
  border: 1px solid ${t=>t.$isDark?"rgba(99, 102, 241, 0.2)":"rgba(79, 70, 229, 0.2)"};
  
  /* Make it floating and sticky */
  position: sticky;
  top: 0px;
  margin: 8px 16px 0 0px;
  backdrop-filter: blur(12px);
  z-index: 10;
  width: fit-content;
  align-self: flex-start;
`,dz=({messages:t,isAiTyping:e=!1,connectionStatus:n,userCount:i,users:r,currentUser:s,onReplyToMessage:o,getMessageActions:a})=>{const l=H.useRef(null),u=H.useRef(null),f=i!==void 0||r!==void 0;H.useEffect(()=>{t.length>0&&l.current&&PZ(l.current)},[t]);const d=p=>{const m=[];return m.push({id:"copy",label:"Copy",icon:({size:g=14})=>ee.jsx("span",{style:{fontSize:`${g}px`},children:""}),onClick:()=>{p.content&&navigator.clipboard.writeText(p.content).then(()=>{console.log("Message copied to clipboard")}).catch(g=>{console.error("Failed to copy message:",g)})}}),o&&m.push({id:"reply",label:"Reply",icon:({size:g=14})=>ee.jsx("span",{style:{fontSize:`${g}px`},children:""}),onClick:()=>o(p)}),m};return ee.jsxs(kie,{ref:l,style:f?{paddingBottom:"70px"}:{},children:[f&&i!==void 0&&i>0&&ee.jsxs(sre,{$isDark:window.matchMedia("(prefers-color-scheme: dark)").matches,children:[ee.jsx(Wb,{}),i," user",i!==1?"s":""," online"]}),t.length===0?ee.jsxs(Cie,{children:[ee.jsx(Aie,{children:f?"Group Chat":"Chat with Andrei"}),ee.jsx(Pie,{children:f?"Welcome to the group chat! Start chatting with other users.":"Start a conversation with Andrei's AI clone. Ask questions, get advice, or just have a friendly chat."}),n!=="connected"&&ee.jsxs("div",{style:{marginTop:"8px",fontSize:"12px",opacity:.7},children:["Status: ",n==="connecting"?"Connecting...":n==="error"?"Connection error":"Disconnected"]})]}):ee.jsxs(ee.Fragment,{children:[ee.jsx(Tc,{children:t.filter(p=>p&&p.id).map(p=>ee.jsx(Kie,{message:p,isGroupChat:f,currentUser:s,actions:a?a(p):d(p)},p.id))}),!f&&ee.jsx(Rie,{$isTyping:e,children:"Andrei is typing..."})]}),ee.jsx("div",{ref:u})]})},ore=ke.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  padding: 2rem;
  background: ${t=>t.$isDark?"rgba(26, 26, 26, 0.98)":"rgba(255, 255, 255, 0.98)"};
`,are=ke(Ei.div)`
  font-size: 4rem;
  color: ${t=>t.$isDark?"#6366f1":"#4f46e5"};
  margin-bottom: 1.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
`,lre=ke(Ei.h1)`
  font-size: 1.75rem;
  font-weight: 600;
  color: ${t=>t.$isDark?"#f3f4f6":"#111827"};
  margin: 0 0 0.5rem 0;
  text-align: center;
`,ure=ke(Ei.p)`
  font-size: 1rem;
  color: ${t=>t.$isDark?"#9ca3af":"#6b7280"};
  margin: 0 0 2rem 0;
  text-align: center;
  max-width: 400px;
  line-height: 1.5;
`,cre=ke(Ei.form)`
  display: flex;
  flex-direction: column;
  width: 100%;
  max-width: 300px;
  gap: 1rem;
`,fre=ke.input`
  padding: 0.875rem 1rem;
  border: 2px solid ${t=>t.$isDark?"rgba(75, 85, 99, 0.4)":"rgba(209, 213, 219, 0.8)"};
  border-radius: 12px;
  background: ${t=>t.$isDark?"rgba(17, 24, 39, 0.4)":"rgba(255, 255, 255, 0.8)"};
  color: ${t=>t.$isDark?"#f3f4f6":"#111827"};
  font-size: 1rem;
  transition: all 0.2s ease;
  
  &:focus {
    outline: none;
    border-color: ${t=>t.$isDark?"#6366f1":"#4f46e5"};
    box-shadow: 0 0 0 3px ${t=>t.$isDark?"rgba(99, 102, 241, 0.1)":"rgba(79, 70, 229, 0.1)"};
  }
  
  &::placeholder {
    color: ${t=>t.$isDark?"#6b7280":"#9ca3af"};
  }
`,w1=ke(Ei.div)`
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.875rem 1rem;
  border-radius: 8px;
  font-size: 0.875rem;
  margin-top: 1rem;
  
  background: ${t=>t.$type==="error"?t.$isDark?"rgba(239, 68, 68, 0.1)":"rgba(254, 226, 226, 0.8)":t.$type==="warning"?t.$isDark?"rgba(245, 158, 11, 0.1)":"rgba(254, 243, 199, 0.8)":t.$isDark?"rgba(59, 130, 246, 0.1)":"rgba(219, 234, 254, 0.8)"};
  
  color: ${t=>t.$type==="error"?t.$isDark?"#fca5a5":"#dc2626":t.$type==="warning"?t.$isDark?"#fbbf24":"#d97706":t.$isDark?"#93c5fd":"#2563eb"};
  
  border: 1px solid ${t=>t.$type==="error"?t.$isDark?"rgba(239, 68, 68, 0.2)":"rgba(239, 68, 68, 0.3)":t.$type==="warning"?t.$isDark?"rgba(245, 158, 11, 0.2)":"rgba(245, 158, 11, 0.3)":t.$isDark?"rgba(59, 130, 246, 0.2)":"rgba(59, 130, 246, 0.3)"};
`,dre=({onSubmit:t,status:e,isConnected:n})=>{const[i,r]=H.useState(""),s=H.useRef(null),o=i5();H.useEffect(()=>{var f;(f=s.current)==null||f.focus()},[]);const a=f=>{f.preventDefault();const d=i.trim();d&&e!=="joining"&&t(d)},l=()=>n?e==="joining"?ee.jsxs(w1,{$isDark:o,$type:"info",...jn.presets.statusMessage,children:[ee.jsx(Wb,{}),"Joining chat room..."]}):e==="full"?ee.jsxs(w1,{$isDark:o,$type:"error",...jn.presets.statusMessage,children:[ee.jsx(sC,{}),"Chat is full for now, sorry! (20 users max)"]}):null:ee.jsxs(w1,{$isDark:o,$type:"warning",...jn.presets.statusMessage,children:[ee.jsx(sC,{}),"Chat server not available - Backend not implemented yet"]}),u=!i.trim()||e==="joining";return ee.jsxs(ore,{$isDark:o,children:[ee.jsx(are,{$isDark:o,...jn.presets.scaleIn,transition:{...jn.presets.scaleIn.transition,delay:.1},children:ee.jsx(QD,{})}),ee.jsx(lre,{$isDark:o,...jn.presets.staggered,transition:{...jn.presets.staggered.transition,delay:.2},children:"Chat with Friends"}),ee.jsx(ure,{$isDark:o,...jn.presets.staggered,transition:{...jn.presets.staggered.transition,delay:.3},children:"Join the group chat and connect with up to 20 friends in real-time"}),ee.jsxs(cre,{onSubmit:a,...jn.presets.staggered,transition:{...jn.presets.staggered.transition,delay:.4},children:[ee.jsx(fre,{ref:s,type:"text",placeholder:"Enter your nickname...",value:i,onChange:f=>r(f.target.value),maxLength:20,$isDark:o,disabled:e==="joining"}),ee.jsx(Pc,{type:"submit",variant:"primary",size:"md",disabled:u,loading:e==="joining",asMotion:!0,children:"Join Chat"})]}),l()]})},hre=ke.button`
  width: 24px;
  height: 24px;
  border-radius: ${({theme:t})=>t.semanticRadii.button.small};
  padding: 0;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: ${({theme:t})=>t.fontFamily.sans.join(", ")};
  
  /* Always visible when bubble is hovered - adapt colors based on bubble type */
  background: ${({theme:t,$isOnUserBubble:e})=>e?t.palette.chat.messageActions.userBackground:t.palette.chat.messageActions.assistantBackground};
  color: ${({theme:t,$isOnUserBubble:e})=>e?t.palette.chat.messageActions.userText:t.palette.chat.messageActions.assistantText};
  
  /* Subtle hover state for additional feedback */
  &:hover {
    background: ${({theme:t,$isOnUserBubble:e})=>e?t.palette.chat.messageActions.userBackgroundHover:t.palette.chat.messageActions.assistantBackgroundHover};
    transform: scale(1.05);
  }
  
  /* Active state */
  &:active {
    transform: scale(0.95);
  }
  
  /* Smooth transitions */
  transition: all ${({theme:t})=>t.motion.duration.fast}ms ${({theme:t})=>t.motion.easing.easeOut.join(", ")};
  
  /* Focus ring for accessibility */
  &:focus-visible {
    box-shadow: ${({theme:t})=>t.createFocusRing(t.palette.interactive.focus.ring)};
    outline: none;
  }
`,pre=({onClick:t,className:e,isOnUserBubble:n=!1})=>ee.jsx(hre,{onClick:t,className:e,$isOnUserBubble:n,"aria-label":"Message actions",children:ee.jsx(t9,{size:14})}),mre=ke(Ei.div)`
  position: relative;
  width: 100%;
  background: transparent;
  border: none;
  padding: ${t=>t.theme.semanticSpacing.interactive.dropdownItemPadding};
  text-align: left;
  color: ${t=>t.theme.palette.text.primary};
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: ${t=>t.theme.fontSize.sm};
  border-radius: ${t=>t.theme.semanticRadii.dropdown.item};
  transition: background-color 0.15s ease;

  &:hover {
    background: ${t=>t.theme.palette.interactive.button.ghost.backgroundHover};
  }
`,gre=ke.div`
  display: flex;
  align-items: center;
  gap: 4px;
  flex: 1;
`,yre=ke.span`
  display: flex;
  align-items: center;
  color: ${()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"#b0b0b0":"#666"};
`,xre=ke.span`
  font-size: 12px;
  opacity: 0.6;
`,rA=({item:t,onHover:e,children:n})=>{const i=t.submenu&&t.submenu.length>0,r=a=>{a.stopPropagation(),!i&&t.onClick&&t.onClick()},s=()=>{i&&e&&e(t.id)},o=()=>{i&&e&&e(null)};return ee.jsxs(mre,{$hasSubmenu:i,onClick:r,onMouseEnter:s,onMouseLeave:o,...jn.presets.itemHover,children:[ee.jsxs(gre,{children:[t.icon&&ee.jsx(yre,{children:ee.jsx(t.icon,{size:14})}),t.label]}),i&&ee.jsx(xre,{children:""}),n]})},vre=ke(Ei.div)`
  position: absolute;
  ${t=>t.$position.top!==void 0?`top: ${t.$position.top}px;`:""}
  ${t=>t.$position.bottom!==void 0?`bottom: ${t.$position.bottom}px;`:""}
  ${t=>t.$position.left!==void 0?`left: ${t.$position.left}px;`:""}
  ${t=>t.$position.right!==void 0?`right: ${t.$position.right}px;`:""}
  transform-origin: ${t=>t.$position.transformOrigin};
  background: ${t=>t.theme.palette.background.elevated};
  backdrop-filter: blur(20px);
  border: 1px solid ${t=>t.theme.palette.border.default};
  border-radius: ${t=>t.theme.semanticRadii.dropdown.base};
  box-shadow: ${t=>t.theme.semanticShadows.dropdown.floating};
  min-width: 180px;
  z-index: 11000;
  overflow: visible;
  padding: ${t=>t.theme.semanticSpacing.interactive.dropdownPadding};
`,wre=ke(Ei.div)`
  position: absolute;
  top: -5px;
  left: 100%;
  background: ${t=>t.theme.palette.background.elevated};
  border: 1px solid ${t=>t.theme.palette.border.default};
  border-radius: ${t=>t.theme.semanticRadii.menu.base};
  box-shadow: ${t=>t.theme.semanticShadows.dropdown.floating};
  min-width: 160px;
  z-index: 11001;
  overflow: hidden;
  padding: ${t=>t.theme.semanticSpacing.interactive.dropdownPadding};
`,cM=({items:t,onClose:e,enableSmartPositioning:n=!1})=>{const[i,r]=H.useState(null),[s,o]=H.useState({top:33,left:0,transformOrigin:"top left"}),a=H.useRef(null);H.useEffect(()=>{if(!n||!a.current)return;const d=(()=>{const m=a.current.offsetParent;if(!m)return s;const y=(m.closest("[data-window-content]")||document.documentElement).getBoundingClientRect(),w=m.getBoundingClientRect(),v=180,_=t.length*40+8,b=y.bottom-w.bottom,M=w.top-y.top,k=y.right-w.left,E=w.right-y.left,I=b<_&&M>b,C=k<v&&E>k,L={transformOrigin:""};return I?(L.bottom=26,L.transformOrigin+="bottom"):(L.top=26,L.transformOrigin+="top"),C?(L.right=0,L.transformOrigin+=" right"):(L.left=0,L.transformOrigin+=" left"),L})();o(d)},[t.length,n]);const l=f=>{!f.submenu&&f.onClick&&(f.onClick(),e==null||e())},u=f=>f.map(d=>ee.jsx(Ei.div,{...jn.presets.submenuSlide,children:ee.jsx(rA,{item:{...d,onClick:()=>l(d)}})},d.id));return ee.jsx(vre,{ref:a,$position:s,...jn.presets.dropdownEntrance,children:t.map(f=>ee.jsx(Ei.div,{...jn.presets.dropdownItem,children:ee.jsx(rA,{item:f,onHover:r,children:ee.jsx(Tc,{children:f.submenu&&i===f.id&&ee.jsx(wre,{...jn.presets.submenuSlide,children:u(f.submenu)})})})},f.id))})},_re=({actions:t,onClose:e})=>{const n=t.map(i=>({id:i.id,label:i.label,icon:i.icon,onClick:i.onClick}));return ee.jsx(cM,{items:n,onClose:e,enableSmartPositioning:!0})},Sre=ke.div`
  display: flex;
  gap: 8px;
  margin-bottom: 8px;
  padding: 0px 12px;
`,bre=ke.div`
  display: flex;
  align-items: center;
  gap: 6px;
  background: ${()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"rgba(59, 130, 246, 0.15)":"rgba(59, 130, 246, 0.08)"};
  border: 1px solid ${()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"rgba(59, 130, 246, 0.25)":"rgba(59, 130, 246, 0.2)"};
  border-radius: 20px;
  padding: 4px 6px 4px 12px;
  font-size: 12px;
  font-weight: 550;
  color: ${()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"rgba(147, 197, 253, 0.9)":"rgba(37, 99, 235, 0.9)"};
  max-width: 300px;
  transition: all 0.2s ease;
`,Mre=ke.div`
  width: 24px;
  height: 24px;
  border-radius: 6px;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  background: ${()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"rgba(59, 130, 246, 0.2)":"rgba(59, 130, 246, 0.1)"};
  flex-shrink: 0;
  color: ${()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"rgba(147, 197, 253, 0.8)":"rgba(37, 99, 235, 0.7)"};
`,Tre=ke.div`
  flex: 1;
  min-width: 0;
  
  .reply-to {
    font-size: 10px;
    font-weight: 600;
    opacity: 0.8;
    margin-bottom: 2px;
    color: ${()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"rgba(147, 197, 253, 0.7)":"rgba(37, 99, 235, 0.7)"};
  }
  
  .reply-message {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    line-height: 1.2;
  }
`,Ere=({message:t,onRemove:e})=>{const i=(()=>t.type==="user"&&"sender"in t?t.sender||"Unknown User":t.type==="system"?"System":t.type!=="human"?"Andrei":"You")(),r=t.content||"",s=r.length>80?r.slice(0,80)+"...":r;return ee.jsx(Sre,{children:ee.jsxs(bre,{children:[ee.jsx(Mre,{children:ee.jsx(mI,{size:14})}),ee.jsxs(Tre,{children:[ee.jsxs("div",{className:"reply-to",children:["Replying to ",i]}),ee.jsx("div",{className:"reply-message",children:s})]}),ee.jsx(Pc,{variant:"ghost",size:"sm",onClick:e,asMotion:!0,style:{width:"24px",height:"24px",borderRadius:"6px",padding:0,minHeight:"auto"},children:ee.jsx(gI,{size:14})})]})})},kre=ke.div`
  background: ${t=>t.$isHumanMessage?t.theme.palette.chat.reply.userBackground:t.theme.palette.chat.reply.assistantBackground};
  border-left: 3px solid ${t=>t.$isHumanMessage?t.theme.palette.chat.reply.userBorder:t.theme.palette.chat.reply.assistantBorder};
  border-radius: ${({theme:t})=>t.semanticRadii.chat.bubble.tail};
  padding: ${({theme:t})=>`${t.spacing[2]} ${t.spacing[3]}`}; /* 8px 12px */
  margin-bottom: ${({theme:t})=>t.spacing[2]}; /* 8px */
`,Cre=ke.div`
  font-size: ${({theme:t})=>t.fontSize.xs};
  font-weight: ${({theme:t})=>t.fontWeight.semibold};
  color: ${t=>t.$userColor?t.$userColor:t.$isHumanMessage?t.theme.palette.chat.reply.userSender:t.theme.palette.chat.reply.assistantSender};
  margin-bottom: ${({theme:t})=>t.spacing[1]}; /* 4px */
`,Are=ke.div`
  font-size: ${({theme:t})=>t.fontSize.xs};
  font-weight: ${({theme:t})=>t.fontWeight.normal};
  line-height: ${({theme:t})=>t.lineHeight.snug};
  color: ${t=>t.$isHumanMessage?t.theme.palette.chat.reply.userText:t.theme.palette.chat.reply.assistantText};
  word-wrap: break-word;
  overflow-wrap: break-word;
  
  /* Limit to 3 lines max */
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
`,Pre=({replyToMessage:t,isHumanMessage:e=!1})=>{const i=(()=>t.type==="user"&&"sender"in t?t.sender||"Unknown User":t.type==="system"?"System":t.type!=="human"?"Andrei":"You")(),r=t.content||"",o=(()=>{if(!e&&t.type==="user"&&"sender"in t&&t.sender)return uz(t.sender)})();return ee.jsxs(kre,{$isHumanMessage:e,children:[ee.jsx(Cre,{$isHumanMessage:e,$userColor:o,children:i}),ee.jsx(Are,{$isHumanMessage:e,children:r})]})},Lre=({windowId:t})=>{var k;const{getWindow:e,updateWindowData:n}=Eh(),{setChatBackgroundImage:i}=e5(),r=e(t),[s,o]=H.useState(""),{messages:a,isAiTyping:l,selectedFiles:u,handleFileSelect:f,removeFile:d,connectionStatus:p,handleSendMessage:m,shouldFocusInput:g,setShouldFocusInput:y,updateMessages:w}=DZ({websocketUrl:"ws://localhost:8000/ws",onMessagesUpdate:E=>{n(t,{messages:E})}});H.useEffect(()=>{var I;const E=(I=r==null?void 0:r.data)==null?void 0:I.messages;E&&w(E)},[(k=r==null?void 0:r.data)==null?void 0:k.messages,w]);const v=E=>{o(E.target.value)},_=E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),b())},b=async()=>{const E=s.trim();!E&&u.length===0||(o(""),await m(E))},M=E=>{const I=[];return I.push({id:"copy",label:"Copy",icon:hI,onClick:()=>{E.content&&navigator.clipboard.writeText(E.content).then(()=>{console.log("Message copied to clipboard")}).catch(C=>{console.error("Failed to copy message:",C)})}}),(E.type==="assistant"||E.type==="ai")&&"attachments"in E&&E.attachments&&E.attachments.length>0&&E.attachments.some(L=>{var R;return L.name==="generated-image.png"||L.name.startsWith("generated-image")||L.type.startsWith("image/")&&((R=L.url)==null?void 0:R.startsWith("data:image"))})&&I.push({id:"set-background",label:"Set as Chat with Friends background",icon:n9,onClick:()=>{var R;const L=(R=E.attachments)==null?void 0:R.find(O=>{var q;return O.name==="generated-image.png"||O.name.startsWith("generated-image")||O.type.startsWith("image/")&&((q=O.url)==null?void 0:q.startsWith("data:image"))});L!=null&&L.url&&(i(L.url),console.log(" Set chat background image"))}}),(E.type==="assistant"||E.type==="ai")&&I.push({id:"regenerate",label:"Regenerate",icon:r9,onClick:()=>{console.log("Regenerating AI response...")}}),I};return ee.jsxs(Eie,{children:[ee.jsx(dz,{messages:a,isAiTyping:l,connectionStatus:p,getMessageActions:M}),ee.jsx(cz,{inputValue:s,selectedFiles:u,onInputChange:v,onKeyDown:_,onFileSelect:f,onRemoveFile:d,onSendMessage:b,shouldFocusInput:g,setShouldFocusInput:y})]})},Rre=({windowId:t})=>{var F;const{getWindow:e,updateWindowData:n}=Eh(),{chatBackgroundImage:i,setChatBackgroundImage:r}=e5(),s=e(t),[o,a]=H.useState(""),[l,u]=H.useState(""),[f,d]=H.useState(!1),[p,m]=H.useState("idle"),[g,y]=H.useState(null),{messages:w,isConnected:v,connectionStatus:_,userCount:b,users:M,currentUser:k,joinRoom:E,sendGroupMessage:I,shouldFocusInput:C,setShouldFocusInput:L,updateMessages:R}=zZ({websocketUrl:"ws://localhost:8000/ws/group-chat",onMessagesUpdate:A=>{n(t,{messages:A})},onRoomStatusChange:A=>{console.log(" Room status changed to:",A),m(A),A==="joined"?(console.log(" Successfully joined room, enabling message sending"),d(!0)):A==="idle"&&(console.log(" Room status reset to idle, disabling message sending"),d(!1))}});H.useEffect(()=>{console.log(" Current ChatWithFriends state:",{hasJoinedRoom:f,roomStatus:p,isConnected:v,connectionStatus:_,currentUser:(k==null?void 0:k.nickname)||"none",userCount:b,nickname:l})},[f,p,v,_,k,b,l]),H.useEffect(()=>{var X;const A=(X=s==null?void 0:s.data)==null?void 0:X.messages;A&&R(A)},[(F=s==null?void 0:s.data)==null?void 0:F.messages,R]),H.useEffect(()=>()=>{console.log(" Component cleanup - skipping leaveRoom() to avoid hot reload issues")},[]);const O=async A=>{u(A),m("joining"),console.log(" Attempting to join room with nickname:",A);try{await E(A),console.log(" Join room request sent successfully")}catch(X){console.error(" Failed to join room:",X),m("idle")}},q=A=>{a(A.target.value)},j=A=>{A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),G())},G=async()=>{const A=o.trim();if(!A||!f){console.log(" Cannot send message:",{hasContent:!!A,hasJoinedRoom:f,isConnected:v,connectionStatus:_,currentUser:k});return}console.log(" Attempting to send message:",{content:A,hasJoinedRoom:f,isConnected:v,connectionStatus:_,currentUser:k}),a("");const X=g;y(null),await I(A,X||void 0)},W=A=>{y(A),L(!0)},J=()=>{y(null)},re=A=>{const X=[];return X.push({id:"copy",label:"Copy",icon:hI,onClick:()=>{A.content&&navigator.clipboard.writeText(A.content).then(()=>{console.log("Message copied to clipboard")}).catch(Y=>{console.error("Failed to copy message:",Y)})}}),A.type!=="system"&&X.push({id:"reply",label:"Reply",icon:mI,onClick:()=>W(A)}),X},D=A=>{var Ce;if(!i)return;A.preventDefault();const X=(Ce=globalThis.window)==null?void 0:Ce.matchMedia("(prefers-color-scheme: dark)").matches,Y=document.createElement("div");Y.style.position="fixed",Y.style.left=`${A.clientX}px`,Y.style.top=`${A.clientY}px`,Y.style.backgroundColor=X?"#2a2a2a":"#ffffff",Y.style.border=X?"1px solid #444":"1px solid #ccc",Y.style.borderRadius="8px",Y.style.padding="8px 0",Y.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)",Y.style.zIndex="9999",Y.style.minWidth="160px",Y.style.fontFamily="system-ui, -apple-system, sans-serif",Y.style.fontSize="14px";const z=document.createElement("div");z.textContent=" Clear background",z.style.padding="8px 16px",z.style.cursor="pointer",z.style.color=X?"#e0e0e0":"#333",z.style.transition="background-color 0.1s",z.addEventListener("mouseover",()=>{z.style.backgroundColor=X?"#3a3a3a":"#f5f5f5"}),z.addEventListener("mouseout",()=>{z.style.backgroundColor="transparent"}),z.addEventListener("click",()=>{r(null),console.log(" Cleared chat background"),document.body.removeChild(Y)}),Y.appendChild(z),document.body.appendChild(Y);const xe=ie=>{Y.contains(ie.target)||(document.body.contains(Y)&&document.body.removeChild(Y),document.removeEventListener("click",xe))};setTimeout(()=>{document.addEventListener("click",xe)},0)};return f?ee.jsxs(nA,{$backgroundImage:i,onContextMenu:D,children:[ee.jsx(dz,{messages:w,isAiTyping:!1,connectionStatus:_,userCount:b,users:M,currentUser:k,onReplyToMessage:W,getMessageActions:re}),ee.jsx(cz,{inputValue:o,selectedFiles:[],onInputChange:q,onKeyDown:j,onFileSelect:()=>{},onRemoveFile:()=>{},onSendMessage:G,shouldFocusInput:C,setShouldFocusInput:L,placeholder:`Message as ${l}...`,replyToMessage:g,onCancelReply:J})]}):ee.jsx(nA,{$backgroundImage:i,onContextMenu:D,children:ee.jsx(dre,{onSubmit:O,status:p,isConnected:v})})},F_={notes:{id:"notes",name:"Dark Notes",icon:vZ,component:EZ,defaultTitle:"Dark Notes",defaultSize:{width:500,height:600},isDark:!0,forceTheme:!0},chat:{id:"chat",name:"Andrei Chat",icon:QD,component:Lre,defaultTitle:"Chat with Andrei",defaultSize:{width:600,height:700},isDark:!1,forceTheme:!1},groupchat:{id:"groupchat",name:"Chat with Friends",icon:Wb,component:Rre,defaultTitle:"Chat with Friends",defaultSize:{width:650,height:750},minSize:{width:350,height:500},maxSize:{width:850,height:1e3},isDark:!1,forceTheme:!1}},Ire=(t,e)=>{const n=F_[t];if(!n)return ee.jsxs("div",{children:["Unknown app type: ",t]});const i=n.component;return ee.jsx(i,{windowId:e})},Dre=({label:t,isOpen:e,onClick:n})=>ee.jsx(Hb,{isOpen:e,onClick:n,asMotion:!0,children:t}),zre=ke.div`
  position: relative;
  display: flex;
  align-items: center;
`,Fre=({label:t,items:e,isOpen:n,onToggle:i,onClose:r,onHover:s,hasOpenSibling:o,textColor:a})=>{const l=f=>{f.stopPropagation(),i()},u=()=>{o&&s&&s()};return ee.jsxs(zre,{onMouseEnter:u,children:[ee.jsx(Dre,{label:t,isOpen:n,onClick:l,textColor:a}),ee.jsx(Tc,{children:n&&ee.jsx(cM,{items:e,onClose:r})})]})},Nre=ke.video`
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  object-fit: cover;
  z-index: -2;
  pointer-events: none;
`,Ore=ke.div`
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: -1;
  pointer-events: none;
  backdrop-filter: blur(${t=>t.$blur||0}px);
  background-color: ${t=>t.$backgroundColor||"rgba(0, 0, 0, 0)"};
  opacity: ${t=>t.$opacity!==void 0?t.$opacity:1};
  transition: all 0.3s ease;
`,Bre=ke.div`
  width: 100vw;
  height: 100vh;
  position: relative;
  overflow: hidden;
`,Ure=ke.header`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: ${la}px;
  background: ${t=>t.theme.windowColors.headerBackground};
  backdrop-filter: blur(20px);
  border-bottom: 1px solid ${t=>t.theme.windowColors.headerBorder};
  display: flex;
  align-items: center;
  padding: 0 ${t=>t.theme.spacing[1]};
  z-index: 10000;
  transition: background 200ms ease-out;
  /* Use transform3d to trigger GPU acceleration */
  transform: translate3d(0, 0, 0);
`,Vre=ke.div`
  display: flex;
  align-items: center;
  gap: 0px;
`,Hre=ke.div`
  position: relative;
  display: flex;
  align-items: center;
`,Wre=ke.div`
  display: flex;
  gap: 0;
  align-items: center;
`,Gre=ke.div`
  position: absolute;
  top: ${la}px;
  left: 0;
  right: 0;
  bottom: 0;
`,$re=()=>{const{windows:t,openWindow:e}=Eh(),[n,i]=H.useState(null),[r,s]=H.useState(!1),o=i5(),{themeMode:a,setThemeMode:l,getAvailableThemes:u}=pY(),f=H.useMemo(()=>{const W=t.find(J=>J.isMaximized&&!J.isMinimized);return W?{id:W.id,appType:W.appType}:null},[t.filter(W=>W.isMaximized||W.isMinimized).map(W=>`${W.id}:${W.isMaximized}:${W.isMinimized}:${W.appType}`).join()]),d=H.useMemo(()=>W=>{const J=W.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);if(J){const[,re,D,F]=J.map(Number);return(.299*re+.587*D+.114*F)/255>.5}return!1},[]),{headerBackgroundColor:p,headerTextColor:m}=H.useMemo(()=>{if(!f)return{headerBackgroundColor:"rgba(44, 44, 44, 0.12)",headerTextColor:"white"};const W=F_[f.appType],D=((W!=null&&W.forceTheme?W.isDark:o)?fZ:cZ).background,F=d(D);return{headerBackgroundColor:D,headerTextColor:F?"#333":"white"}},[f,o,d]),g=(W,J)=>{console.log("handleOpenApp called with:",W,J);const re=F_[W];if(re){console.log("Opening window for app:",W);const D={defaultSize:re.defaultSize,minSize:re.minSize,maxSize:re.maxSize};e(W,J?`Note: ${J}`:re.defaultTitle,{noteId:J},D)}else console.log("No app config found for:",W);i(null)},y=W=>{i(n===W?null:W),s(!1)},w=W=>{(n!==null||r)&&(i(W),s(!1))},v=()=>{i(null),s(!1)},_=W=>{W.stopPropagation(),console.log("Temporal Logo clicked!");const J=new Date().getHours(),re=J>=6&&J<10?"Morning Focus":J>=10&&J<16?"Peak Productivity":J>=16&&J<20?"Creative Flow":"Night Mode";console.log(`Current state: ${re} (${J}:00)`),s(!r),i(null)},b=()=>{s(!0),i(null)},M=t.filter(W=>!W.isMinimized),k=M.length>0,E=k?100:10,I=k?.9:.2,C=o?"rgba(11, 11, 11, 0.3)":"rgba(255, 255, 255, 0.25)",[L,R]=H.useState([]);H.useEffect(()=>{if(n==="apps"){const W=JSON.parse(localStorage.getItem("dark-notes-storage")||"{}"),J=Object.keys(W).map(re=>({id:re,title:W[re].title||"Untitled Note",lastModified:new Date(W[re].lastModified)})).sort((re,D)=>D.lastModified.getTime()-re.lastModified.getTime());R(J)}},[n]);const O=u(),q={system:"System",light:"Light",dark:"Dark","pink-light":"Pink Light","pink-dark":"Pink Dark",classic:"Classic","high-contrast":"High Contrast"},j=[{id:"clodius-os-version",label:"Clodius OS 0.1.0",onClick:()=>{console.log("Clodius OS version clicked")}},{id:"theme-divider",label:"",onClick:()=>{}},{id:"theme-section",label:"Themes",submenu:[...O.builtin.map(W=>({id:`theme-${W}`,label:`${q[W]||W}${a===W?" ":""}`,onClick:()=>{l(W),s(!1),console.log(`Switched to ${W} theme`)}})),...O.custom.map(W=>({id:`theme-${W}`,label:`${q[W]||W}${a===W?" ":""}`,onClick:()=>{l(W),s(!1),console.log(`Switched to ${W} theme`)}}))]}],G=[{id:"apps",label:"Apps",items:[{id:"dark-notes",label:"Dark Notes",submenu:[{id:"new-note",label:"New Note",icon:pI,onClick:()=>g("notes")},...L.map(W=>({id:W.id,label:W.title,onClick:()=>g("notes",W.id)}))]}]},{id:"works",label:"Works",items:[{id:"coming-soon-works",label:"Coming Soon...",onClick:()=>{}}]},{id:"chat",label:"Clodius Chat",items:[{id:"open-chat",label:"Chat with Andrei",onClick:()=>g("chat")},{id:"open-multi-chat",label:"Chat with Andrei's friends",onClick:()=>g("groupchat")}]}];return ee.jsxs(Bre,{onClick:v,children:[ee.jsx(Nre,{src:"/underwater.mov",autoPlay:!0,loop:!0,muted:!0,playsInline:!0}),ee.jsx(Ore,{$blur:E,$opacity:I,$backgroundColor:C}),ee.jsx(Ure,{$backgroundColor:p,children:ee.jsxs(Vre,{children:[ee.jsxs(Hre,{onMouseEnter:()=>{n!==null&&b()},onClick:W=>W.stopPropagation(),children:[ee.jsx(Hb,{isOpen:r,onClick:_,asMotion:!0,children:ee.jsx(ND,{size:28})}),ee.jsx(Tc,{children:r&&ee.jsx(cM,{items:j,onClose:v})})]}),ee.jsx(Wre,{children:G.map(W=>ee.jsx(Fre,{label:W.label,items:W.items,isOpen:n===W.id,onToggle:()=>y(W.id),onClose:v,onHover:()=>w(W.id),hasOpenSibling:n!==null&&n!==W.id||r,textColor:m},W.id))})]})}),ee.jsx(Gre,{children:ee.jsx(Tc,{children:M.map(W=>{const J=Math.max(...M.map(D=>D.zIndex)),re=W.zIndex===J;return ee.jsx(yZ,{window:W,isActive:re,children:Ire(W.appType,W.id)},W.id)})})})]})};function jre(){return H.useEffect(()=>{S_(xY),S_(vY)},[]),ee.jsx(yY,{defaultMode:"system",children:ee.jsx($re,{})})}_1.createRoot(document.getElementById("root")).render(ee.jsx(En.StrictMode,{children:ee.jsx(jre,{})}));
